/*! For license information please see main.c9c2e89a.js.LICENSE.txt */
(()=>{var e={400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",s="second",a="minute",i="hour",l="day",o="week",c="month",d="quarter",u="year",m="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},g=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},b={s:g,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),s=r%60;return(t<=0?"+":"-")+g(n,2,"0")+":"+g(s,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),s=t.clone().add(n,c),a=r-s<0,i=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:o,d:l,D:m,h:i,m:a,s:s,ms:n,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",v={};v[y]=f;var j="$isDayjsObject",w=function(e){return e instanceof S||!(!e||!e[j])},N=function e(t,r,n){var s;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();v[a]&&(s=a),r&&(v[a]=r,s=a);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var l=t.name;v[l]=t,s=l}return!n&&s&&(y=s),s||!n&&y},k=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new S(r)},C=b;C.l=N,C.i=w,C.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function f(e){this.$L=N(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[j]=!0}var g=f.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(C.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var s=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return C},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(e,t){var r=k(e);return this.startOf(t)<=r&&r<=this.endOf(t)},g.isAfter=function(e,t){return k(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<k(e)},g.$g=function(e,t,r){return C.u(e)?this[t]:this.set(r,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var r=this,n=!!C.u(t)||t,d=C.p(e),p=function(e,t){var s=C.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?s:s.endOf(l)},h=function(e,t){return C.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},x=this.$W,f=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(d){case u:return n?p(1,0):p(31,11);case c:return n?p(1,f):p(0,f+1);case o:var y=this.$locale().weekStart||0,v=(x<y?x+7:x)-y;return p(n?g-v:g+(6-v),f);case l:case m:return h(b+"Hours",0);case i:return h(b+"Minutes",1);case a:return h(b+"Seconds",2);case s:return h(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var r,o=C.p(e),d="set"+(this.$u?"UTC":""),p=(r={},r[l]=d+"Date",r[m]=d+"Date",r[c]=d+"Month",r[u]=d+"FullYear",r[i]=d+"Hours",r[a]=d+"Minutes",r[s]=d+"Seconds",r[n]=d+"Milliseconds",r)[o],h=o===l?this.$D+(t-this.$W):t;if(o===c||o===u){var x=this.clone().set(m,1);x.$d[p](h),x.init(),this.$d=x.set(m,Math.min(this.$D,x.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[C.p(e)]()},g.add=function(n,d){var m,p=this;n=Number(n);var h=C.p(d),x=function(e){var t=k(p);return C.w(t.date(t.date()+Math.round(e*n)),p)};if(h===c)return this.set(c,this.$M+n);if(h===u)return this.set(u,this.$y+n);if(h===l)return x(1);if(h===o)return x(7);var f=(m={},m[a]=t,m[i]=r,m[s]=e,m)[h]||1,g=this.$d.getTime()+n*f;return C.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",s=C.z(this),a=this.$H,i=this.$m,l=this.$M,o=r.weekdays,c=r.months,d=r.meridiem,u=function(e,r,s,a){return e&&(e[r]||e(t,n))||s[r].slice(0,a)},m=function(e){return C.s(a%12||12,e,"0")},h=d||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(x,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return C.s(t.$y,4,"0");case"M":return l+1;case"MM":return C.s(l+1,2,"0");case"MMM":return u(r.monthsShort,l,c,3);case"MMMM":return u(c,l);case"D":return t.$D;case"DD":return C.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(r.weekdaysMin,t.$W,o,2);case"ddd":return u(r.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(a);case"HH":return C.s(a,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return h(a,i,!0);case"A":return h(a,i,!1);case"m":return String(i);case"mm":return C.s(i,2,"0");case"s":return String(t.$s);case"ss":return C.s(t.$s,2,"0");case"SSS":return C.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,m,p){var h,x=this,f=C.p(m),g=k(n),b=(g.utcOffset()-this.utcOffset())*t,y=this-g,v=function(){return C.m(x,g)};switch(f){case u:h=v()/12;break;case c:h=v();break;case d:h=v()/3;break;case o:h=(y-b)/6048e5;break;case l:h=(y-b)/864e5;break;case i:h=y/r;break;case a:h=y/t;break;case s:h=y/e;break;default:h=y}return p?h:C.a(h)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return v[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=N(e,t,!0);return n&&(r.$L=n),r},g.clone=function(){return C.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},f}(),_=S.prototype;return k.prototype=_,[["$ms",n],["$s",s],["$m",a],["$H",i],["$W",l],["$M",c],["$y",u],["$D",m]].forEach(function(e){_[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),k.extend=function(e,t){return e.$i||(e(t,S,k),e.$i=!0),k},k.locale=N,k.isDayjs=w,k.unix=function(e){return k(1e3*e)},k.en=v[y],k.Ls=v,k.p={},k}()},579:(e,t,r)=>{"use strict";e.exports=r(1153)},816:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(2284);function s(e){var t=function(e,t){if("object"!=(0,n.A)(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=(0,n.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,n.A)(t)?t:t+""}},1153:(e,t,r)=>{"use strict";var n=r(5043),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!o.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1210:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(8829)),a=n(r(5736)),i=r(5745);class l{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new s.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new l(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:s=!1,count:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=new URL("".concat(this.url,"/rpc/").concat(e));let o;n||s?(t=n?"HEAD":"GET",Object.entries(r).filter(e=>{let[t,r]=e;return void 0!==r}).map(e=>{let[t,r]=e;return[t,Array.isArray(r)?"{".concat(r.join(","),"}"):"".concat(r)]}).forEach(e=>{let[t,r]=e;l.searchParams.append(t,r)})):(t="POST",o=r);const c=Object.assign({},this.headers);return i&&(c.Prefer="count=".concat(i)),new a.default({method:t,url:l,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}t.default=l},2284:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{A:()=>n})},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},2730:(e,t,r)=>{"use strict";var n=r(5043),s=r(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function x(e,t,r,n,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,r,n){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?function(e){return!!u.call(h,e)||!u.call(p,e)&&(m.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),_=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var R,M=Object.assign;function z(e){if(void 0===R)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=n.stack.split("\n"),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||s[i]!==a[l]){var o="\n"+s[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Z(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){J(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&K(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function ae(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function xe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=xe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(pe).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ne=null,ke=null;function Ce(e){if(e=ys(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=js(t),we(e.stateNode,e.type,t))}}function Se(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Pe=!1;function Te(e,t,r){if(Pe)return e(t,r);Pe=!0;try{return Ee(e,t,r)}finally{Pe=!1,(null!==Ne||null!==ke)&&(Ie(),_e())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=js(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Ae=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Ae=!1}function Le(e,t,r,n,s,a,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var Re=!1,Me=null,ze=!1,Fe=null,Be={onError:function(e){Re=!0,Me=e}};function Ue(e,t,r,n,s,a,i,l,o){Re=!1,Me=null,Le.apply(Be,arguments)}function qe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(n=s.return)){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return We(s),e;if(i===n)return We(s),t;i=i.sibling}throw Error(a(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=i;break}if(o===n){l=!0,n=s,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=s;break}if(o===n){l=!0,n=i,r=s;break}o=o.sibling}if(!l)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var $e=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Ze=s.unstable_requestPaint,Je=s.unstable_now,Qe=s.unstable_getCurrentPriorityLevel,Xe=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,rt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var l=i&~s;0!==l?n=ut(l):0!==(a&=i)&&(n=ut(a))}else 0!==(i=r&~s)?n=ut(i):0!==a&&(n=ut(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-it(t)),n|=e[r],t&=~s;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function bt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var yt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,Nt,kt,Ct,St=!1,_t=[],Et=null,It=null,Pt=null,Tt=new Map,Dt=new Map,At=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=ys(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=bs(e.target);if(null!==t){var r=qe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void Ct(e.priority,function(){Nt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ys(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function Ft(e,t,r){zt(e)&&r.delete(t)}function Bt(){St=!1,null!==Et&&zt(Et)&&(Et=null),null!==It&&zt(It)&&(It=null),null!==Pt&&zt(Pt)&&(Pt=null),Tt.forEach(Ft),Dt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return Ut(t,e)}if(0<_t.length){Ut(_t[0],e);for(var r=1;r<_t.length;r++){var n=_t[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Ut(Et,e),null!==It&&Ut(It,e),null!==Pt&&Ut(Pt,e),Tt.forEach(t),Dt.forEach(t),r=0;r<At.length;r++)(n=At[r]).blockedOn===e&&(n.blockedOn=null);for(;0<At.length&&null===(r=At[0]).blockedOn;)Mt(r),null===r.blockedOn&&At.shift()}var Ht=v.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,r,n){var s=yt,a=Ht.transition;Ht.transition=null;try{yt=1,$t(e,t,r,n)}finally{yt=s,Ht.transition=a}}function Gt(e,t,r,n){var s=yt,a=Ht.transition;Ht.transition=null;try{yt=4,$t(e,t,r,n)}finally{yt=s,Ht.transition=a}}function $t(e,t,r,n){if(Wt){var s=Yt(e,t,r,n);if(null===s)Wn(e,t,n,Kt,r),Lt(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return Et=Rt(Et,e,t,r,n,s),!0;case"dragenter":return It=Rt(It,e,t,r,n,s),!0;case"mouseover":return Pt=Rt(Pt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Tt.set(a,Rt(Tt.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Dt.set(a,Rt(Dt.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Ot.indexOf(e)){for(;null!==s;){var a=ys(s);if(null!==a&&jt(a),null===(a=Yt(e,t,r,n))&&Wn(e,t,n,Kt,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Kt=null;function Yt(e,t,r,n){if(Kt=null,null!==(e=bs(e=je(n))))if(null===(t=qe(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Xe:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Xt=null;function er(){if(Xt)return Xt;var e,t,r=Qt,n=r.length,s="value"in Jt?Jt.value:Jt.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===s[a-t];t++);return Xt=s.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function sr(e){function t(t,r,n,s,a){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,lr,or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=sr(or),dr=M({},or,{view:0,detail:0}),ur=sr(dr),mr=M({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(ar=e.screenX-lr.screenX,ir=e.screenY-lr.screenY):ir=ar=0,lr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),pr=sr(mr),hr=sr(M({},mr,{dataTransfer:0})),xr=sr(M({},dr,{relatedTarget:0})),fr=sr(M({},or,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=M({},or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),br=sr(gr),yr=sr(M({},or,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function kr(){return Nr}var Cr=M({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=sr(Cr),_r=sr(M({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=sr(M({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Ir=sr(M({},or,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pr=M({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=sr(Pr),Dr=[9,13,27,32],Ar=d&&"CompositionEvent"in window,Or=null;d&&"documentMode"in document&&(Or=document.documentMode);var Lr=d&&"TextEvent"in window&&!Or,Rr=d&&(!Ar||Or&&8<Or&&11>=Or),Mr=String.fromCharCode(32),zr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var qr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qr[e.type]:"textarea"===t}function Wr(e,t,r,n){Se(n),0<(t=Gn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Vr=null,Gr=null;function $r(e){zn(e,0)}function Kr(e){if($(vs(e)))return e}function Yr(e,t){if("change"===e)return t}var Zr=!1;if(d){var Jr;if(d){var Qr="oninput"in document;if(!Qr){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),Qr="function"===typeof Xr.oninput}Jr=Qr}else Jr=!1;Zr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){Vr&&(Vr.detachEvent("onpropertychange",tn),Gr=Vr=null)}function tn(e){if("value"===e.propertyName&&Kr(Gr)){var t=[];Wr(t,Gr,e,je(e)),Te($r,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Vr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kr(Gr)}function sn(e,t){if("click"===e)return Kr(t)}function an(e,t){if("input"===e||"change"===e)return Kr(t)}var ln="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(ln(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!u.call(t,s)||!ln(e[s],t[s]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=K((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hn(e){var t=mn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=void 0===n.end?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=dn(r,a);var i=dn(r,n);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xn=d&&"documentMode"in document&&11>=document.documentMode,fn=null,gn=null,bn=null,yn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==fn||fn!==K(n)||("selectionStart"in(n=fn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},bn&&on(bn,n)||(bn=n,0<(n=Gn(gn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}function jn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionend:jn("Transition","TransitionEnd")},Nn={},kn={};function Cn(e){if(Nn[e])return Nn[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return Nn[e]=r[t];return e}d&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var Sn=Cn("animationend"),_n=Cn("animationiteration"),En=Cn("animationstart"),In=Cn("transitionend"),Pn=new Map,Tn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Pn.set(e,t),o(t,[e])}for(var An=0;An<Tn.length;An++){var On=Tn[An];Dn(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}Dn(Sn,"onAnimationEnd"),Dn(_n,"onAnimationIteration"),Dn(En,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Mn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,i,l,o,c){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(a(198));var d=Me;Re=!1,Me=null,ze||(ze=!0,Fe=d)}}(n,t,void 0,e),e.currentTarget=null}function zn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==a&&s.isPropagationStopped())break e;Mn(s,l,c),a=o}else for(i=0;i<n.length;i++){if(o=(l=n[i]).instance,c=l.currentTarget,l=l.listener,o!==a&&s.isPropagationStopped())break e;Mn(s,l,c),a=o}}}if(ze)throw e=Fe,ze=!1,Fe=null,e}function Fn(e,t){var r=t[xs];void 0===r&&(r=t[xs]=new Set);var n=e+"__bubble";r.has(n)||(Hn(t,e,2,!1),r.add(n))}function Bn(e,t,r){var n=0;t&&(n|=4),Hn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function qn(e){if(!e[Un]){e[Un]=!0,i.forEach(function(t){"selectionchange"!==t&&(Rn.has(t)||Bn(t,!1,e),Bn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,Bn("selectionchange",!1,t))}}function Hn(e,t,r,n){switch(Zt(t)){case 1:var s=Vt;break;case 4:s=Gt;break;default:s=$t}r=s.bind(null,t,r,e),s=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,s){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var l=n.stateNode.containerInfo;if(l===s||8===l.nodeType&&l.parentNode===s)break;if(4===i)for(i=n.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;i=i.return}for(;null!==l;){if(null===(i=bs(l)))return;if(5===(o=i.tag)||6===o){n=a=i;continue e}l=l.parentNode}}n=n.return}Te(function(){var n=a,s=je(r),i=[];e:{var l=Pn.get(e);if(void 0!==l){var o=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":o=Sr;break;case"focusin":c="focus",o=xr;break;case"focusout":c="blur",o=xr;break;case"beforeblur":case"afterblur":o=xr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Er;break;case Sn:case _n:case En:o=fr;break;case In:o=Ir;break;case"scroll":o=ur;break;case"wheel":o=Tr;break;case"copy":case"cut":case"paste":o=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=_r}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==l?l+"Capture":null:l;d=[];for(var p,h=n;null!==h;){var x=(p=h).stateNode;if(5===p.tag&&null!==x&&(p=x,null!==m&&(null!=(x=De(h,m))&&d.push(Vn(h,x,p)))),u)break;h=h.return}0<d.length&&(l=new o(l,c,null,r,s),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!bs(c)&&!c[hs])&&(o||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=n,null!==(c=(c=r.relatedTarget||r.toElement)?bs(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=n),o!==c)){if(d=pr,x="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=_r,x="onPointerLeave",m="onPointerEnter",h="pointer"),u=null==o?l:vs(o),p=null==c?l:vs(c),(l=new d(x,h+"leave",o,r,s)).target=u,l.relatedTarget=p,x=null,bs(s)===n&&((d=new d(m,h+"enter",c,r,s)).target=p,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(m=c,h=0,p=d=o;p;p=$n(p))h++;for(p=0,x=m;x;x=$n(x))p++;for(;0<h-p;)d=$n(d),h--;for(;0<p-h;)m=$n(m),p--;for(;h--;){if(d===m||null!==m&&d===m.alternate)break e;d=$n(d),m=$n(m)}d=null}else d=null;null!==o&&Kn(i,l,o,d,!1),null!==c&&null!==u&&Kn(i,u,c,d,!0)}if("select"===(o=(l=n?vs(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=Yr;else if(Hr(l))if(Zr)f=an;else{f=nn;var g=rn}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=sn);switch(f&&(f=f(e,n))?Wr(i,f,r,s):(g&&g(e,l,n),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&ee(l,"number",l.value)),g=n?vs(n):window,e){case"focusin":(Hr(g)||"true"===g.contentEditable)&&(fn=g,gn=n,bn=null);break;case"focusout":bn=gn=fn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,vn(i,r,s);break;case"selectionchange":if(xn)break;case"keydown":case"keyup":vn(i,r,s)}var b;if(Ar)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ur?Fr(e,r)&&(y="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(y="onCompositionStart");y&&(Rr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==y?"onCompositionEnd"===y&&Ur&&(b=er()):(Qt="value"in(Jt=s)?Jt.value:Jt.textContent,Ur=!0)),0<(g=Gn(n,y)).length&&(y=new yr(y,e,null,r,s),i.push({event:y,listeners:g}),b?y.data=b:null!==(b=Br(r))&&(y.data=b))),(b=Lr?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(zr=!0,Mr);case"textInput":return(e=t.data)===Mr&&zr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Ar&&Fr(e,t)?(e=er(),Xt=Qt=Jt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(s=new yr("onBeforeInput","beforeinput",null,r,s),i.push({event:s,listeners:n}),s.data=b))}zn(i,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=De(e,r))&&n.unshift(Vn(e,a,s)),null!=(a=De(e,t))&&n.push(Vn(e,a,s))),e=e.return}return n}function $n(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kn(e,t,r,n,s){for(var a=t._reactName,i=[];null!==r&&r!==n;){var l=r,o=l.alternate,c=l.stateNode;if(null!==o&&o===n)break;5===l.tag&&null!==c&&(l=c,s?null!=(o=De(r,a))&&i.unshift(Vn(r,o,l)):s||null!=(o=De(r,a))&&i.push(Vn(r,o,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Yn=/\r\n?/g,Zn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Zn,"")}function Qn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(a(425))}function Xn(){}var es=null,ts=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(ls)}:ns;function ls(e){setTimeout(function(){throw e})}function os(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n)return e.removeChild(s),void qt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r);qt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),ms="__reactFiber$"+us,ps="__reactProps$"+us,hs="__reactContainer$"+us,xs="__reactEvents$"+us,fs="__reactListeners$"+us,gs="__reactHandles$"+us;function bs(e){var t=e[ms];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hs]||r[ms]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ds(e);null!==e;){if(r=e[ms])return r;e=ds(e)}return t}r=(e=r).parentNode}return null}function ys(e){return!(e=e[ms]||e[hs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function js(e){return e[ps]||null}var ws=[],Ns=-1;function ks(e){return{current:e}}function Cs(e){0>Ns||(e.current=ws[Ns],ws[Ns]=null,Ns--)}function Ss(e,t){Ns++,ws[Ns]=e.current,e.current=t}var _s={},Es=ks(_s),Is=ks(!1),Ps=_s;function Ts(e,t){var r=e.type.contextTypes;if(!r)return _s;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in r)a[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function As(){Cs(Is),Cs(Es)}function Os(e,t,r){if(Es.current!==_s)throw Error(a(168));Ss(Es,t),Ss(Is,r)}function Ls(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(a(108,H(e)||"Unknown",s));return M({},r,n)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_s,Ps=Es.current,Ss(Es,e),Ss(Is,Is.current),!0}function Ms(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Ls(e,t,Ps),n.__reactInternalMemoizedMergedChildContext=e,Cs(Is),Cs(Es),Ss(Es,e)):Cs(Is),Ss(Is,r)}var zs=null,Fs=!1,Bs=!1;function Us(e){null===zs?zs=[e]:zs.push(e)}function qs(){if(!Bs&&null!==zs){Bs=!0;var e=0,t=yt;try{var r=zs;for(yt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}zs=null,Fs=!1}catch(s){throw null!==zs&&(zs=zs.slice(e+1)),$e(Xe,qs),s}finally{yt=t,Bs=!1}}return null}var Hs=[],Ws=0,Vs=null,Gs=0,$s=[],Ks=0,Ys=null,Zs=1,Js="";function Qs(e,t){Hs[Ws++]=Gs,Hs[Ws++]=Vs,Vs=e,Gs=t}function Xs(e,t,r){$s[Ks++]=Zs,$s[Ks++]=Js,$s[Ks++]=Ys,Ys=e;var n=Zs;e=Js;var s=32-it(n)-1;n&=~(1<<s),r+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,Zs=1<<32-it(t)+s|r<<s|n,Js=a+e}else Zs=1<<a|r<<s|n,Js=e}function ea(e){null!==e.return&&(Qs(e,1),Xs(e,1,0))}function ta(e){for(;e===Vs;)Vs=Hs[--Ws],Hs[Ws]=null,Gs=Hs[--Ws],Hs[Ws]=null;for(;e===Ys;)Ys=$s[--Ks],$s[Ks]=null,Js=$s[--Ks],$s[Ks]=null,Zs=$s[--Ks],$s[Ks]=null}var ra=null,na=null,sa=!1,aa=null;function ia(e,t){var r=Tc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function la(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ys?{id:Zs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Tc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=na;if(t){var r=t;if(!la(e,t)){if(oa(e))throw Error(a(418));t=cs(r.nextSibling);var n=ra;t&&la(e,t)?ia(n,r):(e.flags=-4097&e.flags|2,sa=!1,ra=e)}}else{if(oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=na)){if(oa(e))throw ma(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=cs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?cs(e.stateNode.nextSibling):null;return!0}function ma(){for(var e=na;e;)e=cs(e.nextSibling)}function pa(){na=ra=null,sa=!1}function ha(e){null===aa?aa=[e]:aa.push(e)}var xa=v.ReactCurrentBatchConfig;function fa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var s=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function ya(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Mc(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===N?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&ba(a)===t.type)?((n=s(t,r.props)).ref=fa(e,t,r),n.return=e,n):((n=Oc(r.type,r.key,r.props,null,e.mode,n)).ref=fa(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=zc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Lc(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Oc(t.type,t.key,t.props,null,e.mode,r)).ref=fa(e,null,t),r.return=e,r;case w:return(t=zc(t,e.mode,r)).return=e,t;case D:return m(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Lc(t,e.mode,r,null)).return=e,t;ga(e,t)}return null}function p(e,t,r,n){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:o(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===s?c(e,t,r,n):null;case w:return r.key===s?d(e,t,r,n):null;case D:return p(e,t,(s=r._init)(r._payload),n)}if(te(r)||L(r))return null!==s?null:u(e,t,r,n,null);ga(e,r)}return null}function h(e,t,r,n,s){if("string"===typeof n&&""!==n||"number"===typeof n)return o(t,e=e.get(r)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case w:return d(t,e=e.get(null===n.key?r:n.key)||null,n,s);case D:return h(e,t,r,(0,n._init)(n._payload),s)}if(te(n)||L(n))return u(t,e=e.get(r)||null,n,s,null);ga(t,n)}return null}function x(s,a,l,o){for(var c=null,d=null,u=a,x=a=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=p(s,u,l[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(s,u),a=i(g,a,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===l.length)return r(s,u),sa&&Qs(s,x),c;if(null===u){for(;x<l.length;x++)null!==(u=m(s,l[x],o))&&(a=i(u,a,x),null===d?c=u:d.sibling=u,d=u);return sa&&Qs(s,x),c}for(u=n(s,u);x<l.length;x++)null!==(f=h(u,s,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),a=i(f,a,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),sa&&Qs(s,x),c}function f(s,l,o,c){var d=L(o);if("function"!==typeof d)throw Error(a(150));if(null==(o=d.call(o)))throw Error(a(151));for(var u=d=null,x=l,f=l=0,g=null,b=o.next();null!==x&&!b.done;f++,b=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var y=p(s,x,b.value,c);if(null===y){null===x&&(x=g);break}e&&x&&null===y.alternate&&t(s,x),l=i(y,l,f),null===u?d=y:u.sibling=y,u=y,x=g}if(b.done)return r(s,x),sa&&Qs(s,f),d;if(null===x){for(;!b.done;f++,b=o.next())null!==(b=m(s,b.value,c))&&(l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return sa&&Qs(s,f),d}for(x=n(s,x);!b.done;f++,b=o.next())null!==(b=h(x,s,f,b.value,c))&&(e&&null!==b.alternate&&x.delete(null===b.key?f:b.key),l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return e&&x.forEach(function(e){return t(s,e)}),sa&&Qs(s,f),d}return function e(n,a,i,o){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){r(n,d.sibling),(a=s(d,i.props.children)).return=n,n=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ba(c)===d.type){r(n,d.sibling),(a=s(d,i.props)).ref=fa(n,d,i),a.return=n,n=a;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===N?((a=Lc(i.props.children,n.mode,o,i.key)).return=n,n=a):((o=Oc(i.type,i.key,i.props,null,n.mode,o)).ref=fa(n,a,i),o.return=n,n=o)}return l(n);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(n,a.sibling),(a=s(a,i.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=zc(i,n.mode,o)).return=n,n=a}return l(n);case D:return e(n,a,(d=i._init)(i._payload),o)}if(te(i))return x(n,a,i,o);if(L(i))return f(n,a,i,o);ga(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(n,a.sibling),(a=s(a,i)).return=n,n=a):(r(n,a),(a=Mc(i,n.mode,o)).return=n,n=a),l(n)):r(n,a)}}var va=ya(!0),ja=ya(!1),wa=ks(null),Na=null,ka=null,Ca=null;function Sa(){Ca=ka=Na=null}function _a(e){var t=wa.current;Cs(wa),e._currentValue=t}function Ea(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ia(e,t){Na=e,Ca=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bl=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(Ca!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===Na)throw Error(a(308));ka=e,Na.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Da(e){null===Ta?Ta=[e]:Ta.push(e)}function Aa(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,Da(t)):(r.next=s.next,s.next=r),t.interleaved=r,Oa(e,n)}function Oa(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var La=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Eo)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Oa(e,r)}return null===(s=n.interleaved)?(t.next=t,Da(n)):(t.next=s.next,s.next=t),n.interleaved=t,Oa(e,r)}function Ba(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}function Ua(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?s=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qa(e,t,r,n){var s=e.updateQueue;La=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?a=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==a){var u=s.baseState;for(i=0,d=c=o=null,l=a;;){var m=l.lane,p=l.eventTime;if((n&m)===m){null!==d&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,x=l;switch(m=t,p=r,x.tag){case 1:if("function"===typeof(h=x.payload)){u=h.call(p,u,m);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(m="function"===typeof(h=x.payload)?h.call(p,u,m):h)||void 0===m)break e;u=M({},u,m);break e;case 2:La=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(m=s.effects)?s.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=p,o=u):d=d.next=p,i|=m;if(null===(l=l.next)){if(null===(l=s.shared.pending))break;l=(m=l).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}if(null===d&&(o=u),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);Ro|=i,e.lanes=i,e.memoizedState=u}}function Ha(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!==typeof s)throw Error(a(191,s));s.call(n)}}}var Wa={},Va=ks(Wa),Ga=ks(Wa),$a=ks(Wa);function Ka(e){if(e===Wa)throw Error(a(174));return e}function Ya(e,t){switch(Ss($a,t),Ss(Ga,e),Ss(Va,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cs(Va),Ss(Va,t)}function Za(){Cs(Va),Cs(Ga),Cs($a)}function Ja(e){Ka($a.current);var t=Ka(Va.current),r=oe(t,e.type);t!==r&&(Ss(Ga,e),Ss(Va,r))}function Qa(e){Ga.current===e&&(Cs(Va),Cs(Ga))}var Xa=ks(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=v.ReactCurrentDispatcher,si=v.ReactCurrentBatchConfig,ai=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,mi=0;function pi(){throw Error(a(321))}function hi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ln(e[r],t[r]))return!1;return!0}function xi(e,t,r,n,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Qi:Xi,e=r(n,s),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,oi=li=null,t.updateQueue=null,ni.current=el,e=r(n,s)}while(di)}if(ni.current=Ji,t=null!==li&&null!==li.next,ai=0,oi=li=ii=null,ci=!1,t)throw Error(a(300));return e}function fi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function bi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function yi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=bi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=li,s=n.baseQueue,i=r.pending;if(null!==i){if(null!==s){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(null!==s){i=s.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=m,l=n):c=c.next=m,ii.lanes|=u,Ro|=u}d=d.next}while(null!==d&&d!==i);null===c?l=n:c.next=o,ln(n,t.memoizedState)||(bl=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Ro|=i,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ji(e){var t=bi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(null!==s){r.pending=null;var l=s=s.next;do{i=e(i,l.action),l=l.next}while(l!==s);ln(i,t.memoizedState)||(bl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function wi(){}function Ni(e,t){var r=ii,n=bi(),s=t(),i=!ln(n.memoizedState,s);if(i&&(n.memoizedState=s,bl=!0),n=n.queue,Li(Si.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(r.flags|=2048,Pi(9,Ci.bind(null,r,n,s,t),void 0,null),null===Io)throw Error(a(349));0!==(30&ai)||ki(r,t,s)}return s}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ci(e,t,r,n){t.value=r,t.getSnapshot=n,_i(t)&&Ei(e)}function Si(e,t,r){return r(function(){_i(t)&&Ei(e)})}function _i(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ln(e,r)}catch(n){return!0}}function Ei(e){var t=Oa(e,1);null!==t&&rc(t,e,1,-1)}function Ii(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=$i.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ti(){return bi().memoizedState}function Di(e,t,r,n){var s=gi();ii.flags|=e,s.memoizedState=Pi(1|t,r,void 0,void 0===n?null:n)}function Ai(e,t,r,n){var s=bi();n=void 0===n?null:n;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==n&&hi(n,i.deps))return void(s.memoizedState=Pi(t,r,a,n))}ii.flags|=e,s.memoizedState=Pi(1|t,r,a,n)}function Oi(e,t){return Di(8390656,8,e,t)}function Li(e,t){return Ai(2048,8,e,t)}function Ri(e,t){return Ai(4,2,e,t)}function Mi(e,t){return Ai(4,4,e,t)}function zi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ai(4,4,zi.bind(null,t,e),r)}function Bi(){}function Ui(e,t){var r=bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&hi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qi(e,t){var r=bi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&hi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Hi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=r):(ln(r,t)||(r=xt(),ii.lanes|=r,Ro|=r,e.baseState=!0),t)}function Wi(e,t){var r=yt;yt=0!==r&&4>r?r:4,e(!0);var n=si.transition;si.transition={};try{e(!1),t()}finally{yt=r,si.transition=n}}function Vi(){return bi().memoizedState}function Gi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ki(e))Yi(t,r);else if(null!==(r=Aa(e,t,r,n))){rc(r,e,n,ec()),Zi(r,t,n)}}function $i(e,t,r){var n=tc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Yi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,ln(l,i)){var o=t.interleaved;return null===o?(s.next=s,Da(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch(c){}null!==(r=Aa(e,t,s,n))&&(rc(r,e,n,s=ec()),Zi(r,t,n))}}function Ki(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Yi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zi(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,bt(e,r)}}var Ji={readContext:Pa,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Qi={readContext:Pa,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:Oi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Di(4194308,4,zi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var r=gi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Ii,useDebugValue:Bi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Wi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,s=gi();if(sa){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Io)throw Error(a(349));0!==(30&ai)||ki(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Oi(Si.bind(null,n,i,e),[e]),n.flags|=2048,Pi(9,Ci.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=gi(),t=Io.identifierPrefix;if(sa){var r=Js;t=":"+t+"R"+(r=(Zs&~(1<<32-it(Zs)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xi={readContext:Pa,useCallback:Ui,useContext:Pa,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:Ri,useLayoutEffect:Mi,useMemo:qi,useReducer:vi,useRef:Ti,useState:function(){return vi(yi)},useDebugValue:Bi,useDeferredValue:function(e){return Hi(bi(),li.memoizedState,e)},useTransition:function(){return[vi(yi)[0],bi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1},el={readContext:Pa,useCallback:Ui,useContext:Pa,useEffect:Li,useImperativeHandle:Fi,useInsertionEffect:Ri,useLayoutEffect:Mi,useMemo:qi,useReducer:ji,useRef:Ti,useState:function(){return ji(yi)},useDebugValue:Bi,useDeferredValue:function(e){var t=bi();return null===li?t.memoizedState=e:Hi(t,li.memoizedState,e)},useTransition:function(){return[ji(yi)[0],bi().memoizedState]},useMutableSource:wi,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var r in t=M({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function rl(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:M({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=za(n,s);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Fa(e,a,s))&&(rc(t,e,s,n),Ba(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=za(n,s);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Fa(e,a,s))&&(rc(t,e,s,n),Ba(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),s=za(r,n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fa(e,s,n))&&(rc(t,e,n,r),Ba(t,e,n))}};function sl(e,t,r,n,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!on(r,n)||!on(s,a))}function al(e,t,r){var n=!1,s=_s,a=t.contextType;return"object"===typeof a&&null!==a?a=Pa(a):(s=Ds(t)?Ps:Es.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ts(e,s):_s),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function il(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ll(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Pa(a):(a=Ds(t)?Ps:Es.current,s.context=Ts(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rl(e,t,a,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&nl.enqueueReplaceState(s,s.state,null),qa(e,r,s,n),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var s=r}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function cl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ul="function"===typeof WeakMap?WeakMap:Map;function ml(e,t,r){(r=za(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wo||(Wo=!0,Vo=n),dl(0,t)},r}function pl(e,t,r){(r=za(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){dl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){dl(0,t),"function"!==typeof n&&(null===Go?Go=new Set([this]):Go.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function hl(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ul;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Cc.bind(null,e,t,r),t.then(e,e))}function xl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fl(e,t,r,n,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=za(-1,1)).tag=2,Fa(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var gl=v.ReactCurrentOwner,bl=!1;function yl(e,t,r,n){t.child=null===e?ja(t,null,r,n):va(t,e.child,r,n)}function vl(e,t,r,n,s){r=r.render;var a=t.ref;return Ia(t,s),n=xi(e,t,r,n,a,s),r=fi(),null===e||bl?(sa&&r&&ea(t),t.flags|=1,yl(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hl(e,t,s))}function jl(e,t,r,n,s){if(null===e){var a=r.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Oc(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wl(e,t,a,n,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:on)(i,n)&&e.ref===t.ref)return Hl(e,t,s)}return t.flags|=1,(e=Ac(a,n)).ref=t.ref,e.return=t,t.child=e}function wl(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(on(a,n)&&e.ref===t.ref){if(bl=!1,t.pendingProps=n=a,0===(e.lanes&s))return t.lanes=e.lanes,Hl(e,t,s);0!==(131072&e.flags)&&(bl=!0)}}return Cl(e,t,r,n,s)}function Nl(e,t,r){var n=t.pendingProps,s=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ss(Ao,Do),Do|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ss(Ao,Do),Do|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ss(Ao,Do),Do|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ss(Ao,Do),Do|=n;return yl(e,t,s,r),t.child}function kl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,r,n,s){var a=Ds(r)?Ps:Es.current;return a=Ts(t,a),Ia(t,s),r=xi(e,t,r,n,a,s),n=fi(),null===e||bl?(sa&&n&&ea(t),t.flags|=1,yl(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Hl(e,t,s))}function Sl(e,t,r,n,s){if(Ds(r)){var a=!0;Rs(t)}else a=!1;if(Ia(t,s),null===t.stateNode)ql(e,t),al(t,r,n),ll(t,r,n,s),n=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Pa(c):c=Ts(t,c=Ds(r)?Ps:Es.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==n||o!==c)&&il(t,i,n,c),La=!1;var m=t.memoizedState;i.state=m,qa(t,n,i,s),o=t.memoizedState,l!==n||m!==o||Is.current||La?("function"===typeof d&&(rl(t,r,d,n),o=t.memoizedState),(l=La||sl(t,r,l,n,m,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),i.props=n,i.state=o,i.context=c,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Ma(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(o=r.contextType)&&null!==o?o=Pa(o):o=Ts(t,o=Ds(r)?Ps:Es.current);var p=r.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||m!==o)&&il(t,i,n,o),La=!1,m=t.memoizedState,i.state=m,qa(t,n,i,s);var h=t.memoizedState;l!==u||m!==h||Is.current||La?("function"===typeof p&&(rl(t,r,p,n),h=t.memoizedState),(c=La||sl(t,r,c,n,m,h,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,h,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,h,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),i.props=n,i.state=h,i.context=o,n=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return _l(e,t,r,n,a,s)}function _l(e,t,r,n,s,a){kl(e,t);var i=0!==(128&t.flags);if(!n&&!i)return s&&Ms(t,r,!1),Hl(e,t,a);n=t.stateNode,gl.current=t;var l=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=va(t,e.child,null,a),t.child=va(t,null,l,a)):yl(e,t,l,a),t.memoizedState=n.state,s&&Ms(t,r,!0),t.child}function El(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Ya(e,t.containerInfo)}function Il(e,t,r,n,s){return pa(),ha(s),t.flags|=256,yl(e,t,r,n),t.child}var Pl,Tl,Dl,Al,Ol={dehydrated:null,treeContext:null,retryLane:0};function Ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rl(e,t,r){var n,s=t.pendingProps,i=Xa.current,l=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ss(Xa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Rc(o,s,0,null),e=Lc(e,s,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ll(r),t.memoizedState=Ol,e):Ml(t,o));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,s,i,l){if(r)return 256&t.flags?(t.flags&=-257,zl(e,t,l,n=cl(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Rc({mode:"visible",children:n.children},s,0,null),(i=Lc(i,s,l,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&va(t,e.child,null,l),t.child.memoizedState=Ll(l),t.memoizedState=Ol,i);if(0===(1&t.mode))return zl(e,t,l,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var o=n.dgst;return n=o,zl(e,t,l,n=cl(i=Error(a(419)),n,void 0))}if(o=0!==(l&e.childLanes),bl||o){if(null!==(n=Io)){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|l))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Oa(e,s),rc(n,e,s,-1))}return xc(),zl(e,t,l,n=cl(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,na=cs(s.nextSibling),ra=t,sa=!0,aa=null,null!==e&&($s[Ks++]=Zs,$s[Ks++]=Js,$s[Ks++]=Ys,Zs=e.id,Js=e.overflow,Ys=t),t=Ml(t,n.children),t.flags|=4096,t)}(e,t,o,s,n,i,r);if(l){l=s.fallback,o=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ac(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?l=Ac(n,l):(l=Lc(l,o,r,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=null===(o=e.child.memoizedState)?Ll(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~r,t.memoizedState=Ol,s}return e=(l=e.child).sibling,s=Ac(l,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Ml(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zl(e,t,r,n){return null!==n&&ha(n),va(t,e.child,null,r),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ea(e.return,t,r)}function Bl(e,t,r,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Ul(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(yl(e,t,n.children,r),0!==(2&(n=Xa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fl(e,r,t);else if(19===e.tag)Fl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ss(Xa,n),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Bl(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Bl(t,!0,r,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ql(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ro|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Ac(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ac(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Wl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Gl(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vl(t),null;case 1:case 17:return Ds(t.type)&&As(),Vl(t),null;case 3:return n=t.stateNode,Za(),Cs(Is),Cs(Es),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Tl(e,t),Vl(t),null;case 5:Qa(t);var s=Ka($a.current);if(r=t.type,null!==e&&null!=t.stateNode)Dl(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Vl(t),null}if(e=Ka(Va.current),ua(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ms]=t,n[ps]=i,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(s=0;s<Ln.length;s++)Fn(Ln[s],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Z(n,i),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fn("invalid",n);break;case"textarea":se(n,i),Fn("invalid",n)}for(var o in be(r,i),s=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qn(n.textContent,c,e),s=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qn(n.textContent,c,e),s=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fn("scroll",n)}switch(r){case"input":G(n),X(n,i,!0);break;case"textarea":G(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Xn)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),"select"===r&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ms]=t,e[ps]=n,Pl(e,t,!1,!1),t.stateNode=e;e:{switch(o=ye(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),s=n;break;case"iframe":case"object":case"embed":Fn("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ln.length;s++)Fn(Ln[s],e);s=n;break;case"source":Fn("error",e),s=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),s=n;break;case"details":Fn("toggle",e),s=n;break;case"input":Z(e,n),s=Y(e,n),Fn("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=M({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":se(e,n),s=ne(e,n),Fn("invalid",e)}for(i in be(r,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fn("scroll",e):null!=d&&y(e,i,d,o))}switch(r){case"input":G(e),X(e,n,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Xn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vl(t),null;case 6:if(e&&null!=t.stateNode)Al(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=Ka($a.current),Ka(Va.current),ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[ms]=t,(i=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Qn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[ms]=t,t.stateNode=n}return Vl(t),null;case 13:if(Cs(Xa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ma(),pa(),t.flags|=98560,i=!1;else if(i=ua(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ms]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vl(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xa.current)?0===Oo&&(Oo=3):xc())),null!==t.updateQueue&&(t.flags|=4),Vl(t),null);case 4:return Za(),Tl(e,t),null===e&&qn(t.stateNode.containerInfo),Vl(t),null;case 10:return _a(t.type._context),Vl(t),null;case 19:if(Cs(Xa),null===(i=t.memoizedState))return Vl(t),null;if(n=0!==(128&t.flags),null===(o=i.rendering))if(n)Wl(i,!1);else{if(0!==Oo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Wl(i,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ss(Xa,1&Xa.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>qo&&(t.flags|=128,n=!0,Wl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(o))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Wl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!sa)return Vl(t),null}else 2*Je()-i.renderingStartTime>qo&&1073741824!==r&&(t.flags|=128,n=!0,Wl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=i.last)?r.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,r=Xa.current,Ss(Xa,n?1&r|2:1&r),t):(Vl(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Do)&&(Vl(t),6&t.subtreeFlags&&(t.flags|=8192)):Vl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function $l(e,t){switch(ta(t),t.tag){case 1:return Ds(t.type)&&As(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Za(),Cs(Is),Cs(Es),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qa(t),null;case 13:if(Cs(Xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cs(Xa),null;case 4:return Za(),null;case 10:return _a(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Pl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Tl=function(){},Dl=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ka(Va.current);var a,i=null;switch(r){case"input":s=Y(e,s),n=Y(e,n),i=[];break;case"select":s=M({},s,{value:void 0}),n=M({},n,{value:void 0}),i=[];break;case"textarea":s=ne(e,s),n=ne(e,n),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof n.onClick&&(e.onclick=Xn)}for(d in be(r,n),r=null,s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=null!=s?s[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fn("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Al=function(e,t,r,n){r!==n&&(t.flags|=4)};var Kl=!1,Yl=!1,Zl="function"===typeof WeakSet?WeakSet:Set,Jl=null;function Ql(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function Xl(e,t,r){try{r()}catch(n){kc(e,t,n)}}var eo=!1;function to(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&Xl(t,r,a)}s=s.next}while(s!==n)}}function ro(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function no(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function so(e){var t=e.alternate;null!==t&&(e.alternate=null,so(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ms],delete t[ps],delete t[xs],delete t[fs],delete t[gs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ao(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ao(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xn));else if(4!==n&&null!==(e=e.child))for(lo(e,t,r),e=e.sibling;null!==e;)lo(e,t,r),e=e.sibling}function oo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(oo(e,t,r),e=e.sibling;null!==e;)oo(e,t,r),e=e.sibling}var co=null,uo=!1;function mo(e,t,r){for(r=r.child;null!==r;)po(e,t,r),r=r.sibling}function po(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,r)}catch(l){}switch(r.tag){case 5:Yl||Ql(r,t);case 6:var n=co,s=uo;co=null,mo(e,t,r),uo=s,null!==(co=n)&&(uo?(e=co,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):co.removeChild(r.stateNode));break;case 18:null!==co&&(uo?(e=co,r=r.stateNode,8===e.nodeType?os(e.parentNode,r):1===e.nodeType&&os(e,r),qt(e)):os(co,r.stateNode));break;case 4:n=co,s=uo,co=r.stateNode.containerInfo,uo=!0,mo(e,t,r),co=n,uo=s;break;case 0:case 11:case 14:case 15:if(!Yl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&Xl(r,t,i),s=s.next}while(s!==n)}mo(e,t,r);break;case 1:if(!Yl&&(Ql(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){kc(r,t,l)}mo(e,t,r);break;case 21:mo(e,t,r);break;case 22:1&r.mode?(Yl=(n=Yl)||null!==r.memoizedState,mo(e,t,r),Yl=n):mo(e,t,r);break;default:mo(e,t,r)}}function ho(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zl),t.forEach(function(t){var n=Ec.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function xo(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(a(160));po(i,l,s),co=null,uo=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fo(t,e),t=t.sibling}function fo(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xo(t,e),go(e),4&n){try{to(3,e,e.return),ro(3,e)}catch(f){kc(e,e.return,f)}try{to(5,e,e.return)}catch(f){kc(e,e.return,f)}}break;case 1:xo(t,e),go(e),512&n&&null!==r&&Ql(r,r.return);break;case 5:if(xo(t,e),go(e),512&n&&null!==r&&Ql(r,r.return),32&e.flags){var s=e.stateNode;try{me(s,"")}catch(f){kc(e,e.return,f)}}if(4&n&&null!=(s=e.stateNode)){var i=e.memoizedProps,l=null!==r?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&J(s,i),ye(o,l);var d=ye(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];"style"===u?fe(s,m):"dangerouslySetInnerHTML"===u?ue(s,m):"children"===u?me(s,m):y(s,u,m,d)}switch(o){case"input":Q(s,i);break;case"textarea":ae(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?re(s,!!i.multiple,h,!1):p!==!!i.multiple&&(null!=i.defaultValue?re(s,!!i.multiple,i.defaultValue,!0):re(s,!!i.multiple,i.multiple?[]:"",!1))}s[ps]=i}catch(f){kc(e,e.return,f)}}break;case 6:if(xo(t,e),go(e),4&n){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){kc(e,e.return,f)}}break;case 3:if(xo(t,e),go(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(f){kc(e,e.return,f)}break;case 4:default:xo(t,e),go(e);break;case 13:xo(t,e),go(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Uo=Je())),4&n&&ho(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Yl=(d=Yl)||u,xo(t,e),Yl=d):xo(t,e),go(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jl=e,u=e.child;null!==u;){for(m=Jl=u;null!==Jl;){switch(h=(p=Jl).child,p.tag){case 0:case 11:case 14:case 15:to(4,p,p.return);break;case 1:Ql(p,p.return);var x=p.stateNode;if("function"===typeof x.componentWillUnmount){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(f){kc(n,r,f)}}break;case 5:Ql(p,p.return);break;case 22:if(null!==p.memoizedState){jo(m);continue}}null!==h?(h.return=p,Jl=h):jo(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{s=m.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=m.stateNode,l=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=xe("display",l))}catch(f){kc(e,e.return,f)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){kc(e,e.return,f)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xo(t,e),go(e),4&n&&ho(e);case 21:}}function go(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ao(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(me(s,""),n.flags&=-33),oo(e,io(e),s);break;case 3:case 4:var i=n.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(a(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bo(e,t,r){Jl=e,yo(e,t,r)}function yo(e,t,r){for(var n=0!==(1&e.mode);null!==Jl;){var s=Jl,a=s.child;if(22===s.tag&&n){var i=null!==s.memoizedState||Kl;if(!i){var l=s.alternate,o=null!==l&&null!==l.memoizedState||Yl;l=Kl;var c=Yl;if(Kl=i,(Yl=o)&&!c)for(Jl=s;null!==Jl;)o=(i=Jl).child,22===i.tag&&null!==i.memoizedState?wo(s):null!==o?(o.return=i,Jl=o):wo(s);for(;null!==a;)Jl=a,yo(a,t,r),a=a.sibling;Jl=s,Kl=l,Yl=c}vo(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Jl=a):vo(e)}}function vo(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yl||ro(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Yl)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tl(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ha(t,i,n);break;case 3:var l=t.updateQueue;if(null!==l){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ha(t,l,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&qt(m)}}}break;default:throw Error(a(163))}Yl||512&t.flags&&no(t)}catch(p){kc(t,t.return,p)}}if(t===e){Jl=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jl=r;break}Jl=t.return}}function jo(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jl=r;break}Jl=t.return}}function wo(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ro(4,t)}catch(o){kc(t,r,o)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(o){kc(t,s,o)}}var a=t.return;try{no(t)}catch(o){kc(t,a,o)}break;case 5:var i=t.return;try{no(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var No,ko=Math.ceil,Co=v.ReactCurrentDispatcher,So=v.ReactCurrentOwner,_o=v.ReactCurrentBatchConfig,Eo=0,Io=null,Po=null,To=0,Do=0,Ao=ks(0),Oo=0,Lo=null,Ro=0,Mo=0,zo=0,Fo=null,Bo=null,Uo=0,qo=1/0,Ho=null,Wo=!1,Vo=null,Go=null,$o=!1,Ko=null,Yo=0,Zo=0,Jo=null,Qo=-1,Xo=0;function ec(){return 0!==(6&Eo)?Je():-1!==Qo?Qo:Qo=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Eo)&&0!==To?To&-To:null!==xa.transition?(0===Xo&&(Xo=xt()),Xo):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function rc(e,t,r,n){if(50<Zo)throw Zo=0,Jo=null,Error(a(185));gt(e,r,n),0!==(2&Eo)&&e===Io||(e===Io&&(0===(2&Eo)&&(Mo|=r),4===Oo&&lc(e,To)),nc(e,n),1===r&&0===Eo&&0===(1&t.mode)&&(qo=Je()+500,Fs&&qs()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),l=1<<i,o=s[i];-1===o?0!==(l&r)&&0===(l&n)||(s[i]=pt(l,t)):o<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var n=mt(e,e===Io?To:0);if(0===n)null!==r&&Ke(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ke(r),1===t)0===e.tag?function(e){Fs=!0,Us(e)}(oc.bind(null,e)):Us(oc.bind(null,e)),is(function(){0===(6&Eo)&&qs()}),r=null;else{switch(vt(n)){case 1:r=Xe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ic(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Qo=-1,Xo=0,0!==(6&Eo))throw Error(a(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=mt(e,e===Io?To:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=fc(e,n);else{t=n;var s=Eo;Eo|=2;var i=hc();for(Io===e&&To===t||(Ho=null,qo=Je()+500,mc(e,t));;)try{bc();break}catch(o){pc(e,o)}Sa(),Co.current=i,Eo=s,null!==Po?t=0:(Io=null,To=0,t=Oo)}if(0!==t){if(2===t&&(0!==(s=ht(e))&&(n=s,t=ac(e,s))),1===t)throw r=Lo,mc(e,0),lc(e,n),nc(e,Je()),r;if(6===t)lc(e,n);else{if(s=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ln(a(),s))return!1}catch(l){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=fc(e,n))&&(0!==(i=ht(e))&&(n=i,t=ac(e,i))),1===t))throw r=Lo,mc(e,0),lc(e,n),nc(e,Je()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Bo,Ho);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=Uo+500-Je())){if(0!==mt(e,0))break;if(((s=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(jc.bind(null,e,Bo,Ho),t);break}jc(e,Bo,Ho);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-it(n);i=1<<l,(l=t[l])>s&&(s=l),n&=~i}if(n=s,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ko(n/1960))-n)){e.timeoutHandle=ns(jc.bind(null,e,Bo,Ho),n);break}jc(e,Bo,Ho);break;default:throw Error(a(329))}}}return nc(e,Je()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var r=Fo;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Bo,Bo=r,null!==t&&ic(t)),e}function ic(e){null===Bo?Bo=e:Bo.push.apply(Bo,e)}function lc(e,t){for(t&=~zo,t&=~Mo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function oc(e){if(0!==(6&Eo))throw Error(a(327));wc();var t=mt(e,0);if(0===(1&t))return nc(e,Je()),null;var r=fc(e,t);if(0!==e.tag&&2===r){var n=ht(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Lo,mc(e,0),lc(e,t),nc(e,Je()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Bo,Ho),nc(e,Je()),null}function cc(e,t){var r=Eo;Eo|=1;try{return e(t)}finally{0===(Eo=r)&&(qo=Je()+500,Fs&&qs())}}function dc(e){null!==Ko&&0===Ko.tag&&0===(6&Eo)&&wc();var t=Eo;Eo|=1;var r=_o.transition,n=yt;try{if(_o.transition=null,yt=1,e)return e()}finally{yt=n,_o.transition=r,0===(6&(Eo=t))&&qs()}}function uc(){Do=Ao.current,Cs(Ao)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ss(r)),null!==Po)for(r=Po.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&As();break;case 3:Za(),Cs(Is),Cs(Es),ri();break;case 5:Qa(n);break;case 4:Za();break;case 13:case 19:Cs(Xa);break;case 10:_a(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Io=e,Po=e=Ac(e.current,null),To=Do=t,Oo=0,Lo=null,zo=Mo=Ro=0,Bo=Fo=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(n=(r=Ta[t]).interleaved)){r.interleaved=null;var s=n.next,a=r.pending;if(null!==a){var i=a.next;a.next=s,n.next=i}r.pending=n}Ta=null}return e}function pc(e,t){for(;;){var r=Po;try{if(Sa(),ni.current=Ji,ci){for(var n=ii.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}ci=!1}if(ai=0,oi=li=ii=null,di=!1,ui=0,So.current=null,null===r||null===r.return){Oo=1,Lo=t,Po=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=To,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=xl(l);if(null!==h){h.flags&=-257,fl(h,l,o,0,t),1&h.mode&&hl(i,d,t),c=d;var x=(t=h).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){hl(i,d,t),xc();break e}c=Error(a(426))}else if(sa&&1&o.mode){var g=xl(l);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),fl(g,l,o,0,t),ha(ol(c,o));break e}}i=c=ol(c,o),4!==Oo&&(Oo=2),null===Fo?Fo=[i]:Fo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ua(i,ml(0,c,t));break e;case 1:o=c;var b=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Go||!Go.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Ua(i,pl(i,o,t));break e}}i=i.return}while(null!==i)}vc(r)}catch(v){t=v,Po===r&&null!==r&&(Po=r=r.return);continue}break}}function hc(){var e=Co.current;return Co.current=Ji,null===e?Ji:e}function xc(){0!==Oo&&3!==Oo&&2!==Oo||(Oo=4),null===Io||0===(268435455&Ro)&&0===(268435455&Mo)||lc(Io,To)}function fc(e,t){var r=Eo;Eo|=2;var n=hc();for(Io===e&&To===t||(Ho=null,mc(e,t));;)try{gc();break}catch(s){pc(e,s)}if(Sa(),Eo=r,Co.current=n,null!==Po)throw Error(a(261));return Io=null,To=0,Oo}function gc(){for(;null!==Po;)yc(Po)}function bc(){for(;null!==Po&&!Ye();)yc(Po)}function yc(e){var t=No(e.alternate,e,Do);e.memoizedProps=e.pendingProps,null===t?vc(e):Po=t,So.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Gl(r,t,Do)))return void(Po=r)}else{if(null!==(r=$l(r,t)))return r.flags&=32767,void(Po=r);if(null===e)return Oo=6,void(Po=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Po=t);Po=t=e}while(null!==t);0===Oo&&(Oo=5)}function jc(e,t,r){var n=yt,s=_o.transition;try{_o.transition=null,yt=1,function(e,t,r,n){do{wc()}while(null!==Ko);if(0!==(6&Eo))throw Error(a(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-it(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}(e,i),e===Io&&(Po=Io=null,To=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||$o||($o=!0,Ic(tt,function(){return wc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=_o.transition,_o.transition=null;var l=yt;yt=1;var o=Eo;Eo|=4,So.current=null,function(e,t){if(es=Wt,pn(e=mn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(j){r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var h;m!==r||0!==s&&3!==m.nodeType||(o=l+s),m!==i||0!==n&&3!==m.nodeType||(c=l+n),3===m.nodeType&&(l+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break t;if(p===r&&++d===s&&(o=l),p===i&&++u===n&&(c=l),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}r=-1===o||-1===c?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ts={focusedElem:e,selectionRange:r},Wt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:tl(t.type,f),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(a(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}x=eo,eo=!1}(e,r),fo(r,e),hn(ts),Wt=!!es,ts=es=null,e.current=r,bo(r,e,s),Ze(),Eo=o,yt=l,_o.transition=i}else e.current=r;if($o&&($o=!1,Ko=e,Yo=s),i=e.pendingLanes,0===i&&(Go=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Wo)throw Wo=!1,e=Vo,Vo=null,e;0!==(1&Yo)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Jo?Zo++:(Zo=0,Jo=e):Zo=0,qs()}(e,t,r,n)}finally{_o.transition=s,yt=n}return null}function wc(){if(null!==Ko){var e=vt(Yo),t=_o.transition,r=yt;try{if(_o.transition=null,yt=16>e?16:e,null===Ko)var n=!1;else{if(e=Ko,Ko=null,Yo=0,0!==(6&Eo))throw Error(a(331));var s=Eo;for(Eo|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Jl=d;null!==Jl;){var u=Jl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var m=u.child;if(null!==m)m.return=u,Jl=m;else for(;null!==Jl;){var p=(u=Jl).sibling,h=u.return;if(so(u),u===d){Jl=null;break}if(null!==p){p.return=h,Jl=p;break}Jl=h}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Jl=b;break e}Jl=i.return}}var y=e.current;for(Jl=y;null!==Jl;){var v=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,Jl=v;else e:for(l=y;null!==Jl;){if(0!==(2048&(o=Jl).flags))try{switch(o.tag){case 0:case 11:case 15:ro(9,o)}}catch(w){kc(o,o.return,w)}if(o===l){Jl=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Jl=j;break e}Jl=o.return}}if(Eo=s,qs(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(w){}n=!0}return n}finally{yt=r,_o.transition=t}}return!1}function Nc(e,t,r){e=Fa(e,t=ml(0,t=ol(r,t),1),1),t=ec(),null!==e&&(gt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)Nc(e,e,r);else for(;null!==t;){if(3===t.tag){Nc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Go||!Go.has(n))){t=Fa(t,e=pl(t,e=ol(r,e),1),1),e=ec(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Io===e&&(To&r)===r&&(4===Oo||3===Oo&&(130023424&To)===To&&500>Je()-Uo?mc(e,0):zo|=r),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Oa(e,t))&&(gt(e,t,r),nc(e,r))}function _c(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sc(e,r)}function Ec(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Sc(e,r)}function Ic(e,t){return $e(e,t)}function Pc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,r,n){return new Pc(e,t,r,n)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var r=e.alternate;return null===r?((r=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Oc(e,t,r,n,s,i){var l=2;if(n=e,"function"===typeof e)Dc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case N:return Lc(r.children,s,i,t);case k:l=8,s|=8;break;case C:return(e=Tc(12,r,t,2|s)).elementType=C,e.lanes=i,e;case I:return(e=Tc(13,r,t,s)).elementType=I,e.lanes=i,e;case P:return(e=Tc(19,r,t,s)).elementType=P,e.lanes=i,e;case A:return Rc(r,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:l=10;break e;case _:l=9;break e;case E:l=11;break e;case T:l=14;break e;case D:l=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(l,r,t,s)).elementType=e,t.type=n,t.lanes=i,t}function Lc(e,t,r,n){return(e=Tc(7,e,n,t)).lanes=r,e}function Rc(e,t,r,n){return(e=Tc(22,e,n,t)).elementType=A,e.lanes=r,e.stateNode={isHidden:!1},e}function Mc(e,t,r){return(e=Tc(6,e,null,t)).lanes=r,e}function zc(e,t,r){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,r,n,s,a,i,l,o){return e=new Fc(e,t,r,l,o),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Uc(e){if(!e)return _s;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(Ds(r))return Ls(e,r,t)}return t}function qc(e,t,r,n,s,a,i,l,o){return(e=Bc(r,n,!0,e,0,a,0,l,o)).context=Uc(null),r=e.current,(a=za(n=ec(),s=tc(r))).callback=void 0!==t&&null!==t?t:null,Fa(r,a,s),e.current.lanes=s,gt(e,s,n),nc(e,n),e}function Hc(e,t,r,n){var s=t.current,a=ec(),i=tc(s);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=za(a,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Fa(s,t,i))&&(rc(e,s,i,a),Ba(e,s,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}No=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)bl=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bl=!1,function(e,t,r){switch(t.tag){case 3:El(t),pa();break;case 5:Ja(t);break;case 1:Ds(t.type)&&Rs(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ss(wa,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ss(Xa,1&Xa.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Rl(e,t,r):(Ss(Xa,1&Xa.current),null!==(e=Hl(e,t,r))?e.sibling:null);Ss(Xa,1&Xa.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Ul(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ss(Xa,Xa.current),n)break;return null;case 22:case 23:return t.lanes=0,Nl(e,t,r)}return Hl(e,t,r)}(e,t,r);bl=0!==(131072&e.flags)}else bl=!1,sa&&0!==(1048576&t.flags)&&Xs(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ql(e,t),e=t.pendingProps;var s=Ts(t,Es.current);Ia(t,r),s=xi(null,t,n,e,s,r);var i=fi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(n)?(i=!0,Rs(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ra(t),s.updater=nl,t.stateNode=s,s._reactInternals=t,ll(t,n,e,r),t=_l(null,t,n,!0,i,r)):(t.tag=0,sa&&i&&ea(t),yl(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ql(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(n),e=tl(n,e),s){case 0:t=Cl(null,t,n,e,r);break e;case 1:t=Sl(null,t,n,e,r);break e;case 11:t=vl(null,t,n,e,r);break e;case 14:t=jl(null,t,n,tl(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,Cl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 1:return n=t.type,s=t.pendingProps,Sl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 3:e:{if(El(t),null===e)throw Error(a(387));n=t.pendingProps,s=(i=t.memoizedState).element,Ma(e,t),qa(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Il(e,t,n,r,s=ol(Error(a(423)),t));break e}if(n!==s){t=Il(e,t,n,r,s=ol(Error(a(424)),t));break e}for(na=cs(t.stateNode.containerInfo.firstChild),ra=t,sa=!0,aa=null,r=ja(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pa(),n===s){t=Hl(e,t,r);break e}yl(e,t,n,r)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),n=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,l=s.children,rs(n,s)?l=null:null!==i&&rs(n,i)&&(t.flags|=32),kl(e,t),yl(e,t,l,r),t.child;case 6:return null===e&&ca(t),null;case 13:return Rl(e,t,r);case 4:return Ya(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=va(t,null,n,r):yl(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,vl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 7:return yl(e,t,t.pendingProps,r),t.child;case 8:case 12:return yl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Ss(wa,n._currentValue),n._currentValue=l,null!==i)if(ln(i.value,l)){if(i.children===s.children&&!Is.current){t=Hl(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=za(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ea(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=r,null!==(o=l.alternate)&&(o.lanes|=r),Ea(l,r,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}yl(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ia(t,r),n=n(s=Pa(s)),t.flags|=1,yl(e,t,n,r),t.child;case 14:return s=tl(n=t.type,t.pendingProps),jl(e,t,n,s=tl(n.type,s),r);case 15:return wl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tl(n,s),ql(e,t),t.tag=1,Ds(n)?(e=!0,Rs(t)):e=!1,Ia(t,r),al(t,n,s),ll(t,n,s,r),_l(null,t,n,!0,e,r);case 19:return Ul(e,t,r);case 22:return Nl(e,t,r)}throw Error(a(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Xc(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof s){var l=s;s=function(){var e=Wc(i);l.call(e)}}Hc(t,i,e,s)}else i=function(e,t,r,n,s){if(s){if("function"===typeof n){var a=n;n=function(){var e=Wc(i);a.call(e)}}var i=qc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[hs]=i.current,qn(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof n){var l=n;n=function(){var e=Wc(o);l.call(e)}}var o=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=o,e[hs]=o.current,qn(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,o,r,n)}),o}(r,t,e,s,n);return Wc(i)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[hs]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<At.length&&0!==t&&t<At[r].priority;r++);At.splice(r,0,e),0===r&&Mt(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(bt(t,1|r),nc(t,Je()),0===(6&Eo)&&(qo=Je()+500,qs()))}break;case 13:dc(function(){var t=Oa(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Oa(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),r=Oa(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},kt=function(){return yt},Ct=function(e,t){var r=yt;try{return yt=e,t()}finally{yt=r}},we=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=js(n);if(!s)throw Error(a(90));$(n),Q(n,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cc,Ie=dc;var ed={usingClientEntryPoint:!1,Events:[ys,vs,js,Se,_e,cc]},td={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(rd),at=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(a(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Zc(e))throw Error(a(299));var r=!1,n="",s=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,n,s),e[hs]=t.current,qn(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(a(200));return Xc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Zc(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,s=!1,i="",l=$c;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(l=r.onRecoverableError)),t=qc(t,null,e,1,null!=r?r:null,s,0,i,l),e[hs]=t.current,qn(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Yc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(a(200));return Xc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[hs]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Xc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}function b(){}function y(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var v=y.prototype=new b;v.constructor=y,x(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var s,a={},i=null,l=null;if(null!=t)for(s in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,s)&&!k.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===a[s]&&(a[s]=o[s]);return{$$typeof:r,type:e,key:i,ref:l,props:a,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var _=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case r:case n:o=!0}}if(o)return i=i(o=e),e=""===a?"."+E(o,0):a,j(i)?(s="",null!=e&&(s=e.replace(_,"$&/")+"/"),I(i,t,s,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_,"$&/")+"/")+e)),t.push(i)),1;if(o=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var d=a+E(l=e[c],c);o+=I(l,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=I(l=l.value,t,s,d=a+E(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function P(e,t,r){if(null==e)return e;var n=[],s=0;return I(e,n,"","",function(e){return t.call(r,e,s++)}),n}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},A={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:A,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,r){P(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=s,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=x({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:r,type:e.type,key:a,ref:i,props:s,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},4391:(e,t,r)=>{"use strict";var n=r(7950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4467:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(816);function s(e,t,r){return(t=(0,n.A)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},4630:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>i,Request:()=>l,Response:()=>o,default:()=>a,fetch:()=>s});var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const s=n.fetch,a=n.fetch.bind(n),i=n.Headers,l=n.Request,o=n.Response},4952:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},5736:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(7374));class a extends s.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s="";"plain"===n?s="pl":"phrase"===n?s="ph":"websearch"===n&&(s="w");const a=void 0===r?"":"(".concat(r,")");return this.url.searchParams.append(e,"".concat(s,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,r]=e;this.url.searchParams.append(t,"eq.".concat(r))}),this}not(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?"".concat(r,".or"):"or";return this.url.searchParams.append(n,"(".concat(e,")")),this}filter(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}t.default=a},5745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const n=r(400);t.DEFAULT_HEADERS={"X-Client-Info":"postgrest-js/".concat(n.version)}},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<a(s,t)))break e;e[n]=t,e[r]=s,r=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,i=s>>>1;n<i;){var l=2*(n+1)-1,o=e[l],c=l+1,d=e[c];if(0>a(o,r))c<s&&0>a(d,o)?(e[n]=d,e[c]=r,n=c):(e[n]=o,e[l]=r,n=l);else{if(!(c<s&&0>a(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,p=3,h=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function j(e){if(f=!1,v(e),!x)if(null!==n(c))x=!0,A(w);else{var t=n(d);null!==t&&O(j,t.startTime-e)}}function w(e,r){x=!1,f&&(f=!1,b(S),S=-1),h=!0;var a=p;try{for(v(r),m=n(c);null!==m&&(!(m.expirationTime>r)||e&&!I());){var i=m.callback;if("function"===typeof i){m.callback=null,p=m.priorityLevel;var l=i(m.expirationTime<=r);r=t.unstable_now(),"function"===typeof l?m.callback=l:m===n(c)&&s(c),v(r)}else s(c);m=n(c)}if(null!==m)var o=!0;else{var u=n(d);null!==u&&O(j,u.startTime-r),o=!1}return o}finally{m=null,p=a,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,C=null,S=-1,_=5,E=-1;function I(){return!(t.unstable_now()-E<_)}function P(){if(null!==C){var e=t.unstable_now();E=e;var r=!0;try{r=C(!0,e)}finally{r?N():(k=!1,C=null)}}else k=!1}if("function"===typeof y)N=function(){y(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,D=T.port2;T.port1.onmessage=P,N=function(){D.postMessage(null)}}else N=function(){g(P,0)};function A(e){C=e,k||(k=!0,N())}function O(e,r){S=g(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||h||(x=!0,A(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===n(c)&&e===n(d)&&(f?(b(S),S=-1):f=!0,O(j,a-i))):(e.sortIndex=l,r(c,e),x||h||(x=!0,A(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},7237:(e,t,r)=>{"use strict";e.exports=r(8365)},7374:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(9286));class a extends s.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=s?"".concat(s,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===r?"":r?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="undefined"===typeof n?"offset":"".concat(n,".offset"),a="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(s,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),o=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept="application/vnd.pgrst.plan+".concat(a,'; for="').concat(o,'"; options=').concat(l,";"),this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=a},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},7980:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const s=n(r(1210));t.PostgrestClient=s.default;const a=n(r(8829));t.PostgrestQueryBuilder=a.default;const i=n(r(5736));t.PostgrestFilterBuilder=i.default;const l=n(r(7374));t.PostgrestTransformBuilder=l.default;const o=n(r(9286));t.PostgrestBuilder=o.default;const c=n(r(2611));t.PostgrestError=c.default,t.default={PostgrestClient:s.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:o.default,PostgrestError:c.default}},8365:(e,t,r)=>{"use strict";var n=r(5043);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=n.useSyncExternalStore,i=n.useRef,l=n.useEffect,o=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,d){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=o(function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==d&&m.hasValue){var t=m.value;if(d(t,e))return i=t}return i=e}if(t=i,s(a,e))return t;var r=n(e);return void 0!==d&&d(t,r)?(a=e,t):(a=e,i=r)}var a,i,l=!1,o=void 0===r?null:r;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,r,n,d]);var p=a(e,u[0],u[1]);return l(function(){m.hasValue=!0,m.value=p},[p]),c(p),p}},8829:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(5736));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:s}=t;this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer="count=".concat(r)),new s.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push("count=".concat(t)),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=["resolution=".concat(r?"ignore":"merge","-duplicates")];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push("count=".concat(n)),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push("count=".concat(t)),this.headers.Prefer=r.join(","),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},9286:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(r(4630)),a=n(r(2611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,n;let s=null,i=null,l=null,o=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),a=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(s={code:"PGRST116",details:"Results contain ".concat(i.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,l=null,o=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,o=200,c="OK")}catch(d){404===e.status&&""===t?(o=204,c="No Content"):s={message:t}}if(s&&this.isMaybeSingle&&(null===(n=null===s||void 0===s?void 0:s.details)||void 0===n?void 0:n.includes("0 rows"))&&(s=null,o=200,c="OK"),s&&this.shouldThrowOnError)throw new a.default(s)}return{error:s,data:i,count:l,status:o,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,n;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""),hint:"",code:"".concat(null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:"")},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&s&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(a,i),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((t,n)=>(r.f[n](e,t),t),[])),r.u=e=>"static/js/"+e+"."+{239:"abc4e1c3",455:"63254fb6",762:"527be0fa",977:"7a919be5"}[e]+".chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="layrbase:";r.l=(n,s,a,i)=>{if(e[n])e[n].push(s);else{var l,o;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+a){l=u;break}}l||(o=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+a),l.src=n),e[n]=[s];var m=(t,r)=>{l.onerror=l.onload=null,clearTimeout(p);var s=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),s&&s.forEach(e=>e(r)),t)return t(r)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),o&&document.head.appendChild(l)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var a=new Promise((r,n)=>s=e[t]=[r,n]);n.push(s[2]=a);var i=r.p+r.u(t),l=new Error;r.l(i,n=>{if(r.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,s[1](l)}},"chunk-"+t,t)}};var t=(t,n)=>{var s,a,i=n[0],l=n[1],o=n[2],c=0;if(i.some(t=>0!==e[t])){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(o)o(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunklayrbase=self.webpackChunklayrbase||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e,t=r(5043),n=r.t(t,2),s=r(4391),a=r(7950),i=r.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const o="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Qc){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,r,n){return void 0===r&&(r=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function h(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function x(t,r,n,s){void 0===s&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,d=a.history,h=e.Pop,x=null,f=g();function g(){return(d.state||{idx:null}).idx}function b(){h=e.Pop;let t=g(),r=null==t?null:t-f;f=t,x&&x({action:h,location:v.location,delta:r})}function y(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"===typeof e?e:p(e);return r=r.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==f&&(f=0,d.replaceState(l({},d.state,{idx:f}),""));let v={get action(){return h},get location(){return t(a,d)},listen(e){if(x)throw new Error("A history only accepts one active listener");return a.addEventListener(o,b),x=e,()=>{a.removeEventListener(o,b),x=null}},createHref:e=>r(a,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,r){h=e.Push;let s=m(v.location,t,r);n&&n(s,t),f=g()+1;let l=u(s,f),o=v.createHref(s);try{d.pushState(l,"",o)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;a.location.assign(o)}i&&x&&x({action:h,location:v.location,delta:1})},replace:function(t,r){h=e.Replace;let s=m(v.location,t,r);n&&n(s,t),f=g();let a=u(s,f),l=v.createHref(s);d.replaceState(a,"",l),i&&x&&x({action:h,location:v.location,delta:0})},go:e=>d.go(e)};return v}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,r){return void 0===r&&(r="/"),b(e,t,r,!1)}function b(e,t,r,n){let s=D(("string"===typeof t?h(t):t).pathname||"/",r);if(null==s)return null;let a=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let l=0;null==i&&l<a.length;++l){let e=T(s);i=I(a[l],e,n)}return i}function y(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(c(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let l=M([n,i.relativePath]),o=r.concat(i);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:E(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of v(e.path))s(e,t,n);else s(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let i=v(n.join("/")),l=[];return l.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const j=/^:[\w-]+$/,w=3,N=2,k=1,C=10,S=-2,_=e=>"*"===e;function E(e,t){let r=e.split("/"),n=r.length;return r.some(_)&&(n+=S),t&&(n+=N),r.filter(e=>!_(e)).reduce((e,t)=>e+(j.test(t)?w:""===t?k:C),n)}function I(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,s={},a="/",i=[];for(let l=0;l<n.length;++l){let e=n[l],o=l===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&r&&!n[n.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:M([a,d.pathname]),pathnameBase:z(M([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=M([a,d.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1),o=n.reduce((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=l[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[r];return e[n]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:a,pathnameBase:i,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function A(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let r=O(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function R(e,t,r,n){let s;void 0===n&&(n=!1),"string"===typeof e?s=h(e):(s=l({},e),c(!s.pathname||!s.pathname.includes("?"),A("?","pathname","search",s)),c(!s.pathname||!s.pathname.includes("#"),A("#","pathname","hash",s)),c(!s.search||!s.search.includes("#"),A("#","search","hash",s)));let a,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)a=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:s=""}="string"===typeof e?h(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:F(n),hash:B(s)}}(s,a),u=o&&"/"!==o&&o.endsWith("/"),m=(i||"."===o)&&r.endsWith("/");return d.pathname.endsWith("/")||!u&&!m||(d.pathname+="/"),d}const M=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],H=(new Set(q),["get",...q]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}const V=t.createContext(null);const G=t.createContext(null);const $=t.createContext(null);const K=t.createContext(null);const Y=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=t.createContext(null);function J(){return null!=t.useContext(K)}function Q(){return J()||c(!1),t.useContext(K).location}function X(e){t.useContext($).static||t.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=t.useContext(Y);return e?function(){let{router:e}=ue(ce.UseNavigateStable),r=pe(de.UseNavigateStable),n=t.useRef(!1);return X(()=>{n.current=!0}),t.useCallback(function(t,s){void 0===s&&(s={}),n.current&&("number"===typeof t?e.navigate(t):e.navigate(t,W({fromRouteId:r},s)))},[e,r])}():function(){J()||c(!1);let e=t.useContext(V),{basename:r,future:n,navigator:s}=t.useContext($),{matches:a}=t.useContext(Y),{pathname:i}=Q(),l=JSON.stringify(L(a,n.v7_relativeSplatPath)),o=t.useRef(!1);return X(()=>{o.current=!0}),t.useCallback(function(t,n){if(void 0===n&&(n={}),!o.current)return;if("number"===typeof t)return void s.go(t);let a=R(t,JSON.parse(l),i,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:M([r,a.pathname])),(n.replace?s.replace:s.push)(a,n.state,n)},[r,s,l,i,e])}()}const te=t.createContext(null);function re(e,r){let{relative:n}=void 0===r?{}:r,{future:s}=t.useContext($),{matches:a}=t.useContext(Y),{pathname:i}=Q(),l=JSON.stringify(L(a,s.v7_relativeSplatPath));return t.useMemo(()=>R(e,JSON.parse(l),i,"path"===n),[e,l,i,n])}function ne(r,n,s,a){J()||c(!1);let{navigator:i}=t.useContext($),{matches:l}=t.useContext(Y),o=l[l.length-1],d=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let m,p=Q();if(n){var x;let e="string"===typeof n?h(n):n;"/"===u||(null==(x=e.pathname)?void 0:x.startsWith(u))||c(!1),m=e}else m=p;let f=m.pathname||"/",b=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");b="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=g(r,{pathname:b});let v=oe(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:M([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,a);return n&&v?t.createElement(K.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:e.Pop}},v):v}function se(){let e=function(){var e;let r=t.useContext(Z),n=me(de.UseRouteError),s=pe(de.UseRouteError);if(void 0!==r)return r;return null==(e=n.errors)?void 0:e[s]}(),r=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:a},n):null,null)}const ae=t.createElement(se,null);class ie extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Y.Provider,{value:this.props.routeContext},t.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:r,match:n,children:s}=e,a=t.useContext(V);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(Y.Provider,{value:r},s)}function oe(e,r,n,s){var a;if(void 0===r&&(r=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===r.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let l=e,o=null==(a=n)?void 0:a.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||c(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,s,a)=>{let i,c=!1,m=null,p=null;var h;n&&(i=o&&s.route.id?o[s.route.id]:void 0,m=s.route.errorElement||ae,d&&(u<0&&0===a?(h="route-fallback",!1||he[h]||(he[h]=!0),c=!0,p=null):u===a&&(c=!0,p=s.route.hydrateFallbackElement||null)));let x=r.concat(l.slice(0,a+1)),f=()=>{let r;return r=i?m:c?p:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(le,{match:s,routeContext:{outlet:e,matches:x,isDataRoute:null!=n},children:r})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?t.createElement(ie,{location:n.location,revalidation:n.revalidation,component:m,error:i,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ue(e){let r=t.useContext(V);return r||c(!1),r}function me(e){let r=t.useContext(G);return r||c(!1),r}function pe(e){let r=function(){let e=t.useContext(Y);return e||c(!1),e}(),n=r.matches[r.matches.length-1];return n.route.id||c(!1),n.route.id}const he={};function xe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function fe(e){let{to:r,replace:n,state:s,relative:a}=e;J()||c(!1);let{future:i,static:l}=t.useContext($),{matches:o}=t.useContext(Y),{pathname:d}=Q(),u=ee(),m=R(r,L(o,i.v7_relativeSplatPath),d,"path"===a),p=JSON.stringify(m);return t.useEffect(()=>u(JSON.parse(p),{replace:n,state:s,relative:a}),[u,p,a,n,s]),null}function ge(e){return function(e){let r=t.useContext(Y).outlet;return r?t.createElement(te.Provider,{value:e},r):r}(e.context)}function be(e){c(!1)}function ye(r){let{basename:n="/",children:s=null,location:a,navigationType:i=e.Pop,navigator:l,static:o=!1,future:d}=r;J()&&c(!1);let u=n.replace(/^\/*/,"/"),m=t.useMemo(()=>({basename:u,navigator:l,static:o,future:W({v7_relativeSplatPath:!1},d)}),[u,d,l,o]);"string"===typeof a&&(a=h(a));let{pathname:p="/",search:x="",hash:f="",state:g=null,key:b="default"}=a,y=t.useMemo(()=>{let e=D(p,u);return null==e?null:{location:{pathname:e,search:x,hash:f,state:g,key:b},navigationType:i}},[u,p,x,f,g,b,i]);return null==y?null:t.createElement($.Provider,{value:m},t.createElement(K.Provider,{children:s,value:y}))}function ve(e){let{children:t,location:r}=e;return ne(je(t),r)}new Promise(()=>{});t.Component;function je(e,r){void 0===r&&(r=[]);let n=[];return t.Children.forEach(e,(e,s)=>{if(!t.isValidElement(e))return;let a=[...r,s];if(e.type===t.Fragment)return void n.push.apply(n,je(e.props.children,a));e.type!==be&&c(!1),e.props.index&&e.props.children&&c(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=je(e.props.children,a)),n.push(i)}),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Qc){}new Map;const Ce=n.startTransition;i.flushSync,n.useId;function Se(e){let{basename:r,children:n,future:s,window:a}=e,i=t.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:a,v5Compat:!0})&&(l={}),x(function(e,t){let{pathname:r,search:n,hash:s}=e.location;return m("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:p(t)},null,l)));let o=i.current,[c,d]=t.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},h=t.useCallback(e=>{u&&Ce?Ce(()=>d(e)):d(e)},[d,u]);return t.useLayoutEffect(()=>o.listen(h),[o,h]),t.useEffect(()=>xe(s),[s]),t.createElement(ye,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:o,future:s})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=t.forwardRef(function(e,r){let n,{onClick:s,relative:a,reloadDocument:i,replace:l,state:o,target:d,to:u,preventScrollReset:m,viewTransition:h}=e,x=Ne(e,ke),{basename:f}=t.useContext($),g=!1;if("string"===typeof u&&Ee.test(u)&&(n=u,_e))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=D(t.pathname,f);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:g=!0}catch(Qc){}let b=function(e,r){let{relative:n}=void 0===r?{}:r;J()||c(!1);let{basename:s,navigator:a}=t.useContext($),{hash:i,pathname:l,search:o}=re(e,{relative:n}),d=l;return"/"!==s&&(d="/"===l?s:M([s,l])),a.createHref({pathname:d,search:o,hash:i})}(u,{relative:a}),y=function(e,r){let{target:n,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=void 0===r?{}:r,c=ee(),d=Q(),u=re(e,{relative:l});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let r=void 0!==s?s:p(d)===p(u);c(e,{replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,a,n,e,i,l,o])}(u,{replace:l,state:o,target:d,preventScrollReset:m,relative:a,viewTransition:h});return t.createElement("a",we({},x,{href:n||b,onClick:g||i?s:function(e){s&&s(e),e.defaultPrevented||y(e)},ref:r,target:d}))});var Pe,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var De=r(4467);function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach(function(t){(0,De.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class Le extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class Re extends Le{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Me extends Le{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ze extends Le{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fe;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Fe||(Fe={}));var Be=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};class Ue{constructor(e){let{headers:t={},customFetch:n,region:s=Fe.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}})(n)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return Be(this,void 0,void 0,function*(){try{const{headers:n,method:s,body:a}=t;let i,l={},{region:o}=t;o||(o=this.region),o&&"any"!==o&&(l["x-region"]=o),a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",i=a):"string"===typeof a?(l["Content-Type"]="text/plain",i=a):"undefined"!==typeof FormData&&a instanceof FormData?i=a:(l["Content-Type"]="application/json",i=JSON.stringify(a)));const c=yield this.fetch("".concat(this.url,"/").concat(e),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:i}).catch(e=>{throw new Re(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new Me(c);if(!c.ok)throw new ze(c);let u,m=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return u="application/json"===m?yield c.json():"application/octet-stream"===m?yield c.blob():"text/event-stream"===m?c:"multipart/form-data"===m?yield c.formData():yield c.text(),{data:u,error:null}}catch(n){return{data:null,error:n}}})}}var qe=r(7980);const{PostgrestClient:He,PostgrestQueryBuilder:We,PostgrestFilterBuilder:Ve,PostgrestTransformBuilder:Ge,PostgrestBuilder:$e,PostgrestError:Ke}=qe;let Ye;Ye="undefined"===typeof window?r(4952):window.WebSocket;const Ze=Ye,Je={"X-Client-Info":"realtime-js/".concat("2.11.10")};var Qe,Xe,et,tt,rt,nt;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(Qe||(Qe={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Xe||(Xe={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(et||(et={})),function(e){e.websocket="websocket"}(tt||(tt={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(rt||(rt={}));class st{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(e.slice(a,a+n));a+=n;const l=r.decode(e.slice(a,a+s));a+=s;return{ref:null,topic:i,event:l,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}}class at{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(nt||(nt={}));const it=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((r,s)=>(r[s]=lt(s,e,t,n),r),{})},lt=(e,t,r,n)=>{const s=t.find(t=>t.name===e),a=null===s||void 0===s?void 0:s.type,i=r[e];return a&&!n.includes(a)?ot(a,i):ct(i)},ot=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return pt(t,r)}switch(e){case nt.bool:return dt(t);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return ut(t);case nt.json:case nt.jsonb:return mt(t);case nt.timestamp:return ht(t);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:default:return ct(t)}},ct=e=>e,dt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ut=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},mt=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},pt=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const a=e.slice(1,r);try{n=JSON.parse("["+a+"]")}catch(s){n=a?a.split(","):[]}return n.map(e=>ot(t,e))}return e},ht=e=>"string"===typeof e?e.replace(" ","T"):e,xt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class ft{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gt,bt,yt,vt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(gt||(gt={}));class jt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jt.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=jt.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=jt.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const s=this.cloneDeep(e),a=this.transformState(t),i={},l={};return this.map(s,(e,t)=>{a[e]||(l[e]=t)}),this.map(a,(e,t)=>{const r=s[e];if(r){const n=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),o=r.filter(e=>n.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),o.length>0&&(l[e]=o)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:l},r,n)}static syncDiff(e,t,r,n){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,(t,n)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),a.length>0){const r=e[t].map(e=>e.presence_ref),n=a.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,a,n)}),this.map(a,(t,r)=>{let s=e[t];if(!s)return;const a=r.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,n(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(bt||(bt={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(yt||(yt={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(vt||(vt={}));class wt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ft(this,et.join,this.params,this.timeout),this.rejoinTimer=new at(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=Xe.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(et.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new jt(this),this.broadcastEndpointURL=xt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a,private:i}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(vt.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(vt.CLOSED));const l={},o={broadcast:s,presence:a,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],private:i};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:o},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,s=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,a=[];for(let n=0;n<s;n++){const s=t[n],{filter:{event:i,schema:l,table:o,filter:c}}=s,d=r&&r[n];if(!d||d.event!==i||d.schema!==l||d.table!==o||d.filter!==c)return this.unsubscribe(),this.state=Xe.errored,void(null===e||void 0===e||e(vt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(vt.SUBSCRIBED))}null===e||void 0===e||e(vt.SUBSCRIBED)}).receive("error",t=>{this.state=Xe.errored,null===e||void 0===e||e(vt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(vt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:a,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Xe.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(et.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const n=new ft(this,et.leave,{},e);n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const n=new AbortController,s=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),a}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let n=new ft(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;const a=e.toLocaleLowerCase(),{close:i,error:l,leave:o,join:c}=et;if(r&&[i,l,o,c].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===a}).map(e=>e.callback(d,r)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var r,n,s,i,l,o;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return a&&(null===(n=t.ids)||void 0===n?void 0:n.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const r=null===(l=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===l?void 0:l.toLocaleLowerCase();return"*"===r||r===(null===(o=null===t||void 0===t?void 0:t.event)||void 0===o?void 0:o.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:n,type:s,errors:a}=e,i={schema:t,table:r,commit_timestamp:n,eventType:s,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,r){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&wt.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(et.close,{},e)}_onError(e){this._on(et.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=it(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=it(e.columns,e.old_record)),t}}const Nt=()=>{};class kt{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Je,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nt,this.ref=0,this.logger=Nt,this.conn=null,this.sendBuffer=[],this.serializer=new st,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint="".concat(e,"/").concat(tt.websocket),this.httpEndpoint=xt(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new at(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Ze),this.transport){const e="undefined"!==typeof window&&this.transport===window.WebSocket;return this.conn=e?new this.transport(this.endpointURL()):new this.transport(this.endpointURL(),void 0,{headers:this.headers}),void this.setupConnection()}this.conn=new Ct(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(t=>t._joinRef!==e._joinRef),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qe.connecting:return rt.Connecting;case Qe.open:return rt.Open;case Qe.closing:return rt.Closing;default:return rt.Closed}}isConnected(){return this.connectionState()===rt.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const r="realtime:".concat(e),n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new wt("realtime:".concat(e),t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(r," (").concat(s,")"),n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e,version:this.headers&&this.headers["X-Client-Info"]}),t.joinedOnce&&t._isJoined()&&t._push(et.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:r,payload:n,ref:s}=e;"phoenix"===t&&"phx_reply"===r&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive","".concat(n.status||""," ").concat(t," ").concat(r," ").concat(s&&"("+s+")"||""),n),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,s)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){if(this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(et.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Ct{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qe.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class St extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _t(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Et extends St{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class It extends St{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Pt=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};const Tt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},Dt=e=>{if(Array.isArray(e))return e.map(e=>Dt(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[r,n]=e;const s=r.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=Dt(n)}),t};var At=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};const Ot=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Lt=(e,t,n)=>At(void 0,void 0,void 0,function*(){const s=yield Pt(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,4630))).Response:Response});e instanceof s&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then(r=>{t(new Et(Ot(r),e.status||500))}).catch(e=>{t(new It(Ot(e),e))}):t(new It(Ot(e),e))});function Rt(e,t,r,n,s,a){return At(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(r,((e,t,r,n)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))})(t,n,s,a)).then(e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>Lt(e,l,n))})})}function Mt(e,t,r,n){return At(this,void 0,void 0,function*(){return Rt(e,"GET",t,r,n)})}function zt(e,t,r,n,s){return At(this,void 0,void 0,function*(){return Rt(e,"POST",t,n,s,r)})}function Ft(e,t,r,n,s){return At(this,void 0,void 0,function*(){return Rt(e,"DELETE",t,n,s,r)})}var Bt=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};const Ut={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ht{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=Tt(n)}uploadOrUpdate(e,t,r,n){return Bt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},qt),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const l=a.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,l&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),(null===n||void 0===n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const o=this._removeEmptyFolders(t),c=this._getFinalPath(o),d=yield this.fetch("".concat(this.url,"/object/").concat(c),Object.assign({method:e,body:s,headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:o,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(s){if(_t(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Bt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:qt.upsert},n),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);const l=yield this.fetch(i.toString(),{method:"PUT",body:e,headers:a}),o=yield l.json();if(l.ok)return{data:{path:s,fullPath:o.Key},error:null};return{data:null,error:o}}catch(l){if(_t(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const s=yield zt(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(r),{},{headers:n}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new St("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}update(e,t,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Bt(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield zt(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Bt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield zt(this.fetch,"".concat(this.url,"/object/sign/").concat(n),Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return s={signedUrl:encodeURI("".concat(this.url).concat(s.signedURL).concat(a))},{data:s,error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Bt(this,void 0,void 0,function*(){try{const n=yield zt(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),s=(null===r||void 0===r?void 0:r.download)?"&download=".concat(!0===r.download?"":r.download):"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(s)):null})),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}download(e,t){return Bt(this,void 0,void 0,function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),s=n?"?".concat(n):"";try{const t=this._getFinalPath(e),n=yield Mt(this.fetch,"".concat(this.url,"/").concat(r,"/").concat(t).concat(s),{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(a){if(_t(a))return{data:null,error:a};throw a}})}info(e){return Bt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Mt(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:Dt(e),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}exists(e){return Bt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return At(this,void 0,void 0,function*(){return Rt(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(r){if(_t(r)&&r instanceof It){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==s&&n.push(s);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&n.push(i);let l=n.join("&");return""!==l&&(l="?".concat(l)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(r).concat(l))}}}remove(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}list(e,t,r){return Bt(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ut),t),{prefix:e||""});return{data:yield zt(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),n,{headers:this.headers},r),error:null}}catch(n){if(_t(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e)}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const Wt={"X-Client-Info":"storage-js/".concat("2.7.1")};var Vt=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};class Gt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},Wt),t),this.fetch=Tt(r)}listBuckets(){return Vt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(_t(e))return{data:null,error:e};throw e}})}getBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Mt(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Vt(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Vt(this,void 0,void 0,function*(){try{const r=yield function(e,t,r,n,s){return At(this,void 0,void 0,function*(){return Rt(e,"PUT",t,n,s,r)})}(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:r,error:null}}catch(r){if(_t(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield zt(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Vt(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(_t(t))return{data:null,error:t};throw t}})}}class $t extends Gt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new Ht(this.url,this.headers,e,this.fetch)}}let Kt="";Kt="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Yt={headers:{"X-Client-Info":"supabase-js-".concat(Kt,"/").concat("2.50.0")}},Zt={schema:"public"},Jt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qt={};var Xt=r(4630),er=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};const tr=e=>{let t;return t=e||("undefined"===typeof fetch?Xt.default:fetch),function(){return t(...arguments)}},rr=(e,t,r)=>{const n=tr(r),s="undefined"===typeof Headers?Xt.Headers:Headers;return(r,a)=>er(void 0,void 0,void 0,function*(){var i;const l=null!==(i=yield t())&&void 0!==i?i:e;let o=new s(null===a||void 0===a?void 0:a.headers);return o.has("apikey")||o.set("apikey",e),o.has("Authorization")||o.set("Authorization","Bearer ".concat(l)),n(r,Object.assign(Object.assign({},a),{headers:o}))})};var nr=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};const sr="2.70.0",ar=3e4,ir=9e4,lr={"X-Client-Info":"gotrue-js/".concat(sr)},or="X-Supabase-Api-Version",cr={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},dr=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ur extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function mr(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class pr extends ur{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class hr extends ur{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xr extends ur{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class fr extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class gr extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class br extends xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yr extends xr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vr extends xr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jr extends xr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function wr(e){return mr(e)&&"AuthRetryableFetchError"===e.name}class Nr extends xr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class kr extends xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sr=" \t\n\r=".split(""),_r=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Sr.length;t+=1)e[Sr[t].charCodeAt(0)]=-2;for(let t=0;t<Cr.length;t+=1)e[Cr[t].charCodeAt(0)]=t;return e})();function Er(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Cr[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Cr[e]),t.queuedBits-=6}}function Ir(e,t,r){const n=_r[e];if(!(n>-1)){if(-2===n)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Pr(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(0===(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)Ir(e.charCodeAt(i),s,a);return t.join("")}function Tr(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function Dr(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Tr(n,t)}}function Ar(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Ir(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Or(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Er(e,r,n)),Er(null,r,n),t.join("")}const Lr=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Rr={tested:!1,writable:!1},Mr=()=>{if(!Lr())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(Qc){return!1}if(Rr.tested)return Rr.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rr.tested=!0,Rr.writable=!0}catch(Qc){Rr.tested=!0,Rr.writable=!1}return Rr.writable};const zr=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4630)).then(e=>{let{default:r}=e;return r(...t)})}:fetch),function(){return t(...arguments)}},Fr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Br=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},Ur=async(e,t)=>{await e.removeItem(t)};class qr{constructor(){this.promise=new qr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Hr(e){const t=e.split(".");if(3!==t.length)throw new kr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!dr.test(t[r]))throw new kr("JWT not in base64url format");return{header:JSON.parse(Pr(t[0])),payload:JSON.parse(Pr(t[1])),signature:Ar(t[2]),raw:{header:t[0],payload:t[1]}}}function Wr(e){return("0"+e.toString(16)).substr(-2)}async function Vr(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,Wr).join("")}();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fr(e,"".concat(t,"-code-verifier"),s);const a=await Vr(n);return[a,n===a?"plain":"s256"]}qr.promiseConstructor=Promise;const $r=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Kr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yr(e){if(!Kr.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Zr=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};const Jr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qr=[502,503,504];async function Xr(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new jr(Jr(e),0);if(Qr.includes(e.status))throw new jr(Jr(e),e.status);let n,s;try{n=await e.json()}catch(Qc){throw new hr(Jr(Qc),Qc)}const a=function(e){const t=e.headers.get(or);if(!t)return null;if(!t.match($r))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(Qc){return null}}(e);if(a&&a.getTime()>=cr.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?s=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(s=n.error_code),s){if("weak_password"===s)throw new Nr(Jr(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new fr}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Nr(Jr(n),e.status,n.weak_password.reasons);throw new pr(Jr(n),e.status||500,s)}async function en(e,t,r,n){var s;const a=Object.assign({},null===n||void 0===n?void 0:n.headers);a[or]||(a[or]=cr.name),(null===n||void 0===n?void 0:n.jwt)&&(a.Authorization="Bearer ".concat(n.jwt));const i=null!==(s=null===n||void 0===n?void 0:n.query)&&void 0!==s?s:{};(null===n||void 0===n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",o=await async function(e,t,r,n,s,a){const i=((e,t,r,n)=>{const s={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))})(t,n,s,a);let l;try{l=await e(r,Object.assign({},i))}catch(Qc){throw console.error(Qc),new jr(Jr(Qc),0)}l.ok||await Xr(l);if(null===n||void 0===n?void 0:n.noResolveJson)return l;try{return await l.json()}catch(Qc){await Xr(Qc)}}(e,t,r+l,{headers:a,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(o):{data:Object.assign({},o),error:null}}function tn(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function rn(e){const t=tn(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function nn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function sn(e){return{data:e,error:null}}function an(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=Zr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function ln(e){return e}const on=["global","local","others"];var cn=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};class dn{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=zr(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on[0];if(on.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(on.join(", ")));try{return await en(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await en(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:nn})}catch(r){if(mr(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=cn(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await en(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:n,headers:this.headers,xform:an,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(mr(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await en(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:nn})}catch(t){if(mr(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,s,a,i,l;try{const o={nextPage:null,lastPage:0,total:0},c=await en(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:ln});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,m=null!==(l=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==l?l:[];return m.length>0&&(m.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);o["".concat(r,"Page")]=t}),o.total=parseInt(u)),{data:Object.assign(Object.assign({},d),o),error:null}}catch(o){if(mr(o))return{data:{users:[]},error:o};throw o}}async getUserById(e){Yr(e);try{return await en(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:nn})}catch(t){if(mr(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Yr(e);try{return await en(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:nn})}catch(r){if(mr(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Yr(e);try{return await en(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:nn})}catch(r){if(mr(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yr(e.userId);try{const{data:t,error:r}=await en(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(mr(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Yr(e.userId),Yr(e.id);try{return{data:await en(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(mr(t))return{data:null,error:t};throw t}}}const un={getItem:e=>Mr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Mr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Mr()&&globalThis.localStorage.removeItem(e)}};function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const pn=!!(globalThis&&Mr()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class hn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xn extends hn{}async function fn(e,t,r){pn&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),pn&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw pn&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new xn('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(pn)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Qc){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Qc)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}pn&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{pn&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Qc){"undefined"!==typeof self&&(self.globalThis=self)}}();const gn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lr,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bn(e,t,r){return await r()}class yn{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yn.nextInstanceID,yn.nextInstanceID+=1,this.instanceID>0&&Lr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},gn),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new dn({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=zr(n.fetch),this.lock=n.lock||bn,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Lr()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=fn:this.lock=bn,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Mr()?this.storage=un:(this.memoryStorage={},this.storage=mn(this.memoryStorage)):(this.memoryStorage={},this.storage=mn(this.memoryStorage)),Lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Qc){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Qc)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(sr,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(Qc){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Lr()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return mr(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return mr(t)?{error:t}:{error:new hr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const s=await en(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:tn}),{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const l=a.session,o=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:o,session:l},error:null}}catch(s){if(mr(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,n;try{let s;if("email"in e){const{email:r,password:n,options:a}=e;let i=null,l=null;"pkce"===this.flowType&&([i,l]=await Gr(this.storage,this.storageKey)),s=await en(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:l},xform:tn})}else{if(!("phone"in e))throw new br("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await en(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(r=null===i||void 0===i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null===i||void 0===i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:tn})}}const{data:a,error:i}=s;if(i||!a)return{data:{user:null,session:null},error:i};const l=a.session,o=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:o,session:l},error:null}}catch(s){if(mr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:s}=e;t=await en(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:rn})}else{if(!("phone"in e))throw new br("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:s}=e;t=await en(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:rn})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new gr}}catch(t){if(mr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,r,n,s,a,i,l,o,c,d,u,m;let p,h;if("message"in e)p=e.message,h=e.signature;else{const{chain:u,wallet:m,statement:x,options:f}=e;let g;if(Lr())if("object"===typeof m)g=m;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");g=e.solana}else{if("object"!==typeof m||!(null===f||void 0===f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=m}const b=new URL(null!==(t=null===f||void 0===f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in g&&g.signIn){const e=await g.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===f||void 0===f?void 0:f.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),x?{statement:x}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),h=t.signature}else{if(!("signMessage"in g)||"function"!==typeof g.signMessage||!("publicKey"in g)||"object"!==typeof g||!g.publicKey||!("toBase58"in g.publicKey)||"function"!==typeof g.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=["".concat(b.host," wants you to sign in with your Solana account:"),g.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1","URI: ".concat(b.href),"Issued At: ".concat(null!==(n=null===(r=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()),...(null===(s=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===s?void 0:s.notBefore)?["Not Before: ".concat(f.signInWithSolana.notBefore)]:[],...(null===(a=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(f.signInWithSolana.expirationTime)]:[],...(null===(i=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(f.signInWithSolana.chainId)]:[],...(null===(l=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===l?void 0:l.nonce)?["Nonce: ".concat(f.signInWithSolana.nonce)]:[],...(null===(o=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===o?void 0:o.requestId)?["Request ID: ".concat(f.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await g.signMessage((new TextEncoder).encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");h=e}}try{const{data:t,error:r}=await en(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Or(h)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(m=e.options)||void 0===m?void 0:m.captchaToken}}:null),xform:tn});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new gr}}catch(x){if(mr(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const t=await Br(this.storage,"".concat(this.storageKey,"-code-verifier")),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:s}=await en(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tn});if(await Ur(this.storage,"".concat(this.storageKey,"-code-verifier")),s)throw s;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:s}):{data:{user:null,session:null,redirectType:null},error:new gr}}catch(s){if(mr(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:s,nonce:a}=e,i=await en(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:r,id_token:n,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:tn}),{data:l,error:o}=i;return o?{data:{user:null,session:null},error:o}:l&&l.session&&l.user?(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:o}):{data:{user:null,session:null},error:new gr}}catch(t){if(mr(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,s,a;try{if("email"in e){const{email:n,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await Gr(this.storage,this.storageKey));const{error:l}=await en(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:n,data:null!==(t=null===s||void 0===s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(r=null===s||void 0===s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:l}=await en(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(s=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(a=null===r||void 0===r?void 0:r.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:l}}throw new br("You must provide either an email or phone number.")}catch(i){if(mr(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,r;try{let n,s;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:a,error:i}=await en(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:n,xform:tn});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,o=a.user;return(null===l||void 0===l?void 0:l.access_token)&&(await this._saveSession(l),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:o,session:l},error:null}}catch(n){if(mr(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let s=null,a=null;return"pkce"===this.flowType&&([s,a]=await Gr(this.storage,this.storageKey)),await en(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:sn})}catch(s){if(mr(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new fr;const{error:n}=await en(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(mr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:r,type:n,options:s}=e,{error:a}=await en(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:r,type:n,options:s}=e,{data:a,error:i}=await en(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new br("You must provide either an email or phone number and a type")}catch(t){if(mr(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(Qc){}})()),r}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(Qc){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<ir;if(this._debug("#__loadSession()","session has".concat(r?"":" not"," expired"),"expires_at",e.expires_at),!r){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await en(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:nn}):await this._useSession(async e=>{var t,r,n;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await en(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:nn}):{data:{user:null},error:new fr}})}catch(t){if(mr(t))return function(e){return mr(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Ur(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async r=>{const{data:n,error:s}=r;if(s)throw s;if(!n.session)throw new fr;const a=n.session;let i=null,l=null;"pkce"===this.flowType&&null!=e.email&&([i,l]=await Gr(this.storage,this.storageKey));const{data:o,error:c}=await en(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:l}),jwt:a.access_token,xform:nn});if(c)throw c;return a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(mr(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fr;const t=Date.now()/1e3;let r=t,n=!0,s=null;const{payload:a}=Hr(e.access_token);if(a.exp&&(r=a.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:n,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(mr(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:s}=t;if(s)throw s;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new fr;const{session:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(mr(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Lr())throw new yr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new vr("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new yr("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vr("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:s,refresh_token:a,expires_in:i,expires_at:l,token_type:o}=e;if(!s||!i||!a||!o)throw new yr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;l&&(u=parseInt(l));const m=u-c;1e3*m<=ar&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(m,"s, should have been closer to ").concat(d,"s"));const p=u-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,u,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,u,c);const{data:h,error:x}=await this._getUser(s);if(x)throw x;const f={provider_token:r,provider_refresh_token:n,access_token:s,expires_in:d,expires_at:u,refresh_token:a,token_type:o,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(r){if(mr(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Br(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return{error:s};const a=null===(r=n.session)||void 0===r?void 0:r.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return mr(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ur(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:s}=t;if(s)throw s;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(s){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await Gr(this.storage,this.storageKey,!0));try{return await en(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(mr(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(mr(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,s,a,i;const{data:l,error:o}=t;if(o)throw o;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await en(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=l.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return Lr()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(mr(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:a}=t;if(a)throw a;return await en(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(mr(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await function(e,t){const r=new Promise((r,n)=>{(async()=>{for(let s=0;s<1/0;s++)try{const n=await e(s);if(!t(s,null,n))return void r(n)}catch(Qc){if(!t(s,Qc))return void n(Qc)}})()});return r}(async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await en(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:tn})),(e,t)=>{const n=200*Math.pow(2,e);return t&&wr(t)&&Date.now()+n-r<ar})}catch(r){if(this._debug(t,"error",r),mr(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Lr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Br(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r))return this._debug(t,"session is not valid"),void(null!==r&&await this._removeSession());const n=1e3*(null!==(e=r.expires_at)&&void 0!==e?e:1/0)-Date.now()<ir;if(this._debug(t,"session has".concat(n?"":" not"," expired with margin of ").concat(ir,"s")),n){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),wr(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(t,"error",r),void console.error(r)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new fr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(n,"begin");try{this.refreshingDeferred=new qr;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new fr;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(s){if(this._debug(n,"error",s),mr(s)){const e={session:null,error:s};return wr(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n="#_notifyAllSubscribers(".concat(e,")");this._debug(n,"begin",t,"broadcast = ".concat(r));try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(Qc){n.push(Qc)}});if(await Promise.all(s),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Fr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ur(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Lr()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Qc){console.error("removing visibilitychange callback failed",Qc)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ar);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/ar);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(n," ticks, a tick lasts ").concat(ar,"ms, refresh threshold is ").concat(3," ticks")),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(Qc){console.error("Auto refresh tick failed with error. This is likely a transient error.",Qc)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Qc){if(!(Qc.isAcquireTimeout||Qc instanceof hn))throw Qc;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Lr()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=["provider=".concat(encodeURIComponent(t))];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push("redirect_to=".concat(encodeURIComponent(r.redirectTo))),(null===r||void 0===r?void 0:r.scopes)&&n.push("scopes=".concat(encodeURIComponent(r.scopes))),"pkce"===this.flowType){const[e,t]=await Gr(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push("skip_http_redirect=".concat(r.skipBrowserRedirect)),"".concat(e,"?").concat(n.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await en(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(mr(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:o}=await en(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token});return o?{data:null,error:o}:("totp"===e.factorType&&(null===(n=null===l||void 0===l?void 0:l.totp)||void 0===n?void 0:n.qr_code)&&(l.totp.qr_code="data:image/svg+xml;utf-8,".concat(l.totp.qr_code)),{data:l,error:null})})}catch(t){if(mr(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:i}=await en(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(mr(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?{data:null,error:s}:await en(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(mr(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],n=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),s=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:n,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:s}=e;if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Hr(n.access_token);let i=null;a.aal&&(i=a.aal);let l=i;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(l="aal2");return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>Date.now())return t;const{data:r,error:n}=await en(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(n)throw n;if(!r.keys||0===r.keys.length)throw new kr("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),t=r.keys.find(t=>t.kid===e),!t)throw new kr("No matching signing key found in JWKS");return t}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:n,payload:s,signature:a,raw:{header:i,payload:l}}=Hr(r);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp),!n.kid||"HS256"===n.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:s,header:n,signature:a},error:null}}const o=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),c=await this.fetchJwk(n.kid,t),d=await crypto.subtle.importKey("jwk",c,o,!0,["verify"]);if(!await crypto.subtle.verify(o,d,a,function(e){const t=[];return Dr(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(l))))throw new kr("Invalid JWT signature");return{data:{claims:s,header:n,signature:a},error:null}}catch(r){if(mr(r))return{data:null,error:r};throw r}}}yn.nextInstanceID=0;const vn=yn;class jn extends vn{constructor(e){super(e)}}var wn=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{o(n.next(e))}catch(Qc){a(Qc)}}function l(e){try{o(n.throw(e))}catch(Qc){a(Qc)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,l)}o((n=n.apply(e,t||[])).next())})};class Nn{constructor(e,t,r){var n,s,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(l=e).endsWith("/")?l:l+"/";var l;const o=new URL(i);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c="sb-".concat(o.hostname.split(".")[0],"-auth-token"),d=function(e,t){var r,n;const{db:s,auth:a,realtime:i,global:l}=e,{db:o,auth:c,realtime:d,global:u}=t,m={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},null!==(r=null===u||void 0===u?void 0:u.headers)&&void 0!==r?r:{}),null!==(n=null===l||void 0===l?void 0:l.headers)&&void 0!==n?n:{})}),accessToken:()=>nr(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}(null!==r&&void 0!==r?r:{},{db:Zt,realtime:Qt,auth:Object.assign(Object.assign({},Jt),{storageKey:c}),global:Yt});this.storageKey=null!==(n=d.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(s=d.global.headers)&&void 0!==s?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=rr(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new He(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ue(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $t(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return wn(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:i,storageKey:l,flowType:o,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new jn({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:l,autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:i,flowType:o,lock:c,debug:d,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new kt(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}const kn=((e,t,r)=>new Nn(e,t,r))("https://pthzpmwjsoetvbwggdbd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0aHpwbXdqc29ldHZid2dnZGJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MTUxNjUsImV4cCI6MjA2NTk5MTE2NX0.LpJU5ln5EN0l_chKYolNv_81XmZPp7doMb9d4cutU-s",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce",redirectTo:"https://layrbase.vercel.app/auth/callback"}});var Cn=r(579);const Sn=(0,t.createContext)({}),_n=()=>{const e=(0,t.useContext)(Sn);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},En=(e,t)=>{const r=new Promise((e,r)=>setTimeout(()=>r(new Error("Request timed out after ".concat(t," ms"))),t));return Promise.race([e,r])},In=e=>{let{children:r}=e;const[n,s]=(0,t.useState)(null),[a,i]=(0,t.useState)(null),[l,o]=(0,t.useState)([]),[c,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(!0),[p,h]=(0,t.useState)(null),x=async e=>{try{const t=kn.from("user_profiles").select("*").eq("id",e).single(),{data:r,error:n}=await En(t,15e3);if(n)throw n;return r}catch(t){throw console.error("Error fetching user profile:",t),t}},f=async()=>{try{const t=kn.rpc("get_user_organizations"),{data:r,error:n}=await En(t,15e3);if(n){var e;console.error("Error calling get_user_organizations RPC:",n),console.log("Trying fallback query for user organizations...");const t=kn.from("user_organizations").select("\n            organization_id,\n            role,\n            is_active,\n            organizations (\n              id,\n              name,\n              slug\n            )\n          ").eq("user_id",null===(e=(await kn.auth.getUser()).data.user)||void 0===e?void 0:e.id).eq("is_active",!0),{data:r,error:s}=await En(t,15e3);return s?(console.error("Fallback query also failed:",s),[]):r.map(e=>{var t,r;return{organization_id:e.organization_id,organization_name:null===(t=e.organizations)||void 0===t?void 0:t.name,organization_slug:null===(r=e.organizations)||void 0===r?void 0:r.slug,role:e.role,is_active:e.is_active}})}const s=await Promise.all((r||[]).map(async e=>{try{const{count:t,error:r}=await kn.from("user_organizations").select("*",{count:"exact",head:!0}).eq("organization_id",e.organization_id).eq("is_active",!0);return r?(console.error("Error getting member count for org:",e.organization_id,r),Oe(Oe({},e),{},{member_count:0})):Oe(Oe({},e),{},{member_count:t||0})}catch(n){return console.error("Error getting member count for org:",e.organization_id,n),Oe(Oe({},e),{},{member_count:0})}}));return s}catch(t){throw console.error("Error fetching user organizations:",t),t}};(0,t.useEffect)(()=>((async()=>{try{h(null),console.log("Initializing auth...");const{data:{session:e}}=await kn.auth.getSession();if(null!==e&&void 0!==e&&e.user){console.log("User found:",e.user.email),s(e.user);const t=await x(e.user.id);i(t),console.log("User profile loaded");const r=await f();o(r),console.log("User organizations loaded"),r&&r.length>0&&(d(r[0]),console.log("Set current organization"))}else console.log("No user session found")}catch(e){console.error("Error during auth initialization:",e),h(e)}finally{console.log("Auth initialization complete, setting loading to false"),m(!1)}})(),()=>{}),[]);const g={user:n,userProfile:a,organizations:l,currentOrganization:c,loading:u,authError:p,signUp:async e=>{let{email:t,password:r,firstName:n,lastName:s}=e;try{const{data:e,error:a}=await kn.auth.signUp({email:t,password:r,options:{data:{first_name:n,last_name:s},emailRedirectTo:"https://layrbase.vercel.app/auth/callback"}});if(a)throw a;return{data:e,error:null}}catch(a){return{data:null,error:a}}},signIn:async e=>{let{email:t,password:r}=e;try{const{data:e,error:a}=await kn.auth.signInWithPassword({email:t,password:r});if(a)throw a;if(e.user){s(e.user);try{const t=await x(e.user.id);i(t);const r=await f();o(r),r&&r.length>0&&d(r[0])}catch(n){console.error("Error fetching user data after sign in:",n)}}return{data:e,error:null}}catch(a){return{data:null,error:a}}},signOut:async()=>{try{const{error:e}=await kn.auth.signOut();if(e)throw e;s(null),i(null),o([]),d(null)}catch(e){console.error("Error signing out:",e)}},createOrganization:async e=>{try{const t=await kn.auth.getUser();console.log("Current Supabase user before org creation:",t);const{data:r,error:n}=await kn.from("organizations").insert([{name:e.name,slug:e.slug}]).select().single();if(console.log("Organization insert result:",{org:r,orgError:n}),n)return console.error("Error inserting organization:",n),{data:null,error:n};const s=t.data.user,{error:a}=await kn.from("user_organizations").insert([{user_id:s.id,organization_id:r.id,role:"owner"}]);if(console.log("User organization insert result:",{userOrgError:a}),a)return console.error("Error inserting user organization:",a),{data:null,error:a};const i=await f();return o(i),d({organization_id:r.id,organization_name:r.name,organization_slug:r.slug,role:"owner"}),{data:r,error:null}}catch(t){return console.error("Error in manual organization creation:",t),{data:null,error:t}}},joinOrganization:async e=>{try{const{data:t,error:r}=await kn.from("organization_invitations").select("*").eq("token",e).is("accepted_at",null).gt("expires_at",(new Date).toISOString());if(r)throw r;if(!t||0===t.length)return{data:null,error:new Error("Invitation not found or has expired")};const{error:s}=await kn.from("user_organizations").insert([{user_id:n.id,organization_id:t[0].organization_id,role:t[0].role}]);if(s)throw s;const{error:a}=await kn.from("organization_invitations").update({accepted_at:(new Date).toISOString()}).eq("id",t[0].id);if(a)throw a;const i=await f();return o(i),{data:t[0],error:null}}catch(t){return{data:null,error:t}}},updateUserProfile:async e=>{try{const{data:t,error:r}=await kn.from("user_profiles").update(e).eq("id",n.id).select().single();if(r)throw r;return i(t),{data:t,error:null}}catch(t){return{data:null,error:t}}},hasPermission:async(e,t)=>{try{const{data:r,error:n}=await kn.rpc("has_permission",{org_id:e,required_role:t});if(n)throw n;return r}catch(r){return console.error("Error checking permissions:",r),!1}},setCurrentOrganization:d,refreshOrganizations:async()=>{try{const e=await f();return o(e),c&&!e.find(e=>e.organization_id===c.organization_id)&&(e.length>0?d(e[0]):d(null)),e}catch(e){throw console.error("Error refreshing organizations:",e),e}}};return(0,Cn.jsx)(Sn.Provider,{value:g,children:r})},Pn=async(e,t)=>{const{data:r,error:n}=await kn.from("legal_contracts").update(t).eq("id",e).select().single();if(n)throw n;return r},Tn=async e=>{if(!e)throw new Error("No organization selected.");const{data:t,error:r}=await kn.from("legal_contract_folders").select("*").eq("organization_id",e).order("name");if(r)throw r;return t},Dn=async(e,t)=>{const{data:r,error:n}=await kn.from("legal_insurance_policies").update(t).eq("id",e).select().single();if(n)throw n;return r},An=async e=>{if(!e)return null;const{data:t,error:r}=await kn.from("company_profile").select("*").eq("organization_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t},On=async e=>{if(!e.organization_id)throw new Error("organization_id is required");const{data:t,error:r}=await kn.from("company_profile").upsert(e,{onConflict:["organization_id"]}).select().single();if(r)throw r;return t},Ln=async e=>{try{const{data:t,error:r}=await kn.from("brand_assets").select("*").eq("organization_id",e).order("uploaded_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Error fetching brand assets:",t),t}},Rn=async e=>{try{const{data:t,error:r}=await kn.from("brand_information").select("*").eq("organization_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t||{organization_id:e,tagline:"",brand_blurb:"",color_palette:["#6366F1","#8B5CF6","#EC4899","#F59E0B"],logo_url:""}}catch(t){throw console.error("Error fetching brand information:",t),t}},Mn=async(e,t)=>{try{console.log("upsertBrandInformation called with:",{brandData:e,organizationId:t});const{data:r,error:n}=await kn.from("brand_information").upsert([Oe(Oe({},e),{},{organization_id:t,updated_at:(new Date).toISOString()})]).select().single();if(console.log("Supabase response:",{data:r,error:n}),n)throw n;return r}catch(r){throw console.error("Error upserting brand information:",r),r}},zn=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{const{data:r,error:n}=await kn.from("marketing_events").select("*").eq("organization_id",e).gte("event_date",(new Date).toISOString().split("T")[0]).order("event_date",{ascending:!0}).limit(t);if(n)throw n;return r||[]}catch(r){throw console.error("Error fetching upcoming marketing events:",r),r}};async function Fn(e){return kn.from("crm_companies").select("*").eq("organization_id",e).order("created_at",{ascending:!1})}async function Bn(e,t){return kn.from("crm_companies").update(t).eq("id",e)}async function Un(e){return kn.from("crm_contacts").select("*").eq("organization_id",e).order("created_at",{ascending:!1})}async function qn(e,t){return kn.from("crm_contacts").update(t).eq("id",e)}async function Hn(e){return kn.from("crm_deals").select("*").eq("organization_id",e).order("created_at",{ascending:!1})}async function Wn(e,t){return kn.from("crm_deals").update(t).eq("id",e)}async function Vn(e){var t,r,n,s;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[i,l,o,c]=await Promise.all([kn.from("crm_deals").select("id, name, value, stage, created_at, updated_at").eq("organization_id",e).order("updated_at",{ascending:!1}).limit(a),kn.from("crm_contacts").select("id, first_name, last_name, email, created_at, updated_at").eq("organization_id",e).order("updated_at",{ascending:!1}).limit(a),kn.from("crm_companies").select("id, name, created_at, updated_at").eq("organization_id",e).order("updated_at",{ascending:!1}).limit(a),kn.from("crm_activities").select("id, type, description, created_at").eq("organization_id",e).order("created_at",{ascending:!1}).limit(a)]),d=[];return null===(t=i.data)||void 0===t||t.forEach(e=>{d.push({id:"deal-".concat(e.id),type:"deal",message:'Deal "'.concat(e.name,'" ').concat("closed"===e.stage?"closed":"updated"),time:new Date(e.updated_at||e.created_at).toLocaleDateString(),value:e.value?"\xa3".concat(parseFloat(e.value).toLocaleString()):null,timestamp:new Date(e.updated_at||e.created_at).getTime()})}),null===(r=l.data)||void 0===r||r.forEach(e=>{d.push({id:"contact-".concat(e.id),type:"contact",message:'Contact "'.concat(e.first_name," ").concat(e.last_name,'" ').concat(e.updated_at?"updated":"added"),time:new Date(e.updated_at||e.created_at).toLocaleDateString(),timestamp:new Date(e.updated_at||e.created_at).getTime()})}),null===(n=o.data)||void 0===n||n.forEach(e=>{d.push({id:"company-".concat(e.id),type:"company",message:'Company "'.concat(e.name,'" ').concat(e.updated_at?"updated":"added"),time:new Date(e.updated_at||e.created_at).toLocaleDateString(),timestamp:new Date(e.updated_at||e.created_at).getTime()})}),null===(s=c.data)||void 0===s||s.forEach(e=>{d.push({id:"activity-".concat(e.id),type:"activity",message:e.description,time:new Date(e.created_at).toLocaleDateString(),timestamp:new Date(e.created_at).getTime()})}),d.sort((e,t)=>t.timestamp-e.timestamp).slice(0,a)}async function Gn(e){var t;const{data:r,error:n}=await kn.from("holidays").select("*, employee:employee_id(*)").in("employee_id",(null===(t=(await kn.from("employees").select("id").eq("organization_id",e)).data)||void 0===t?void 0:t.map(e=>e.id))||[]).order("start_date",{ascending:!1});if(n)throw n;return r}const $n={async getCategories(e){const{data:t,error:r}=await kn.from("budget_categories").select("*").eq("organization_id",e).eq("is_active",!0).order("name");if(r)throw r;return t},async createCategory(e,t){const{data:r,error:n}=await kn.from("budget_categories").insert({organization_id:e,name:t.name,type:t.type,description:t.description,color:t.color||"#6B7280"}).select().single();if(n)throw n;return r},async updateCategory(e,t){const{data:r,error:n}=await kn.from("budget_categories").update(t).eq("id",e).select().single();if(n)throw n;return r},async deleteCategory(e){const{error:t}=await kn.from("budget_categories").delete().eq("id",e);if(t)throw t},async getLineItems(e){const{data:t,error:r}=await kn.from("budget_line_items").select("\n        *,\n        budget_categories (\n          id,\n          name,\n          type,\n          color\n        )\n      ").eq("organization_id",e).eq("is_active",!0).order("name");if(r)throw r;return t},async createLineItem(e,t){const{data:r,error:n}=await kn.from("budget_line_items").insert({organization_id:e,category_id:t.categoryId,name:t.name,description:t.description,type:t.type,is_recurring:t.isRecurring}).select().single();if(n)throw n;return r},async updateLineItem(e,t){const{data:r,error:n}=await kn.from("budget_line_items").update(t).eq("id",e).select().single();if(n)throw n;return r},async deleteLineItem(e){const{error:t}=await kn.from("budget_line_items").delete().eq("id",e);if(t)throw t},async getBudgetData(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{data:n,error:s}=await kn.rpc("get_budget_summary",{p_organization_id:e,p_year:t,p_is_forecast:r});if(s)throw s;return n},async updateBudgetValue(e,t,r,n,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{data:i,error:l}=await kn.from("budget_data").update({amount:s,updated_at:(new Date).toISOString()}).eq("organization_id",e).eq("line_item_id",t).eq("year",r).eq("month",n).eq("is_forecast",a).select().single();if(l&&"PGRST116"===l.code){const{data:i,error:l}=await kn.from("budget_data").insert({organization_id:e,line_item_id:t,year:r,month:n,amount:s,is_forecast:a}).select().single();if(l)throw l;return i}if(l)throw l;return i},async bulkUpdateBudgetValues(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=n.map((n,a)=>({organization_id:e,line_item_id:t,year:r,month:a+1,amount:n,is_forecast:s}));await kn.from("budget_data").delete().eq("organization_id",e).eq("line_item_id",t).eq("year",r).eq("is_forecast",s);const{data:i,error:l}=await kn.from("budget_data").insert(a).select();if(l)throw l;return i},async getVersions(e,t){const{data:r,error:n}=await kn.from("budget_versions").select("*").eq("organization_id",e).eq("year",t).order("created_at",{ascending:!1});if(n)throw n;return r},async createVersion(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;const{data:a,error:i}=await kn.from("budget_versions").insert({organization_id:e,year:t,version_name:r,is_forecast:n,created_by:s}).select().single();if(i)throw i;return a},async lockVersion(e,t,r,n,s,a){try{var i;const{data:e,error:r}=await kn.from("budget_versions").update({is_locked:t,locked_at:t?(new Date).toISOString():null,locked_by:t?null===(i=(await kn.auth.getUser()).data.user)||void 0===i?void 0:i.id:null}).eq("organization_id",a).eq("year",n).eq("is_forecast",s).select();if(r)throw r;return e}catch(l){throw console.error("Error locking version:",l),l}},async initializeBudgetForYear(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await this.getLineItems(e),s=[];if(n.forEach(n=>{for(let a=1;a<=12;a++)s.push({organization_id:e,line_item_id:n.id,year:t,month:a,amount:0,is_forecast:r})}),s.length>0){const{error:e}=await kn.from("budget_data").upsert(s,{onConflict:"organization_id,line_item_id,year,month,is_forecast"});if(e)throw e}},async getBudgetSummary(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await this.getBudgetData(e,t,r),s={totalRevenue:0,totalExpenses:0,netIncome:0,revenueItems:0,expenseItems:0};return n.forEach(e=>{const t=e.total||0;"revenue"===e.type?(s.totalRevenue+=t,s.revenueItems++):(s.totalExpenses+=Math.abs(t),s.expenseItems++)}),s.netIncome=s.totalRevenue-s.totalExpenses,s},async createSampleData(e){try{const t=await this.createCategory(e,{name:"Revenue",type:"revenue",description:"All revenue streams",color:"#10B981"}),r=await this.createCategory(e,{name:"Product Sales",type:"revenue",description:"Revenue from product sales",color:"#3B82F6"}),n=await this.createCategory(e,{name:"Consulting",type:"revenue",description:"Revenue from consulting services",color:"#6366F1"}),s=await this.createLineItem(e,{categoryId:t.id,name:"Sales",description:"Sales revenue",type:"revenue",isRecurring:!0}),a=await this.createCategory(e,{name:"Costs",type:"expense",description:"All costs",color:"#EF4444"}),i=await this.createCategory(e,{name:"Salaries",type:"expense",description:"Employee salaries and benefits",color:"#F59E0B"}),l=await this.createCategory(e,{name:"Marketing",type:"expense",description:"Marketing and advertising expenses",color:"#A21CAF"}),o=await this.createLineItem(e,{categoryId:a.id,name:"Salaries",description:"Salaries expense",type:"expense",isRecurring:!0}),c=await this.createLineItem(e,{categoryId:a.id,name:"Marketing",description:"Marketing expense",type:"expense",isRecurring:!0}),d=await this.createLineItem(e,{categoryId:r.id,name:"Product Sales",description:"Product sales revenue",type:"revenue",isRecurring:!0}),u=await this.createLineItem(e,{categoryId:n.id,name:"Consulting",description:"Consulting revenue",type:"revenue",isRecurring:!0}),m=await this.createLineItem(e,{categoryId:i.id,name:"Salaries",description:"Salaries expense",type:"expense",isRecurring:!0});return{categories:[t,r,n,a,i,l],lineItems:[s,d,u,o,c,m,await this.createLineItem(e,{categoryId:l.id,name:"Marketing",description:"Marketing expense",type:"expense",isRecurring:!0})]}}catch(t){throw console.error("Error creating sample data:",t),t}},async getBudgetWithForecastComparison(e,t){console.log("getBudgetWithForecastComparison called with:",{organizationId:e,year:t});const[r,n]=await Promise.all([this.getBudgetData(e,t,!1),this.getBudgetData(e,t,!0)]);console.log("Budget data loaded:",r.length,"items"),console.log("Forecast data loaded:",n.length,"items");const s=new Map;r.forEach(e=>{const t=e.line_item_id;s.has(t)||s.set(t,{line_item_id:e.line_item_id,line_item_name:e.line_item_name,category_id:e.category_id,category_name:e.category_name,type:e.type,budget:{},forecast:{},budget_total:0,forecast_total:0});const r=s.get(t);for(let n=1;n<=12;n++){const t="month_".concat(n);r.budget[t]=e[t]||0,r.budget_total+=e[t]||0}}),n.forEach(e=>{const t=e.line_item_id;s.has(t)||s.set(t,{line_item_id:e.line_item_id,line_item_name:e.line_item_name,category_id:e.category_id,category_name:e.category_name,type:e.type,budget:{},forecast:{},budget_total:0,forecast_total:0});const r=s.get(t);for(let n=1;n<=12;n++){const t="month_".concat(n);r.forecast[t]=e[t]||0,r.forecast_total+=e[t]||0}});new Set([...r.map(e=>e.line_item_id),...n.map(e=>e.line_item_id)]).forEach(e=>{const t=s.get(e);if(t){t.budget||(t.budget={}),t.forecast||(t.forecast={});for(let e=1;e<=12;e++){const r="month_".concat(e);void 0===t.budget[r]&&(t.budget[r]=0),void 0===t.forecast[r]&&(t.forecast[r]=0)}}});const a=Array.from(s.values());return console.log("Comparison result:",a.length,"items"),console.log("Sample comparison item:",a[0]),a}},Kn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isForecast:r=!1}=e,{user:n,currentOrganization:s}=_n(),[a,i]=(0,t.useState)([]),[l,o]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)(null),[x,f]=(0,t.useState)((new Date).getFullYear()),[g,b]=(0,t.useState)(r),[y,v]=(0,t.useState)(!1),[j,w]=(0,t.useState)([]),N=(0,t.useCallback)(async()=>{if(console.log("loadBudgetData called",null===s||void 0===s?void 0:s.organization_id,x,g),null!==s&&void 0!==s&&s.organization_id){m(!0),h(null);try{const[e,t,r]=await Promise.all([$n.getBudgetData(s.organization_id,x,g),$n.getCategories(s.organization_id),$n.getLineItems(s.organization_id)]);console.log("Fetched categories:",t),console.log("Fetched lineItems:",r),i(e),o(t),d(r)}catch(e){h(e.message),console.error("Error loading budget data:",e)}finally{m(!1)}}},[null===s||void 0===s?void 0:s.organization_id,x,g]),k=(0,t.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!==s&&void 0!==s&&s.organization_id)try{await $n.initializeBudgetForYear(s.organization_id,e,t),await N()}catch(r){h(r.message),console.error("Error initializing budget:",r)}},[null===s||void 0===s?void 0:s.organization_id,N]),C=(0,t.useCallback)(async(e,t,r)=>{if(null!==s&&void 0!==s&&s.organization_id)try{await $n.updateBudgetValue(s.organization_id,e,x,t,r,g),i(n=>n.map(n=>{if(n.line_item_id===e){const e=Oe({},n);return e["month_".concat(t)]=r,e.total=Object.keys(e).filter(e=>e.startsWith("month_")).reduce((t,r)=>t+(e[r]||0),0),e}return n}))}catch(n){h(n.message),console.error("Error updating budget value:",n)}},[null===s||void 0===s?void 0:s.organization_id,x,g]),S=(0,t.useCallback)(async(e,t)=>{if(null!==s&&void 0!==s&&s.organization_id)try{await $n.bulkUpdateBudgetValues(s.organization_id,e,x,t,g),await N()}catch(r){h(r.message),console.error("Error bulk updating budget values:",r)}},[null===s||void 0===s?void 0:s.organization_id,x,g,N]),_=(0,t.useCallback)(async e=>{if(null!==s&&void 0!==s&&s.organization_id)try{const t=await $n.createCategory(s.organization_id,e);return o(e=>[...e,t]),t}catch(t){throw h(t.message),console.error("Error creating category:",t),t}},[null===s||void 0===s?void 0:s.organization_id]),E=(0,t.useCallback)(async e=>{if(null!==s&&void 0!==s&&s.organization_id)try{const t=await $n.createLineItem(s.organization_id,e),r=e.isRecurring?Array(12).fill(Math.abs(e.amount||0)):Array(12).fill(0);return await S(t.id,r),t}catch(t){throw h(t.message),console.error("Error creating line item:",t),t}},[null===s||void 0===s?void 0:s.id,S]),I=(0,t.useCallback)(async e=>{try{await $n.deleteLineItem(e),d(t=>t.filter(t=>t.id!==e)),i(t=>t.filter(t=>t.line_item_id!==e))}catch(t){throw h(t.message),console.error("Error deleting line item:",t),t}},[]),P=(0,t.useCallback)(async()=>{if(null===s||void 0===s||!s.id)return null;try{return await $n.getBudgetSummary(s.id,x,g)}catch(e){return h(e.message),console.error("Error getting budget summary:",e),null}},[null===s||void 0===s?void 0:s.id,x,g]),T=(0,t.useCallback)(()=>{const e={};return a.forEach(t=>{const r=(t.category_name||"Uncategorized").trim().toLowerCase();e[r]||(e[r]={type:t.type,items:[]}),e[r].items.push(t)}),e},[a]),D=(0,t.useCallback)(()=>{const e={revenue:Array(12).fill(0),expense:Array(12).fill(0),profitLoss:Array(12).fill(0)};a.forEach(t=>{for(let r=1;r<=12;r++){const n=t["month_".concat(r)]||0;"revenue"===t.type?e.revenue[r-1]+=n:e.expense[r-1]+=Math.abs(n)}});for(let t=0;t<12;t++)e.profitLoss[t]=e.revenue[t]-e.expense[t];return e},[a]),A=(0,t.useCallback)(async()=>{if(console.log("loadComparisonData called",null===s||void 0===s?void 0:s.organization_id,x),null!==s&&void 0!==s&&s.organization_id){m(!0),h(null);try{const e=await $n.getBudgetWithForecastComparison(s.organization_id,x);console.log("Comparison data loaded:",e),w(e)}catch(e){h(e.message),console.error("Error loading comparison data:",e)}finally{m(!1)}}},[null===s||void 0===s?void 0:s.organization_id,x]),O=(0,t.useCallback)(()=>{console.log("groupedComparisonData called with:",j.length,"items");const e={};return j.forEach(t=>{const r=(t.category_name||"Uncategorized").trim().toLowerCase();e[r]||(e[r]={type:t.type,items:[]}),e[r].items.push(t)}),console.log("Grouped comparison data:",Object.keys(e),e),e},[j]),L=(0,t.useCallback)(()=>{console.log("calculateComparisonTotals called with comparisonData:",j.length,"items");const e={budget:{revenue:Array(12).fill(0),expense:Array(12).fill(0),profitLoss:Array(12).fill(0)},forecast:{revenue:Array(12).fill(0),expense:Array(12).fill(0),profitLoss:Array(12).fill(0)}};j.forEach(t=>{for(let r=1;r<=12;r++){const n=t.budget["month_".concat(r)]||0,s=t.forecast["month_".concat(r)]||0;"revenue"===t.type?(e.budget.revenue[r-1]+=n,e.forecast.revenue[r-1]+=s):(e.budget.expense[r-1]+=Math.abs(n),e.forecast.expense[r-1]+=Math.abs(s))}});for(let t=0;t<12;t++)e.budget.profitLoss[t]=e.budget.revenue[t]-e.budget.expense[t],e.forecast.profitLoss[t]=e.forecast.revenue[t]-e.forecast.expense[t];return console.log("Comparison totals calculated:",e),e},[j]);return(0,t.useEffect)(()=>{N()},[N]),{budgetData:a,categories:l,lineItems:c,loading:u,error:p,selectedYear:x,isForecast:g,showBudgetComparison:y,comparisonData:j,setSelectedYear:f,setIsForecast:b,setShowBudgetComparison:v,loadBudgetData:N,loadComparisonData:A,initializeBudgetForYear:k,updateBudgetValue:C,bulkUpdateBudgetValues:S,createCategory:_,createLineItem:E,deleteLineItem:I,getBudgetSummary:P,groupedBudgetData:T(),totals:D(),groupedComparisonData:O(),comparisonTotals:L(),clearError:()=>h(null)}};function Yn(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}const Zn=["title","titleId"];function Jn(e,r){let{title:n,titleId:s}=e,a=Yn(e,Zn);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const Qn=t.forwardRef(Jn),Xn=["title","titleId"];function es(e,r){let{title:n,titleId:s}=e,a=Yn(e,Xn);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const ts=t.forwardRef(es),rs=["title","titleId"];function ns(e,r){let{title:n,titleId:s}=e,a=Yn(e,rs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const ss=t.forwardRef(ns),as=["title","titleId"];function is(e,r){let{title:n,titleId:s}=e,a=Yn(e,as);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M10 2a6 6 0 0 0-6 6c0 1.887-.454 3.665-1.257 5.234a.75.75 0 0 0 .515 1.076 32.91 32.91 0 0 0 3.256.508 3.5 3.5 0 0 0 6.972 0 32.903 32.903 0 0 0 3.256-.508.75.75 0 0 0 .515-1.076A11.448 11.448 0 0 1 16 8a6 6 0 0 0-6-6ZM8.05 14.943a33.54 33.54 0 0 0 3.9 0 2 2 0 0 1-3.9 0Z",clipRule:"evenodd"}))}const ls=t.forwardRef(is),os=["title","titleId"];function cs(e,r){let{title:n,titleId:s}=e,a=Yn(e,os);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M10.75 10.818v2.614A3.13 3.13 0 0 0 11.888 13c.482-.315.612-.648.612-.875 0-.227-.13-.56-.612-.875a3.13 3.13 0 0 0-1.138-.432ZM8.33 8.62c.053.055.115.11.184.164.208.16.46.284.736.363V6.603a2.45 2.45 0 0 0-.35.13c-.14.065-.27.143-.386.233-.377.292-.514.627-.514.909 0 .184.058.39.202.592.037.051.08.102.128.152Z"}),t.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-6a.75.75 0 0 1 .75.75v.316a3.78 3.78 0 0 1 1.653.713c.426.33.744.74.925 1.2a.75.75 0 0 1-1.395.55 1.35 1.35 0 0 0-.447-.563 2.187 2.187 0 0 0-.736-.363V9.3c.698.093 1.383.32 1.959.696.787.514 1.29 1.27 1.29 2.13 0 .86-.504 1.616-1.29 2.13-.576.377-1.261.603-1.96.696v.299a.75.75 0 1 1-1.5 0v-.3c-.697-.092-1.382-.318-1.958-.695-.482-.315-.857-.717-1.078-1.188a.75.75 0 1 1 1.359-.636c.08.173.245.376.54.569.313.205.706.353 1.138.432v-2.748a3.782 3.782 0 0 1-1.653-.713C6.9 9.433 6.5 8.681 6.5 7.875c0-.805.4-1.558 1.097-2.096a3.78 3.78 0 0 1 1.653-.713V4.75A.75.75 0 0 1 10 4Z",clipRule:"evenodd"}))}const ds=t.forwardRef(cs),us=["title","titleId"];function ms(e,r){let{title:n,titleId:s}=e,a=Yn(e,us);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z"}))}const ps=t.forwardRef(ms),hs=["title","titleId"];function xs(e,r){let{title:n,titleId:s}=e,a=Yn(e,hs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z",clipRule:"evenodd"}))}const fs=t.forwardRef(xs),gs=["title","titleId"];function bs(e,r){let{title:n,titleId:s}=e,a=Yn(e,gs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm.75-13a.75.75 0 0 0-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 0 0 0-1.5h-3.25V5Z",clipRule:"evenodd"}))}const ys=t.forwardRef(bs);async function vs(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const{data:n,error:s}=await kn.from("notifications").select("*").eq("organization_id",e).eq("user_id",t).order("created_at",{ascending:!1}).limit(r);if(s)throw s;return n||[]}async function js(e,t){const{count:r,error:n}=await kn.from("notifications").select("*",{count:"exact",head:!0}).eq("organization_id",e).eq("user_id",t).eq("read",!1);if(n)throw n;return r||0}const ws=(0,t.createContext)(),Ns=()=>{const e=(0,t.useContext)(ws);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},ks=e=>{let{children:r}=e;const{user:n,currentOrganization:s}=_n(),[a,i]=(0,t.useState)([]),[l,o]=(0,t.useState)(0),[c,d]=(0,t.useState)(!1),u=async()=>{if(null!==n&&void 0!==n&&n.id&&null!==s&&void 0!==s&&s.organization_id){d(!0);try{const[e,t]=await Promise.all([vs(s.organization_id,n.id),js(s.organization_id,n.id)]);i(e),o(t)}catch(e){console.error("Error loading notifications:",e)}finally{d(!1)}}},m=e=>{i(t=>[e,...t]),e.read||o(e=>e+1)},p=e=>{i(t=>t.filter(t=>t.id!==e));const t=a.find(t=>t.id===e);t&&!t.read&&o(e=>Math.max(0,e-1))};(0,t.useEffect)(()=>{u()},[null===n||void 0===n?void 0:n.id,null===s||void 0===s?void 0:s.organization_id]),(0,t.useEffect)(()=>{if(null===n||void 0===n||!n.id||null===s||void 0===s||!s.organization_id)return;const e=kn.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:"organization_id=eq.".concat(s.organization_id," AND user_id=eq.").concat(n.id)},e=>{m(e.new)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:"organization_id=eq.".concat(s.organization_id," AND user_id=eq.").concat(n.id)},e=>{i(t=>t.map(t=>t.id===e.new.id?e.new:t))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications",filter:"organization_id=eq.".concat(s.organization_id," AND user_id=eq.").concat(n.id)},e=>{p(e.old.id)}).subscribe();return()=>{kn.removeChannel(e)}},[null===n||void 0===n?void 0:n.id,null===s||void 0===s?void 0:s.organization_id]);const h={notifications:a,unreadCount:l,loading:c,loadNotifications:u,markNotificationAsRead:async e=>{try{await async function(e){const{data:t,error:r}=await kn.from("notifications").update({read:!0}).eq("id",e).select().single();if(r)throw r;return t}(e),i(t=>t.map(t=>t.id===e?Oe(Oe({},t),{},{read:!0}):t)),o(e=>Math.max(0,e-1))}catch(t){console.error("Error marking notification as read:",t)}},markAllNotificationsAsRead:async()=>{if(null!==n&&void 0!==n&&n.id&&null!==s&&void 0!==s&&s.organization_id)try{await async function(e,t){const{data:r,error:n}=await kn.from("notifications").update({read:!0}).eq("organization_id",e).eq("user_id",t).eq("read",!1).select();if(n)throw n;return r}(s.organization_id,n.id),i(e=>e.map(e=>Oe(Oe({},e),{},{read:!0}))),o(0)}catch(e){console.error("Error marking all notifications as read:",e)}},addNotification:m,removeNotification:p};return(0,Cn.jsx)(ws.Provider,{value:h,children:r})},Cs=e=>{switch(e){case"success":return(0,Cn.jsx)(Qn,{className:"h-4 w-4 text-green-500"});case"warning":return(0,Cn.jsx)(ts,{className:"h-4 w-4 text-yellow-500"});case"info":return(0,Cn.jsx)(ss,{className:"h-4 w-4 text-blue-500"});default:return(0,Cn.jsx)(ls,{className:"h-4 w-4 text-gray-500"})}},Ss=()=>{var e,r,n,s,a,i,l,o,c,d,u,m,p,h,x,f,g,b,y,v,j,w,N,k,C,S;const{currentOrganization:_}=_n(),{notifications:E}=Ns(),{totals:I,loading:P}=Kn({isForecast:!1}),{totals:T,loading:D}=Kn({isForecast:!0}),A=(new Date).getMonth(),[O,L]=(0,t.useState)(null),[R,M]=(0,t.useState)([]),[z,F]=(0,t.useState)([]),[B,U]=(0,t.useState)([]),[q,H]=(0,t.useState)(!0),[W,V]=(0,t.useState)(null),[G,$]=(0,t.useState)(!1),[K,Y]=(0,t.useState)(!1),[Z,J]=(0,t.useState)({financial:!0,notifications:!0,salesActivity:!0,marketing:!0,holidays:!0,businessDetails:!1});(0,t.useEffect)(()=>{(async()=>{if(null!==_&&void 0!==_&&_.organization_id)try{H(!0);const[e,t,r]=await Promise.all([An(_.organization_id),zn(_.organization_id,5),Vn(_.organization_id,5)]);L(e),M(t),F(r||[]),U(await Gn(_.organization_id))}catch(e){console.error("Error fetching dashboard data:",e)}finally{H(!1)}})()},[_]),console.log("budgetTotals",I),console.log("forecastTotals",T),console.log("monthIndex",A),console.log("Rendering Revenue:",{forecast:null===T||void 0===T||null===(e=T.revenue)||void 0===e?void 0:e[A],budget:null===I||void 0===I||null===(r=I.revenue)||void 0===r?void 0:r[A],allForecast:null===T||void 0===T?void 0:T.revenue,allBudget:null===I||void 0===I?void 0:I.revenue,monthIndex:A});const Q=[{name:"Revenue",value:null!==(n=null===T||void 0===T||null===(s=T.revenue)||void 0===s?void 0:s[A])&&void 0!==n?n:0,subValue:null!==(a=null===I||void 0===I||null===(i=I.revenue)||void 0===i?void 0:i[A])&&void 0!==a?a:0,change:"",changeType:(null!==(l=null===T||void 0===T||null===(o=T.revenue)||void 0===o?void 0:o[A])&&void 0!==l?l:0)>(null!==(c=null===I||void 0===I||null===(d=I.revenue)||void 0===d?void 0:d[A])&&void 0!==c?c:0)?"positive":(null!==(u=null===T||void 0===T||null===(m=T.revenue)||void 0===m?void 0:m[A])&&void 0!==u?u:0)<(null!==(p=null===I||void 0===I||null===(h=I.revenue)||void 0===h?void 0:h[A])&&void 0!==p?p:0)?"negative":"neutral"},{name:"Cash Flow",value:"set-up-cashflow",change:"",changeType:"neutral"},{name:"Monthly Costs",value:null!==(x=null===T||void 0===T||null===(f=T.expense)||void 0===f?void 0:f[A])&&void 0!==x?x:0,subValue:null!==(g=null===I||void 0===I||null===(b=I.expense)||void 0===b?void 0:b[A])&&void 0!==g?g:0,change:"",changeType:(null!==(y=null===T||void 0===T||null===(v=T.expense)||void 0===v?void 0:v[A])&&void 0!==y?y:0)<(null!==(j=null===I||void 0===I||null===(w=I.expense)||void 0===w?void 0:w[A])&&void 0!==j?j:0)?"positive":(null!==(N=null===T||void 0===T||null===(k=T.expense)||void 0===k?void 0:k[A])&&void 0!==N?N:0)>(null!==(C=null===I||void 0===I||null===(S=I.expense)||void 0===S?void 0:S[A])&&void 0!==C?C:0)?"negative":"neutral"},{name:"Runway",value:"set-up-cashflow",change:"",changeType:"neutral"}],X=e=>{console.log("Notification clicked:",e)};return(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Dashboard"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Welcome back! Here's an overview of your organization's key metrics and activities."})]}),(0,Cn.jsxs)("div",{className:"relative",children:[(0,Cn.jsx)("button",{onClick:()=>Y(!K),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit Dashboard"}),K&&(0,Cn.jsx)("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-md shadow-2xl border border-gray-300 z-50",children:(0,Cn.jsxs)("div",{className:"p-4",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Dashboard Sections"}),(0,Cn.jsx)("div",{className:"space-y-2",children:Object.entries(Z).map(e=>{let[t,r]=e;return(0,Cn.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,Cn.jsx)("input",{type:"checkbox",checked:r,onChange:()=>(e=>{J(t=>Oe(Oe({},t),{},{[e]:!t[e]}))})(t),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),(0,Cn.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:"salesActivity"===t?"Sales Activity":"businessDetails"===t?"Business Details":t})]},t)})})]})})]})]}),Z.financial&&(0,Cn.jsx)("div",{children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md flex flex-col border border-gray-300",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-t-lg border-b border-gray-100",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Financial Overview"}),(0,Cn.jsx)("div",{className:"flex space-x-2",children:(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"Settings",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})})]}),(0,Cn.jsx)("div",{className:"p-4",children:(0,Cn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-0 divide-x divide-gray-200",children:Q.map((e,t)=>(0,Cn.jsxs)("div",{className:"flex flex-col items-start justify-center p-3",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e.name}),"set-up-cashflow"===e.value?(0,Cn.jsx)("a",{href:"/finance",className:"w-full bg-gray-100 hover:bg-gray-200 rounded-lg p-3 flex items-center justify-center transition-colors",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("svg",{className:"w-6 h-6 mx-auto mb-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Cn.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Set up cashflow analysis"})]})}):0===e.value?(0,Cn.jsx)("a",{href:"/finance",className:"w-full bg-gray-100 hover:bg-gray-200 rounded-lg p-3 flex items-center justify-center transition-colors",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("svg",{className:"w-6 h-6 mx-auto mb-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,Cn.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"Set up budget analysis"})]})}):(0,Cn.jsx)(Cn.Fragment,{children:(0,Cn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D||P?(0,Cn.jsx)("span",{children:"Loading..."}):null!==e.value&&void 0!==e.value||null!==e.subValue&&void 0!==e.subValue?(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("span",{children:["\xa3",null!==e.value&&void 0!==e.value?e.value.toLocaleString():""]}),(0,Cn.jsxs)("div",{className:"text-xs text-gray-500",children:["vs Budget: \xa3",null!==e.subValue&&void 0!==e.subValue?e.subValue.toLocaleString():""]})]}):(0,Cn.jsx)("span",{children:"Loading..."})}),"neutral"!==e.changeType&&(0,Cn.jsxs)("div",{className:"flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat("positive"===e.changeType?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:["positive"===e.changeType?(0,Cn.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Cn.jsx)("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}):(0,Cn.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Cn.jsx)("path",{fillRule:"evenodd",d:"M12 13a1 1 0 100 2h5a1 1 0 001-1v-5a1 1 0 10-2 0v2.586l-4.293-4.293a1 1 0 00-1.414 0L8 9.586l-4.293-4.293a1 1 0 00-1.414 1.414l5 5a1 1 0 001.414 0L11 9.414 14.586 13H12z",clipRule:"evenodd"})}),e.change]})]})})]},e.name))})})]})}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Z.notifications&&(0,Cn.jsx)("div",{children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md flex flex-col h-[280px] border border-gray-300",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-t-lg border-b border-gray-100",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Notifications"}),(0,Cn.jsx)("div",{className:"flex space-x-2",children:(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"Settings",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})})]}),(0,Cn.jsx)("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-100",children:E.length>0?E.slice(0,5).map(e=>(0,Cn.jsx)("button",{onClick:()=>X(e),className:"w-full text-left p-3 hover:bg-gray-50 transition-colors ".concat(e.read?"":"bg-blue-50"),children:(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0",children:Cs(e.type)}),(0,Cn.jsx)("div",{className:"flex-1 min-w-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium truncate ".concat(e.read?"text-gray-600":"text-gray-900"),children:e.title}),(0,Cn.jsx)("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:e.time})]})})]})},e.id)):(0,Cn.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V4a2 2 0 10-4 0v1.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,Cn.jsx)("p",{className:"text-sm",children:"No notifications"})]})})}),(0,Cn.jsx)("div",{className:"px-4 py-2 bg-gray-50 rounded-b-lg border-t border-gray-100 flex items-center justify-end",children:(0,Cn.jsxs)("a",{href:"/notifications",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["Go to Notifications",(0,Cn.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})}),Z.salesActivity&&(0,Cn.jsx)("div",{children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md flex flex-col h-[280px] border border-gray-300",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-t-lg border-b border-gray-100",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Sales Activities"}),(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"Add Lead",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"Settings",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})]}),(0,Cn.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:q?(0,Cn.jsxs)("div",{className:"text-center py-8",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Loading activities..."})]}):z.length>0?(0,Cn.jsx)("div",{className:"divide-y divide-gray-100",children:z.map((e,t)=>(0,Cn.jsxs)("div",{className:"flex items-start space-x-3 py-3 ".concat(""),children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 p-2 rounded-full ".concat("deal"===e.type?"text-green-600 bg-green-100":"contact"===e.type?"text-blue-600 bg-blue-100":"company"===e.type?"text-purple-600 bg-purple-100":"activity"===e.type?"text-orange-600 bg-orange-100":"text-gray-600 bg-gray-100"),children:"deal"===e.type?(0,Cn.jsx)(ds,{className:"h-4 w-4"}):"contact"===e.type?(0,Cn.jsx)(ps,{className:"h-4 w-4"}):"company"===e.type?(0,Cn.jsx)(fs,{className:"h-4 w-4"}):(0,Cn.jsx)(ys,{className:"h-4 w-4"})}),(0,Cn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:e.time}),e.value&&(0,Cn.jsx)("span",{className:"text-xs font-medium text-green-600",children:e.value})]})]})]},e.id))}):(0,Cn.jsxs)("div",{className:"text-center py-8",children:[(0,Cn.jsx)(ys,{className:"mx-auto h-12 w-12 text-gray-300 mb-3"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"No recent sales activities"}),(0,Cn.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Activities will appear here as you work"})]})}),(0,Cn.jsx)("div",{className:"px-4 py-2 bg-gray-50 rounded-b-lg border-t border-gray-100 flex items-center justify-end",children:(0,Cn.jsxs)("a",{href:"/sales/crm",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["Go to CRM",(0,Cn.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Z.marketing&&(0,Cn.jsx)("div",{children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md flex flex-col h-[280px] border border-gray-300",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-t-lg border-b border-gray-100",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Upcoming Marketing Releases"}),(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"Add Event",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"View Calendar",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Cn.jsx)("button",{className:"p-1 rounded hover:bg-gray-200",title:"Filter",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707l-6.414 6.414A1 1 0 0013 13.414V19a1 1 0 01-1.447.894l-4-2A1 1 0 017 17v-3.586a1 1 0 00-.293-.707L3.293 6.707A1 1 0 013 6V4z"})})})]})]}),(0,Cn.jsx)("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-100",children:q?[1,2,3].map(e=>(0,Cn.jsxs)("div",{className:"flex items-center justify-between p-4 animate-pulse",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,Cn.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"})]}),(0,Cn.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16"})]},e)):R.length>0?R.map(e=>(0,Cn.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,Cn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.event_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.description&&(0,Cn.jsx)("p",{className:"text-xs text-gray-500 mt-1 truncate max-w-48",children:e.description})]}),(0,Cn.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("published"===e.status?"bg-green-100 text-green-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]},e.id)):(0,Cn.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,Cn.jsx)("p",{className:"text-sm",children:"No upcoming events"})]})})}),(0,Cn.jsx)("div",{className:"px-4 py-2 bg-gray-50 rounded-b-lg border-t border-gray-100 flex items-center justify-end",children:(0,Cn.jsxs)("a",{href:"/marketing/events",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["Go to Events Calendar",(0,Cn.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})}),Z.holidays&&(0,Cn.jsx)("div",{children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md flex flex-col h-[280px] border border-gray-300",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-t-lg border-b border-gray-100",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Team Holidays"}),(0,Cn.jsx)("div",{className:"flex space-x-2",children:(0,Cn.jsx)("a",{href:"/hr/holiday",className:"p-1 rounded hover:bg-gray-200",title:"View All",children:(0,Cn.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})})})]}),(0,Cn.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:q?(0,Cn.jsxs)("div",{className:"text-center py-8",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Loading holidays..."})]}):B&&B.length>0?(0,Cn.jsx)("div",{className:"divide-y divide-gray-100",children:B.slice(0,5).map((e,t)=>{const r=(e.employee||{}).name||"Unknown",n=e.start_date?new Date(e.start_date).toLocaleDateString():"",s=e.end_date?new Date(e.end_date).toLocaleDateString():"";return(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)("div",{className:"h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center text-xs font-bold text-gray-500",children:r.split(" ").map(e=>e[0]).join("")}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:r}),(0,Cn.jsxs)("div",{className:"text-xs text-gray-500",children:[n," - ",s]})]})]}),(0,Cn.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("approved"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Unknown"})]},e.id)})}):(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No time off requests found."})]})}),(0,Cn.jsx)("div",{className:"px-4 py-2 bg-gray-50 rounded-b-lg border-t border-gray-100 flex items-center justify-end",children:(0,Cn.jsxs)("a",{href:"/hr/holiday",className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center",children:["View all in Time Manager",(0,Cn.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})})]}),Object.values(Z).every(e=>!e)&&(0,Cn.jsx)("div",{className:"flex items-center justify-center min-h-[220px]",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md shadow flex flex-col items-center justify-center w-full max-w-2xl mx-auto p-12 border border-gray-100",children:[(0,Cn.jsx)("svg",{className:"w-12 h-12 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2a4 4 0 018 0v2M9 17a4 4 0 01-8 0v-2a4 4 0 018 0v2zm0 0v2a4 4 0 008 0v-2m0 0a4 4 0 01-8 0"})}),(0,Cn.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Dashboard Components Selected"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-center",children:"Select at least one component to display your dashboard."})]})})]})},_s=["title","titleId"];function Es(e,r){let{title:n,titleId:s}=e,a=Yn(e,_s);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M13.887 3.182c.396.037.79.08 1.183.128C16.194 3.45 17 4.414 17 5.517V16.75A2.25 2.25 0 0 1 14.75 19h-9.5A2.25 2.25 0 0 1 3 16.75V5.517c0-1.103.806-2.068 1.93-2.207.393-.048.787-.09 1.183-.128A3.001 3.001 0 0 1 9 1h2c1.373 0 2.531.923 2.887 2.182ZM7.5 4A1.5 1.5 0 0 1 9 2.5h2A1.5 1.5 0 0 1 12.5 4v.5h-5V4Z",clipRule:"evenodd"}))}const Is=t.forwardRef(Es),Ps=["title","titleId"];function Ts(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ps);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const Ds=t.forwardRef(Ts),As=["title","titleId"];function Os(e,r){let{title:n,titleId:s}=e,a=Yn(e,As);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"}))}const Ls=t.forwardRef(Os),Rs=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)(!1),[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(""),[m,p]=(0,t.useState)(""),[h,x]=(0,t.useState)({name:"",companyNumber:"",incorporationDate:""}),[f,g]=(0,t.useState)({registeredOffice:"",website:"",contactEmail:"",linkedinProfile:"",vatNumber:""}),[b,y]=(0,t.useState)({bankProvider:"",bankAccountOpened:""}),[v,j]=(0,t.useState)({name:"",companyNumber:"",incorporationDate:"",registeredOffice:"",website:"",contactEmail:"",linkedinProfile:"",vatNumber:"",bankProvider:"",bankAccountOpened:""}),[w,N]=(0,t.useState)(""),k=(0,t.useRef)();(0,t.useEffect)(()=>{(async()=>{if(null===e||void 0===e||!e.organization_id)return;const t=await An(e.organization_id);t&&(j({name:t.name||"",companyNumber:t.company_number||"",incorporationDate:t.incorporation_date||"",registeredOffice:t.registered_office||"",website:t.website||"",contactEmail:t.contact_email||"",linkedinProfile:t.linkedin_profile||"",vatNumber:t.vat_number||"",bankProvider:t.bank_provider||"",bankAccountOpened:t.bank_account_opened||""}),x({name:t.name||"",companyNumber:t.company_number||"",incorporationDate:t.incorporation_date||""}),g({registeredOffice:t.registered_office||"",website:t.website||"",contactEmail:t.contact_email||"",linkedinProfile:t.linkedin_profile||"",vatNumber:t.vat_number||""}),y({bankProvider:t.bank_provider||"",bankAccountOpened:t.bank_account_opened||""}),N(t.logo_url||""))})()},[e]);const C=()=>{const e="Company Name: ".concat(v.name,"\nCompany Number: ").concat(v.companyNumber,"\nIncorporation Date: ").concat(v.incorporationDate,"\nRegistered Office: ").concat(v.registeredOffice,"\nWebsite: ").concat(v.website,"\nContact Email: ").concat(v.contactEmail,"\nLinkedIn Profile: ").concat(v.linkedinProfile,"\nVAT Number: ").concat(v.vatNumber,"\nBank Provider: ").concat(v.bankProvider,"\nBank Account Opened: ").concat(v.bankAccountOpened);navigator.clipboard.writeText(e)};return(0,Cn.jsxs)("div",{className:"w-full",children:[(0,Cn.jsxs)("div",{className:"mb-2",children:[(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Company Details"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Manage your company's core information, contact details, and banking setup. This information is used throughout the platform and can be updated at any time."})]}),(0,Cn.jsx)("div",{className:"mb-10"}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"w-full flex flex-col md:flex-row gap-8 mb-4",children:[(0,Cn.jsxs)("div",{className:"w-full md:w-1/3 flex flex-col items-center justify-center bg-white rounded-xl shadow p-6 min-h-[220px] h-full",children:[(0,Cn.jsx)("div",{className:"mb-4 w-32 h-32 flex items-center justify-center rounded-lg overflow-hidden",children:w?(0,Cn.jsx)("img",{src:w,alt:"Company Logo",className:"object-contain w-full h-full"}):(0,Cn.jsx)("span",{className:"text-gray-400 text-4xl font-bold",children:"Logo"})}),(0,Cn.jsx)("input",{type:"file",accept:"image/*",ref:k,onChange:async t=>{const r=t.target.files[0];if(!r||null===e||void 0===e||!e.organization_id)return;const n=r.name.split(".").pop(),s="".concat(e.organization_id,"/logo.").concat(n),{data:a,error:i}=await kn.storage.from("company-logos").upload(s,r,{upsert:!0});if(i)return void alert("Error uploading logo: "+i.message);const{data:l,error:o}=kn.storage.from("company-logos").getPublicUrl(s);if(o||null===l||void 0===l||!l.publicUrl)return void alert("Error getting logo URL");const c=l.publicUrl;N(c),await On({organization_id:e.organization_id,logo_url:c})},className:"hidden"}),(0,Cn.jsx)("button",{onClick:()=>k.current&&k.current.click(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md text-xs hover:bg-blue-700",children:w?"Change Logo":"Upload Logo"})]}),(0,Cn.jsx)("div",{className:"w-full md:w-2/3 flex flex-col h-full",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow p-0 space-y-0 w-full min-h-[220px] h-full flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:[(0,Cn.jsx)("div",{className:"text-lg font-bold text-gray-900 mb-4",children:"Basic Information"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsxs)("button",{onClick:C,className:"inline-flex items-center text-xs text-gray-400 hover:text-gray-600 px-2 py-1 bg-transparent border-none shadow-none",style:{background:"none",border:"none"},children:[(0,Cn.jsx)(Is,{className:"h-4 w-4 mr-1"})," Copy"]}),(0,Cn.jsx)("button",{onClick:()=>r?(async()=>{if(c(""),null===e||void 0===e||!e.organization_id)return;const t={organization_id:e.organization_id,name:h.name,company_number:h.companyNumber,incorporation_date:h.incorporationDate};try{await On(t),j(e=>Oe(Oe({},e),h)),n(!1)}catch(r){c(r.message||"Failed to save.")}})():n(!0),className:"inline-flex items-center text-xs text-blue-600 border border-blue-600 bg-white rounded-md px-3 py-1.5 hover:bg-blue-50 hover:border-blue-700 hover:text-blue-700",style:{boxShadow:"none"},children:r?(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)(Ds,{className:"h-4 w-4 mr-1"})," Save"]}):(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)(Ls,{className:"h-4 w-4 mr-1"})," Edit"]})})]})]}),(0,Cn.jsxs)("div",{className:"px-6 pb-6 pt-0 space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Company Name"}),r?(0,Cn.jsx)("input",{type:"text",value:h.name,onChange:e=>x(t=>Oe(Oe({},t),{},{name:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.name})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-bold text-gray-500",children:"Company Number"}),r?(0,Cn.jsx)("input",{type:"text",value:h.companyNumber,onChange:e=>x(t=>Oe(Oe({},t),{},{companyNumber:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.companyNumber})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Incorporation Date"}),r?(0,Cn.jsx)("input",{type:"date",value:h.incorporationDate,onChange:e=>x(t=>Oe(Oe({},t),{},{incorporationDate:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.incorporationDate})]})]})]})})]}),(0,Cn.jsx)("div",{className:"w-full",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow p-0 space-y-0 w-full",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:[(0,Cn.jsx)("div",{className:"text-lg font-bold text-gray-900 mb-4",children:"Contact"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsxs)("button",{onClick:C,className:"inline-flex items-center text-xs text-gray-400 hover:text-gray-600 px-2 py-1 bg-transparent border-none shadow-none",style:{background:"none",border:"none"},children:[(0,Cn.jsx)(Is,{className:"h-4 w-4 mr-1"})," Copy"]}),(0,Cn.jsx)("button",{onClick:()=>s?(async()=>{if(u(""),null===e||void 0===e||!e.organization_id)return;const t={organization_id:e.organization_id,registered_office:f.registeredOffice,website:f.website,contact_email:f.contactEmail,linkedin_profile:f.linkedinProfile,vat_number:f.vatNumber};try{await On(t),j(e=>Oe(Oe({},e),f)),a(!1)}catch(r){u(r.message||"Failed to save.")}})():a(!0),className:"inline-flex items-center text-xs text-blue-600 border border-blue-600 bg-white rounded-md px-3 py-1.5 hover:bg-blue-50 hover:border-blue-700 hover:text-blue-700",style:{boxShadow:"none"},children:s?(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)(Ds,{className:"h-4 w-4 mr-1"})," Save"]}):(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)(Ls,{className:"h-4 w-4 mr-1"})," Edit"]})})]})]}),(0,Cn.jsxs)("div",{className:"px-6 pb-6 pt-0 space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Registered Office"}),s?(0,Cn.jsx)("textarea",{value:f.registeredOffice,onChange:e=>g(t=>Oe(Oe({},t),{},{registeredOffice:e.target.value})),rows:2,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.registeredOffice})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Website"}),s?(0,Cn.jsx)("input",{type:"url",value:f.website,onChange:e=>g(t=>Oe(Oe({},t),{},{website:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.website})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Contact Email"}),s?(0,Cn.jsx)("input",{type:"email",value:f.contactEmail,onChange:e=>g(t=>Oe(Oe({},t),{},{contactEmail:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.contactEmail})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"LinkedIn Profile"}),s?(0,Cn.jsx)("input",{type:"url",value:f.linkedinProfile,onChange:e=>g(t=>Oe(Oe({},t),{},{linkedinProfile:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.linkedinProfile})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"VAT Number"}),s?(0,Cn.jsx)("input",{type:"text",value:f.vatNumber,onChange:e=>g(t=>Oe(Oe({},t),{},{vatNumber:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.vatNumber})]})]})]})}),(0,Cn.jsx)("div",{className:"w-full",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow p-0 space-y-0 w-full",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 pt-6 pb-2",children:[(0,Cn.jsx)("div",{className:"text-lg font-bold text-gray-900 mb-4",children:"Banking"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsxs)("button",{onClick:C,className:"inline-flex items-center text-xs text-gray-400 hover:text-gray-600 px-2 py-1 bg-transparent border-none shadow-none",style:{background:"none",border:"none"},children:[(0,Cn.jsx)(Is,{className:"h-4 w-4 mr-1"})," Copy"]}),(0,Cn.jsx)("button",{onClick:()=>i?(async()=>{if(p(""),null===e||void 0===e||!e.organization_id)return;const t={organization_id:e.organization_id,bank_provider:b.bankProvider,bank_account_opened:b.bankAccountOpened};try{await On(t),j(e=>Oe(Oe({},e),b)),l(!1)}catch(r){p(r.message||"Failed to save.")}})():l(!0),className:"inline-flex items-center text-xs text-blue-600 border border-blue-600 bg-white rounded-md px-3 py-1.5 hover:bg-blue-50 hover:border-blue-700 hover:text-blue-700",style:{boxShadow:"none"},children:i?(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)(Ds,{className:"h-4 w-4 mr-1"})," Save"]}):(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)(Ls,{className:"h-4 w-4 mr-1"})," Edit"]})})]})]}),(0,Cn.jsxs)("div",{className:"px-6 pb-6 pt-0 space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Bank Provider"}),i?(0,Cn.jsx)("input",{type:"text",value:b.bankProvider,onChange:e=>y(t=>Oe(Oe({},t),{},{bankProvider:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.bankProvider})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)("label",{className:"block w-40 text-xs font-medium text-gray-500",children:"Bank Account Opened"}),i?(0,Cn.jsx)("input",{type:"date",value:b.bankAccountOpened,onChange:e=>y(t=>Oe(Oe({},t),{},{bankAccountOpened:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}):(0,Cn.jsx)("div",{className:"flex-1 text-gray-900 text-sm",children:v.bankAccountOpened})]})]})]})})]})]})},Ms=["title","titleId"];function zs(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ms);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M13.75 7h-3V3.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0L6.2 4.74a.75.75 0 0 0 1.1 1.02l1.95-2.1V7h-3A2.25 2.25 0 0 0 4 9.25v7.5A2.25 2.25 0 0 0 6.25 19h7.5A2.25 2.25 0 0 0 16 16.75v-7.5A2.25 2.25 0 0 0 13.75 7Zm-3 0h-1.5v5.25a.75.75 0 0 0 1.5 0V7Z",clipRule:"evenodd"}))}const Fs=t.forwardRef(zs),Bs=["title","titleId"];function Us(e,r){let{title:n,titleId:s}=e,a=Yn(e,Bs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}),t.createElement("path",{d:"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}))}const qs=t.forwardRef(Us),Hs=["title","titleId"];function Ws(e,r){let{title:n,titleId:s}=e,a=Yn(e,Hs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const Vs=t.forwardRef(Ws),Gs=["title","titleId"];function $s(e,r){let{title:n,titleId:s}=e,a=Yn(e,Gs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ks=t.forwardRef($s),Ys=["title","titleId"];function Zs(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ys);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Js=t.forwardRef(Zs),Qs=["title","titleId"];function Xs(e,r){let{title:n,titleId:s}=e,a=Yn(e,Qs);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const ea=t.forwardRef(Xs),ta=["title","titleId"];function ra(e,r){let{title:n,titleId:s}=e,a=Yn(e,ta);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const na=t.forwardRef(ra),sa=["title","titleId"];function aa(e,r){let{title:n,titleId:s}=e,a=Yn(e,sa);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const ia=t.forwardRef(aa),la=e=>{let{companyName:t,setCompanyName:r,logoUrl:n,setLogoUrl:s,fileInputRef:a,handleLogoUpload:i,handleCompanyNameSubmit:l,setShowCompanyPopup:o}=e;return(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>o(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Company Identity"}),(0,Cn.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:l,className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-8",children:[(0,Cn.jsx)("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,Cn.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"This will be displayed on your project and documents."}),(0,Cn.jsx)("input",{id:"companyName",type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Enter your company name...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm transition",autoFocus:!0})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsxs)("div",{className:"mb-2",children:[(0,Cn.jsx)("span",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),(0,Cn.jsx)("span",{className:"block text-xs text-gray-500",children:"Upload your company logo for branding."})]}),(0,Cn.jsxs)("div",{className:"border border-gray-200 bg-gray-100 rounded-lg px-4 py-4 flex items-center space-x-6 w-full",children:[(0,Cn.jsx)("div",{className:"w-28 h-28 flex items-center justify-center bg-white rounded-lg overflow-hidden border border-gray-200",children:n?(0,Cn.jsx)("img",{src:n,alt:"Company Logo",className:"object-contain w-full h-full"}):(0,Cn.jsxs)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,Cn.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"4",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,Cn.jsx)("path",{d:"M8 12h8M12 8v8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,Cn.jsx)("div",{className:"flex flex-col items-start space-y-2",children:(0,Cn.jsx)("button",{type:"button",onClick:()=>a.current&&a.current.click(),className:"px-3 py-1 bg-purple-600 text-white rounded-md text-xs font-medium hover:bg-purple-700 transition-colors",children:"Replace image"})}),(0,Cn.jsx)("input",{type:"file",accept:"image/*",ref:a,onChange:i,className:"hidden"})]})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"})]})]})]})]})},oa=e=>{let{companyNumber:t,setCompanyNumber:r,incorporationDate:n,setIncorporationDate:s,handleCompanyNumberSubmit:a,setShowCompanyNumberPopup:i}=e;return(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>i(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Company Number & Incorporation Date"}),(0,Cn.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:a,className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Number"}),(0,Cn.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"e.g., 12345678",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Incorporation Date"}),(0,Cn.jsx)("input",{type:"date",value:n,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"})]})]})]})]})},ca=e=>{let{registeredOffice:t,setRegisteredOffice:r,website:n,setWebsite:s,contactEmail:a,setContactEmail:i,linkedinProfile:l,setLinkedinProfile:o,handleOfficeSubmit:c,setShowOfficePopup:d}=e;return(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>d(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Registered Office & Contact Info"}),(0,Cn.jsx)("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:c,className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registered Office"}),(0,Cn.jsx)("textarea",{value:t,onChange:e=>r(e.target.value),placeholder:"Full address...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),(0,Cn.jsx)("input",{type:"url",value:n,onChange:e=>s(e.target.value),placeholder:"www.yourcompany.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,Cn.jsx)("input",{type:"email",value:a,onChange:e=>i(e.target.value),placeholder:"hello@yourcompany.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),(0,Cn.jsx)("input",{type:"url",value:l,onChange:e=>o(e.target.value),placeholder:"https://linkedin.com/company/yourcompany",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"})]})]})]})]})},da=e=>{let{bankProvider:t,setBankProvider:r,bankAccountOpened:n,setBankAccountOpened:s,handleBankSubmit:a,setShowBankPopup:i}=e;return(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>i(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Business Bank Account"}),(0,Cn.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:a,className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Provider"}),(0,Cn.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"e.g., Barclays Bank",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Opened Date"}),(0,Cn.jsx)("input",{type:"date",value:n,onChange:e=>s(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"})]})]})]})]})},ua=e=>{let{vatNumber:t,setVatNumber:r,handleVatSubmit:n,setShowVatPopup:s}=e;return(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>s(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"VAT Registration"}),(0,Cn.jsx)("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:n,className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsx)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VAT Number"}),(0,Cn.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"e.g., GB123456789",className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",autoFocus:!0})]})}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"})]})]})]})]})},ma=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,checklist:!1,docs:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({add:!0,upload:!1,links:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Foundations Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Set up your company's legal and operational foundations. Complete the checklist to ensure all key documents and info are in place."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("checklist"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Checklist"}),i.checklist?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.checklist&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Company name, number, and incorporation date"}),(0,Cn.jsx)("li",{children:"Registered office and contact info"}),(0,Cn.jsx)("li",{children:"Articles of association, founder agreements, NDAs, and IP assignment"}),(0,Cn.jsx)("li",{children:"Bank account, VAT, insurance, and board structure"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("docs"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Key Documents"}),i.docs?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.docs&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Upload and store all foundational documents securely"}),(0,Cn.jsx)("li",{children:"Keep everything accessible for your team and investors"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("add"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Adding Info"}),c.add?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.add&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Click on each checklist item to add or update information. Use the popups to upload documents and enter details."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("upload"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Uploading Documents"}),c.upload?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.upload&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Upload articles, agreements, NDAs, and insurance docs. Accepted formats: PDF, DOCX, PNG, JPG."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("links"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Links & Navigation"}),c.links?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.links&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use the provided links to jump to the cap table, compliance deadlines, or add reminders to your calendar."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your company setup assistant. I can help you complete your foundation checklist, upload documents, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What documents do I need to upload?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Upload your articles of association, founder agreements, NDAs, IP assignments, and insurance docs. Make sure everything is up to date."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I update my company info?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Click on the checklist items to edit company name, number, address, and more. Use the popups to upload or update details."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about company setup...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},pa=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)(!1),[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[f,g]=(0,t.useState)(""),[b,y]=(0,t.useState)(""),[v,j]=(0,t.useState)(""),[w,N]=(0,t.useState)(""),[k,C]=(0,t.useState)(""),[S,_]=(0,t.useState)(""),[E,I]=(0,t.useState)(""),[P,T]=(0,t.useState)(""),[D,A]=(0,t.useState)(""),O=(0,t.useRef)(),[L,R]=(0,t.useState)(!1),[M,z]=(0,t.useState)([{step:"Company Name & Logo",description:"Set your legal company name and upload your logo.",hasUpload:!0,uploadType:"logo",completed:!1,popup:"companyName"},{step:"Company Number & Incorporation Date",description:"Record the Companies House number and date of incorporation.",completed:!1,popup:"companyNumber"},{step:"Registered Office & Contact Info",description:"Store your legal address, website, and contact emails.",completed:!1,popup:"office"},{step:"Articles of Association",description:"Upload your articles and confirm they're accessible to the team.",hasUpload:!0,uploadType:"document",completed:!1},{step:"Shareholders & Cap Table",description:"Ensure initial shareholders are logged and cap table is added.",hasLink:!0,linkText:"View Cap Table",linkTo:"/cap-table",completed:!1},{step:"Founder Agreements",description:"Upload signed founder agreements or SAFEs if applicable.",hasUpload:!0,uploadType:"document",completed:!1},{step:"IP Assignment",description:"Confirm IP assignment agreements are in place for founders and early team.",hasUpload:!0,uploadType:"document",completed:!1},{step:"NDAs",description:"Add template NDAs for future use and upload any executed ones.",hasUpload:!0,uploadType:"document",completed:!1},{step:"Business Bank Account",description:"Record banking provider and date account was opened.",completed:!1,popup:"bank"},{step:"VAT Registration",description:"Track your VAT registration number and effective date.",completed:!1,popup:"vat"},{step:"Insurance",description:"Upload insurance docs (public liability, employer liability, cyber etc).",hasUpload:!0,uploadType:"policy",completed:!1},{step:"Board Structure",description:"Define board members and roles. Upload board meeting template.",hasUpload:!0,uploadType:"document",completed:!1},{step:"Org Chart",description:"Add your org chart for internal visibility.",hasUpload:!0,uploadType:"image/file",completed:!1},{step:"Founders' Equity Vesting",description:"Record any equity vesting schedules in place.",hasLink:!0,linkText:"Link to Cap Table",linkTo:"/cap-table",completed:!1},{step:"Compliance Deadlines",description:"Add reminders for annual filings, confirmation statements, and accounts.",hasLink:!0,linkText:"Add to calendar",linkTo:"#",completed:!1}]),F=M.filter(e=>e.completed).length,B=M.length,U=Math.round(F/B*100);(0,t.useEffect)(()=>{(async()=>{if(null===e||void 0===e||!e.organization_id)return;const t=await An(e.organization_id);t&&(p(t.name||""),x(t.company_number||""),g(t.incorporation_date||""),y(t.registered_office||""),j(t.website||""),N(t.contact_email||""),_(t.vat_number||""),I(t.bank_provider||""),T(t.bank_account_opened||""),A(t.logo_url||""),C(t.linkedin_profile||""),z(e=>e.map((e,r)=>{switch(r){case 0:return Oe(Oe({},e),{},{completed:!(!t.name||!t.logo_url)});case 1:return Oe(Oe({},e),{},{completed:!(!t.company_number||!t.incorporation_date)});case 2:return Oe(Oe({},e),{},{completed:!!(t.registered_office&&t.website&&t.contact_email)});case 8:return Oe(Oe({},e),{},{completed:!(!t.bank_provider||!t.bank_account_opened)});case 9:return Oe(Oe({},e),{},{completed:!!t.vat_number});default:return e}})))})()},[e]);const q=(0,t.useCallback)(e=>{z(t=>{const r=[...t];return r[e].completed=!r[e].completed,r})},[]),H=(0,t.useCallback)(e=>{const t=M[e];if(t.popup)switch(t.popup){case"companyName":n(!0);break;case"companyNumber":a(!0);break;case"office":l(!0);break;case"bank":c(!0);break;case"vat":u(!0)}},[]);return(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Company Foundations"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Set up your company's legal and operational foundations. Complete the checklist to ensure all key documents and info are in place."})]}),(0,Cn.jsxs)("button",{onClick:()=>R(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(ma,{isOpen:L,onClose:()=>R(!1)}),(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,Cn.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Setup Progress"}),(0,Cn.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[U,"% Complete"]})]}),(0,Cn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Cn.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(U,"%")}})})]}),(0,Cn.jsx)("div",{className:"p-6",children:(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Quick Setup"}),(0,Cn.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Click on any step to complete it. Some steps will open forms to collect information."}),(0,Cn.jsx)("button",{onClick:()=>n(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Start with Company Name \u2192"})]}),(0,Cn.jsx)("div",{className:"space-y-3",children:M.map((e,t)=>(0,Cn.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors ".concat(e.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"),onClick:()=>H(t),children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),q(t)},className:"flex-shrink-0 ".concat(e.completed?"text-green-600":"text-gray-400 hover:text-gray-600"),children:(0,Cn.jsx)(Qn,{className:"h-6 w-6"})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium ".concat(e.completed?"text-green-800":"text-gray-900"),children:e.step}),(0,Cn.jsx)("p",{className:"text-sm ".concat(e.completed?"text-green-700":"text-gray-600"),children:e.description})]})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[e.hasUpload&&(0,Cn.jsxs)("button",{onClick:e=>e.stopPropagation(),className:"text-sm text-gray-600 hover:text-gray-800 flex items-center space-x-1",children:[(0,Cn.jsx)(Fs,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Upload"})]}),e.hasLink&&(0,Cn.jsxs)("a",{href:e.linkTo,onClick:e=>e.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,Cn.jsx)(qs,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:e.linkText})]}),e.popup&&(0,Cn.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded",children:"Click to edit"})]})]},e.step))})]})}),r&&(0,Cn.jsx)(la,{companyName:m,setCompanyName:p,logoUrl:D,setLogoUrl:A,fileInputRef:O,handleLogoUpload:async t=>{const r=t.target.files[0];if(!r||null===e||void 0===e||!e.organization_id)return;const n=r.name.split(".").pop(),s="".concat(e.organization_id,"/logo.").concat(n),{data:a,error:i}=await kn.storage.from("company-logos").upload(s,r,{upsert:!0});if(i)return void alert("Error uploading logo: "+i.message);const{data:l,error:o}=kn.storage.from("company-logos").getPublicUrl(s);if(o||null===l||void 0===l||!l.publicUrl)return void alert("Error getting logo URL");const c=l.publicUrl;A(c),await On({organization_id:e.organization_id,logo_url:c})},handleCompanyNameSubmit:async t=>{null===t||void 0===t||t.preventDefault(),m.trim()&&null!==e&&void 0!==e&&e.organization_id&&(await On({organization_id:e.organization_id,name:m}),z(e=>{const t=[...e];return t[0].completed=!(!m||!D),t}),n(!1))},setShowCompanyPopup:n}),s&&(0,Cn.jsx)(oa,{companyNumber:h,setCompanyNumber:x,incorporationDate:f,setIncorporationDate:g,handleCompanyNumberSubmit:async t=>{null===t||void 0===t||t.preventDefault(),h.trim()&&f&&null!==e&&void 0!==e&&e.organization_id&&(await On({organization_id:e.organization_id,company_number:h,incorporation_date:f}),z(e=>{const t=[...e];return t[1].completed=!0,t}),a(!1))},setShowCompanyNumberPopup:a}),i&&(0,Cn.jsx)(ca,{registeredOffice:b,setRegisteredOffice:y,website:v,setWebsite:j,contactEmail:w,setContactEmail:N,linkedinProfile:k,setLinkedinProfile:C,handleOfficeSubmit:async t=>{null===t||void 0===t||t.preventDefault(),b.trim()&&v.trim()&&w.trim()&&null!==e&&void 0!==e&&e.organization_id&&(await On({organization_id:e.organization_id,registered_office:b,website:v,contact_email:w,linkedin_profile:k}),z(e=>{const t=[...e];return t[2].completed=!0,t}),l(!1))},setShowOfficePopup:l}),o&&(0,Cn.jsx)(da,{bankProvider:E,setBankProvider:I,bankAccountOpened:P,setBankAccountOpened:T,handleBankSubmit:async t=>{null===t||void 0===t||t.preventDefault(),E.trim()&&P&&null!==e&&void 0!==e&&e.organization_id&&(await On({organization_id:e.organization_id,bank_provider:E,bank_account_opened:P}),z(e=>{const t=[...e];return t[8].completed=!0,t}),c(!1))},setShowBankPopup:c}),d&&(0,Cn.jsx)(ua,{vatNumber:S,setVatNumber:_,handleVatSubmit:async t=>{null===t||void 0===t||t.preventDefault(),S.trim()&&null!==e&&void 0!==e&&e.organization_id&&(await On({organization_id:e.organization_id,vat_number:S}),z(e=>{const t=[...e];return t[9].completed=!0,t}),u(!1))},setShowVatPopup:u})]})]})},ha=e=>{let{children:t,className:r=""}=e;return(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow p-6 ".concat(r),children:t})},xa=()=>(0,Cn.jsx)(ha,{children:(0,Cn.jsxs)("div",{className:"text-center py-12",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Financial Setup"}),(0,Cn.jsx)("p",{className:"text-gray-500",children:"This feature is coming soon."})]})}),fa=e=>{let{activeSubTab:r,onSubTabChange:n}=e;return(0,Cn.jsx)(t.Fragment,{children:(0,Cn.jsx)("div",{children:(()=>{switch(r){case"foundation":default:return(0,Cn.jsx)(pa,{});case"details":return(0,Cn.jsx)(Rs,{});case"financial":return(0,Cn.jsx)(xa,{})}})()})})},ga=["lineItems"],ba={async getStats(e){try{const[{data:t,error:r},{data:n,error:s}]=await Promise.all([kn.from("sent_invoices").select("status, total_amount, due_date").eq("organization_id",e),kn.from("received_invoices").select("status, total_amount, due_date").eq("organization_id",e)]);if(r)throw r;if(s)throw s;const a=new Date,i=(a.getMonth(),a.getFullYear(),{totalSent:t.length,totalReceived:n.length,totalPaid:0,totalUnpaid:0,totalOverdue:0,outstandingReceivables:0,outstandingPayables:0,netFlow:0});return t.forEach(e=>{"paid"===e.status?i.totalPaid++:"overdue"===e.status?(i.totalOverdue++,i.outstandingReceivables+=parseFloat(e.total_amount)):["draft","sent"].includes(e.status)&&(i.totalUnpaid++,i.outstandingReceivables+=parseFloat(e.total_amount))}),n.forEach(e=>{"paid"===e.status?i.totalPaid++:"overdue"===e.status?(i.totalOverdue++,i.outstandingPayables+=parseFloat(e.total_amount)):["pending","scheduled"].includes(e.status)&&(i.totalUnpaid++,i.outstandingPayables+=parseFloat(e.total_amount))}),i.netFlow=i.outstandingReceivables-i.outstandingPayables,i}catch(t){throw console.error("Error fetching invoice stats:",t),t}},async getSentInvoices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=kn.from("sent_invoices").select("\n          *,\n          sent_invoice_line_items(*)\n        ").eq("organization_id",e).order("created_at",{ascending:!1});t.status&&"all"!==t.status&&(r=r.eq("status",t.status)),t.search&&(r=r.or("client_name.ilike.%".concat(t.search,"%,invoice_number.ilike.%").concat(t.search,"%"))),t.dateFrom&&(r=r.gte("date_issued",t.dateFrom)),t.dateTo&&(r=r.lte("date_issued",t.dateTo));const{data:n,error:s}=await r;if(s)throw s;return n}catch(r){throw console.error("Error fetching sent invoices:",r),r}},async getReceivedInvoices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=kn.from("received_invoices").select("*").eq("organization_id",e).order("created_at",{ascending:!1});t.status&&"all"!==t.status&&(r=r.eq("status",t.status)),t.search&&(r=r.or("supplier_name.ilike.%".concat(t.search,"%,invoice_number.ilike.%").concat(t.search,"%"))),t.category&&(r=r.eq("category",t.category)),t.dateFrom&&(r=r.gte("date_issued",t.dateFrom)),t.dateTo&&(r=r.lte("date_issued",t.dateTo));const{data:n,error:s}=await r;if(s)throw s;return n}catch(r){throw console.error("Error fetching received invoices:",r),r}},async createSentInvoice(e,t){try{var r;const{lineItems:n}=t,s=Yn(t,ga),a=n.reduce((e,t)=>e+t.quantity*t.rate,0),i=a+(s.tax_amount||0),{data:l,error:o}=await kn.from("sent_invoices").insert(Oe(Oe({},s),{},{organization_id:e,subtotal:a,total_amount:i,created_by:null===(r=(await kn.auth.getUser()).data.user)||void 0===r?void 0:r.id})).select().single();if(o)throw o;if(n&&n.length>0){const e=n.map((e,t)=>({invoice_id:l.id,description:e.description,quantity:parseFloat(e.quantity),unit_rate:parseFloat(e.rate),amount:parseFloat(e.quantity)*parseFloat(e.rate),sort_order:t})),t=["invoice_id","description","quantity","unit_rate","amount","sort_order"],r=e.map(e=>{const r={};return t.forEach(t=>{r[t]=e[t]}),r});console.log("Inserting sanitized line items:",r);const{error:s}=await kn.from("sent_invoice_line_items").insert(r);if(s)throw s}return l}catch(n){throw console.error("Error creating sent invoice:",n),n}},async uploadReceivedInvoice(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var n;let s=null;if(r){const t="invoices/".concat(e,"/").concat(Date.now(),"_").concat(r.name),{data:n,error:a}=await kn.storage.from("invoices").upload(t,r);if(console.log("Upload response:",n,a),a)throw console.error("Supabase upload error:",a),a;const{data:i}=kn.storage.from("invoices").getPublicUrl(t);console.log("Public URL data:",i),s=i.publicUrl}const{data:a,error:i}=await kn.from("received_invoices").insert(Oe(Oe({},t),{},{organization_id:e,file_url:s,created_by:null===(n=(await kn.auth.getUser()).data.user)||void 0===n?void 0:n.id})).select().single();if(console.log("DB insert response:",a,i),i)throw i;return a}catch(s){throw console.error("Error uploading received invoice:",s),s}},async updateInvoiceStatus(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{var s;const a="sent"===t?"sent_invoices":"received_invoices",i={status:r};"paid"===r&&(i.paid_at=(new Date).toISOString());const{data:l,error:o}=await kn.from(a).update(i).eq("id",e).select().single();if(o)throw o;return await kn.from("invoice_status_history").insert({invoice_id:e,invoice_type:t,new_status:r,changed_by:null===(s=(await kn.auth.getUser()).data.user)||void 0===s?void 0:s.id,notes:n}),l}catch(a){throw console.error("Error updating invoice status:",a),a}},async deleteInvoice(e,t){try{const r="sent"===t?"sent_invoices":"received_invoices",{error:n}=await kn.from(r).delete().eq("id",e);if(n)throw n;return!0}catch(r){throw console.error("Error deleting invoice:",r),r}},async getInvoiceById(e,t){try{const r="sent"===t?"sent_invoices":"received_invoices";let n=kn.from(r).select("*").eq("id",e).single();"sent"===t&&(n=kn.from(r).select("\n            *,\n            sent_invoice_line_items(*)\n          ").eq("id",e).single());const{data:s,error:a}=await n;if(a)throw a;return s}catch(r){throw console.error("Error fetching invoice:",r),r}},async getRecentActivity(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{const[{data:r,error:n},{data:s,error:a}]=await Promise.all([kn.from("sent_invoices").select("id, invoice_number, client_name, total_amount, status, created_at").eq("organization_id",e).order("created_at",{ascending:!1}).limit(t),kn.from("received_invoices").select("id, invoice_number, supplier_name, total_amount, status, created_at").eq("organization_id",e).order("created_at",{ascending:!1}).limit(t)]);if(n)throw n;if(a)throw a;const i=[...r.map(e=>Oe(Oe({},e),{},{type:"sent",title:"Invoice ".concat(e.invoice_number," sent to ").concat(e.client_name),amount:"\xa3".concat(e.total_amount.toLocaleString()),date:new Date(e.created_at).toLocaleDateString()})),...s.map(e=>Oe(Oe({},e),{},{type:"received",title:"Invoice ".concat(e.invoice_number," received from ").concat(e.supplier_name),amount:"\xa3".concat(e.total_amount.toLocaleString()),date:new Date(e.created_at).toLocaleDateString()}))].sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)).slice(0,t);return i}catch(r){throw console.error("Error fetching recent activity:",r),r}},async getInvoiceStatusHistory(e,t){try{const{data:r,error:n}=await kn.from("invoice_status_history").select("\n          *,\n          changed_by_user:users!invoice_status_history_changed_by_fkey(email)\n        ").eq("invoice_id",e).eq("invoice_type",t).order("changed_at",{ascending:!1});if(n)throw n;return r}catch(r){throw console.error("Error fetching status history:",r),r}},async bulkUpdateStatus(e,t,r){try{const n="sent"===t?"sent_invoices":"received_invoices",s={status:r};"paid"===r&&(s.paid_at=(new Date).toISOString());const{data:a,error:i}=await kn.from(n).update(s).in("id",e).select();if(i)throw i;const{data:{user:l}}=await kn.auth.getUser(),o=null===l||void 0===l?void 0:l.id,c=e.map(e=>({invoice_id:e,invoice_type:t,new_status:r,changed_by:o,notes:"Bulk status update to ".concat(r)}));return await kn.from("invoice_status_history").insert(c),a}catch(n){throw console.error("Error bulk updating status:",n),n}},async exportInvoices(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const n="sent"===t?await this.getSentInvoices(e,r):await this.getReceivedInvoices(e,r);return[("sent"===t?["Invoice Number","Client","Date Issued","Due Date","Amount","Status","Description"]:["Invoice Number","Supplier","Date Issued","Due Date","Amount","Status","Category","Description"]).join(","),...n.map(e=>("sent"===t?[e.invoice_number,e.client_name,e.date_issued,e.due_date,e.total_amount,e.status,e.description||""]:[e.invoice_number,e.supplier_name,e.date_issued,e.due_date,e.total_amount,e.status,e.category||"",e.description||""]).map(e=>'"'.concat(e,'"')).join(","))].join("\n")}catch(n){throw console.error("Error exporting invoices:",n),n}}},ya=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],va=e=>{let{data:t,currentBalance:r=5e5,width:n=900,height:s=320}=e;if(!t||0===t.length)return(0,Cn.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No data available"});const a=40,i=40,l=60,o=n-l-i,c=s-a-50,d=Math.max(...t.map(e=>Math.max(e.inflow,e.outflow)),1),u=o/t.length,m=.28*u,p=.08*u;let h=r;const x=t.map((e,t)=>(h+=e.inflow-e.outflow,{x:l+u*t+u/2,y:a+c-h/r*c,balance:h})),f=(x.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(e.x," ").concat(e.y)).join(" "),Math.max(r,...x.map(e=>e.balance))),g=Math.min(r,...x.map(e=>e.balance)),b=f-g||1;h=r;for(let v=0;v<x.length;v++)h+=t[v].inflow-t[v].outflow,x[v].y=a+c-(x[v].balance-g)/b*c;const y=x.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(e.x," ").concat(e.y)).join(" ");return(0,Cn.jsxs)("svg",{width:"100%",height:s,viewBox:"0 0 ".concat(n," ").concat(s),className:"w-full",children:[(0,Cn.jsxs)("g",{transform:"translate(".concat(n/2-110,", 12)"),children:[(0,Cn.jsx)("rect",{x:"0",y:"0",width:"16",height:"16",fill:"#93c5fd",rx:"2"}),(0,Cn.jsx)("text",{x:"22",y:"13",className:"text-sm fill-gray-700",children:"Inflow"}),(0,Cn.jsx)("rect",{x:"90",y:"0",width:"16",height:"16",fill:"#1e3a8a",rx:"2"}),(0,Cn.jsx)("text",{x:"112",y:"13",className:"text-sm fill-gray-700",children:"Outflow"}),(0,Cn.jsx)("line",{x1:"200",y1:"8",x2:"216",y2:"8",stroke:"#8b5cf6",strokeWidth:"2.5"}),(0,Cn.jsx)("text",{x:"222",y:"13",className:"text-sm fill-gray-700",children:"Remaining cash"})]}),[0,.25,.5,.75,1].map((e,t)=>(0,Cn.jsx)("line",{x1:l,y1:a+e*c,x2:n-i,y2:a+e*c,stroke:"#e5e7eb"},t)),t.map((e,t)=>{const r=l+u*t+p,n=a+c-e.inflow/d*c,s=e.inflow/d*c;return(0,Cn.jsx)("rect",{x:r,y:n,width:m,height:s,fill:"#93c5fd",rx:2},"in-".concat(t))}),t.map((e,t)=>{const r=l+u*t+p+m+p,n=a+c-e.outflow/d*c,s=e.outflow/d*c;return(0,Cn.jsx)("rect",{x:r,y:n,width:m,height:s,fill:"#1e3a8a",rx:2},"out-".concat(t))}),(0,Cn.jsx)("path",{d:y,stroke:"#8b5cf6",strokeWidth:"2.5",fill:"none"}),x.map((e,t)=>(0,Cn.jsx)("circle",{cx:e.x,cy:e.y,r:"3",fill:"#8b5cf6",stroke:"#fff",strokeWidth:"1"},t)),[0,.25,.5,.75,1].map((e,t)=>{const r=d-e*d;return(0,Cn.jsx)("text",{x:l-10,y:a+e*c+5,textAnchor:"end",className:"text-xs fill-gray-500",children:0===r?"0":"".concat(Math.abs(r)>=1e3?(r/1e3).toFixed(0)+"k":r.toFixed(0))},t)}),[0,.25,.5,.75,1].map((e,t)=>{const r=f-e*b;return(0,Cn.jsx)("text",{x:n-i+40,y:a+e*c+5,textAnchor:"start",className:"text-xs fill-gray-500",children:0===r?"0":"".concat(Math.abs(r)>=1e3?(r/1e3).toFixed(0)+"k":r.toFixed(0))},t)}),t.map((e,t)=>(0,Cn.jsx)("text",{x:l+u*t+u/2,y:s-18,textAnchor:"middle",className:"text-xs fill-gray-500",children:e.label},t))]})},ja=()=>{const[e,r]=(0,t.useState)((new Date).getMonth()),[n,s]=(0,t.useState)((new Date).getFullYear()),{currentOrganization:a}=_n(),[i,l]=(0,t.useState)([]),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)("sent"),[h,x]=(0,t.useState)([]),[f,g]=(0,t.useState)([]),[b,y]=(0,t.useState)(!1),v=(new Date).getFullYear(),j=Array.from({length:5},(e,t)=>v+t);(0,t.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&a.organization_id){y(!0);try{const[e,t]=await Promise.all([$n.getBudgetData(a.organization_id,n,!1),$n.getBudgetData(a.organization_id,n,!0)]);x(e||[]),g(t||[])}catch(e){console.error("Error fetching budget data:",e),x([]),g([])}finally{y(!1)}}})()},[null===a||void 0===a?void 0:a.organization_id,n]);const w=e=>e.reduce((e,t)=>{const r=t.category_name||"Uncategorized";return e[r]||(e[r]={type:t.type,subcategories:{}}),e[r].subcategories[t.line_item_name]||(e[r].subcategories[t.line_item_name]=[]),e[r].subcategories[t.line_item_name].push(t),e},{}),N=w(h),k=w(f),C=(e,t)=>{const r=e.filter(e=>"revenue"===e.type).reduce((e,r)=>e+(r["month_".concat(t+1)]||0),0),n=e.filter(e=>"expense"===e.type).reduce((e,r)=>e+Math.abs(r["month_".concat(t+1)]||0),0);return{revenue:r,expenses:n,profit:r-n}},S=C(h,e),_=C(f,e),E=C(f,Math.max(0,e-1)),I=Math.abs(S.expenses),P=5e5/I,T=(S.revenue,Math.abs(S.expenses),(()=>{const e=[];for(let t=0;t<12;t++){const r=C(h,t);e.push({label:ya[t],inflow:r.revenue,outflow:r.expenses,net:r.revenue-r.expenses})}return e})());return(0,t.useEffect)(()=>{(async()=>{if(null!==a&&void 0!==a&&a.organization_id){u(!0);try{if("sent"===m){const e=(await ba.getSentInvoices(a.organization_id,{status:"all"})).filter(e=>["sent","overdue"].includes(e.status));l(e)}else{const e=(await ba.getReceivedInvoices(a.organization_id,{status:"all"})).filter(e=>["pending","scheduled","overdue"].includes(e.status));c(e)}}catch(Qc){l([]),c([])}finally{u(!1)}}})()},[a,m]),(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Finance Overview"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-base",children:"Month-on-month summary of budget, forecast, invoicing, and management accounts."})]}),(0,Cn.jsxs)("div",{className:"flex gap-4 items-center mb-6",children:[(0,Cn.jsx)("select",{value:e,onChange:e=>r(Number(e.target.value)),className:"px-4 py-2 rounded-md border border-gray-300 focus:ring-purple-500 focus:border-purple-500 text-sm w-32",children:ya.map((e,t)=>(0,Cn.jsx)("option",{value:t,children:e},t))}),(0,Cn.jsx)("select",{value:n,onChange:e=>s(Number(e.target.value)),className:"px-4 py-2 rounded-md border border-gray-300 focus:ring-purple-500 focus:border-purple-500 text-sm",children:j.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-6",children:[(0,Cn.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Budget vs Forecast - ",ya[e]," ",n]}),b?(0,Cn.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading budget data..."}):(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full text-sm border border-gray-200 rounded-lg",children:[(0,Cn.jsx)("thead",{children:(0,Cn.jsxs)("tr",{className:"bg-gray-50",children:[(0,Cn.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-500 w-40",children:"Line"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l",children:"Budget"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l",children:"Forecast"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l",children:"Variance"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l-4 border-gray-300",children:"Last Month"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l",children:"MoM Change"})]})}),(0,Cn.jsxs)("tbody",{children:[(0,Cn.jsxs)("tr",{className:"bg-green-100",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 font-bold text-green-800",children:"Revenue"}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-semibold border-l",children:S.revenue.toLocaleString()}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-semibold border-l",children:_.revenue.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center font-semibold border-l ".concat(_.revenue>=S.revenue?"text-green-600":"text-red-600"),children:[S.revenue>0?((_.revenue-S.revenue)/S.revenue*100).toFixed(1):0,"%"]}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-semibold border-l-4 border-gray-300",children:E.revenue.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center font-semibold border-l ".concat(_.revenue>=E.revenue?"text-green-600":"text-red-600"),children:[E.revenue>0?((_.revenue-E.revenue)/E.revenue*100).toFixed(1):0,"%"]})]}),Object.entries(N).filter(e=>{let[t,r]=e;return"revenue"===r.type}).map(t=>{var r,n;let[s,a]=t;const i=Object.values(a.subcategories).flat().reduce((t,r)=>t+(r["month_".concat(e+1)]||0),0),l=Object.values((null===(r=k[s])||void 0===r?void 0:r.subcategories)||{}).flat().reduce((t,r)=>t+(r["month_".concat(e+1)]||0),0),o=Object.values((null===(n=k[s])||void 0===n?void 0:n.subcategories)||{}).flat().reduce((t,r)=>t+(r["month_".concat(e)]||0),0);return(0,Cn.jsxs)("tr",{className:"bg-green-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 font-medium text-green-900 pl-8",children:s}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 border-l",children:i.toLocaleString()}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 border-l",children:l.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center text-gray-600 border-l",children:[i>0?((l-i)/i*100).toFixed(1):0,"%"]}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 border-l-4 border-gray-300",children:o.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center text-gray-600 border-l",children:[o>0?((l-o)/o*100).toFixed(1):0,"%"]})]},s)}),(0,Cn.jsxs)("tr",{className:"bg-red-100",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 font-bold text-red-800",children:"Expenses"}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-semibold border-l",children:Math.abs(S.expenses).toLocaleString()}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-semibold border-l",children:Math.abs(_.expenses).toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center font-semibold border-l ".concat(Math.abs(_.expenses)<=Math.abs(S.expenses)?"text-green-600":"text-red-600"),children:[S.expenses>0?((Math.abs(_.expenses)-Math.abs(S.expenses))/Math.abs(S.expenses)*100).toFixed(1):0,"%"]}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-semibold border-l-4 border-gray-300",children:Math.abs(E.expenses).toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center font-semibold border-l ".concat(Math.abs(_.expenses)<=Math.abs(E.expenses)?"text-green-600":"text-red-600"),children:[E.expenses>0?((Math.abs(_.expenses)-Math.abs(E.expenses))/Math.abs(E.expenses)*100).toFixed(1):0,"%"]})]}),Object.entries(N).filter(e=>{let[t,r]=e;return"expense"===r.type}).map(t=>{var r,n;let[s,a]=t;const i=Math.abs(Object.values(a.subcategories).flat().reduce((t,r)=>t+(r["month_".concat(e+1)]||0),0)),l=Math.abs(Object.values((null===(r=k[s])||void 0===r?void 0:r.subcategories)||{}).flat().reduce((t,r)=>t+(r["month_".concat(e+1)]||0),0)),o=Math.abs(Object.values((null===(n=k[s])||void 0===n?void 0:n.subcategories)||{}).flat().reduce((t,r)=>t+(r["month_".concat(e)]||0),0));return(0,Cn.jsxs)("tr",{className:"bg-red-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 font-medium text-red-900 pl-8",children:s}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 border-l",children:i.toLocaleString()}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 border-l",children:l.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center text-gray-600 border-l",children:[i>0?((l-i)/i*100).toFixed(1):0,"%"]}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 border-l-4 border-gray-300",children:o.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center text-gray-600 border-l",children:[o>0?((l-o)/o*100).toFixed(1):0,"%"]})]},s)}),(0,Cn.jsxs)("tr",{className:"bg-blue-100 font-bold",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 text-blue-900",children:"Profit / Loss"}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-blue-900 border-l",children:S.profit.toLocaleString()}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-blue-900 border-l",children:_.profit.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center border-l ".concat(_.profit>=S.profit?"text-green-600":"text-red-600"),children:[Math.abs(S.profit)>0?((_.profit-S.profit)/Math.abs(S.profit)*100).toFixed(1):0,"%"]}),(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-blue-900 border-l-4 border-gray-300",children:E.profit.toLocaleString()}),(0,Cn.jsxs)("td",{className:"px-2 py-1 text-center border-l ".concat(_.profit>=E.profit?"text-green-600":"text-red-600"),children:[Math.abs(E.profit)>0?((_.profit-E.profit)/Math.abs(E.profit)*100).toFixed(1):0,"%"]})]})]})]})})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-6",children:[(0,Cn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Cash Flow & Burn Rate Analysis"}),(0,Cn.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 items-stretch",children:[(0,Cn.jsxs)("div",{className:"flex flex-col justify-start gap-4 min-w-[180px] max-w-[220px] bg-gray-50 rounded-lg p-4",children:[(0,Cn.jsxs)("div",{className:"text-left",children:[(0,Cn.jsxs)("div",{className:"text-lg font-semibold text-blue-900",children:["\xa3",5e5.toLocaleString()]}),(0,Cn.jsx)("div",{className:"text-xs text-gray-600",children:"Cash Balance"})]}),(0,Cn.jsxs)("div",{className:"text-left",children:[(0,Cn.jsxs)("div",{className:"text-lg font-semibold text-red-700",children:["\xa3",I.toLocaleString()]}),(0,Cn.jsx)("div",{className:"text-xs text-gray-600",children:"Burn Rate"})]}),(0,Cn.jsxs)("div",{className:"text-left",children:[(0,Cn.jsx)("div",{className:"text-lg font-semibold text-green-700",children:P.toFixed(1)}),(0,Cn.jsx)("div",{className:"text-xs text-gray-600",children:"Runway (Months)"})]})]}),(0,Cn.jsx)("div",{className:"flex-1",children:(0,Cn.jsx)("div",{className:"bg-white rounded-lg p-2 shadow-sm",children:(0,Cn.jsx)(va,{data:T,currentBalance:5e5})})})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow border border-gray-100 p-6",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Outstanding Invoices"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsx)("button",{className:"px-3 py-1 rounded-md text-sm font-medium border ".concat("sent"===m?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-700 border-gray-300"),onClick:()=>p("sent"),children:"Invoices Owed To Us"}),(0,Cn.jsx)("button",{className:"px-3 py-1 rounded-md text-sm font-medium border ".concat("received"===m?"bg-purple-600 text-white border-purple-600":"bg-white text-gray-700 border-gray-300"),onClick:()=>p("received"),children:"Invoices We Owe"})]})]}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full text-sm border border-gray-200 rounded-lg",children:[(0,Cn.jsx)("thead",{children:(0,Cn.jsxs)("tr",{className:"bg-gray-50",children:[(0,Cn.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"sent"===m?"Client":"Supplier"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Amount"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Due Date"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Status"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Days Overdue"})]})}),(0,Cn.jsx)("tbody",{children:d?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"Loading..."})}):"sent"===m?0===i.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"No outstanding invoices"})}):i.map(e=>{const t=new Date(e.due_date),r=new Date,n="overdue"===e.status?Math.max(0,Math.floor((r-t)/864e5)):0;return(0,Cn.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Cn.jsx)("td",{className:"px-3 py-3 font-medium text-gray-900",children:e.client_name}),(0,Cn.jsxs)("td",{className:"px-3 py-3 text-right font-semibold text-gray-900",children:["\xa3",parseFloat(e.total_amount).toLocaleString()]}),(0,Cn.jsx)("td",{className:"px-3 py-3 text-center text-gray-600",children:t.toLocaleDateString()}),(0,Cn.jsx)("td",{className:"px-3 py-3 text-center",children:(0,Cn.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("overdue"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"overdue"===e.status?"Overdue":"Outstanding"})}),(0,Cn.jsx)("td",{className:"px-3 py-3 text-center text-gray-600",children:n>0?"".concat(n," days"):"-"})]},e.id)}):0===o.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"No outstanding invoices"})}):o.map(e=>{const t=new Date(e.due_date),r=new Date,n="overdue"===e.status?Math.max(0,Math.floor((r-t)/864e5)):0;return(0,Cn.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Cn.jsx)("td",{className:"px-3 py-3 font-medium text-gray-900",children:e.supplier_name}),(0,Cn.jsxs)("td",{className:"px-3 py-3 text-right font-semibold text-gray-900",children:["\xa3",parseFloat(e.total_amount).toLocaleString()]}),(0,Cn.jsx)("td",{className:"px-3 py-3 text-center text-gray-600",children:t.toLocaleDateString()}),(0,Cn.jsx)("td",{className:"px-3 py-3 text-center",children:(0,Cn.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("overdue"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"overdue"===e.status?"Overdue":e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,Cn.jsx)("td",{className:"px-3 py-3 text-center text-gray-600",children:n>0?"".concat(n," days"):"-"})]},e.id)})}),(0,Cn.jsx)("tfoot",{children:(0,Cn.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,Cn.jsx)("td",{className:"px-3 py-3 text-gray-900",children:"Total Outstanding"}),(0,Cn.jsxs)("td",{className:"px-3 py-3 text-right text-gray-900",children:["\xa3",("sent"===m?i:o).reduce((e,t)=>e+parseFloat(t.total_amount),0).toLocaleString()]}),(0,Cn.jsx)("td",{className:"px-3 py-3"}),(0,Cn.jsx)("td",{className:"px-3 py-3"}),(0,Cn.jsx)("td",{className:"px-3 py-3"})]})})]})})]})]})},wa=["title","titleId"];function Na(e,r){let{title:n,titleId:s}=e,a=Yn(e,wa);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ka=t.forwardRef(Na),Ca=["title","titleId"];function Sa(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ca);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const _a=t.forwardRef(Sa),Ea=["title","titleId"];function Ia(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ea);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Pa=t.forwardRef(Ia),Ta=["title","titleId"];function Da(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ta);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Aa=t.forwardRef(Da),Oa=["title","titleId"];function La(e,r){let{title:n,titleId:s}=e,a=Yn(e,Oa);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ra=t.forwardRef(La),Ma=["title","titleId"];function za(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ma);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Fa=t.forwardRef(za),Ba=["title","titleId"];function Ua(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ba);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const qa=t.forwardRef(Ua),Ha=["title","titleId"];function Wa(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ha);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Va=t.forwardRef(Wa),Ga=["title","titleId"];function $a(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ga);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ka=t.forwardRef($a);const Ya=()=>{var e,r,n;const{currentOrganization:s}=_n(),[a,i]=(0,t.useState)({totalSent:0,totalReceived:0,totalPaid:0,totalUnpaid:0,totalOverdue:0,outstandingReceivables:0,outstandingPayables:0,netFlow:0}),[l,o]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{null!==s&&void 0!==s&&s.organization_id&&u()},[s]);const u=async()=>{try{d(!0);const[e,t]=await Promise.all([ba.getStats(s.organization_id),ba.getRecentActivity(s.organization_id,5)]);i(e),o(t)}catch(e){console.error("Error loading invoice data:",e)}finally{d(!1)}},m=e=>{switch(e){case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-600 bg-red-100";case"sent":case"pending":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};"\xa3".concat(null===(e=a.outstandingReceivables)||void 0===e?void 0:e.toLocaleString()),"\xa3".concat(null===(r=a.outstandingPayables)||void 0===r?void 0:r.toLocaleString()),"\xa3".concat(null===(n=a.netFlow)||void 0===n?void 0:n.toLocaleString()),a.totalOverdue,a.totalPaid,a.totalUnpaid,a.totalOverdue;return c?(0,Cn.jsx)("div",{className:"space-y-6",children:(0,Cn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,Cn.jsxs)("div",{className:"bg-white rounded p-6 shadow animate-pulse",children:[(0,Cn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,Cn.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]},t))})}):(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Cn.jsx)("div",{className:"bg-white rounded p-6 border border-gray-200",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding Receivables"}),(0,Cn.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["\xa3",a.outstandingReceivables.toLocaleString()]})]}),(0,Cn.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,Cn.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded p-6 border border-gray-200",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding Payables"}),(0,Cn.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["\xa3",a.outstandingPayables.toLocaleString()]})]}),(0,Cn.jsx)("div",{className:"p-3 bg-red-100 rounded-full",children:(0,Cn.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded p-6 border border-gray-200",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Net Cash Flow"}),(0,Cn.jsxs)("p",{className:"text-2xl font-bold ".concat(a.netFlow>=0?"text-green-600":"text-red-600"),children:["\xa3",a.netFlow.toLocaleString()]})]}),(0,Cn.jsx)("div",{className:"p-3 rounded-full ".concat(a.netFlow>=0?"bg-green-100":"bg-red-100"),children:(0,Cn.jsx)("svg",{className:"w-6 h-6 ".concat(a.netFlow>=0?"text-green-600":"text-red-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded p-6 border border-gray-200",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Invoices"}),(0,Cn.jsx)("p",{className:"text-2xl font-bold text-red-600",children:a.totalOverdue})]}),(0,Cn.jsx)("div",{className:"p-3 bg-red-100 rounded-full",children:(0,Cn.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Cn.jsxs)("div",{className:"bg-white rounded p-6 border border-gray-200",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Invoice Status Distribution"}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:"Paid"}),(0,Cn.jsx)("span",{className:"text-sm font-medium",children:a.totalPaid})]}),(0,Cn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Cn.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(a.totalPaid/(a.totalSent+a.totalReceived)*100,"%")}})}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:"Unpaid"}),(0,Cn.jsx)("span",{className:"text-sm font-medium",children:a.totalUnpaid})]}),(0,Cn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Cn.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"".concat(a.totalUnpaid/(a.totalSent+a.totalReceived)*100,"%")}})}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:"Overdue"}),(0,Cn.jsx)("span",{className:"text-sm font-medium",children:a.totalOverdue})]}),(0,Cn.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Cn.jsx)("div",{className:"bg-red-600 h-2 rounded-full",style:{width:"".concat(a.totalOverdue/(a.totalSent+a.totalReceived)*100,"%")}})})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded p-6 border border-gray-200",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recent Activity"}),(0,Cn.jsx)("div",{className:"space-y-3",children:l.length>0?l.map((e,t)=>{return(0,Cn.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,Cn.jsx)("div",{className:"text-2xl",children:(r=e.type,"sent"===r?"\ud83d\udce4":"\ud83d\udce5")}),(0,Cn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:e.date})]}),(0,Cn.jsxs)("div",{className:"text-right",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.amount}),(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(m(e.status)),children:e.status})]})]},t);var r}):(0,Cn.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Cn.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Cn.jsx)("p",{className:"mt-2",children:"No recent activity"})]})})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded p-6 border border-gray-200",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("button",{className:"flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Invoice"]}),(0,Cn.jsxs)("button",{className:"flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Report"]})]})]})]})},Za=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)({status:"all",search:"",dateFrom:"",dateTo:""}),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1);(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.organization_id&&m()},[e,i]);const m=async()=>{try{a(!0);const t=await ba.getSentInvoices(e.organization_id,i);n(t)}catch(t){console.error("Error loading sent invoices:",t)}finally{a(!1)}},p=e=>{switch(e){case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-600 bg-red-100";case"sent":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},h=e=>new Date(e).toLocaleDateString();return s?(0,Cn.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,Cn.jsxs)("div",{className:"bg-white rounded p-6 shadow animate-pulse",children:[(0,Cn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,Cn.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]},t))}):(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("div",{className:"bg-white rounded p-6 border border-gray-200",children:(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Cn.jsxs)("select",{value:i.status,onChange:e=>l(Oe(Oe({},i),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"all",children:"All Status"}),(0,Cn.jsx)("option",{value:"draft",children:"Draft"}),(0,Cn.jsx)("option",{value:"sent",children:"Sent"}),(0,Cn.jsx)("option",{value:"paid",children:"Paid"}),(0,Cn.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search invoices...",value:i.search,onChange:e=>l(Oe(Oe({},i),{},{search:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,Cn.jsx)("input",{type:"date",value:i.dateFrom,onChange:e=>l(Oe(Oe({},i),{},{dateFrom:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,Cn.jsx)("input",{type:"date",value:i.dateTo,onChange:e=>l(Oe(Oe({},i),{},{dateTo:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),d&&(0,Cn.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[o.length," invoice(s) selected"]}),(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsxs)("select",{onChange:e=>(async e=>{try{await ba.bulkUpdateStatus(o,"sent",e),c([]),u(!1),await m()}catch(t){console.error("Error bulk updating status:",t)}})(e.target.value),className:"border border-blue-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"",children:"Update Status"}),(0,Cn.jsx)("option",{value:"sent",children:"Mark as Sent"}),(0,Cn.jsx)("option",{value:"paid",children:"Mark as Paid"}),(0,Cn.jsx)("option",{value:"overdue",children:"Mark as Overdue"})]}),(0,Cn.jsx)("button",{onClick:()=>{c([]),u(!1)},className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear Selection"})]})]})}),(0,Cn.jsx)("div",{className:"overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Cn.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?(c(r.map(e=>e.id)),u(!0)):(c([]),u(!1))},checked:o.length===r.length&&r.length>0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Issued"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(e=>(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:t=>((e,t)=>{if(t)c([...o,e]),u(!0);else{const t=o.filter(t=>t!==e);c(t),u(t.length>0)}})(e.id,t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.invoice_number}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.client_name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.client_email})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["\xa3",parseFloat(e.total_amount).toLocaleString()]})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(e.date_issued)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(e.due_date)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(p(e.status)),children:e.status})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await ba.updateInvoiceStatus(e,"sent",t),await m()}catch(r){console.error("Error updating invoice status:",r)}})(e.id,t.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"draft",children:"Draft"}),(0,Cn.jsx)("option",{value:"sent",children:"Sent"}),(0,Cn.jsx)("option",{value:"paid",children:"Paid"}),(0,Cn.jsx)("option",{value:"overdue",children:"Overdue"})]}),(0,Cn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await ba.deleteInvoice(e,"sent"),await m()}catch(t){console.error("Error deleting invoice:",t)}})(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id)):(0,Cn.jsx)("tr",{children:(0,Cn.jsxs)("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:[(0,Cn.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Cn.jsx)("p",{className:"mt-2",children:"No invoices found"})]})})})]})})]})},Ja=["title","titleId"];function Qa(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ja);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Xa=t.forwardRef(Qa),ei=["title","titleId"];function ti(e,r){let{title:n,titleId:s}=e,a=Yn(e,ei);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ri=t.forwardRef(ti),ni=e=>{let{isOpen:r,onClose:n,organizationId:s,onInvoiceUploaded:a}=e;const[i,l]=(0,t.useState)({supplier:"",invoiceNumber:"",dateIssued:"",dueDate:"",amount:"",currency:"GBP",description:"",category:"",paymentMethod:"",status:"pending"}),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)({}),h=(e,t)=>{l(r=>Oe(Oe({},r),{},{[e]:t})),m[e]&&p(t=>Oe(Oe({},t),{},{[e]:""}))},x=(0,t.useCallback)(e=>{e&&"application/pdf"===e.type?(c(e),console.log("File uploaded:",e.name)):alert("Please upload a PDF file")},[]),f=(0,t.useCallback)(e=>{e.preventDefault(),u(!0)},[]),g=(0,t.useCallback)(e=>{e.preventDefault(),u(!1)},[]),b=(0,t.useCallback)(e=>{e.preventDefault(),u(!1);const t=e.dataTransfer.files;t.length>0&&x(t[0])},[x]);return r?(0,Cn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Cn.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Received Invoice"}),(0,Cn.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)(Xa,{className:"h-6 w-6"})})]}),(0,Cn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return i.supplier.trim()||(e.supplier="Supplier is required"),i.invoiceNumber.trim()||(e.invoiceNumber="Invoice number is required"),i.dateIssued||(e.dateIssued="Date issued is required"),i.dueDate||(e.dueDate="Due date is required"),(!i.amount||parseFloat(i.amount)<=0)&&(e.amount="Amount must be greater than 0"),o||(e.file="Please upload an invoice file"),p(e),0===Object.keys(e).length})())try{if(!s)return void alert("No organization selected");const e={invoice_number:i.invoiceNumber,supplier_name:i.supplier,date_issued:i.dateIssued,due_date:i.dueDate,total_amount:i.amount,category:i.category,payment_method:i.paymentMethod,status:i.status,currency:i.currency,description:i.description};await ba.uploadReceivedInvoice(s,e,o),a()}catch(t){console.error("Error uploading invoice:",t),alert("Error uploading invoice. Please try again.")}},className:"space-y-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice File *"}),(0,Cn.jsx)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center ".concat(d?"border-purple-400 bg-purple-50":o?"border-green-400 bg-green-50":"border-gray-300 hover:border-gray-400"),onDragOver:f,onDragLeave:g,onDrop:b,children:o?(0,Cn.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,Cn.jsx)(Va,{className:"h-8 w-8 text-green-500"}),(0,Cn.jsxs)("div",{className:"text-left",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:o.name}),(0,Cn.jsxs)("p",{className:"text-xs text-gray-500",children:[(o.size/1024/1024).toFixed(2)," MB"]})]}),(0,Cn.jsx)("button",{type:"button",onClick:()=>c(null),className:"text-red-500 hover:text-red-700",children:(0,Cn.jsx)(Xa,{className:"h-5 w-5"})})]}):(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)(ri,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Cn.jsxs)("div",{className:"mt-4",children:[(0,Cn.jsxs)("p",{className:"text-sm text-gray-600",children:["Drag and drop your invoice PDF here, or"," ",(0,Cn.jsxs)("label",{className:"text-purple-600 hover:text-purple-500 cursor-pointer",children:["browse",(0,Cn.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{const t=e.target.files[0];t&&x(t)},className:"hidden"})]})]}),(0,Cn.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PDF files only, max 10MB"})]})]})}),m.file&&(0,Cn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.file})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier *"}),(0,Cn.jsx)("input",{type:"text",value:i.supplier,onChange:e=>h("supplier",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-purple-500 focus:border-purple-500 ".concat(m.supplier?"border-red-500":"border-gray-300"),placeholder:"Enter supplier name"}),m.supplier&&(0,Cn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.supplier})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Number *"}),(0,Cn.jsx)("input",{type:"text",value:i.invoiceNumber,onChange:e=>h("invoiceNumber",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-purple-500 focus:border-purple-500 ".concat(m.invoiceNumber?"border-red-500":"border-gray-300"),placeholder:"e.g., SUP-8868"}),m.invoiceNumber&&(0,Cn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.invoiceNumber})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Issued *"}),(0,Cn.jsx)("input",{type:"date",value:i.dateIssued,onChange:e=>h("dateIssued",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-purple-500 focus:border-purple-500 ".concat(m.dateIssued?"border-red-500":"border-gray-300")}),m.dateIssued&&(0,Cn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.dateIssued})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),(0,Cn.jsx)("input",{type:"date",value:i.dueDate,onChange:e=>h("dueDate",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-purple-500 focus:border-purple-500 ".concat(m.dueDate?"border-red-500":"border-gray-300")}),m.dueDate&&(0,Cn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.dueDate})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),(0,Cn.jsx)("input",{type:"number",min:"0",step:"0.01",value:i.amount,onChange:e=>h("amount",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:ring-purple-500 focus:border-purple-500 ".concat(m.amount?"border-red-500":"border-gray-300"),placeholder:"0.00"}),m.amount&&(0,Cn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.amount})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,Cn.jsxs)("select",{value:i.currency,onChange:e=>h("currency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[(0,Cn.jsx)("option",{value:"GBP",children:"GBP (\xa3)"}),(0,Cn.jsx)("option",{value:"USD",children:"USD ($)"}),(0,Cn.jsx)("option",{value:"EUR",children:"EUR (\u20ac)"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,Cn.jsxs)("select",{value:i.category,onChange:e=>h("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[(0,Cn.jsx)("option",{value:"",children:"Select category"}),(0,Cn.jsx)("option",{value:"Infrastructure",children:"Infrastructure"}),(0,Cn.jsx)("option",{value:"SaaS",children:"SaaS"}),(0,Cn.jsx)("option",{value:"Contractors",children:"Contractors"}),(0,Cn.jsx)("option",{value:"Supplies",children:"Supplies"}),(0,Cn.jsx)("option",{value:"Marketing",children:"Marketing"}),(0,Cn.jsx)("option",{value:"Legal",children:"Legal"}),(0,Cn.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),(0,Cn.jsxs)("select",{value:i.paymentMethod,onChange:e=>h("paymentMethod",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",children:[(0,Cn.jsx)("option",{value:"",children:"Select method"}),(0,Cn.jsx)("option",{value:"Direct Debit",children:"Direct Debit"}),(0,Cn.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"}),(0,Cn.jsx)("option",{value:"Credit Card",children:"Credit Card"}),(0,Cn.jsx)("option",{value:"Check",children:"Check"}),(0,Cn.jsx)("option",{value:"Other",children:"Other"})]})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Cn.jsx)("textarea",{value:i.description,onChange:e=>h("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Brief description of the invoice..."})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:"Upload Invoice"})]})]})]})}):null},si=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)({status:"all",search:"",category:"",dateFrom:"",dateTo:""}),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.organization_id&&h()},[e,i]);const h=async()=>{try{a(!0);const t=await ba.getReceivedInvoices(e.organization_id,i);n(t)}catch(t){console.error("Error loading received invoices:",t)}finally{a(!1)}},x=e=>{switch(e){case"paid":return"text-green-600 bg-green-100";case"overdue":return"text-red-600 bg-red-100";case"pending":return"text-yellow-600 bg-yellow-100";case"scheduled":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},f=e=>new Date(e).toLocaleDateString(),g=[...new Set(r.map(e=>e.category).filter(Boolean))];return s?(0,Cn.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,Cn.jsxs)("div",{className:"bg-white rounded p-6 shadow animate-pulse",children:[(0,Cn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,Cn.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]},t))}):(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("div",{className:"bg-white rounded p-6 border border-gray-200",children:(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Cn.jsxs)("select",{value:i.status,onChange:e=>l(Oe(Oe({},i),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"all",children:"All Status"}),(0,Cn.jsx)("option",{value:"pending",children:"Pending"}),(0,Cn.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,Cn.jsx)("option",{value:"paid",children:"Paid"}),(0,Cn.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,Cn.jsxs)("select",{value:i.category,onChange:e=>l(Oe(Oe({},i),{},{category:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"",children:"All Categories"}),g.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search invoices...",value:i.search,onChange:e=>l(Oe(Oe({},i),{},{search:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),(0,Cn.jsx)("input",{type:"date",value:i.dateFrom,onChange:e=>l(Oe(Oe({},i),{},{dateFrom:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),(0,Cn.jsx)("input",{type:"date",value:i.dateTo,onChange:e=>l(Oe(Oe({},i),{},{dateTo:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})}),d&&(0,Cn.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[o.length," invoice(s) selected"]}),(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsxs)("select",{onChange:e=>(async e=>{try{await ba.bulkUpdateStatus(o,"received",e),c([]),u(!1),await h()}catch(t){console.error("Error bulk updating status:",t)}})(e.target.value),className:"border border-blue-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"",children:"Update Status"}),(0,Cn.jsx)("option",{value:"pending",children:"Mark as Pending"}),(0,Cn.jsx)("option",{value:"scheduled",children:"Mark as Scheduled"}),(0,Cn.jsx)("option",{value:"paid",children:"Mark as Paid"}),(0,Cn.jsx)("option",{value:"overdue",children:"Mark as Overdue"})]}),(0,Cn.jsx)("button",{onClick:()=>{c([]),u(!1)},className:"text-sm text-blue-600 hover:text-blue-700",children:"Clear Selection"})]})]})}),(0,Cn.jsx)("div",{className:"overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Cn.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?(c(r.map(e=>e.id)),u(!0)):(c([]),u(!1))},checked:o.length===r.length&&r.length>0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Issued"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length>0?r.map(e=>(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:t=>((e,t)=>{if(t)c([...o,e]),u(!0);else{const t=o.filter(t=>t!==e);c(t),u(t.length>0)}})(e.id,t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.invoice_number}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.supplier_name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.supplier_email})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["\xa3",parseFloat(e.total_amount).toLocaleString()]})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.category||"Uncategorized"})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(e.date_issued)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(e.due_date)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(x(e.status)),children:e.status})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await ba.updateInvoiceStatus(e,"received",t),await h()}catch(r){console.error("Error updating invoice status:",r)}})(e.id,t.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"pending",children:"Pending"}),(0,Cn.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,Cn.jsx)("option",{value:"paid",children:"Paid"}),(0,Cn.jsx)("option",{value:"overdue",children:"Overdue"})]}),e.file_url&&(0,Cn.jsx)("a",{href:e.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900",children:"View"}),(0,Cn.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this invoice?"))try{await ba.deleteInvoice(e,"received"),await h()}catch(t){console.error("Error deleting invoice:",t)}})(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id)):(0,Cn.jsx)("tr",{children:(0,Cn.jsxs)("td",{colSpan:"9",className:"px-6 py-12 text-center text-gray-500",children:[(0,Cn.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,Cn.jsx)("p",{className:"mt-2",children:"No invoices found"})]})})})]})}),m&&(0,Cn.jsx)(ni,{isOpen:m,onClose:()=>p(!1),organizationId:null===e||void 0===e?void 0:e.organization_id,onInvoiceUploaded:()=>{p(!1),h()}})]})},ai=e=>{let{isOpen:r,onClose:n,onSuccess:s}=e;const{currentOrganization:a}=_n(),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)({invoice_number:"",client_name:"",client_email:"",client_address:"",date_issued:(new Date).toISOString().split("T")[0],due_date:new Date(Date.now()+2592e6).toISOString().split("T")[0],description:"",currency:"GBP",tax_amount:0,lineItems:[{description:"",quantity:1,rate:0}]}),d=(e,t)=>{c(r=>Oe(Oe({},r),{},{[e]:t}))},u=(e,t,r)=>{const n=[...o.lineItems];n[e]=Oe(Oe({},n[e]),{},{[t]:r}),c(e=>Oe(Oe({},e),{},{lineItems:n}))},m=()=>o.lineItems.reduce((e,t)=>e+t.quantity*t.rate,0);return r?(0,Cn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Cn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-4xl rounded-md bg-white",children:(0,Cn.jsxs)("div",{className:"mt-3",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Create New Invoice"}),(0,Cn.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{if(null===a||void 0===a||!a.organization_id)return void alert("No organization selected");if(!o.invoice_number||!o.client_name||!o.date_issued||!o.due_date)return void alert("Please fill in all required fields");const e=o.lineItems.filter(e=>e.description&&e.quantity>0&&e.rate>0);if(0===e.length)return void alert("Please add at least one valid line item");const t=Oe(Oe({},o),{},{lineItems:e});await ba.createSentInvoice(a.organization_id,t),c({invoice_number:"",client_name:"",client_email:"",client_address:"",date_issued:(new Date).toISOString().split("T")[0],due_date:new Date(Date.now()+2592e6).toISOString().split("T")[0],description:"",currency:"GBP",tax_amount:0,lineItems:[{description:"",quantity:1,rate:0}]}),null===s||void 0===s||s(),n()}catch(t){console.error("Error creating invoice:",t),"23505"===t.code?alert("Invoice number already exists for this organization. Please use a unique invoice number."):alert("Error creating invoice. Please try again.")}finally{l(!1)}},className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Number *"}),(0,Cn.jsx)("input",{type:"text",value:o.invoice_number,onChange:e=>d("invoice_number",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., INV-2025-001",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,Cn.jsxs)("select",{value:o.currency,onChange:e=>d("currency",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"GBP",children:"GBP (\xa3)"}),(0,Cn.jsx)("option",{value:"USD",children:"USD ($)"}),(0,Cn.jsx)("option",{value:"EUR",children:"EUR (\u20ac)"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Issued *"}),(0,Cn.jsx)("input",{type:"date",value:o.date_issued,onChange:e=>d("date_issued",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date *"}),(0,Cn.jsx)("input",{type:"date",value:o.due_date,onChange:e=>d("due_date",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Client Information"}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),(0,Cn.jsx)("input",{type:"text",value:o.client_name,onChange:e=>d("client_name",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Client or company name",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Email"}),(0,Cn.jsx)("input",{type:"email",value:o.client_email,onChange:e=>d("client_email",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"client@example.com"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Address"}),(0,Cn.jsx)("textarea",{value:o.client_address,onChange:e=>d("client_address",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Client address"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{value:o.description,onChange:e=>d("description",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Invoice description or notes"})]}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Cn.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"Line Items"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>{c(e=>Oe(Oe({},e),{},{lineItems:[...e.lineItems,{description:"",quantity:1,rate:0}]}))},className:"bg-blue-600 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-700",children:"Add Item"})]}),(0,Cn.jsx)("div",{className:"space-y-3",children:o.lineItems.map((e,t)=>(0,Cn.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,Cn.jsx)("div",{className:"col-span-6",children:(0,Cn.jsx)("input",{type:"text",value:e.description,onChange:e=>u(t,"description",e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Item description"})}),(0,Cn.jsx)("div",{className:"col-span-2",children:(0,Cn.jsx)("input",{type:"number",value:e.quantity,onChange:e=>u(t,"quantity",parseFloat(e.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Qty",min:"0",step:"0.01"})}),(0,Cn.jsx)("div",{className:"col-span-2",children:(0,Cn.jsx)("input",{type:"number",value:e.rate,onChange:e=>u(t,"rate",parseFloat(e.target.value)||0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Rate",min:"0",step:"0.01"})}),(0,Cn.jsxs)("div",{className:"col-span-1 text-sm font-medium text-gray-900",children:["\xa3",(e.quantity*e.rate).toFixed(2)]}),(0,Cn.jsx)("div",{className:"col-span-1",children:o.lineItems.length>1&&(0,Cn.jsx)("button",{type:"button",onClick:()=>(e=>{o.lineItems.length>1&&c(t=>Oe(Oe({},t),{},{lineItems:t.lineItems.filter((t,r)=>r!==e)}))})(t),className:"text-red-600 hover:text-red-800",children:(0,Cn.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},t))})]}),(0,Cn.jsx)("div",{className:"border-t pt-4",children:(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsxs)("div",{className:"w-64 space-y-2",children:[(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:"Subtotal:"}),(0,Cn.jsxs)("span",{className:"text-sm font-medium",children:["\xa3",m().toFixed(2)]})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:"Tax:"}),(0,Cn.jsx)("input",{type:"number",value:o.tax_amount,onChange:e=>d("tax_amount",parseFloat(e.target.value)||0),className:"w-20 border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",min:"0",step:"0.01"})]}),(0,Cn.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Total:"}),(0,Cn.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:["\xa3",(m()+parseFloat(o.tax_amount||0)).toFixed(2)]})]})]})})}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Creating...":"Create Invoice"})]})]})]})})}):null},ii=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Invoicing Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Invoicing Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Invoicing is a critical part of business cash flow management. This section covers best practices for creating, sending, and tracking invoices effectively."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Ensures timely payment and cash flow"}),(0,Cn.jsx)("li",{children:"Maintains professional business relationships"}),(0,Cn.jsx)("li",{children:"Provides clear documentation for accounting"}),(0,Cn.jsx)("li",{children:"Helps track business performance and revenue"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Always include clear payment terms and due dates"}),(0,Cn.jsx)("li",{children:"Provide detailed line items and descriptions"}),(0,Cn.jsx)("li",{children:"Send invoices promptly after work is completed"}),(0,Cn.jsx)("li",{children:"Follow up on overdue invoices regularly"}),(0,Cn.jsx)("li",{children:"Keep your contact and bank details up to date"}),(0,Cn.jsx)("li",{children:"Use sequential invoice numbers for easy tracking"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Create and Send Invoices"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Create, send, and track invoices from the Sent Invoices tab. Use the "New Invoice" button to create professional invoices with line items and payment terms.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Manage Received Invoices"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Upload and manage received invoices in the Received Invoices tab. Use filters and search to quickly find invoices and monitor your payables."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Track and Monitor"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Monitor outstanding and overdue invoices in the dashboard. Export invoice data for accounting or reporting, and set up payment reminders to reduce late payments."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your invoicing assistant. I can help you create invoices, manage payments, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I create a new invoice?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:'Click "New Invoice" in the Sent Invoices tab. Fill in the client details, add line items with descriptions and amounts, set payment terms, and send it to your client.'})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about invoicing...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},li=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)("overview"),[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)({totalSent:0,totalReceived:0,totalPaid:0,totalUnpaid:0,totalOverdue:0,outstandingReceivables:0,outstandingPayables:0,netFlow:0}),[m,p]=(0,t.useState)(!1);(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.organization_id&&h()},[e]);const h=async()=>{try{c(!0);u({totalSent:24,totalReceived:18,totalPaid:32,totalUnpaid:8,totalOverdue:3,outstandingReceivables:45e3,outstandingPayables:12e3,netFlow:33e3})}catch(e){console.error("Error fetching invoice stats:",e)}finally{c(!1)}},x=[{id:"overview",name:"Overview",icon:ka},{id:"sent",name:"Sent Invoices",icon:_a},{id:"received",name:"Received Invoices",icon:Pa}];return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoicing"}),(0,Cn.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage sent and received invoices, track payments, and monitor cash flow"})]}),(0,Cn.jsxs)("div",{className:"flex space-x-3",children:["sent"===r&&(0,Cn.jsxs)("button",{onClick:()=>{a(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[(0,Cn.jsx)(Aa,{className:"h-4 w-4 mr-2"}),"New Invoice"]}),"received"===r&&(0,Cn.jsxs)("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,Cn.jsx)(Ra,{className:"h-4 w-4 mr-2"}),"Upload Invoice"]}),(0,Cn.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)("svg",{className:"w-5 h-5 mr-2 text-purple-500",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M12 20a8 8 0 100-16 8 8 0 000 16z"})}),"Invoicing Help"]})]})]}),(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsx)("nav",{className:"-mb-px flex space-x-8",children:x.map(e=>{const t=e.icon;return(0,Cn.jsxs)("button",{onClick:()=>n(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(r===e.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(t,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:e.name})]},e.id)})})}),(0,Cn.jsx)("div",{className:"min-h-[600px]",children:(()=>{switch(r){case"overview":default:return(0,Cn.jsx)(Ya,{stats:d,loading:o});case"sent":return(0,Cn.jsx)(Za,{organizationId:null===e||void 0===e?void 0:e.organization_id});case"received":return(0,Cn.jsx)(si,{organizationId:null===e||void 0===e?void 0:e.organization_id})}})()}),(0,Cn.jsx)(ai,{isOpen:s,onClose:()=>a(!1),onSuccess:()=>{window.location.reload()}}),i&&(0,Cn.jsx)(ni,{isOpen:i,onClose:()=>l(!1),organizationId:null===e||void 0===e?void 0:e.organization_id,onInvoiceUploaded:()=>{l(!1),h()}}),(0,Cn.jsx)(ii,{isOpen:m,onClose:()=>p(!1)})]})},oi=["title","titleId"];function ci(e,r){let{title:n,titleId:s}=e,a=Yn(e,oi);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const di=t.forwardRef(ci),ui=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,integration:!1,runway:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({view:!0,forecast:!1,actuals:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Cash Flow Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Cash Flow Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Track actual cash movement based on real payments and forecasted items. This module integrates with your invoicing and forecasting to show current liquidity and projected cash runway."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("integration"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Integration"}),i.integration?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.integration&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Automatically updates when invoices are issued or paid"}),(0,Cn.jsx)("li",{children:"Incorporates forecasted items from budget planning"}),(0,Cn.jsx)("li",{children:"Shows both actual payments and expected cash flows"}),(0,Cn.jsx)("li",{children:"Calculates cash runway based on current position"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("runway"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Cash Runway"}),i.runway?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.runway&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Cash runway shows how long your current cash position will last based on projected income and expenses. This helps with financial planning and fundraising decisions."})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("view"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"View Options"}),c.view?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.view&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Switch between monthly and quarterly views. Use the summary cards for quick insights and detailed tables for comprehensive analysis."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("forecast"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Forecast vs Actuals"}),c.forecast?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.forecast&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Compare forecasted cash flows with actual payments. Green indicates better than expected, red shows shortfalls that need attention."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("actuals"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Actual Cash Movement"}),c.actuals?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.actuals&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Track real payments from invoices and other transactions. The system automatically updates when invoices are marked as paid or received."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your cash flow assistant. I can help you understand your financial position, analyze cash runway, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I improve my cash runway?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Focus on accelerating receivables, delaying payables where possible, and reducing unnecessary expenses. Monitor your cash flow regularly to identify trends."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What's the difference between forecast and actual?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Forecast shows expected cash flows based on your budget and invoice due dates. Actual shows real payments that have been received or made. The variance helps identify planning accuracy."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about cash flow...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},mi=e=>{let{title:t,value:r,subtitle:n,icon:s,color:a,trend:i}=e;return(0,Cn.jsxs)(ha,{className:"bg-white",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,Cn.jsx)("p",{className:"text-2xl font-bold ".concat(a),children:r}),(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:n})]}),(0,Cn.jsx)("div",{className:"w-12 h-12 ".concat(a.replace("text-","bg-").replace("-600","-100")," rounded-lg flex items-center justify-center"),children:s})]}),i&&(0,Cn.jsxs)("div",{className:"mt-2 flex items-center text-xs",children:[(0,Cn.jsxs)("span",{className:i>0?"text-green-600":"text-red-600",children:[i>0?"+":"",i,"%"]}),(0,Cn.jsx)("span",{className:"text-gray-500 ml-1",children:"vs last month"})]})]})},pi=e=>{let{item:t,isActual:r=!1}=e;return(0,Cn.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-4 py-3",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"w-2 h-2 rounded-full mr-3 ".concat(r?"bg-green-500":"bg-blue-500")}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.description}),(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:t.category})]})]})}),(0,Cn.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.date}),(0,Cn.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.type}),(0,Cn.jsxs)("td",{className:"px-4 py-3 text-sm font-medium ".concat(t.amount>=0?"text-green-600":"text-red-600"),children:[t.amount>=0?"+":"","\xa3",Math.abs(t.amount).toLocaleString()]}),(0,Cn.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.status})]})},hi=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)("monthly"),[s,a]=(0,t.useState)((new Date).toISOString().slice(0,7)),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(!0),[d,u]=(0,t.useState)([]),[m,p]=(0,t.useState)([]),[h,x]=(0,t.useState)([]),[f,g]=(0,t.useState)(null),[b,y]=(0,t.useState)(null),[v,j]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1),[k,C]=(0,t.useState)(""),[S,_]=(0,t.useState)([]),[E,I]=(0,t.useState)([]);(0,t.useEffect)(()=>{if(console.log("DEBUG: currentOrganization",e),!e||!e.organization_id)return;const t=e.organization_id;(async()=>{c(!0),y(null);try{console.log("DEBUG: Fetching categories for org",t);const e=await(async e=>{const{data:t,error:r}=await kn.from("cash_flow_categories").select("*").eq("organization_id",e).eq("is_active",!0).order("name");if(r)throw r;return t})(t);u(e);const r=s+"-01",n=new Date(new Date(r).getFullYear(),new Date(r).getMonth()+1,0).toISOString().slice(0,10);console.log("DEBUG: Fetching actual transactions",{org:t,startDate:r,endDate:n});const a=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=kn.from("cash_flow_transactions").select("\n      *,\n      cash_flow_categories(name, type),\n      cash_flow_subcategories(name)\n    ").eq("organization_id",e);t.startDate&&(r=r.gte("transaction_date",t.startDate)),t.endDate&&(r=r.lte("transaction_date",t.endDate)),t.type&&(r=r.eq("type",t.type));const{data:n,error:s}=await r.order("transaction_date",{ascending:!1});if(s)throw s;return n}(t,{startDate:r,endDate:n,status:"actual"});p(a||[]),console.log("DEBUG: Fetching forecasts",{org:t,startDate:r,endDate:n});const i=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=kn.from("cash_flow_forecasts").select("\n      *,\n      cash_flow_categories(name, type),\n      cash_flow_subcategories(name)\n    ").eq("organization_id",e);t.startDate&&(r=r.gte("forecast_date",t.startDate)),t.endDate&&(r=r.lte("forecast_date",t.endDate));const{data:n,error:s}=await r.order("forecast_date");if(s)throw s;return n}(t,{startDate:r,endDate:n});x(i||[]),console.log("DEBUG: Fetching summary",{org:t,startDate:r,endDate:n});const l=await(async(e,t,r)=>{const{data:n,error:s}=await kn.from("cash_flow_transactions").select("amount, type, transaction_date").eq("organization_id",e).eq("status","actual").gte("transaction_date",t).lte("transaction_date",r);if(s)throw s;const{data:a,error:i}=await kn.from("cash_flow_forecasts").select("amount, type, forecast_date").eq("organization_id",e).gte("forecast_date",t).lte("forecast_date",r);if(i)throw i;const l=n.filter(e=>"income"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),o=n.filter(e=>"expense"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),c=a.filter(e=>"income"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),d=a.filter(e=>"expense"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0);return{actual:{income:l,expenses:o,netCashFlow:l-o},forecast:{income:c,expenses:d,netCashFlow:c-d},combined:{income:l+c,expenses:o+d,netCashFlow:l+c-(o+d)}}})(t,r,n);g(l)}catch(e){console.error("DEBUG: Error loading cash flow data",e),y(e.message||"Error loading cash flow data")}c(!1)})()},[e,s]),(0,t.useEffect)(()=>{if(!e||!e.organization_id)return;(async e=>{var t;const{data:r,error:n}=await kn.from("cash_flow_snapshots").select("current_bank_balance, snapshot_date").eq("organization_id",e).order("snapshot_date",{ascending:!1}).limit(1).single();if(n&&"PGRST116"!==n.code)throw n;return null!==(t=null===r||void 0===r?void 0:r.current_bank_balance)&&void 0!==t?t:null})(e.organization_id).then(e=>j(e)).catch(()=>j(null))},[e]),(0,t.useEffect)(()=>{if(!e||!e.organization_id)return;const t=e.organization_id;(async e=>{const{data:t,error:r}=await kn.from("sent_invoices").select("total_amount, due_date").eq("organization_id",e).in("status",["pending","scheduled"]).gte("due_date",(new Date).toISOString().slice(0,10));if(r)throw r;return t||[]})(t).then(e=>{console.log("DEBUG: unpaid sent invoices",e),_(e)}).catch(()=>_([])),(async e=>{const{data:t,error:r}=await kn.from("received_invoices").select("total_amount, due_date").eq("organization_id",e).in("status",["pending","scheduled"]).gte("due_date",(new Date).toISOString().slice(0,10));if(r)throw r;return t||[]})(t).then(e=>{console.log("DEBUG: unpaid received invoices",e),I(e)}).catch(()=>I([]))},[e]);const P=h.filter(e=>"income"===e.type).reduce((e,t)=>e+Number(t.amount),0),T=h.filter(e=>"expense"===e.type).reduce((e,t)=>e+Number(t.amount),0),D=S.reduce((e,t)=>e+Number(t.total_amount),0),A=E.reduce((e,t)=>e+Number(t.total_amount),0),O=f&&f.actual.expenses<0?Math.abs(f.actual.expenses):T/3||1,L=Number(v||0)+P+D-T-A,R=O>0?L/O:0;return(0,Cn.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cash Flow"}),(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center border border-gray-200 rounded px-3 py-1.5 bg-white shadow-sm",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Current Bank Balance:"}),(0,Cn.jsx)("span",{className:"font-bold text-lg text-purple-700 mr-2",children:null!==v?"\xa3".concat(Number(v).toLocaleString()):"\u2014"}),(0,Cn.jsx)("button",{className:"text-xs px-2 py-1 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:()=>{N(!0),C(null!==v?v:"")},children:"Update"})]}),(0,Cn.jsxs)("button",{className:"inline-flex items-center border border-purple-500 text-purple-700 bg-white px-3 py-1.5 rounded-md shadow-sm hover:bg-purple-50 focus:outline-none gap-2",onClick:()=>l(!0),children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 text-purple-500"}),(0,Cn.jsx)("span",{className:"font-medium text-sm",children:"Help"})]})]})]}),i&&(0,Cn.jsx)(ui,{isOpen:i,onClose:()=>l(!1)}),w&&(0,Cn.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Update Bank Balance"}),(0,Cn.jsx)("input",{type:"number",className:"w-full border border-gray-300 rounded px-3 py-2 mb-4",value:k,onChange:e=>C(e.target.value),placeholder:"Enter current bank balance"}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Cn.jsx)("button",{className:"px-3 py-1.5 bg-gray-200 rounded",onClick:()=>N(!1),children:"Cancel"}),(0,Cn.jsx)("button",{className:"px-3 py-1.5 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:async()=>{if(!e||!e.organization_id)return;const t=e.organization_id;try{const e=await(async(e,t)=>{const r=(new Date).toISOString().slice(0,10),{data:n,error:s}=await kn.from("cash_flow_snapshots").upsert([{organization_id:e,snapshot_date:r,current_bank_balance:t}],{onConflict:["organization_id","snapshot_date"]}).select().single();if(s)throw s;return n.current_bank_balance})(t,Number(k));j(e),N(!1)}catch(r){alert("Failed to update bank balance: "+(r.message||r))}},children:"Save"})]})]})}),b&&(0,Cn.jsx)("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded mb-4",children:b}),o?(0,Cn.jsx)("div",{className:"text-center py-12 text-gray-500",children:"Loading cash flow data..."}):(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Cn.jsx)(mi,{title:"Net Cash Flow",value:f?"\xa3".concat((f.actual.netCashFlow||0).toLocaleString()):"\u2014",subtitle:"This period",icon:(0,Cn.jsx)(Fa,{className:"w-7 h-7 text-green-600"}),color:"text-green-600"}),(0,Cn.jsx)(mi,{title:"Total Income",value:f?"\xa3".concat((f.actual.income||0).toLocaleString()):"\u2014",subtitle:"Actual receipts",icon:(0,Cn.jsx)(_a,{className:"w-7 h-7 text-blue-600"}),color:"text-blue-600"}),(0,Cn.jsx)(mi,{title:"Total Expenses",value:f?"\xa3".concat((f.actual.expenses||0).toLocaleString()):"\u2014",subtitle:"Actual outflows",icon:(0,Cn.jsx)(Pa,{className:"w-7 h-7 text-red-600"}),color:"text-red-600"})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Actual Cash Flows"}),(0,Cn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("label",{className:"text-sm text-gray-600",children:"Period:"}),(0,Cn.jsx)("input",{type:"month",value:s,onChange:e=>a(e.target.value),className:"border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,Cn.jsx)("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,Cn.jsx)("tbody",{children:0===m.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:5,className:"text-center text-gray-400 py-6",children:"No actual cash flows for this period."})}):m.map(e=>{var t;return(0,Cn.jsx)(pi,{item:{description:e.description,category:(null===(t=e.cash_flow_categories)||void 0===t?void 0:t.name)||"",date:e.transaction_date,type:e.type,amount:e.amount,status:e.status},isActual:!0},e.id)})})]})}),(0,Cn.jsx)("div",{className:"flex items-center justify-between mt-8 mb-4",children:(0,Cn.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Forecasted Cash Flows"})}),(0,Cn.jsx)("div",{className:"overflow-x-auto bg-white rounded shadow",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,Cn.jsx)("tbody",{children:0===h.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:5,className:"text-center text-gray-400 py-6",children:"No forecasted cash flows for this period."})}):h.map(e=>{var t;return(0,Cn.jsx)(pi,{item:{description:e.description,category:(null===(t=e.cash_flow_categories)||void 0===t?void 0:t.name)||"",date:e.forecast_date,type:e.type,amount:e.amount,status:"Forecast"},isActual:!1},e.id)})})]})}),(0,Cn.jsx)("div",{className:"mt-8",children:(0,Cn.jsx)(ha,{className:"bg-white",children:(0,Cn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Cn.jsx)(di,{className:"w-8 h-8 text-purple-600"}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:"Cash Runway"}),(0,Cn.jsx)("div",{className:"text-2xl font-bold ".concat((M=R,M>=6?"text-green-600":M>=3?"text-yellow-600":"text-red-600")),children:R?"".concat(R.toFixed(1)," months"):"\u2014"}),(0,Cn.jsx)("div",{className:"text-xs text-gray-500",children:"How long your cash will last at current burn rate"})]})]})})})]})]});var M},xi=["title","titleId"];function fi(e,r){let{title:n,titleId:s}=e,a=Yn(e,xi);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const gi=t.forwardRef(fi),bi=["title","titleId"];function yi(e,r){let{title:n,titleId:s}=e,a=Yn(e,bi);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const vi=t.forwardRef(yi),ji=()=>{const e=ee(),{currentOrganization:r}=_n(),[n,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{if(null!==r&&void 0!==r&&r.organization_id){i(!0);try{const[t,n]=await Promise.all([$n.getCategories(r.organization_id),$n.getLineItems(r.organization_id)]);(t&&t.length>0||n&&n.length>0)&&e("/finance/budget/table",{replace:!0})}catch(Qc){}finally{i(!1)}}})()},[r,e]);return a?null:(0,Cn.jsxs)("div",{className:"min-h-[60vh] bg-gray-50",children:[(0,Cn.jsxs)("div",{className:"mb-8",children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Budget & Forecast"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Add and manage your revenue and cost lines. Expand/collapse groups to focus on what matters. All values are editable."})]}),(0,Cn.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 justify-center items-center",children:[(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow p-8 flex-1 max-w-md text-center border border-gray-100",children:[(0,Cn.jsx)(gi,{className:"mx-auto h-10 w-10 text-purple-500 mb-4"}),(0,Cn.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Use a Budget Template"}),(0,Cn.jsx)("p",{className:"mb-6 text-gray-500",children:"Jumpstart your budget with pre-filled categories and example data."}),(0,Cn.jsx)("button",{className:"bg-purple-600 text-white px-6 py-3 rounded-md font-semibold hover:bg-purple-700 disabled:opacity-50",onClick:async()=>{if(console.log("handleTemplateClick called",r),null!==r&&void 0!==r&&r.organization_id){s(!0);try{await $n.createSampleData(r.organization_id),window.location.href="/finance/budget/table"}catch(e){alert(e.message||e.toString())}finally{s(!1)}}},disabled:n,children:n?"Setting up...":"Start with Template"})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-xl shadow p-8 flex-1 max-w-md text-center border border-gray-100",children:[(0,Cn.jsx)(vi,{className:"mx-auto h-10 w-10 text-gray-700 mb-4"}),(0,Cn.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Build My Own Budget"}),(0,Cn.jsx)("p",{className:"mb-6 text-gray-500",children:"Create a custom budget with your own categories and items."}),(0,Cn.jsx)("button",{className:"bg-gray-700 text-white px-6 py-3 rounded-md font-semibold hover:bg-gray-800",onClick:()=>{e("/finance/budget/table")},children:"Start from Scratch"})]})]})]})},wi=e=>{let{activeSubTab:t,onSubTabChange:r}=e;return(0,Cn.jsx)("div",{className:"space-y-6",children:(0,Cn.jsx)("div",{children:(()=>{switch(t){case"overview":return(0,Cn.jsx)(ja,{});case"budget":return(0,Cn.jsx)(ji,{});case"cashflow":return(0,Cn.jsx)(hi,{});case"invoicing":return(0,Cn.jsx)(li,{});case"management":return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Management Accounts"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"Management accounts content coming soon."})]});case"scenario":return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Scenario Planning"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"Scenario planning content coming soon."})]});default:return null}})()})})},Ni=["title","titleId"];function ki(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ni);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"}))}const Ci=t.forwardRef(ki),Si=["title","titleId"];function _i(e,r){let{title:n,titleId:s}=e,a=Yn(e,Si);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const Ei=t.forwardRef(_i),Ii=["title","titleId"];function Pi(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ii);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ti=t.forwardRef(Pi),Di=["title","titleId"];function Ai(e,r){let{title:n,titleId:s}=e,a=Yn(e,Di);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Oi=t.forwardRef(Ai),Li=["title","titleId"];function Ri(e,r){let{title:n,titleId:s}=e,a=Yn(e,Li);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Mi=t.forwardRef(Ri),zi=["title","titleId"];function Fi(e,r){let{title:n,titleId:s}=e,a=Yn(e,zi);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Bi=t.forwardRef(Fi),Ui=e=>{let{contract:r,onEdit:n,onDelete:s,onDuplicate:a}=e;const[i,l]=(0,t.useState)(!1),o=(0,t.useRef)(null);return(0,t.useEffect)(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o]),(0,Cn.jsxs)("div",{className:"relative inline-block text-left",ref:o,children:[(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),l(!i)},className:"inline-flex items-center justify-center w-8 h-8 text-gray-500 rounded-full hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 hover:ring-2 hover:ring-purple-400",children:(0,Cn.jsx)(Ci,{className:"w-5 h-5"})}),i&&(0,Cn.jsx)("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,Cn.jsxs)("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[(0,Cn.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),e.stopPropagation(),n(r),l(!1)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:[(0,Cn.jsx)(vi,{className:"w-4 h-4 mr-3"}),"Move to Folder"]}),r.pdf_file_path&&(0,Cn.jsxs)("a",{href:r.pdf_file_path,download:!0,target:"_blank",rel:"noopener noreferrer",onClick:e=>{e.stopPropagation(),l(!1)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",role:"menuitem",children:[(0,Cn.jsx)(Ei,{className:"w-4 h-4 mr-3"}),"Download PDF"]}),(0,Cn.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),e.stopPropagation(),s(r),l(!1)},className:"flex items-center px-4 py-2 text-sm text-red-600 hover:bg-gray-100",role:"menuitem",children:[(0,Cn.jsx)(Ti,{className:"w-4 h-4 mr-3"}),"Delete"]})]})})]})},qi=e=>{let{show:r,onClose:n,onSave:s,folders:a,saving:i}=e;const[l,o]=(0,t.useState)("");(0,t.useEffect)(()=>{r&&o("")},[r]);return r?(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Move Contract to Folder"}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select a new folder"}),(0,Cn.jsxs)("select",{value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,Cn.jsx)("option",{value:"",children:"-- None (Remove from folder) --"}),a.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200",disabled:i,children:"Cancel"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>{s(l||null)},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",disabled:i,children:i?"Saving...":"Save"})]})]})]})}):null},Hi=e=>{let{showModal:r,onClose:n,folders:s,onUpload:a,saving:i}=e;const[l,o]=(0,t.useState)({name:"",description:"",folderId:"",file:null});return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Contract"}),(0,Cn.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(l)},className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract Name *"}),(0,Cn.jsx)("input",{type:"text",value:l.name,onChange:e=>o(Oe(Oe({},l),{},{name:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",required:!0})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{value:l.description,onChange:e=>o(Oe(Oe({},l),{},{description:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Folder (Optional)"}),(0,Cn.jsxs)("select",{value:l.folderId,onChange:e=>o(Oe(Oe({},l),{},{folderId:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",children:[(0,Cn.jsx)("option",{value:"",children:"Select a folder"}),s.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PDF File *"}),(0,Cn.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{const t=e.target.files[0];t&&"application/pdf"===t.type?o(Oe(Oe({},l),{},{file:t})):(alert("Please select a PDF file"),e.target.value="")},className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",required:!0})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:i,children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:i?"Uploading...":"Upload Contract"})]})]})]})]}):null},Wi=e=>{let{showModal:r,onClose:n,onCreate:s,saving:a}=e;const[i,l]=(0,t.useState)({name:"",description:""});return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:n}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Create New Folder"}),(0,Cn.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(i)},className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Folder Name *"}),(0,Cn.jsx)("input",{type:"text",value:i.name,onChange:e=>l(Oe(Oe({},i),{},{name:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Enter folder name",required:!0})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{value:i.description,onChange:e=>l(Oe(Oe({},i),{},{description:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Enter folder description (optional)"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:a,children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:a?"Creating...":"Create Folder"})]})]})]})]}):null},Vi=e=>{let{contract:t,onClose:r}=e;return t?(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-3xl h-[90vh] flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,Cn.jsx)("h2",{className:"text-lg font-semibold",children:t.name}),(0,Cn.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 px-3 py-1 rounded",children:"Back"})]}),(0,Cn.jsx)("div",{className:"flex-1 overflow-auto flex flex-col items-center justify-center",children:t.pdf_file_path?(0,Cn.jsx)("iframe",{src:t.pdf_file_path,title:"Contract PDF",className:"w-full h-full min-h-[60vh] border-none"}):(0,Cn.jsx)("div",{className:"text-center text-gray-500 py-10",children:"No PDF uploaded for this contract."})}),(0,Cn.jsx)("div",{className:"p-4 border-t flex justify-end",children:t.pdf_file_path&&(0,Cn.jsx)("a",{href:t.pdf_file_path,download:!0,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Download PDF"})})]})}):null},Gi=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Contracts Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Contract Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Oi,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Contract management is crucial for business operations. This section helps you understand best practices for organizing, storing, and managing your contracts effectively."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Ensures legal compliance and protection"}),(0,Cn.jsx)("li",{children:"Prevents contract disputes and litigation"}),(0,Cn.jsx)("li",{children:"Improves business efficiency and organization"}),(0,Cn.jsx)("li",{children:"Facilitates contract renewal and tracking"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Organize contracts by type, client, or folder"}),(0,Cn.jsx)("li",{children:"Keep all contracts in a centralized location"}),(0,Cn.jsx)("li",{children:"Track important dates and renewal deadlines"}),(0,Cn.jsx)("li",{children:"Maintain clear naming conventions"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Upload Contracts"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Upload PDF contracts with detailed information including name, description, and folder organization. The platform supports secure storage and easy access."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Organize with Folders"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Create folders to organize contracts by type, client, or project. This makes it easier to find and manage related contracts efficiently."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Search and Filter"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use search functionality to quickly find contracts by name or description. Filter by folder, status, or other criteria to narrow down results."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your contract management assistant. I can help you organize contracts, understand legal terms, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How should I organize my contracts?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Consider organizing contracts by: 1) Contract type (employment, vendor, client), 2) Client or vendor name, 3) Project or department, 4) Status (active, expired, pending). Use folders to group related contracts together."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about contract management...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},$i=()=>{const[e,r]=(0,t.useState)([]),[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)("all"),[l,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(!0),[u,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),[x,f]=(0,t.useState)(!1),{currentOrganization:g}=_n(),[b,y]=(0,t.useState)(!1),[v,j]=(0,t.useState)(null),[w,N]=(0,t.useState)(null),[k,C]=(0,t.useState)(!1);(0,t.useEffect)(()=>{g&&(S(),_())},[g]);const S=async()=>{d(!0);try{if(!g)return;const e=await(async e=>{if(!e)return[];const{data:t,error:r}=await kn.from("legal_contracts").select("*").eq("organization_id",e).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching contracts:",r),r;return t})(g.organization_id);r(e)}catch(e){console.error("Error loading contracts:",e)}finally{d(!1)}},_=async()=>{try{if(!g)return;const e=await Tn(g.organization_id);s(e)}catch(e){console.error("Error loading folders:",e)}},E=async e=>{if(e&&e.id&&window.confirm('Are you sure you want to delete the contract "'.concat(e.name,'"?')))try{e.pdf_file_path&&await(async e=>{const t=new URL(e).pathname.split("/legal-documents/")[1];if(!t)return void console.error("Could not determine file path from URL:",e);const{error:r}=await kn.storage.from("legal-documents").remove([t]);r&&console.error("Error deleting contract file:",r)})(e.pdf_file_path),await(async e=>{const{data:t,error:r}=await kn.rpc("delete_contract",{p_contract_id:e});if(r)throw console.error("Error calling delete_contract RPC:",r),r;if(t&&"error"===t.status)throw new Error(t.message)})(e.id),await S(),alert("Contract deleted successfully.")}catch(t){console.error("Error deleting contract:",t),alert("Error deleting contract. Please check the console for details.")}},I=async e=>{if(e&&e.id&&window.confirm('Are you sure you want to duplicate the contract "'.concat(e.name,'"?')))try{await(async e=>{const{data:t,error:r}=await kn.rpc("duplicate_contract",{p_contract_id:e});if(r)throw r;return t})(e.id),await S(),alert("Contract duplicated successfully.")}catch(t){console.error("Error duplicating contract:",t),alert("Error duplicating contract. Please check the console for details.")}},P=e=>{j(e),y(!0)},T=e=>{switch(e){case"draft":return"bg-yellow-100 text-yellow-800";case"active":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Contracts"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm",children:"Manage and organize your company contracts."})]}),(0,Cn.jsxs)("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Gi,{isOpen:k,onClose:()=>C(!1)}),(0,Cn.jsxs)("div",{className:"flex h-full",children:[(0,Cn.jsxs)("div",{className:"w-64 bg-gray-50 py-4 pr-6",children:[(0,Cn.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Folders"}),(0,Cn.jsxs)("ul",{className:"space-y-1",children:[(0,Cn.jsx)("li",{children:(0,Cn.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),i("all")},className:"block px-3 py-2 rounded-md text-sm font-medium ".concat("all"===a?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:"All Contracts"})}),n.map(e=>(0,Cn.jsx)("li",{children:(0,Cn.jsxs)("a",{href:"#",onClick:t=>{t.preventDefault(),i(e.id)},className:"flex items-center px-3 py-2 rounded-md text-sm font-medium ".concat(a===e.id?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:[(0,Cn.jsx)(Mi,{className:"h-5 w-5 mr-2"}),e.name]})},e.id))]}),(0,Cn.jsxs)("button",{onClick:()=>h(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,Cn.jsx)(Aa,{className:"w-4 h-4 mr-1.5"}),"Create Folder"]})]}),(0,Cn.jsxs)("div",{className:"flex-1",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Cn.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,Cn.jsx)(Bi,{className:"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search contracts...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsxs)("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700",children:[(0,Cn.jsx)(Ei,{className:"w-4 h-4 mr-2"}),"Upload Contract"]})]}),c?(0,Cn.jsx)("div",{className:"text-center py-10",children:"Loading contracts..."}):(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.filter(e=>"all"===a||e.folder_id===a).filter(e=>""===l||e.name.toLowerCase().includes(l.toLowerCase())).map(e=>(0,Cn.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>N(e),children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Cn.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(T(e.status)),children:e.status})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Cn.jsx)(Ui,{contract:e,onDelete:E,onEdit:P,onDuplicate:I})})]},e.id))})]})]})]}),(0,Cn.jsx)(Hi,{showModal:u,onClose:()=>m(!1),folders:n,onUpload:async e=>{if(e.name&&e.file){f(!0);try{if(!g||!g.organization_id)throw new Error("No organization selected.");const t={name:e.name,description:e.description,folder_id:e.folderId||null},r=await(async(e,t)=>{if(!t)throw new Error("User is not associated with an organization.");const{data:r,error:n}=await kn.rpc("create_contract_direct",{p_name:e.name,p_organization_id:t,p_description:e.description,p_folder_id:e.folder_id});if(n)throw console.error("[legalService.createContract] RLS error:",n),n;return Array.isArray(r)?r[0]:r})(t,g.organization_id);if(!r||!r.id)throw new Error("Failed to create contract record or get an ID back.");await(async(e,t,r)=>{if(!r)throw console.error("uploadContractPDF: Missing organizationId"),new Error("Cannot upload file: organization ID is missing.");const n="".concat(r,"/contracts/").concat(t,"/").concat(e.name),{data:s,error:a}=await kn.storage.from("legal-documents").upload(n,e);if(a)throw a;const{data:i}=kn.storage.from("legal-documents").getPublicUrl(n);return await Pn(t,{pdf_file_path:i.publicUrl}),i.publicUrl})(e.file,r.id,g.organization_id),m(!1),await S(),alert("Contract uploaded successfully!")}catch(t){console.error("Error uploading contract:",t),alert("Error uploading contract: ".concat(t.message))}finally{f(!1)}}else alert("Please fill in the contract name and select a file")},saving:x}),(0,Cn.jsx)(Wi,{showModal:p,onClose:()=>h(!1),onCreate:async e=>{f(!0);try{await(async(e,t)=>{if(!t)throw new Error("User is not associated with an organization.");const{data:r,error:n}=await kn.from("legal_contract_folders").insert(Oe(Oe({},e),{},{organization_id:t})).select().single();if(n)throw n;return r})(e,g.organization_id),await _(),h(!1)}catch(t){console.error("Error creating folder:",t)}f(!1)},saving:x}),(0,Cn.jsx)(qi,{show:b,onClose:()=>y(!1),onSave:async e=>{if(v){f(!0);try{await Pn(v.id,{folder_id:e}),await S(),y(!1),j(null)}catch(t){console.error("Error moving contract:",t),alert("Failed to move contract. Please try again.")}finally{f(!1)}}},folders:n,saving:x}),(0,Cn.jsx)(Vi,{contract:w,onClose:()=>N(null)})]})},Ki=t.memo(e=>{let{show:t,onClose:r,onSave:n,saving:s,selectedTemplate:a,customizedName:i,setCustomizedName:l,customizedData:o,setCustomizedData:c,handleFieldChange:d,selectedFolder:u,setSelectedFolder:m,folders:p}=e;return t?(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,Cn.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["Customize ",null===a||void 0===a?void 0:a.name]}),(0,Cn.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)(Xa,{className:"h-6 w-6"})})]}),(0,Cn.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"flex",children:[(0,Cn.jsx)("div",{className:"w-1/4",children:(0,Cn.jsx)("h4",{className:"text-sm font-bold text-gray-900",children:"Basic Information"})}),(0,Cn.jsxs)("div",{className:"w-3/4 bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Contract Name"}),(0,Cn.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a name for this contract"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Folder"}),(0,Cn.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Cn.jsx)("option",{value:"",children:"Select a folder (optional)"}),p.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})]}),(null===a||void 0===a?void 0:a.fields)&&a.fields.length>0&&(0,Cn.jsxs)("div",{className:"flex",children:[(0,Cn.jsx)("div",{className:"w-1/4",children:(0,Cn.jsx)("h4",{className:"text-sm font-bold text-gray-900",children:"Template Fields"})}),(0,Cn.jsx)("div",{className:"w-3/4 bg-gray-50 rounded-lg p-4",children:(0,Cn.jsx)("div",{className:"space-y-3",children:a.fields.map(e=>(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:e.label}),"textarea"===e.type?(0,Cn.jsx)("textarea",{value:o[e.key]||"",onChange:t=>d(e.key,t.target.value),placeholder:e.placeholder,rows:2,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,Cn.jsx)("input",{type:e.type,value:o[e.key]||"",onChange:t=>d(e.key,t.target.value),placeholder:e.placeholder,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]},e.key))})})]})]})}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Cn.jsx)("button",{onClick:r,className:"px-3 py-1.5 text-sm text-gray-600 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",disabled:s,children:"Cancel"}),(0,Cn.jsx)("button",{onClick:n,disabled:s,className:"px-3 py-1.5 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:s?"Saving...":"Save to My Contracts"})]})})]})}):null}),Yi=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Templates Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Templates Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Contract templates help standardize your business processes and ensure consistency across all agreements. This section covers best practices for using and customizing templates."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Ensures consistency across all contracts"}),(0,Cn.jsx)("li",{children:"Saves time on contract creation"}),(0,Cn.jsx)("li",{children:"Reduces legal review requirements"}),(0,Cn.jsx)("li",{children:"Maintains compliance with standard terms"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Use templates to standardize contracts and documents"}),(0,Cn.jsx)("li",{children:"Customize templates for your business needs"}),(0,Cn.jsx)("li",{children:"Keep templates up to date with legal requirements"}),(0,Cn.jsx)("li",{children:"Organize templates by category or folder"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Browse Templates"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Browse and search templates by name or category. Each template includes customizable fields that you can fill in before generating your contract."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Customize Templates"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Customize templates before generating contracts. Add your company details, client information, and specific terms to create personalized agreements."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Save and Export"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Save customized templates for future use and export generated documents as needed. All contracts are automatically stored in your contracts section."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your templates assistant. I can help you customize templates, understand legal terms, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I customize a template?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Click on any template to open the customization modal. Fill in the required fields like company name, client details, and specific terms. You can also add the contract to a folder for organization."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about templates...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},Zi=()=>{const{currentOrganization:e}=_n(),[n,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(null),[l,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)({}),[p,h]=(0,t.useState)(""),[x,f]=(0,t.useState)([]),[g,b]=(0,t.useState)(""),[y,v]=(0,t.useState)(!0),[j,w]=(0,t.useState)(!1),[N,k]=(0,t.useState)(null),[C,S]=(0,t.useState)(!1);(0,t.useEffect)(()=>{_(),e&&(E(e.organization_id),An(e.organization_id).then(k))},[e]);const _=async()=>{try{const e=await(async()=>{const{data:e,error:t}=await kn.from("legal_templates").select("*").eq("is_active",!0).order("name");if(t)throw t;return e})();s(e),e.length>0&&i(e[0])}catch(e){console.error("Error loading templates:",e)}finally{v(!1)}},E=async e=>{try{if(!e)return;const t=await Tn(e);f(t)}catch(t){console.error("Error loading folders:",t)}},I=n.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.category.toLowerCase().includes(l.toLowerCase())),P=(0,t.useCallback)((e,t)=>{m(r=>Oe(Oe({},r),{},{[e]:t}))},[]);if(y)return(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Templates Library"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Browse and customize pre-built legal templates for your business."})]}),(0,Cn.jsx)("div",{className:"text-center py-20",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:"Loading templates..."})})]});const T=I.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Templates"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm",children:"Browse, customize, and generate legal templates."})]}),(0,Cn.jsxs)("button",{onClick:()=>S(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Yi,{isOpen:C,onClose:()=>S(!1)}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Cn.jsxs)("div",{className:"md:col-span-1 space-y-6",children:[(0,Cn.jsxs)("div",{className:"relative",children:[(0,Cn.jsx)(Bi,{className:"pointer-events-none absolute top-3.5 left-4 h-5 w-5 text-gray-400"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search templates...",value:l,onChange:e=>o(e.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsx)("div",{className:"space-y-4",children:Object.entries(T).map(e=>{let[t,r]=e;return(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-xs font-semibold uppercase text-gray-500 mb-2",children:t}),(0,Cn.jsx)("ul",{className:"space-y-1",children:r.map(e=>(0,Cn.jsx)("li",{children:(0,Cn.jsxs)("button",{onClick:()=>i(e),disabled:c,className:"w-full flex items-center p-3 text-left text-sm rounded-md transition-colors ".concat((null===a||void 0===a?void 0:a.id)===e.id?"bg-purple-100 text-purple-700":"text-gray-700 hover:bg-gray-100"," ").concat(c?"opacity-50 cursor-not-allowed":""),children:[(0,Cn.jsx)(Va,{className:"h-5 w-5 mr-3"}),e.name]})},e.id))})]},t)})})]}),(0,Cn.jsx)("div",{className:"md:col-span-2",children:(0,Cn.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200 sticky top-8",children:a?(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Cn.jsxs)("div",{className:"flex-1",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:a.name}),(0,Cn.jsxs)("div",{className:"space-y-1",children:[(0,Cn.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Cn.jsx)("span",{className:"font-medium",children:"Category:"})," ",a.category]}),a.description&&(0,Cn.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Cn.jsx)("span",{className:"font-medium",children:"Description:"})," ",a.description]})]})]}),(0,Cn.jsxs)("button",{onClick:()=>{h("".concat(a.name," - Customized")),m({}),b(""),d(!0)},className:"inline-flex items-center px-3 py-1.5 bg-purple-600 text-white text-sm font-medium rounded-md hover:bg-purple-700 transition-colors ml-4",children:[(0,Cn.jsx)(vi,{className:"h-4 w-4 mr-1.5"}),"Customise"]})]}),(0,Cn.jsxs)("div",{className:"border rounded-lg bg-white overflow-hidden",children:[(0,Cn.jsx)("div",{className:"bg-gray-50 px-4 py-2 border-b",children:(0,Cn.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Template Preview"})}),(0,Cn.jsx)("div",{className:"p-6 max-h-96 overflow-y-auto",children:(0,Cn.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex flex-col items-center mb-2",children:[null!==N&&void 0!==N&&N.logo_url?(0,Cn.jsx)("img",{src:N.logo_url,alt:"Company Logo",className:"w-16 h-16 mb-2 rounded"}):(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded flex items-center justify-center mb-2 text-gray-400 text-2xl font-bold",children:"Logo"}),(0,Cn.jsx)("div",{className:"w-full flex justify-end",children:(0,Cn.jsxs)("div",{className:"text-right",children:[(0,Cn.jsx)("div",{className:"text-base font-bold text-gray-900",children:(null===N||void 0===N?void 0:N.name)||"Company Name"}),(null===N||void 0===N?void 0:N.registered_office)&&(0,Cn.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:N.registered_office})]})})]}),(0,Cn.jsx)("div",{className:"space-y-3",children:a.template_content.split("\n").map((e,t)=>{if(""===e.trim())return(0,Cn.jsx)("br",{},t);if(e.includes("[")&&e.includes("]")){const r=e.replace(/\[([^\]]+)\]/g,'<span class="bg-yellow-100 text-yellow-800 px-1 rounded text-xs font-mono">[$1]</span>');return(0,Cn.jsx)("p",{className:"text-sm text-gray-700",dangerouslySetInnerHTML:{__html:r}},t)}return e.trim().toUpperCase()===e.trim()&&e.length>10?(0,Cn.jsx)("h3",{className:"text-base font-bold text-gray-900 mt-4 mb-2",children:e},t):(0,Cn.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:e},t)})}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 pt-4 mt-6",children:(0,Cn.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"This document was generated using LayrBase Legal Templates"})})]})})})]})]}):(0,Cn.jsx)("div",{className:"text-center py-20",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:"Select a template to preview"})})})})]}),c&&(0,Cn.jsx)(Ki,{show:c,onClose:()=>d(!1),onSave:async()=>{if(p.trim()){w(!0);try{const t={name:p,description:"Customized version of ".concat(a.name),data:u,folderId:g||null,effectiveDate:u.effectiveDate||u.startDate||null,expiryDate:u.expiryDate||null};if(!e)throw new Error("No organization selected.");const n=await(async(e,t)=>{const{data:r,error:n}=await kn.rpc("create_contract_from_template",{p_template_id:e,p_name:t.name,p_contract_data:t.data,p_description:t.description,p_folder_id:t.folderId,p_effective_date:t.effectiveDate,p_expiry_date:t.expiryDate,p_organization_id:t.organizationId});if(n)throw n;return r})(a.id,Oe(Oe({},t),{},{organizationId:e.organization_id})),s=await(async(e,t)=>{try{const{default:n}=await r.e(762).then(r.bind(r,7762)),s=new n;s.setFont("helvetica"),s.setFontSize(16),s.text(e.name,20,20);let a=t.template_content||"";Object.entries(e.data||{}).forEach(e=>{let[t,r]=e;const n="{{".concat(t,"}}");a=a.replace(new RegExp(n,"g"),r||"")}),s.setFontSize(12);const i=s.splitTextToSize(a,170);s.text(i,20,40);const l=s.output("blob"),o="".concat(e.name.replace(/[^a-zA-Z0-9]/g,"_"),"_").concat(Date.now(),".pdf");return new File([l],o,{type:"application/pdf"})}catch(n){throw console.error("Error generating PDF:",n),new Error("Failed to generate PDF")}})(t,a);await(async(e,t,r)=>{if(!r)throw new Error("Cannot save PDF: organization ID is missing.");const n="".concat(r,"/contracts/").concat(t,"/").concat(e.name),{data:s,error:a}=await kn.storage.from("legal-documents").upload(n,e);if(a)throw a;const{data:i}=kn.storage.from("legal-documents").getPublicUrl(n);return await Pn(t,{pdf_file_path:i.publicUrl}),i.publicUrl})(s,n,e.organization_id),alert("Customized contract saved to My Contracts with PDF!"),d(!1),setTimeout(()=>{m({}),h(""),b("")},300)}catch(t){console.error("Error saving contract:",t),alert("Error saving contract. Please try again.")}finally{w(!1)}}else alert("Please enter a contract name")},saving:j,selectedTemplate:a,customizedName:p,setCustomizedName:h,customizedData:u,setCustomizedData:m,handleFieldChange:P,selectedFolder:g,setSelectedFolder:b,folders:x})]})},Ji=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Compliance Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Compliance Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Compliance deadlines are critical dates for legal, regulatory, and business obligations. Staying on top of these deadlines helps your organization avoid penalties and maintain good standing."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Missing deadlines can result in fines, legal action, or loss of business licenses."}),(0,Cn.jsx)("li",{children:"Proactive compliance builds trust with stakeholders and regulators."}),(0,Cn.jsx)("li",{children:"Good compliance processes reduce business risk and operational surprises."})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Track all key legal and regulatory deadlines in one place."}),(0,Cn.jsx)("li",{children:"Set reminders for upcoming filings and renewals."}),(0,Cn.jsx)("li",{children:"Document compliance actions and keep records up to date."}),(0,Cn.jsx)("li",{children:"Assign responsibility for each compliance item."})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Quick Start"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:'Click "Add New Deadline" to create your first compliance item.'}),(0,Cn.jsx)("li",{children:"Fill in the name, due date, and category."}),(0,Cn.jsx)("li",{children:"Save and track your deadlines from the dashboard."})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Tips"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Use the search bar to quickly find deadlines by name or category."}),(0,Cn.jsx)("li",{children:"Mark deadlines as complete to keep your dashboard up to date."}),(0,Cn.jsx)("li",{children:"Export your deadlines for reporting or sharing with your team."})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"FAQ"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("b",{children:"Can I edit a deadline after creating it?"})," Yes, click the deadline name to edit details."]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("b",{children:"How do I delete a deadline?"})," Click the trash icon next to the deadline in the list."]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("b",{children:"Can I get reminders?"})," Reminders are coming soon!"]})]})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your compliance AI assistant. Ask me anything about deadlines, best practices, or the platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I add a new compliance deadline?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:'Click "Add New Deadline" and fill in the details. You can set reminders and assign categories too!'})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Type your question...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},Qi=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)({name:"",description:"",dueDate:"",category:""}),[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!0),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{f()},[e]);const f=async()=>{if(null===e||void 0===e||!e.organization_id)return console.warn("No organization_id found in currentOrganization:",e),n([]),void u(!1);try{const{data:t,error:r}=await kn.from("legal_compliance_deadlines").select("*").eq("organization_id",e.organization_id);console.log("Current org ID:",e.organization_id,typeof e.organization_id),console.log("Fetched deadlines:",t);const s=(t||[]).filter(t=>t.organization_id===e.organization_id);n(s)}catch(t){console.error("Error loading deadlines:",t)}finally{u(!1)}},g=async e=>{if(window.confirm("Are you sure you want to delete this deadline?"))try{await(async e=>{const{error:t}=await kn.from("legal_compliance_deadlines").delete().eq("id",e);if(t)throw t})(e),await f()}catch(t){console.error("Error deleting deadline:",t),alert("Error deleting deadline. Please try again.")}},b=async(e,t)=>{try{await(async(e,t)=>{const{data:r,error:n}=await kn.from("legal_compliance_deadlines").update(t).eq("id",e).select().single();if(n)throw n;return r})(e,{status:t}),await f()}catch(r){console.error("Error updating deadline status:",r),alert("Error updating deadline status. Please try again.")}},y=r.filter(e=>{var t,r;return e.name.toLowerCase().includes(o.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||(null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(o.toLowerCase()))}),v=(e,t)=>{if(t)return"bg-red-100 text-red-800";switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return d?(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:"Compliance Deadlines"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Track upcoming legal and regulatory deadlines to stay compliant."})]}),(0,Cn.jsx)("div",{className:"text-center py-20",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:"Loading deadlines..."})})]}):(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Compliance Deadlines"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm",children:"Track upcoming legal and regulatory deadlines to stay compliant."})]}),(0,Cn.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Ji,{isOpen:h,onClose:()=>x(!1)}),(0,Cn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 relative max-w-xs",children:[(0,Cn.jsx)(Bi,{className:"pointer-events-none absolute top-2.5 left-3 h-5 w-5 text-gray-400"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search deadlines...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsxs)("button",{onClick:()=>a(!s),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700",children:[(0,Cn.jsx)(Aa,{className:"h-5 w-5 mr-2"}),s?"Cancel":"Add New Deadline"]})]}),s&&(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>a(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Compliance Deadline"}),(0,Cn.jsx)("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i.name&&i.dueDate){p(!0);try{const t={name:i.name,description:i.description,due_date:i.dueDate,category:i.category||"general",organization_id:null===e||void 0===e?void 0:e.organization_id};await(async e=>{const{data:t,error:r}=await kn.from("legal_compliance_deadlines").insert(e).select().single();if(r)throw r;return t})(t),await f(),l({name:"",description:"",dueDate:"",category:""}),a(!1)}catch(r){console.error("Error adding deadline:",r),alert("Error adding deadline. Please try again.")}finally{p(!1)}}else alert("Please fill in all required fields")},className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"deadlineName",className:"block text-sm font-medium text-gray-700",children:"Deadline Name *"}),(0,Cn.jsx)("input",{type:"text",id:"deadlineName",value:i.name,onChange:e=>l(Oe(Oe({},i),{},{name:e.target.value})),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"deadlineCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,Cn.jsxs)("select",{id:"deadlineCategory",value:i.category,onChange:e=>l(Oe(Oe({},i),{},{category:e.target.value})),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",children:[(0,Cn.jsx)("option",{value:"",children:"Select category"}),(0,Cn.jsx)("option",{value:"annual_filing",children:"Annual Filing"}),(0,Cn.jsx)("option",{value:"tax_return",children:"Tax Return"}),(0,Cn.jsx)("option",{value:"regulatory",children:"Regulatory"}),(0,Cn.jsx)("option",{value:"contract_renewal",children:"Contract Renewal"}),(0,Cn.jsx)("option",{value:"insurance",children:"Insurance"}),(0,Cn.jsx)("option",{value:"general",children:"General"})]})]})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:"Due Date *"}),(0,Cn.jsx)("input",{type:"date",id:"dueDate",value:i.dueDate,onChange:e=>l(Oe(Oe({},i),{},{dueDate:e.target.value})),className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",required:!0})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Cn.jsx)("textarea",{id:"description",value:i.description,onChange:e=>l(Oe(Oe({},i),{},{description:e.target.value})),rows:3,className:"mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Add any additional details about this deadline..."})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:m,children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:m?"Adding...":"Add Deadline"})]})]})]})]}),(0,Cn.jsxs)("div",{className:"bg-white overflow-hidden",children:[(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-300",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deadline"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Cn.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,Cn.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(e=>{return(0,Cn.jsxs)("tr",{className:e.is_overdue?"bg-red-50":"",children:[(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.due_date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:(t=e.days_until_due,r=e.is_overdue,r?"".concat(Math.abs(t)," days overdue"):0===t?"Due today":1===t?"Due tomorrow":t<0?"".concat(Math.abs(t)," days ago"):"".concat(t," days remaining"))})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsxs)("select",{value:e.status,onChange:t=>b(e.id,t.target.value),className:"text-sm font-medium rounded-full px-2.5 py-0.5 ".concat(v(e.status,e.is_overdue)),children:[(0,Cn.jsx)("option",{value:"pending",children:"Pending"}),(0,Cn.jsx)("option",{value:"completed",children:"Completed"}),(0,Cn.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category?e.category.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"General"}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Cn.jsx)("button",{onClick:()=>g(e.id),className:"text-red-600 hover:text-red-900",children:(0,Cn.jsx)(Ti,{className:"h-5 w-5"})})})]},e.id);var t,r})})]}),0===y.length&&(0,Cn.jsx)("div",{className:"text-center py-12",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:"No deadlines found"})})]})]})},Xi=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Insurance Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Insurance Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Insurance management is critical for business risk mitigation. This section helps you understand best practices for managing insurance policies and ensuring adequate coverage."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Protects against financial losses and liabilities"}),(0,Cn.jsx)("li",{children:"Ensures business continuity during crises"}),(0,Cn.jsx)("li",{children:"Meets legal and contractual requirements"}),(0,Cn.jsx)("li",{children:"Builds trust with clients and stakeholders"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Keep all insurance policies up to date and accessible"}),(0,Cn.jsx)("li",{children:"Track renewal and expiry dates for each policy"}),(0,Cn.jsx)("li",{children:"Assign responsibility for insurance management"}),(0,Cn.jsx)("li",{children:"Review coverage regularly for adequacy and compliance"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Add Insurance Policies"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Add and manage insurance policies in one place. Include policy details, coverage amounts, and important dates for comprehensive tracking."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Search and Filter"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use search and filters to find policies quickly. Filter by provider, policy type, or status to manage your insurance portfolio efficiently."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Monitor Expiry Dates"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Monitor expiry dates to avoid lapses in coverage. Export insurance data for reporting or sharing with your team and insurance providers."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your insurance management assistant. I can help you understand coverage, manage policies, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What types of insurance should a small business have?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Essential insurance for small businesses typically includes: General Liability, Professional Liability, Workers' Compensation, Property Insurance, and Cyber Liability. The specific needs depend on your industry and business activities."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about insurance management...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},el=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)({name:"",provider:"",policyNumber:"",coverageAmount:"",premiumAmount:"",effectiveDate:"",expiryDate:"",notes:""}),[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!0),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{f()},[e]);const f=async()=>{if(null===e||void 0===e||!e.organization_id)return console.warn("No organization_id found in currentOrganization:",e),n([]),void u(!1);try{const{data:t,error:r}=await kn.from("legal_insurance_policies").select("*").eq("organization_id",e.organization_id);console.log("Direct select policies:",t,r);const s=(t||[]).filter(t=>t.organization_id===e.organization_id);n(s)}catch(t){console.error("Error loading policies:",t)}finally{u(!1)}},g=async e=>{if(window.confirm("Are you sure you want to delete this policy?"))try{await(async e=>{const{error:t}=await kn.from("legal_insurance_policies").delete().eq("id",e);if(t)throw t})(e),await f()}catch(t){console.error("Error deleting policy:",t),alert("Error deleting policy. Please try again.")}},b=r.filter(e=>{var t;return e.name.toLowerCase().includes(o.toLowerCase())||e.provider.toLowerCase().includes(o.toLowerCase())||(null===(t=e.policy_number)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))}),y=(e,t)=>{if(t)return"bg-orange-100 text-orange-800";switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=e=>e?new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(e):"N/A";return d?(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:"Risk & Insurance"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Manage your company's insurance policies and assess business risks."})]}),(0,Cn.jsx)("div",{className:"text-center py-20",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:"Loading policies..."})})]}):(0,Cn.jsxs)("div",{className:"space-y-8",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Risk & Insurance"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm",children:"Manage your company's insurance policies and assess business risks."})]}),(0,Cn.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Xi,{isOpen:h,onClose:()=>x(!1)}),(0,Cn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 relative max-w-xs",children:[(0,Cn.jsx)(Bi,{className:"pointer-events-none absolute top-2.5 left-3 h-5 w-5 text-gray-400"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search policies...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsxs)("button",{onClick:()=>a(!s),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700",children:[(0,Cn.jsx)(Aa,{className:"h-5 w-5 mr-2"}),s?"Cancel":"Add New Policy"]})]}),s&&(0,Cn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:"Add New Insurance Policy"}),(0,Cn.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i.name&&i.provider&&i.effectiveDate&&i.expiryDate){p(!0);try{const t={name:i.name,provider:i.provider,policy_number:i.policyNumber||null,coverage_amount:i.coverageAmount?parseFloat(i.coverageAmount):null,premium_amount:i.premiumAmount?parseFloat(i.premiumAmount):null,effective_date:i.effectiveDate,expiry_date:i.expiryDate,notes:i.notes||null,organization_id:null===e||void 0===e?void 0:e.organization_id};await(async e=>{const{data:t,error:r}=await kn.from("legal_insurance_policies").insert(e).select().single();if(r)throw r;return t})(t),await f(),l({name:"",provider:"",policyNumber:"",coverageAmount:"",premiumAmount:"",effectiveDate:"",expiryDate:"",notes:""}),a(!1)}catch(r){console.error("Error adding policy:",r),alert("Error adding policy. Please try again.")}finally{p(!1)}}else alert("Please fill in all required fields")},className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"policyName",className:"block text-sm font-medium text-gray-700",children:"Policy Name *"}),(0,Cn.jsx)("input",{type:"text",id:"policyName",value:i.name,onChange:e=>l(Oe(Oe({},i),{},{name:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"provider",className:"block text-sm font-medium text-gray-700",children:"Provider *"}),(0,Cn.jsx)("input",{type:"text",id:"provider",value:i.provider,onChange:e=>l(Oe(Oe({},i),{},{provider:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"policyNumber",className:"block text-sm font-medium text-gray-700",children:"Policy Number"}),(0,Cn.jsx)("input",{type:"text",id:"policyNumber",value:i.policyNumber,onChange:e=>l(Oe(Oe({},i),{},{policyNumber:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"coverageAmount",className:"block text-sm font-medium text-gray-700",children:"Coverage Amount"}),(0,Cn.jsx)("input",{type:"number",id:"coverageAmount",value:i.coverageAmount,onChange:e=>l(Oe(Oe({},i),{},{coverageAmount:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",step:"0.01"})]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"premiumAmount",className:"block text-sm font-medium text-gray-700",children:"Premium Amount"}),(0,Cn.jsx)("input",{type:"number",id:"premiumAmount",value:i.premiumAmount,onChange:e=>l(Oe(Oe({},i),{},{premiumAmount:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",step:"0.01"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"effectiveDate",className:"block text-sm font-medium text-gray-700",children:"Effective Date *"}),(0,Cn.jsx)("input",{type:"date",id:"effectiveDate",value:i.effectiveDate,onChange:e=>l(Oe(Oe({},i),{},{effectiveDate:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700",children:"Expiry Date *"}),(0,Cn.jsx)("input",{type:"date",id:"expiryDate",value:i.expiryDate,onChange:e=>l(Oe(Oe({},i),{},{expiryDate:e.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,Cn.jsx)("textarea",{id:"notes",value:i.notes,onChange:e=>l(Oe(Oe({},i),{},{notes:e.target.value})),rows:3,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Add any additional notes about this policy..."})]}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("button",{type:"submit",disabled:m,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:m?"Adding...":"Add Policy"})})]})]}),(0,Cn.jsxs)("div",{className:"bg-white overflow-hidden",children:[(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-300",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Policy"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provider"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coverage"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),(0,Cn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,Cn.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(e=>{return(0,Cn.jsxs)("tr",{className:e.is_expiring_soon?"bg-orange-50":"",children:[(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.policy_number&&(0,Cn.jsxs)("div",{className:"text-sm text-gray-500",children:["#",e.policy_number]})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.provider}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-900",children:v(e.coverage_amount)}),e.premium_amount&&(0,Cn.jsxs)("div",{className:"text-sm text-gray-500",children:["Premium: ",v(e.premium_amount)]})]}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.expiry_date).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:(t=e.days_until_expiry,r=e.is_expiring_soon,t<0?"".concat(Math.abs(t)," days expired"):0===t?"Expires today":1===t?"Expires tomorrow":"".concat(t,r?" days remaining (expiring soon)":" days remaining"))})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await Dn(e,{status:t}),await f()}catch(r){console.error("Error updating policy status:",r),alert("Error updating policy status. Please try again.")}})(e.id,t.target.value),className:"text-sm font-medium rounded-full px-2.5 py-0.5 ".concat(y(e.status,e.is_expiring_soon)),children:[(0,Cn.jsx)("option",{value:"active",children:"Active"}),(0,Cn.jsx)("option",{value:"expired",children:"Expired"}),(0,Cn.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Cn.jsx)("button",{onClick:()=>g(e.id),className:"text-red-600 hover:text-red-900",children:(0,Cn.jsx)(Ti,{className:"h-5 w-5"})})})]},e.id);var t,r})})]}),0===b.length&&(0,Cn.jsx)("div",{className:"text-center py-12",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:"No policies found"})})]})]})},tl=[{id:"gdpr",law:"GDPR",region:"EU",appliesTo:"All users processing EU citizen data",effectiveDate:"May 2018",summary:"Protects personal data rights",type:"Data Privacy",industry:"All",status:"Active"},{id:"ccpa",law:"CCPA",region:"California, US",appliesTo:"Businesses with >$25M revenue or >50k users",effectiveDate:"Jan 2020",summary:"Consumer data rights in California",type:"Data Privacy",industry:"All",status:"Active"},{id:"dsa",law:"DSA",region:"EU",appliesTo:"Platforms hosting user-generated content",effectiveDate:"Feb 2024",summary:"Digital safety and transparency",type:"Digital Services",industry:"Tech/Media",status:"Active"},{id:"hipaa",law:"HIPAA",region:"US",appliesTo:"Healthcare providers processing patient data",effectiveDate:"Apr 2003",summary:"Protects health information privacy",type:"Healthcare",industry:"Healthcare",status:"Active"},{id:"lgpd",law:"LGPD",region:"Brazil",appliesTo:"Any business processing Brazilian citizen data",effectiveDate:"Aug 2020",summary:"Brazilian data protection law",type:"Data Privacy",industry:"All",status:"Active"}],rl=[...new Set(tl.map(e=>e.region))],nl=[...new Set(tl.map(e=>e.type))],sl=[...new Set(tl.map(e=>e.industry))],al=[...new Set(tl.map(e=>e.status))],il=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Legal Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Legal Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Oi,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Legal compliance is essential for any business. This section helps you understand key legal requirements and best practices for maintaining compliance."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Prevents legal penalties and fines"}),(0,Cn.jsx)("li",{children:"Protects your business reputation"}),(0,Cn.jsx)("li",{children:"Ensures customer trust and confidence"}),(0,Cn.jsx)("li",{children:"Reduces risk of litigation"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Stay up to date with relevant laws and regulations"}),(0,Cn.jsx)("li",{children:"Document compliance and legal actions"}),(0,Cn.jsx)("li",{children:"Consult legal counsel for complex issues"}),(0,Cn.jsx)("li",{children:"Use the platform to track and monitor legal requirements"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Browse and Filter Laws"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use the search and filter options to find relevant laws by region, type, and industry. The directory provides comprehensive information about each regulation."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Eligibility Checker"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Check which laws apply to your business based on your size, industry, and geographic location. This helps you focus on relevant compliance requirements."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Stay Updated"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Subscribe to updates for relevant laws to stay informed about changes that may affect your business compliance requirements."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your legal compliance assistant. I can help you understand regulations, check compliance requirements, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What are the key GDPR requirements for a small business?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"For small businesses, key GDPR requirements include: obtaining clear consent for data collection, implementing data protection measures, providing data subject rights, and maintaining records of processing activities."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about legal compliance...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null};function ll(){const[e,r]=(0,t.useState)("directory"),[n,s]=(0,t.useState)("overview"),[a,i]=(0,t.useState)(""),[l,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[p,h]=(0,t.useState)(""),[x,f]=(0,t.useState)(!1),[g,b]=(0,t.useState)(null),[y,v]=(0,t.useState)(!1),j=tl.filter(e=>{const t=!a||e.law.toLowerCase().includes(a.toLowerCase())||e.summary.toLowerCase().includes(a.toLowerCase()),r=!l||e.region===l,n=!c||e.type===c,s=!u||e.industry===u,i=!p||e.status===p;return t&&r&&n&&s&&i});return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Legal Requirements"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm",children:"Browse and track legal requirements for your business."})]}),(0,Cn.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(il,{isOpen:y,onClose:()=>v(!1)}),(0,Cn.jsx)("div",{className:"mb-6",children:(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsxs)("nav",{className:"-mb-px flex space-x-4",children:[(0,Cn.jsx)("button",{onClick:()=>r("directory"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("directory"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Law Directory"}),(0,Cn.jsx)("button",{onClick:()=>r("checker"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("checker"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Eligibility Checker"}),(0,Cn.jsx)("button",{onClick:()=>r("notifications"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("notifications"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Notifications"}),(0,Cn.jsx)("button",{onClick:()=>r("export"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("export"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Export"})]})})}),"directory"===e&&(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4",children:[(0,Cn.jsx)("input",{className:"border px-3 py-2 rounded min-w-[200px]",placeholder:"Search laws...",value:a,onChange:e=>i(e.target.value)}),(0,Cn.jsxs)("select",{className:"border px-3 py-2 rounded",value:l,onChange:e=>o(e.target.value),children:[(0,Cn.jsx)("option",{value:"",children:"All Regions"}),rl.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))]}),(0,Cn.jsxs)("select",{className:"border px-3 py-2 rounded",value:c,onChange:e=>d(e.target.value),children:[(0,Cn.jsx)("option",{value:"",children:"All Types"}),nl.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))]}),(0,Cn.jsxs)("select",{className:"border px-3 py-2 rounded",value:u,onChange:e=>m(e.target.value),children:[(0,Cn.jsx)("option",{value:"",children:"All Industries"}),sl.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))]}),(0,Cn.jsxs)("select",{className:"border px-3 py-2 rounded",value:p,onChange:e=>h(e.target.value),children:[(0,Cn.jsx)("option",{value:"",children:"All Statuses"}),al.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))]})]}),(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md overflow-hidden",children:(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full text-left",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{className:"text-gray-900 font-semibold text-base",children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Law"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Region"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applies to"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Effective Date"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Summary"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===j.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:6,className:"py-16",children:(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No laws found matching your criteria."})]})})}):j.map(e=>(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>b(e),children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.law}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.region}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.appliesTo}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.effectiveDate}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.summary}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.status})})]},e.id))})]})})})]}),"checker"===e&&(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md p-6",children:(0,Cn.jsxs)("div",{className:"text-center py-12",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Smart Eligibility Checker"}),(0,Cn.jsx)("p",{className:"text-gray-500 mb-6",children:"Answer a few questions to determine which laws apply to your business."}),(0,Cn.jsx)("button",{className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors",onClick:()=>f(!0),children:"Start Eligibility Check"})]})}),"notifications"===e&&(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md p-6",children:(0,Cn.jsxs)("div",{className:"text-center py-12",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.19 4.19A2 2 0 006 3h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V5a2 2 0 012-2z"})})}),(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Law Updates & Monitoring"}),(0,Cn.jsx)("p",{className:"text-gray-500 mb-6",children:"Subscribe to updates and get notified when relevant laws change."}),(0,Cn.jsx)("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Set Up Notifications"})]})}),"export"===e&&(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md p-6",children:(0,Cn.jsxs)("div",{className:"text-center py-12",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Export & Documentation"}),(0,Cn.jsx)("p",{className:"text-gray-500 mb-6",children:"Export your matched obligations as PDF or CSV for compliance reporting."}),(0,Cn.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,Cn.jsx)("button",{className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:"Export as PDF"}),(0,Cn.jsx)("button",{className:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors",children:"Export as CSV"})]})]})}),x&&(0,Cn.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-2xl relative",children:[(0,Cn.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-2xl",onClick:()=>f(!1),children:"\xd7"}),(0,Cn.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Smart Eligibility Checker"}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What industry is your business in?"}),(0,Cn.jsxs)("select",{className:"w-full border px-3 py-2 rounded",children:[(0,Cn.jsx)("option",{children:"Select industry..."}),(0,Cn.jsx)("option",{children:"Technology"}),(0,Cn.jsx)("option",{children:"Healthcare"}),(0,Cn.jsx)("option",{children:"Finance"}),(0,Cn.jsx)("option",{children:"Retail"}),(0,Cn.jsx)("option",{children:"Other"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Where do you operate?"}),(0,Cn.jsxs)("select",{className:"w-full border px-3 py-2 rounded",children:[(0,Cn.jsx)("option",{children:"Select regions..."}),(0,Cn.jsx)("option",{children:"EU"}),(0,Cn.jsx)("option",{children:"US"}),(0,Cn.jsx)("option",{children:"UK"}),(0,Cn.jsx)("option",{children:"Global"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Do you process personal data?"}),(0,Cn.jsxs)("div",{className:"space-x-4",children:[(0,Cn.jsxs)("label",{className:"inline-flex items-center",children:[(0,Cn.jsx)("input",{type:"radio",name:"data",className:"mr-2"}),"Yes"]}),(0,Cn.jsxs)("label",{className:"inline-flex items-center",children:[(0,Cn.jsx)("input",{type:"radio",name:"data",className:"mr-2"}),"No"]})]})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end mt-6 space-x-3",children:[(0,Cn.jsx)("button",{className:"px-4 py-2 text-gray-600 border rounded hover:bg-gray-50",onClick:()=>f(!1),children:"Cancel"}),(0,Cn.jsx)("button",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Check Eligibility"})]})]})}),g&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>b(null),children:(0,Cn.jsxs)("div",{className:"absolute top-0 right-0 h-full w-11/12 max-w-2xl bg-white shadow-2xl flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,Cn.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Law Details"}),(0,Cn.jsx)("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsx)("div",{className:"h-16 w-16 rounded-full bg-purple-100 flex items-center justify-center",children:(0,Cn.jsx)("svg",{className:"h-8 w-8 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Cn.jsxs)("div",{className:"flex-1",children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:g.law}),(0,Cn.jsxs)("p",{className:"text-sm text-gray-600",children:[g.region," \u2022 ",g.effectiveDate]}),(0,Cn.jsxs)("p",{className:"text-sm text-gray-500",children:[g.type," \u2022 ",g.industry]})]})]})]}),(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Cn.jsxs)("button",{onClick:()=>s("overview"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("overview"===n?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Cn.jsx)("span",{children:"Overview"})]}),(0,Cn.jsxs)("button",{onClick:()=>s("obligations"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("obligations"===n?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Cn.jsx)("span",{children:"Obligations"})]}),(0,Cn.jsxs)("button",{onClick:()=>s("resources"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("resources"===n?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,Cn.jsx)("span",{children:"Resources"})]})]})}),(0,Cn.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:["overview"===n&&(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Summary"}),(0,Cn.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-700",children:g.summary})})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Details"}),(0,Cn.jsxs)("dl",{className:"space-y-3",children:[(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Region"}),(0,Cn.jsx)("dd",{className:"text-sm text-gray-900",children:g.region})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Effective Date"}),(0,Cn.jsx)("dd",{className:"text-sm text-gray-900",children:g.effectiveDate})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Applies To"}),(0,Cn.jsx)("dd",{className:"text-sm text-gray-900",children:g.appliesTo})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Industry"}),(0,Cn.jsx)("dd",{className:"text-sm text-gray-900",children:g.industry})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Law Type"}),(0,Cn.jsx)("dd",{className:"text-sm text-gray-900",children:g.type})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,Cn.jsx)("dd",{children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:g.status})})]})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Enforcement"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-700",children:"(Placeholder: e.g. ICO, FTC)"})]})]}),"obligations"===n&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Key Obligations"}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Data Protection"}),(0,Cn.jsx)("p",{className:"text-sm text-yellow-700",children:"Implement appropriate technical and organizational measures to ensure data security."})]}),(0,Cn.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"User Consent"}),(0,Cn.jsx)("p",{className:"text-sm text-blue-700",children:"Obtain clear and informed consent before processing personal data."})]}),(0,Cn.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"Transparency"}),(0,Cn.jsx)("p",{className:"text-sm text-green-700",children:"Provide clear information about data processing activities to users."})]})]})]}),"resources"===n&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Resources"}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsx)("a",{href:"#",className:"block p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Full Legislation"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Complete legal text and amendments"})]}),(0,Cn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),(0,Cn.jsx)("a",{href:"#",className:"block p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Official Guidance"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Regulatory guidance and best practices"})]}),(0,Cn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),(0,Cn.jsx)("a",{href:"#",className:"block p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Compliance Checklist"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Step-by-step compliance requirements"})]}),(0,Cn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]})]}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:(0,Cn.jsxs)("div",{className:"flex space-x-3",children:[(0,Cn.jsx)("button",{className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 text-sm font-medium",children:"Subscribe to Updates"}),(0,Cn.jsx)("button",{className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 text-sm font-medium",children:"Export Details"})]})})]})})]})}const ol=e=>{let{activeSubTab:t,onSubTabChange:r}=e;return(0,Cn.jsx)("div",{children:(()=>{switch(t){case"contracts":default:return(0,Cn.jsx)($i,{});case"templates":return(0,Cn.jsx)(Zi,{});case"compliance":return(0,Cn.jsx)(Qi,{});case"risk":return(0,Cn.jsx)(el,{});case"requirements":return(0,Cn.jsx)(ll,{})}})()})},cl={async getShareholders(e){const{data:t,error:r}=await kn.from("shareholders").select("*").eq("organization_id",e).order("name");if(r)throw r;return t},async createShareholder(e,t){const{data:r,error:n}=await kn.from("shareholders").insert([Oe(Oe({},e),{},{organization_id:t})]).select().single();if(n)throw n;return r},async updateShareholder(e,t,r){const{data:n,error:s}=await kn.from("shareholders").update(t).eq("id",e).eq("organization_id",r).select().single();if(s)throw s;return n},async deleteShareholder(e,t){const{error:r}=await kn.from("shareholders").delete().eq("id",e).eq("organization_id",t);if(r)throw r},async getShareClasses(e){const{data:t,error:r}=await kn.from("share_classes").select("*").eq("organization_id",e).order("name");if(r)throw r;return t},async createShareClass(e,t){const{data:r,error:n}=await kn.from("share_classes").insert([Oe(Oe({},e),{},{organization_id:t})]).select().single();if(n)throw n;return r},async getFinancingRounds(e){const{data:t,error:r}=await kn.from("financing_rounds").select("\n        *,\n        share_classes(name)\n      ").eq("organization_id",e).order("date",{ascending:!1});if(r)throw r;return t},async createFinancingRound(e,t,r){const{data:n,error:s}=await kn.rpc("create_financing_round_with_options",{p_organization_id:r,round_name:e.name,round_date:e.date,pre_money_valuation:e.pre_money_valuation,share_class_id:e.share_class_id,option_pool_shares:e.option_pool_shares,participants_data:t.map(e=>({shareholder_id:e.shareholder_id,investment_amount:e.investment_amount}))});if(s)throw console.error("Error creating financing round with options:",s),s;return n},async updateFinancingRound(e,t,r){const{data:n,error:s}=await kn.from("financing_rounds").update(t).eq("id",e).eq("organization_id",r).select().single();if(s)throw s;return n},async deleteFinancingRound(e,t){const{error:r}=await kn.from("financing_rounds").delete().eq("id",e).eq("organization_id",t);if(r)throw r},async getTransactions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let r=kn.from("transactions").select("\n          *,\n          shareholders(name, role),\n          financing_rounds(name, date)\n        ").eq("organization_id",e).order("created_at");t&&(r=r.eq("round_id",t));const{data:n,error:s}=await r;if(s)throw s;return this.attachShareClassesToTransactions(n,e)}catch(r){throw console.error("Error in getTransactions:",r),r}},async createTransaction(e,t){const{data:r,error:n}=await kn.from("transactions").insert([Oe(Oe({},e),{},{organization_id:t})]).select().single();if(n)throw n;return r},async updateTransaction(e,t,r){const{data:n,error:s}=await kn.from("transactions").update(t).eq("id",e).eq("organization_id",r).select().single();if(s)throw s;return n},async deleteTransaction(e,t){const{error:r}=await kn.from("transactions").delete().eq("id",e).eq("organization_id",t);if(r)throw r},async getPreferenceTerms(e){const{data:t,error:r}=await kn.from("preference_terms").select("*").eq("organization_id",e);if(r)throw r;return t},async createPreferenceTerm(e,t){const{data:r,error:n}=await kn.from("preference_terms").insert([Oe(Oe({},e),{},{organization_id:t})]).select().single();if(n)throw n;return r},async getCapTableAtRound(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const r=await this.getTransactions(e,t);return this.calculateCapTableFromTransactions(r)}catch(r){throw console.error("Error in getCapTableAtRound:",r),r}},async attachShareClassesToTransactions(e,t){if(!e||0===e.length)return[];const r=[...new Set(e.map(e=>e.round_id).filter(Boolean))];if(0===r.length)return e;const{data:n,error:s}=await kn.from("financing_rounds").select("id, share_classes(name)").in("id",r).eq("organization_id",t);if(s)return console.error("Error fetching rounds to attach share classes:",s),e;const a={};return null===n||void 0===n||n.forEach(e=>{var t;a[e.id]=(null===(t=e.share_classes)||void 0===t?void 0:t.name)||"Common"}),e.map(e=>Oe(Oe({},e),{},{shareClass:a[e.round_id]||"Common"}))},calculateCapTableFromTransactions(e){const t={};let r=0;e.forEach(e=>{const n=e.shareholder_id;var s,a;t[n]||(t[n]={id:n,name:(null===(s=e.shareholders)||void 0===s?void 0:s.name)||"Unknown",role:(null===(a=e.shareholders)||void 0===a?void 0:a.role)||"Unknown",shares:0,investment:0,shareClass:e.shareClass||"Common"});t[n].shares+=parseFloat(e.shares_issued||0),t[n].investment+=parseFloat(e.investment_amount||0),r+=parseFloat(e.shares_issued||0)});const n=Object.values(t).map(e=>Oe(Oe({},e),{},{ownership:r>0?e.shares/r*100:0}));return{capTable:n,totalShares:r,summary:{totalShares:r,totalInvestment:n.reduce((e,t)=>e+t.investment,0)}}},async calculateExitScenario(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"non-participating";const{capTable:s}=await this.getCapTableAtRound(e),a=t*r/100,i=await this.getPreferenceTerms(e);return this.calculateExitValues(s,a,i,n)},calculateExitValues(e,t,r,n){const s=e.filter(e=>e.shareClass.includes("Preferred")).map(e=>{const s=r.find(t=>t.share_classes.name===e.shareClass),a=s?s.multiplier:1,i=e.investment*a,l=e.ownership/100*t;let o;return o="non-participating"===n?Math.max(i,l):i+l,Oe(Oe({},e),{},{preferenceAmount:i,conversionValue:l,finalValue:o,tookPreference:"participating"===n||i>l,multiplier:a})}),a=s.reduce((e,t)=>e+t.finalValue,0),i=Math.max(0,t-a),l=e.filter(e=>"Common"===e.shareClass),o=l.reduce((e,t)=>e+t.ownership,0),c=e.map(e=>{if(e.shareClass.includes("Preferred")){return s.find(t=>t.id===e.id)}{const t=o>0?e.ownership/o*i:0;return Oe(Oe({},e),{},{preferenceAmount:0,conversionValue:t,finalValue:t,tookPreference:!1,multiplier:1})}});return{exitCalculations:c,totalExitValue:c.reduce((e,t)=>e+t.finalValue,0),totalPreferencePayout:a,remainingProceeds:i}}},dl=()=>{const{currentOrganization:e}=_n(),r=null===e||void 0===e?void 0:e.organization_id,[n,s]=(0,t.useState)(!0),[a,i]=(0,t.useState)(null),[l,o]=(0,t.useState)(null),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)([]),[p,h]=(0,t.useState)([]),[x,f]=(0,t.useState)([]),[g,b]=(0,t.useState)([]),y=(0,t.useCallback)(async()=>{if(r)try{s(!0),i(null);const[e,t,n,a,l,c]=await Promise.all([cl.getShareholders(r),cl.getShareClasses(r),cl.getFinancingRounds(r),cl.getTransactions(r),cl.getPreferenceTerms(r),cl.getCapTableAtRound(r)]);m(e),h(t),d(n),f(a),b(l),o(c)}catch(e){i(e.message),console.error("Error loading cap table data:",e)}finally{s(!1)}else s(!1)},[r]);(0,t.useEffect)(()=>{y()},[y]);const v=(0,t.useCallback)(async e=>{if(r)try{s(!0);const t=await cl.getCapTableAtRound(r,e);o(t)}catch(t){i(t.message),console.error("Error loading cap table at round:",t)}finally{s(!1)}},[r]),j=(0,t.useCallback)(async(e,t,n)=>{if(!r)throw new Error("No organization selected");try{return await cl.calculateExitScenario(r,e,t,n)}catch(s){throw i(s.message),console.error("Error calculating exit scenario:",s),s}},[r]),w=(0,t.useCallback)(async e=>{if(!r)throw new Error("No organization selected");try{const t=await cl.createShareholder(e,r);return m(e=>[...e,t]),t}catch(t){throw i(t.message),t}},[r]),N=(0,t.useCallback)(async(e,t)=>{if(!r)throw new Error("No organization selected");try{const n=await cl.updateShareholder(e,t,r);return m(t=>t.map(t=>t.id===e?n:t)),n}catch(n){throw i(n.message),n}},[r]),k=(0,t.useCallback)(async e=>{if(!r)throw new Error("No organization selected");try{await cl.deleteShareholder(e,r),m(t=>t.filter(t=>t.id!==e))}catch(t){throw i(t.message),t}},[r]),C=(0,t.useCallback)(async e=>{if(!r)throw new Error("No organization selected");try{const t=await cl.createShareClass(e,r);return h(e=>[...e,t].sort((e,t)=>e.name.localeCompare(t.name))),t}catch(t){throw i(t.message),t}},[r]),S=(0,t.useCallback)(async(e,t)=>{if(!r)throw new Error("No organization selected");try{const n=await cl.createFinancingRound(e,t,r);return await y(),n}catch(n){throw i(n.message),n}},[r,y]),_=(0,t.useCallback)(async(e,t)=>{if(!r)throw new Error("No organization selected");try{const n=await cl.updateFinancingRound(e,t,r);return d(t=>t.map(t=>t.id===e?n:t)),n}catch(n){throw i(n.message),n}},[r]),E=(0,t.useCallback)(async e=>{if(!r)throw new Error("No organization selected");try{await cl.deleteFinancingRound(e,r),d(t=>t.filter(t=>t.id!==e))}catch(t){throw i(t.message),t}},[r]),I=(0,t.useCallback)(async e=>{if(!r)throw new Error("No organization selected");const t=await cl.createTransaction(e,r);return await y(),t},[r,y]),P=(0,t.useCallback)(async(e,t)=>{if(!r)throw new Error("No organization selected");const n=await cl.updateTransaction(e,t,r);return await y(),n},[r,y]),T=(0,t.useCallback)(async e=>{if(!r)throw new Error("No organization selected");await cl.deleteTransaction(e,r),await y()},[r,y]),D=(0,t.useCallback)(async e=>{try{const t=await cl.createPreferenceTerm(e);return b(e=>[...e,t]),t}catch(t){throw i(t.message),t}},[]);return{loading:n,error:a,capTable:l,rounds:c,shareholders:u,shareClasses:p,transactions:x,preferenceTerms:g,loadData:y,loadCapTableAtRound:v,calculateExitScenario:j,addShareholder:w,updateShareholder:N,deleteShareholder:k,addShareClass:C,addRound:S,updateRound:_,deleteRound:E,addTransaction:I,updateTransaction:P,deleteTransaction:T,addPreferenceTerm:D,clearError:()=>i(null),organizationId:r}},ul=e=>new Intl.NumberFormat("en-GB").format(e),ml=e=>"".concat((100*e).toFixed(2),"%"),pl=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Cap Table Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Cap Table Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"A cap table (capitalization table) shows the ownership structure of your company, including who owns what percentage and how much they invested. It's essential for fundraising, exits, and governance."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Essential for fundraising and investor negotiations"}),(0,Cn.jsx)("li",{children:"Helps track ownership dilution over time"}),(0,Cn.jsx)("li",{children:"Critical for exit planning and valuations"}),(0,Cn.jsx)("li",{children:"Required for corporate governance and compliance"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Keep your cap table updated after every transaction"}),(0,Cn.jsx)("li",{children:"Document all share issuances and transfers properly"}),(0,Cn.jsx)("li",{children:"Understand the impact of new rounds on existing shareholders"}),(0,Cn.jsx)("li",{children:"Plan for employee stock options and vesting schedules"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"View and Navigate"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Use the round selector to view your cap table at different points in time. Switch between "Individuals" and "Groups" views to see detailed or summarized ownership information.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Summary Cards"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Monitor key metrics in the summary cards: total shares, total investment, founders ownership, and investors ownership. These help you track your company's financial health and ownership distribution."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Understanding the Table"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The cap table shows each shareholder's name, role, shares owned, ownership percentage, investment amount, and share class. Use this to understand your company's complete ownership structure."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your cap table assistant. I can help you understand ownership structures, calculate dilution, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I calculate ownership dilution?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Ownership dilution occurs when new shares are issued. Use the round selector to compare ownership percentages before and after funding rounds to see the dilution impact."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about cap tables...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},hl=()=>{var e,r;const{loading:n,error:s,capTable:a,rounds:i,loadCapTableAtRound:l}=dl(),[o,c]=(0,t.useState)("individual"),[d,u]=(0,t.useState)(i.length),[m,p]=(0,t.useState)(!1),h=(0,t.useMemo)(()=>{var e,t;if(!a||!a.capTable)return{displayRows:[],summary:{}};const{capTable:r,summary:n}=a,s=Object.values(r.reduce((e,t)=>{const r="Founder"===t.role?"Founders":"Investor"===t.role?"Investors":"Employees & Advisors";return e[r]||(e[r]={name:r,role:"",shares:0,ownership:0,investment:0}),e[r].shares+=t.shares,e[r].ownership+=t.ownership,e[r].investment+=t.investment,e},{})),i="individual"===o?r:s,l="individual"===o?r.filter(e=>"Founder"===e.role).reduce((e,t)=>e+t.ownership,0):(null===(e=s.find(e=>"Founders"===e.name))||void 0===e?void 0:e.ownership)||0,c="individual"===o?r.filter(e=>"Investor"===e.role).reduce((e,t)=>e+t.ownership,0):(null===(t=s.find(e=>"Investors"===e.name))||void 0===t?void 0:t.ownership)||0;return{displayRows:i,summary:Oe(Oe({},n),{},{foundersOwnership:l,investorsOwnership:c})}},[a,o]);return n?(0,Cn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"Loading cap table..."})]})}):s?(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsxs)("div",{className:"ml-3",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading cap table"}),(0,Cn.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,Cn.jsx)("p",{children:s})})]})})}):(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Cap Table Overview"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"View and manage your company's ownership structure and shareholder information"})]}),(0,Cn.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]})}),(0,Cn.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,Cn.jsxs)("select",{value:d,onChange:e=>(async e=>{if(u(e),e===i.length)await l();else{var t;const r=null===(t=i[e])||void 0===t?void 0:t.id;r&&await l(r)}})(parseInt(e.target.value,10)),className:"w-48 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 bg-purple-600 text-white font-medium px-4 py-2",children:[(0,Cn.jsx)("option",{value:i.length,children:"Current"}),i.map((e,t)=>(0,Cn.jsx)("option",{value:t,children:e.name},e.id))]}),(0,Cn.jsxs)("div",{className:"bg-purple-100 p-0.5 rounded-lg flex text-sm",children:[(0,Cn.jsx)("button",{onClick:()=>c("individual"),className:"px-4 py-2 rounded-md flex-1 text-purple-700 ".concat("individual"===o?"bg-white shadow-sm":""),children:"Individuals"}),(0,Cn.jsx)("button",{onClick:()=>c("group"),className:"px-4 py-2 rounded-md flex-1 text-purple-700 ".concat("group"===o?"bg-white shadow-sm":""),children:"Groups"})]})]}),h.summary&&(0,Cn.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Cn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Total Shares"}),(0,Cn.jsx)("p",{className:"text-xl font-bold",children:ul(h.summary.totalShares||0)})]}),(0,Cn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Total Investment"}),(0,Cn.jsx)("p",{className:"text-xl font-bold",children:(x=h.summary.totalInvestment||0,"\xa3".concat((x/1e6).toFixed(2),"M"))})]}),(0,Cn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Founders Ownership"}),(0,Cn.jsx)("p",{className:"text-xl font-bold",children:ml((h.summary.foundersOwnership||0)/100)})]}),(0,Cn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Investors Ownership"}),(0,Cn.jsx)("p",{className:"text-xl font-bold",children:ml((h.summary.investorsOwnership||0)/100)})]})]}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 min-w-full inline-block",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shareholder"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% Ownership"}),"individual"===o&&(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Share Class"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment (\xa3)"}),"individual"===o&&(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Share Price (\xa3)"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.displayRows.map(e=>(0,Cn.jsxs)("tr",{children:[(0,Cn.jsxs)("td",{className:"px-6 py-2 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]}),(0,Cn.jsx)("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-700",children:ul(Math.round(e.shares))}),(0,Cn.jsx)("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-700",children:ml(e.ownership/100)}),"individual"===o&&(0,Cn.jsx)("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-700",children:e.shareClass}),(0,Cn.jsx)("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-700",children:ul(e.investment)}),"individual"===o&&(0,Cn.jsx)("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-700",children:e.investment>0&&e.shares>0?(e.investment/e.shares).toFixed(4):"-"})]},e.id||e.name))}),(0,Cn.jsx)("tfoot",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{className:"px-6 py-2 text-left text-sm font-bold text-gray-700",children:"Totals"}),(0,Cn.jsx)("td",{className:"px-6 py-2 text-left text-sm font-bold text-gray-700",children:ul((null===(e=h.summary)||void 0===e?void 0:e.totalShares)||0)}),(0,Cn.jsx)("td",{className:"px-6 py-2 text-left text-sm font-bold text-gray-700",children:"100.00%"}),"individual"===o&&(0,Cn.jsx)("td",{colSpan:"1"}),(0,Cn.jsx)("td",{className:"px-6 py-2 text-left text-sm font-bold text-gray-700",children:ul((null===(r=h.summary)||void 0===r?void 0:r.totalInvestment)||0)}),"individual"===o&&(0,Cn.jsx)("td",{colSpan:"1"})]})})]})})}),(0,Cn.jsx)(pl,{isOpen:m,onClose:()=>p(!1)})]});var x},xl=["title","titleId"];function fl(e,r){let{title:n,titleId:s}=e,a=Yn(e,xl);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const gl=t.forwardRef(fl),bl=["title","titleId"];function yl(e,r){let{title:n,titleId:s}=e,a=Yn(e,bl);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const vl=t.forwardRef(yl),jl=["title","titleId"];function wl(e,r){let{title:n,titleId:s}=e,a=Yn(e,jl);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}const Nl=t.forwardRef(wl),kl=["title","titleId"];function Cl(e,r){let{title:n,titleId:s}=e,a=Yn(e,kl);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M10.75 4.75a.75.75 0 0 0-1.5 0v4.5h-4.5a.75.75 0 0 0 0 1.5h4.5v4.5a.75.75 0 0 0 1.5 0v-4.5h4.5a.75.75 0 0 0 0-1.5h-4.5v-4.5Z"}))}const Sl=t.forwardRef(Cl),_l=["title","titleId"];function El(e,r){let{title:n,titleId:s}=e,a=Yn(e,_l);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const Il=t.forwardRef(El),Pl=["title","titleId"];function Tl(e,r){let{title:n,titleId:s}=e,a=Yn(e,Pl);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z",clipRule:"evenodd"}))}const Dl=t.forwardRef(Tl),Al=e=>{let{onAdd:r,onCancel:n}=e;const[s,a]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[o,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null);return(0,Cn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s){c(!0),u(null);try{await r({name:s,description:i})}catch(t){u(t.message)}finally{c(!1)}}else u("Share class name is required.")},className:"space-y-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add New Share Class"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Define a new class of shares for your company's equity."})]}),d&&(0,Cn.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsx)("div",{className:"ml-3",children:(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:d})})})}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Share Class Name"}),(0,Cn.jsx)("div",{className:"mt-1",children:(0,Cn.jsx)("input",{type:"text",name:"name",id:"name",className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"e.g., Series A Preferred",value:s,onChange:e=>a(e.target.value),required:!0})})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Cn.jsx)("div",{className:"mt-1",children:(0,Cn.jsx)("textarea",{id:"description",name:"description",rows:3,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"A brief description of the rights and preferences of this share class.",value:i,onChange:e=>l(e.target.value)})})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:o,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Adding...":"Add Share Class"})]})]})};function Ol(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}function Ll(){let e=[],t={addEventListener:(e,r,n,s)=>(e.addEventListener(r,n,s),t.add(()=>e.removeEventListener(r,n,s))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add(()=>cancelAnimationFrame(e))},nextFrame(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(){let e=setTimeout(...arguments);return t.add(()=>clearTimeout(e))},microTask(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];let s={current:!0};return Ol(()=>{s.current&&r[0]()}),t.add(()=>{s.current=!1})},style(e,t,r){let n=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add(()=>{Object.assign(e.style,{[t]:n})})},group(e){let t=Ll();return e(t),this.add(()=>t.dispose())},add:t=>(e.includes(t)||e.push(t),()=>{let r=e.indexOf(t);if(r>=0)for(let t of e.splice(r,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function Rl(){let[e]=(0,t.useState)(Ll);return(0,t.useEffect)(()=>()=>e.dispose(),[e]),e}var Ml=Object.defineProperty,zl=(e,t,r)=>(((e,t,r)=>{t in e?Ml(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let Fl=new class{constructor(){zl(this,"current",this.detect()),zl(this,"handoffState","pending"),zl(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},Bl=(e,r)=>{Fl.isServer?(0,t.useEffect)(e,r):(0,t.useLayoutEffect)(e,r)};function Ul(e){let r=(0,t.useRef)(e);return Bl(()=>{r.current=e},[e]),r}let ql=function(e){let r=Ul(e);return t.useCallback(function(){return r.current(...arguments)},[r])};function Hl(){let e=(0,t.useRef)(!1);return Bl(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Wl(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(n)(()=>()=>{},()=>!1,()=>!e)}(),[r,s]=t.useState(Fl.isHandoffComplete);return r&&!1===Fl.isHandoffComplete&&s(!1),t.useEffect(()=>{!0!==r&&s(!0)},[r]),t.useEffect(()=>Fl.handoff(),[]),!e&&r}let Vl=Symbol();function Gl(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[Vl]:t})}function $l(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];let s=(0,t.useRef)(r);(0,t.useEffect)(()=>{s.current=r},[r]);let a=ql(e=>{for(let t of s.current)null!=t&&("function"==typeof t?t(e):t.current=e)});return r.every(e=>null==e||(null==e?void 0:e[Vl]))?void 0:a}var Kl,Yl;"undefined"!=typeof process&&"undefined"!=typeof globalThis&&"undefined"!=typeof Element&&"test"===(null==(Kl=null==process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})?void 0:Kl.NODE_ENV)&&"undefined"==typeof(null==(Yl=null==Element?void 0:Element.prototype)?void 0:Yl.getAnimations)&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join("\n")),[]});var Zl=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Zl||{});function Jl(e){let t={};for(let r in e)!0===e[r]&&(t["data-".concat(r)]="");return t}function Ql(e,r,n,s){let[a,i]=(0,t.useState)(n),{hasFlag:l,addFlag:o,removeFlag:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[r,n]=(0,t.useState)(e),s=(0,t.useCallback)(e=>n(e),[r]),a=(0,t.useCallback)(e=>n(t=>t|e),[r]),i=(0,t.useCallback)(e=>(r&e)===e,[r]),l=(0,t.useCallback)(e=>n(t=>t&~e),[n]),o=(0,t.useCallback)(e=>n(t=>t^e),[n]);return{flags:r,setFlag:s,addFlag:a,hasFlag:i,removeFlag:l,toggleFlag:o}}(e&&a?3:0),d=(0,t.useRef)(!1),u=(0,t.useRef)(!1),m=Rl();return Bl(()=>{var t;if(e)return n&&i(!0),r?(null==(t=null==s?void 0:s.start)||t.call(s,n),function(e,t){let{prepare:r,run:n,done:s,inFlight:a}=t,i=Ll();return function(e,t){let{inFlight:r,prepare:n}=t;if(null!=r&&r.current)return void n();let s=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=s}(e,{prepare:r,inFlight:a}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(function(e,t){var r,n;let s=Ll();if(!e)return s.dispose;let a=!1;s.add(()=>{a=!0});let i=null!=(n=null==(r=e.getAnimations)?void 0:r.call(e).filter(e=>e instanceof CSSTransition))?n:[];return 0===i.length?(t(),s.dispose):(Promise.allSettled(i.map(e=>e.finished)).then(()=>{a||t()}),s.dispose)}(e,s))})}),i.dispose}(r,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(n?(o(3),c(4)):(o(4),c(2)))},run(){u.current?n?(c(3),o(4)):(c(4),o(3)):n?c(1):o(1)},done(){var e;u.current&&"function"==typeof r.getAnimations&&r.getAnimations().length>0||(d.current=!1,c(7),n||i(!1),null==(e=null==s?void 0:s.end)||e.call(s,n))}})):void(n&&o(3))},[e,n,r,m]),e?[a,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}let Xl=(0,t.createContext)(null);Xl.displayName="OpenClosedContext";var eo=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(eo||{});function to(){return(0,t.useContext)(Xl)}function ro(e){let{value:r,children:n}=e;return t.createElement(Xl.Provider,{value:r},n)}function no(e){let{children:r}=e;return t.createElement(Xl.Provider,{value:null},r)}function so(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Array.from(new Set(t.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}function ao(e,t){if(e in t){let a=t[e];for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return"function"==typeof a?a(...n):a}let a=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map(e=>'"'.concat(e,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(a,ao),a}const io=["static"],lo=["unmount"],oo=["as","children","refName"];var co=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(co||{}),uo=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(uo||{});function mo(){let e=function(){let e=(0,t.useRef)([]),r=(0,t.useCallback)(t=>{for(let r of e.current)null!=r&&("function"==typeof r?r(t):r.current=t)},[]);return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.every(e=>null==e))return e.current=n,r}}();return(0,t.useCallback)(t=>function(e){let{ourProps:t,theirProps:r,slot:n,defaultTag:s,features:a,visible:i=!0,name:l,mergeRefs:o}=e;o=null!=o?o:ho;let c=xo(r,t);if(i)return po(c,n,s,l,o);let d=null!=a?a:0;if(2&d){let{static:e=!1}=c,t=Yn(c,io);if(e)return po(t,n,s,l,o)}if(1&d){let{unmount:e=!0}=c,t=Yn(c,lo);return ao(e?0:1,{0:()=>null,1:()=>po(Oe(Oe({},t),{},{hidden:!0,style:{display:"none"}}),n,s,l,o)})}return po(c,n,s,l,o)}(Oe({mergeRefs:e},t)),[e])}function po(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=yo(e,["unmount","static"]),{as:l=n,children:o,refName:c="ref"}=i,d=Yn(i,oo),u=void 0!==e.ref?{[c]:e.ref}:{},m="function"==typeof o?o(r):o;"className"in d&&d.className&&"function"==typeof d.className&&(d.className=d.className(r)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let p={};if(r){let e=!1,t=[];for(let[n,s]of Object.entries(r))"boolean"==typeof s&&(e=!0),!0===s&&t.push(n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())));if(e){p["data-headlessui-state"]=t.join(" ");for(let e of t)p["data-".concat(e)]=""}}if(l===t.Fragment&&(Object.keys(bo(d)).length>0||Object.keys(bo(p)).length>0)){if((0,t.isValidElement)(m)&&!(Array.isArray(m)&&m.length>1)){let e=m.props,r=null==e?void 0:e.className,n="function"==typeof r?function(){return so(r(...arguments),d.className)}:so(r,d.className),s=n?{className:n}:{},i=xo(m.props,bo(yo(d,["ref"])));for(let t in p)t in i&&delete p[t];return(0,t.cloneElement)(m,Object.assign({},i,p,u,{ref:a(vo(m),u.ref)},s))}if(Object.keys(bo(d)).length>0)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(s,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(bo(d)).concat(Object.keys(bo(p))).map(e=>"  - ".concat(e)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>"  - ".concat(e)).join("\n")].join("\n"))}return(0,t.createElement)(l,Object.assign({},yo(d,["ref"]),l!==t.Fragment&&u,l!==t.Fragment&&p),m)}function ho(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every(e=>null==e)?void 0:e=>{for(let r of t)null!=r&&("function"==typeof r?r(e):r.current=e)}}function xo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return{};if(1===t.length)return t[0];let n={},s={};for(let a of t)for(let e in a)e.startsWith("on")&&"function"==typeof a[e]?(null!=s[e]||(s[e]=[]),s[e].push(a[e])):n[e]=a[e];if(n.disabled||n["aria-disabled"])for(let a in s)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(a)&&(s[a]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let a in s)Object.assign(n,{[a](e){let t=s[a];for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(let s of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;s(e,...n)}}});return n}function fo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return{};if(1===t.length)return t[0];let n={},s={};for(let a of t)for(let e in a)e.startsWith("on")&&"function"==typeof a[e]?(null!=s[e]||(s[e]=[]),s[e].push(a[e])):n[e]=a[e];for(let a in s)Object.assign(n,{[a](){let e=s[a];for(let t of e)null==t||t(...arguments)}});return n}function go(e){var r;return Object.assign((0,t.forwardRef)(e),{displayName:null!=(r=e.displayName)?r:e.name})}function bo(e){let t=Object.assign({},e);for(let r in t)void 0===t[r]&&delete t[r];return t}function yo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function vo(e){return t.version.split(".")[0]>="19"?e.props.ref:e.ref}const jo=["transition","beforeEnter","afterEnter","beforeLeave","afterLeave","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"],wo=["show","appear","unmount"];function No(e){var r;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||(null!=(r=e.as)?r:Io)!==t.Fragment||1===t.Children.count(e.children)}let ko=(0,t.createContext)(null);ko.displayName="TransitionContext";var Co=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Co||{});let So=(0,t.createContext)(null);function _o(e){return"children"in e?_o(e.children):e.current.filter(e=>{let{el:t}=e;return null!==t.current}).filter(e=>{let{state:t}=e;return"visible"===t}).length>0}function Eo(e,r){let n=Ul(e),s=(0,t.useRef)([]),a=Hl(),i=Rl(),l=ql(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uo.Hidden,r=s.current.findIndex(t=>{let{el:r}=t;return r===e});-1!==r&&(ao(t,{[uo.Unmount](){s.current.splice(r,1)},[uo.Hidden](){s.current[r].state="hidden"}}),i.microTask(()=>{var e;!_o(s)&&a.current&&(null==(e=n.current)||e.call(n))}))}),o=ql(e=>{let t=s.current.find(t=>{let{el:r}=t;return r===e});return t?"visible"!==t.state&&(t.state="visible"):s.current.push({el:e,state:"visible"}),()=>l(e,uo.Unmount)}),c=(0,t.useRef)([]),d=(0,t.useRef)(Promise.resolve()),u=(0,t.useRef)({enter:[],leave:[]}),m=ql((e,t,n)=>{c.current.splice(0),r&&(r.chains.current[t]=r.chains.current[t].filter(t=>{let[r]=t;return r!==e})),null==r||r.chains.current[t].push([e,new Promise(e=>{c.current.push(e)})]),null==r||r.chains.current[t].push([e,new Promise(e=>{Promise.all(u.current[t].map(e=>{let[t,r]=e;return r})).then(()=>e())})]),"enter"===t?d.current=d.current.then(()=>null==r?void 0:r.wait.current).then(()=>n(t)):n(t)}),p=ql((e,t,r)=>{Promise.all(u.current[t].splice(0).map(e=>{let[t,r]=e;return r})).then(()=>{var e;null==(e=c.current.shift())||e()}).then(()=>r(t))});return(0,t.useMemo)(()=>({children:s,register:o,unregister:l,onStart:m,onStop:p,wait:d,chains:u}),[o,l,s,m,p,u,d])}So.displayName="NestingContext";let Io=t.Fragment,Po=co.RenderStrategy;let To=go(function(e,r){let{show:n,appear:s=!1,unmount:a=!0}=e,i=Yn(e,wo),l=(0,t.useRef)(null),o=$l(...No(e)?[l,r]:null===r?[]:[r]);Wl();let c=to();if(void 0===n&&null!==c&&(n=(c&eo.Open)===eo.Open),void 0===n)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,u]=(0,t.useState)(n?"visible":"hidden"),m=Eo(()=>{n||u("hidden")}),[p,h]=(0,t.useState)(!0),x=(0,t.useRef)([n]);Bl(()=>{!1!==p&&x.current[x.current.length-1]!==n&&(x.current.push(n),h(!1))},[x,n]);let f=(0,t.useMemo)(()=>({show:n,appear:s,initial:p}),[n,s,p]);Bl(()=>{n?u("visible"):!_o(m)&&null!==l.current&&u("hidden")},[n,m]);let g={unmount:a},b=ql(()=>{var t;p&&h(!1),null==(t=e.beforeEnter)||t.call(e)}),y=ql(()=>{var t;p&&h(!1),null==(t=e.beforeLeave)||t.call(e)}),v=mo();return t.createElement(So.Provider,{value:m},t.createElement(ko.Provider,{value:f},v({ourProps:Oe(Oe({},g),{},{as:t.Fragment,children:t.createElement(Do,Oe(Oe(Oe({ref:o},g),i),{},{beforeEnter:b,beforeLeave:y}))}),theirProps:{},defaultTag:t.Fragment,features:Po,visible:"visible"===d,name:"Transition"})))}),Do=go(function(e,r){var n,s;let{transition:a=!0,beforeEnter:i,afterEnter:l,beforeLeave:o,afterLeave:c,enter:d,enterFrom:u,enterTo:m,entered:p,leave:h,leaveFrom:x,leaveTo:f}=e,g=Yn(e,jo),[b,y]=(0,t.useState)(null),v=(0,t.useRef)(null),j=No(e),w=$l(...j?[v,r,y]:null===r?[]:[r]),N=null==(n=g.unmount)||n?uo.Unmount:uo.Hidden,{show:k,appear:C,initial:S}=function(){let e=(0,t.useContext)(ko);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[_,E]=(0,t.useState)(k?"visible":"hidden"),I=function(){let e=(0,t.useContext)(So);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:P,unregister:T}=I;Bl(()=>P(v),[P,v]),Bl(()=>{if(N===uo.Hidden&&v.current)return k&&"visible"!==_?void E("visible"):ao(_,{hidden:()=>T(v),visible:()=>P(v)})},[_,v,P,T,k,N]);let D=Wl();Bl(()=>{if(j&&D&&"visible"===_&&null===v.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[v,_,D,j]);let A=S&&!C,O=C&&k&&S,L=(0,t.useRef)(!1),R=Eo(()=>{L.current||(E("hidden"),T(v))},I),M=ql(e=>{L.current=!0;let t=e?"enter":"leave";R.onStart(v,t,e=>{"enter"===e?null==i||i():"leave"===e&&(null==o||o())})}),z=ql(e=>{let t=e?"enter":"leave";L.current=!1,R.onStop(v,t,e=>{"enter"===e?null==l||l():"leave"===e&&(null==c||c())}),"leave"===t&&!_o(R)&&(E("hidden"),T(v))});(0,t.useEffect)(()=>{j&&a||(M(k),z(k))},[k,j,a]);let F=!(!a||!j||!D||A),[,B]=Ql(F,b,k,{start:M,end:z}),U=bo(Oe({ref:w,className:(null==(s=so(g.className,O&&d,O&&u,B.enter&&d,B.enter&&B.closed&&u,B.enter&&!B.closed&&m,B.leave&&h,B.leave&&!B.closed&&x,B.leave&&B.closed&&f,!B.transition&&k&&p))?void 0:s.trim())||void 0},Jl(B))),q=0;"visible"===_&&(q|=eo.Open),"hidden"===_&&(q|=eo.Closed),k&&"hidden"===_&&(q|=eo.Opening),!k&&"visible"===_&&(q|=eo.Closing);let H=mo();return t.createElement(So.Provider,{value:R},t.createElement(ro,{value:q},H({ourProps:U,theirProps:g,defaultTag:Io,features:Po,visible:"visible"===_,name:"Transition.Child"})))}),Ao=go(function(e,r){let n=null!==(0,t.useContext)(ko),s=null!==to();return t.createElement(t.Fragment,null,!n&&s?t.createElement(To,Oe({ref:r},e)):t.createElement(Do,Oe({ref:r},e)))}),Oo=Object.assign(To,{Child:Ao,Root:To});var Lo=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Lo||{});function Ro(e,r,n,s){let a=Ul(n);(0,t.useEffect)(()=>{function t(e){a.current(e)}return(e=null!=e?e:window).addEventListener(r,t,s),()=>e.removeEventListener(r,t,s)},[e,r,s])}class Mo extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}var zo,Fo,Bo,Uo=Object.defineProperty,qo=(e,t,r)=>(((e,t,r)=>{t in e?Uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),Ho=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Wo=(e,t,r)=>(Ho(e,t,"read from private field"),r?r.call(e):t.get(e)),Vo=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Go=(e,t,r,n)=>(Ho(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);class $o{constructor(e){Vo(this,zo,{}),Vo(this,Fo,new Mo(()=>new Set)),Vo(this,Bo,new Set),qo(this,"disposables",Ll()),Go(this,zo,e)}dispose(){this.disposables.dispose()}get state(){return Wo(this,zo)}subscribe(e,t){let r={selector:e,callback:t,current:e(Wo(this,zo))};return Wo(this,Bo).add(r),this.disposables.add(()=>{Wo(this,Bo).delete(r)})}on(e,t){return Wo(this,Fo).get(e).add(t),this.disposables.add(()=>{Wo(this,Fo).get(e).delete(t)})}send(e){let t=this.reduce(Wo(this,zo),e);if(t!==Wo(this,zo)){Go(this,zo,t);for(let e of Wo(this,Bo)){let t=e.selector(Wo(this,zo));Ko(e.current,t)||(e.current=t,e.callback(t))}for(let t of Wo(this,Fo).get(e.type))t(Wo(this,zo),e)}}}function Ko(e,t){return!!Object.is(e,t)||"object"==typeof e&&null!==e&&"object"==typeof t&&null!==t&&(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&Yo(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size===t.size&&Yo(e.entries(),t.entries()):!(!Zo(e)||!Zo(t))&&Yo(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()))}function Yo(e,t){for(;;){let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}}function Zo(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}zo=new WeakMap,Fo=new WeakMap,Bo=new WeakMap;var Jo=Object.defineProperty,Qo=(e,t,r)=>(((e,t,r)=>{t in e?Jo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),Xo=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Xo||{});let ec={0(e,t){let r=t.id,n=e.stack,s=e.stack.indexOf(r);if(-1!==s){let t=e.stack.slice();return t.splice(s,1),t.push(r),n=t,Oe(Oe({},e),{},{stack:n})}return Oe(Oe({},e),{},{stack:[...e.stack,r]})},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(-1===n)return e;let s=e.stack.slice();return s.splice(n,1),Oe(Oe({},e),{},{stack:s})}};class tc extends $o{constructor(){super(...arguments),Qo(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),Qo(this,"selectors",{isTop:(e,t)=>e.stack[e.stack.length-1]===t,inStack:(e,t)=>e.stack.includes(t)})}static new(){return new tc({stack:[]})}reduce(e,t){return ao(t.type,ec,e,t)}}const rc=new Mo(()=>tc.new());var nc=r(7237);function sc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ko;return(0,nc.useSyncExternalStoreWithSelector)(ql(t=>e.subscribe(ac,t)),ql(()=>e.state),ql(()=>e.state),ql(t),r)}function ac(e){return e}function ic(e,r){let n=(0,t.useId)(),s=rc.get(r),[a,i]=sc(s,(0,t.useCallback)(e=>[s.selectors.isTop(e,n),s.selectors.inStack(e,n)],[s,n]));return Bl(()=>{if(e)return s.actions.push(n),()=>s.actions.pop(n)},[s,e,n]),!!e&&(!i||a)}function lc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"!=typeof document?document.defaultView:null,r=arguments.length>2?arguments[2]:void 0,n=ic(e,"escape");Ro(t,"keydown",e=>{n&&(e.defaultPrevented||e.key===Lo.Escape&&r(e))})}function oc(e){var t,r;return Fl.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(r=null==(t=e.current)?void 0:t.ownerDocument)?r:document:null:document}let cc=new Map,dc=new Map;function uc(e){var t;let r=null!=(t=dc.get(e))?t:0;return dc.set(e,r+1),0!==r||(cc.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>mc(e)}function mc(e){var t;let r=null!=(t=dc.get(e))?t:1;if(1===r?dc.delete(e):dc.set(e,r-1),1!==r)return;let n=cc.get(e);n&&(null===n["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,cc.delete(e))}function pc(e){let{allowed:t,disallowed:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ic(e,"inert-others");Bl(()=>{var e,s;if(!n)return;let a=Ll();for(let t of null!=(e=null==r?void 0:r())?e:[])t&&a.add(uc(t));let i=null!=(s=null==t?void 0:t())?s:[];for(let t of i){if(!t)continue;let e=oc(t);if(!e)continue;let r=t.parentElement;for(;r&&r!==e.body;){for(let e of r.children)i.some(t=>e.contains(t))||a.add(uc(e));r=r.parentElement}}return a.dispose},[n,t,r])}function hc(e){return"object"==typeof e&&null!==e&&"nodeType"in e}function xc(e){return hc(e)&&"tagName"in e}function fc(e){return xc(e)&&"accessKey"in e}function gc(e){return xc(e)&&"tabIndex"in e}function bc(e){return fc(e)&&"FIELDSET"===e.nodeName}function yc(e){return fc(e)&&"LEGEND"===e.nodeName}function vc(e,r,n){let s=Ul(e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&n()});(0,t.useEffect)(()=>{if(!e)return;let t=null===r?null:fc(r)?r:r.current;if(!t)return;let n=Ll();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(()=>s.current(t));e.observe(t),n.add(()=>e.disconnect())}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver(()=>s.current(t));e.observe(t),n.add(()=>e.disconnect())}return()=>n.dispose()},[r,s,e])}let jc=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(","),wc=["[data-autofocus]"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(",");var Nc=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(Nc||{}),kc=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(kc||{}),Cc=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Cc||{});function Sc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(jc)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}var _c=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(_c||{});function Ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r;return e!==(null==(r=oc(e))?void 0:r.body)&&ao(t,{0:()=>e.matches(jc),1(){let t=e;for(;null!==t;){if(t.matches(jc))return!0;t=t.parentElement}return!1}})}var Ic=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ic||{});function Pc(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let Tc=["textarea","input"].join(",");function Dc(e,t){let{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,i=Array.isArray(e)?r?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort((e,r)=>{let n=t(e),s=t(r);if(null===n||null===s)return 0;let a=n.compareDocumentPosition(s);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:64&t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(wc)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}(e):Sc(e);s.length>0&&i.length>1&&(i=i.filter(e=>!s.some(t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))),n=null!=n?n:a.activeElement;let l,o=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,i.indexOf(n))-1;if(4&t)return Math.max(0,i.indexOf(n))+1;if(8&t)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=32&t?{preventScroll:!0}:{},u=0,m=i.length;do{if(u>=m||u+m<=0)return 0;let e=c+u;if(16&t)e=(e+m)%m;else{if(e<0)return 3;if(e>=m)return 1}l=i[e],null==l||l.focus(d),u+=o}while(l!==a.activeElement);return 6&t&&function(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Tc))&&r}(l)&&l.select(),2}function Ac(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Oc(){return Ac()||/Android/gi.test(window.navigator.userAgent)}function Lc(e,r,n,s){let a=Ul(n);(0,t.useEffect)(()=>{if(e)return document.addEventListener(r,t,s),()=>document.removeEventListener(r,t,s);function t(e){a.current(e)}},[e,r,s])}function Rc(e,r,n,s){let a=Ul(n);(0,t.useEffect)(()=>{if(e)return window.addEventListener(r,t,s),()=>window.removeEventListener(r,t,s);function t(e){a.current(e)}},[e,r,s])}function Mc(e,r,n){let s=Ul(n),a=(0,t.useCallback)(function(e,t){if(e.defaultPrevented)return;let n=t(e);if(null===n||!n.getRootNode().contains(n)||!n.isConnected)return;let a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(r);for(let r of a)if(null!==r&&(r.contains(n)||e.composed&&e.composedPath().includes(r)))return;return!Ec(n,_c.Loose)&&-1!==n.tabIndex&&e.preventDefault(),s.current(e,n)},[s,r]),i=(0,t.useRef)(null);Lc(e,"pointerdown",e=>{var t,r;Oc()||(i.current=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)},!0),Lc(e,"pointerup",e=>{if(Oc()||!i.current)return;let t=i.current;return i.current=null,a(e,()=>t)},!0);let l=(0,t.useRef)({x:0,y:0});Lc(e,"touchstart",e=>{l.current.x=e.touches[0].clientX,l.current.y=e.touches[0].clientY},!0),Lc(e,"touchend",e=>{let t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;if(!(Math.abs(t-l.current.x)>=30||Math.abs(r-l.current.y)>=30))return a(e,()=>gc(e.target)?e.target:null)},!0),Rc(e,"blur",e=>a(e,()=>function(e){return fc(e)&&"IFRAME"===e.nodeName}(window.document.activeElement)?window.document.activeElement:null),!0)}function zc(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,t.useMemo)(()=>oc(...r),[...r])}const Fc=["features"];var Bc=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Bc||{});let Uc=go(function(e,t){var r;let{features:n=1}=e,s=Yn(e,Fc),a={ref:t,"aria-hidden":2===(2&n)||(null!=(r=s["aria-hidden"])?r:void 0),hidden:4===(4&n)||void 0,style:Oe({position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},4===(4&n)&&2!==(2&n)&&{display:"none"})};return mo()({ourProps:a,theirProps:s,slot:{},defaultTag:"span",name:"Hidden"})});function qc(){let{defaultContainers:e=[],portals:t,mainTreeNode:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=zc(r),s=ql(()=>{var s,a;let i=[];for(let t of e)null!==t&&(xc(t)?i.push(t):"current"in t&&xc(t.current)&&i.push(t.current));if(null!=t&&t.current)for(let e of t.current)i.push(e);for(let e of null!=(s=null==n?void 0:n.querySelectorAll("html > *, body > *"))?s:[])e!==document.body&&e!==document.head&&xc(e)&&"headlessui-portal-root"!==e.id&&(r&&(e.contains(r)||e.contains(null==(a=null==r?void 0:r.getRootNode())?void 0:a.host))||i.some(t=>e.contains(t))||i.push(e));return i});return{resolveContainers:s,contains:ql(e=>s().some(t=>t.contains(e)))}}let Hc=(0,t.createContext)(null);function Wc(e){let{children:r,node:n}=e,[s,a]=(0,t.useState)(null),i=Vc(null!=n?n:s);return t.createElement(Hc.Provider,{value:i},r,null===i&&t.createElement(Uc,{features:Bc.Hidden,ref:e=>{var t,r;if(e)for(let n of null!=(r=null==(t=oc(e))?void 0:t.querySelectorAll("html > *, body > *"))?r:[])if(n!==document.body&&n!==document.head&&xc(n)&&null!=n&&n.contains(e)){a(n);break}}}))}function Vc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var r;return null!=(r=(0,t.useContext)(Hc))?r:e}function Gc(){let e;return{before(t){let{doc:r}=t;var n;let s=r.documentElement,a=null!=(n=r.defaultView)?n:window;e=Math.max(0,a.innerWidth-s.clientWidth)},after(t){let{doc:r,d:n}=t,s=r.documentElement,a=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-a);n.style(s,"paddingRight","".concat(i,"px"))}}}function $c(){return Ac()?{before(e){let{doc:t,d:r,meta:n}=e;function s(e){return n.containers.flatMap(e=>e()).some(t=>t.contains(e))}r.microTask(()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=Ll();e.style(t.documentElement,"scrollBehavior","auto"),r.add(()=>r.microTask(()=>e.dispose()))}let n=null!=(e=window.scrollY)?e:window.pageYOffset,a=null;r.addEventListener(t,"click",e=>{if(gc(e.target))try{let r=e.target.closest("a");if(!r)return;let{hash:n}=new URL(r.href),i=t.querySelector(n);gc(i)&&!s(i)&&(a=i)}catch(r){}},!0),r.addEventListener(t,"touchstart",e=>{if(gc(e.target)&&function(e){return xc(e)&&"style"in e}(e.target))if(s(e.target)){let t=e.target;for(;t.parentElement&&s(t.parentElement);)t=t.parentElement;r.style(t,"overscrollBehavior","contain")}else r.style(e.target,"touchAction","none")}),r.addEventListener(t,"touchmove",e=>{if(gc(e.target)){if(function(e){return fc(e)&&"INPUT"===e.nodeName}(e.target))return;if(s(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}},{passive:!1}),r.add(()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;n!==t&&window.scrollTo(0,n),a&&a.isConnected&&(a.scrollIntoView({block:"nearest"}),a=null)})})}}:{}}function Kc(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let Yc=function(e,t){let r=e(),n=new Set;return{getSnapshot:()=>r,subscribe:e=>(n.add(e),()=>n.delete(e)),dispatch(e){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];let l=t[e].call(r,...a);l&&(r=l,n.forEach(e=>e()))}}}(()=>new Map,{PUSH(e,t){var r;let n=null!=(r=this.get(e))?r:{doc:e,count:0,d:Ll(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:r,meta:n}=e,s={doc:t,d:r,meta:Kc(n)},a=[$c(),Gc(),{before(e){let{doc:t,d:r}=e;r.style(t.documentElement,"overflow","hidden")}}];a.forEach(e=>{let{before:t}=e;return null==t?void 0:t(s)}),a.forEach(e=>{let{after:t}=e;return null==t?void 0:t(s)})},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function Zc(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>({containers:[]}),s=function(e){return(0,t.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}(Yc),a=r?s.get(r):void 0,i=!!a&&a.count>0;return Bl(()=>{if(r&&e)return Yc.dispatch("PUSH",r,n),()=>Yc.dispatch("POP",r,n)},[e,r]),i}function Jc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];Zc(ic(e,"scroll-lock"),t,e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],r]}})}Yc.subscribe(()=>{let e=Yc.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let e="hidden"===t.get(r.doc),n=0!==r.count;(n&&!e||!n&&e)&&Yc.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),0===r.count&&Yc.dispatch("TEARDOWN",r)}});let Qc=(0,t.createContext)(()=>{});function Xc(e){let{value:r,children:n}=e;return t.createElement(Qc.Provider,{value:r},n)}let ed=(0,t.createContext)(!1);function td(e){return t.createElement(ed.Provider,{value:e.force},e.children)}let rd=(0,t.createContext)(void 0);const nd=["id"];let sd=(0,t.createContext)(null);function ad(){let e=(0,t.useContext)(sd);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,ad),e}return e}sd.displayName="DescriptionContext";let id=go(function(e,r){let n=(0,t.useId)(),s=(0,t.useContext)(rd),{id:a="headlessui-description-".concat(n)}=e,i=Yn(e,nd),l=ad(),o=$l(r);Bl(()=>l.register(a),[a,l.register]);let c=s||!1,d=(0,t.useMemo)(()=>Oe(Oe({},l.slot),{},{disabled:c}),[l.slot,c]),u=Oe(Oe({ref:o},l.props),{},{id:a});return mo()({ourProps:u,theirProps:i,slot:d,defaultTag:"p",name:l.name||"Description"})}),ld=Object.assign(id,{});function od(e){let r=ql(e),n=(0,t.useRef)(!1);(0,t.useEffect)(()=>(n.current=!1,()=>{n.current=!0,Ol(()=>{n.current&&r()})}),[r])}var cd=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(cd||{});function dd(){let e=(0,t.useRef)(0);return Rc(!0,"keydown",t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)},!0),e}function ud(e,r){let n=(0,t.useRef)([]),s=ql(e);(0,t.useEffect)(()=>{let e=[...n.current];for(let[t,a]of r.entries())if(n.current[t]!==a){let t=s(r,e);return n.current=r,t}},[s,...r])}let md=[];!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){if(!gc(e.target)||e.target===document.body||md[0]===e.target)return;let t=e.target;t=t.closest(jc),md.unshift(null!=t?t:e.target),md=md.filter(e=>null!=e&&e.isConnected),md.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});const pd=["initialFocus","initialFocusFallback","containers","features"];function hd(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let r of e.current)xc(r.current)&&t.add(r.current);return t}var xd=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(xd||{});let fd=go(function(e,r){let n=(0,t.useRef)(null),s=$l(n,r),{initialFocus:a,initialFocusFallback:i,containers:l,features:o=15}=e,c=Yn(e,pd);Wl()||(o=0);let d=zc(n);!function(e,r){let{ownerDocument:n}=r,s=!!(8&e),a=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=(0,t.useRef)(md.slice());return ud((e,t)=>{let[n]=e,[s]=t;!0===s&&!1===n&&Ol(()=>{r.current.splice(0)}),!1===s&&!0===n&&(r.current=md.slice())},[e,md,r]),ql(()=>{var e;return null!=(e=r.current.find(e=>null!=e&&e.isConnected))?e:null})}(s);ud(()=>{s||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&Pc(a())},[s]),od(()=>{s&&Pc(a())})}(o,{ownerDocument:d});let u=bd(o,{ownerDocument:d,container:n,initialFocus:a,initialFocusFallback:i});yd(o,{ownerDocument:d,container:n,containers:l,previousActiveElement:u});let m=dd(),p=ql(e=>{if(!fc(n.current))return;let t=n.current;ao(m.current,{[cd.Forwards]:()=>{Dc(t,Nc.First,{skipElements:[e.relatedTarget,i]})},[cd.Backwards]:()=>{Dc(t,Nc.Last,{skipElements:[e.relatedTarget,i]})}})}),h=ic(!!(2&o),"focus-trap#tab-lock"),x=Rl(),f=(0,t.useRef)(!1),g={ref:s,onKeyDown(e){"Tab"==e.key&&(f.current=!0,x.requestAnimationFrame(()=>{f.current=!1}))},onBlur(e){if(!(4&o))return;let t=hd(l);fc(n.current)&&t.add(n.current);let r=e.relatedTarget;gc(r)&&"true"!==r.dataset.headlessuiFocusGuard&&(vd(t,r)||(f.current?Dc(n.current,ao(m.current,{[cd.Forwards]:()=>Nc.Next,[cd.Backwards]:()=>Nc.Previous})|Nc.WrapAround,{relativeTo:e.target}):gc(e.target)&&Pc(e.target)))}},b=mo();return t.createElement(t.Fragment,null,h&&t.createElement(Uc,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Bc.Focusable}),b({ourProps:g,theirProps:c,defaultTag:"div",name:"FocusTrap"}),h&&t.createElement(Uc,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Bc.Focusable}))}),gd=Object.assign(fd,{features:xd});function bd(e,r){let{ownerDocument:n,container:s,initialFocus:a,initialFocusFallback:i}=r,l=(0,t.useRef)(null),o=ic(!!(1&e),"focus-trap#initial-focus"),c=Hl();return ud(()=>{if(0===e)return;if(!o)return void(null!=i&&i.current&&Pc(i.current));let t=s.current;t&&Ol(()=>{if(!c.current)return;let r=null==n?void 0:n.activeElement;if(null!=a&&a.current){if((null==a?void 0:a.current)===r)return void(l.current=r)}else if(t.contains(r))return void(l.current=r);if(null!=a&&a.current)Pc(a.current);else{if(16&e){if(Dc(t,Nc.First|Nc.AutoFocus)!==kc.Error)return}else if(Dc(t,Nc.First)!==kc.Error)return;if(null!=i&&i.current&&(Pc(i.current),(null==n?void 0:n.activeElement)===i.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=null==n?void 0:n.activeElement})},[i,o,e]),l}function yd(e,t){let{ownerDocument:r,container:n,containers:s,previousActiveElement:a}=t,i=Hl(),l=!!(4&e);Ro(null==r?void 0:r.defaultView,"focus",e=>{if(!l||!i.current)return;let t=hd(s);fc(n.current)&&t.add(n.current);let r=a.current;if(!r)return;let o=e.target;fc(o)?vd(t,o)?(a.current=o,Pc(o)):(e.preventDefault(),e.stopPropagation(),Pc(r)):Pc(a.current)},!0)}function vd(e,t){for(let r of e)if(r.contains(t))return!0;return!1}const jd=["ownerDocument"],wd=["enabled","ownerDocument"],Nd=["target"];function kd(e){let r=(0,t.useContext)(ed),n=(0,t.useContext)(Ed),[s,a]=(0,t.useState)(()=>{var t;if(!r&&null!==n)return null!=(t=n.current)?t:null;if(Fl.isServer)return null;let s=null==e?void 0:e.getElementById("headlessui-portal-root");if(s)return s;if(null===e)return null;let a=e.createElement("div");return a.setAttribute("id","headlessui-portal-root"),e.body.appendChild(a)});return(0,t.useEffect)(()=>{null!==s&&(null!=e&&e.body.contains(s)||null==e||e.body.appendChild(s))},[s,e]),(0,t.useEffect)(()=>{r||null!==n&&a(n.current)},[n,a,r]),s}let Cd=t.Fragment,Sd=go(function(e,r){let{ownerDocument:n=null}=e,s=Yn(e,jd),i=(0,t.useRef)(null),l=$l(Gl(e=>{i.current=e}),r),o=zc(i),c=null!=n?n:o,d=kd(c),[u]=(0,t.useState)(()=>{var e;return Fl.isServer?null:null!=(e=null==c?void 0:c.createElement("div"))?e:null}),m=(0,t.useContext)(Id),p=Wl();Bl(()=>{!d||!u||d.contains(u)||(u.setAttribute("data-headlessui-portal",""),d.appendChild(u))},[d,u]),Bl(()=>{if(u&&m)return m.register(u)},[m,u]),od(()=>{var e;!d||!u||(hc(u)&&d.contains(u)&&d.removeChild(u),d.childNodes.length<=0&&(null==(e=d.parentElement)||e.removeChild(d)))});let h=mo();return p&&d&&u?(0,a.createPortal)(h({ourProps:{ref:l},theirProps:s,slot:{},defaultTag:Cd,name:"Portal"}),u):null});let _d=t.Fragment,Ed=(0,t.createContext)(null);let Id=(0,t.createContext)(null);function Pd(){let e=(0,t.useContext)(Id),r=(0,t.useRef)([]),n=ql(t=>(r.current.push(t),e&&e.register(t),()=>s(t))),s=ql(t=>{let n=r.current.indexOf(t);-1!==n&&r.current.splice(n,1),e&&e.unregister(t)}),a=(0,t.useMemo)(()=>({register:n,unregister:s,portals:r}),[n,s,r]);return[r,(0,t.useMemo)(()=>function(e){let{children:r}=e;return t.createElement(Id.Provider,{value:a},r)},[a])]}let Td=go(function(e,r){let n=$l(r),{enabled:s=!0,ownerDocument:a}=e,i=Yn(e,wd),l=mo();return s?t.createElement(Sd,Oe(Oe({},i),{},{ownerDocument:a,ref:n})):l({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:Cd,name:"Portal"})}),Dd=go(function(e,r){let{target:n}=e,s=Yn(e,Nd),a={ref:$l(r)},i=mo();return t.createElement(Ed.Provider,{value:n},i({ourProps:a,theirProps:s,defaultTag:_d,name:"Popover.Group"}))}),Ad=Object.assign(Td,{Group:Dd});const Od=["id","open","onClose","initialFocus","role","autoFocus","__demoMode","unmount"],Ld=["transition","open"],Rd=["id","transition"],Md=["transition"],zd=["id"];var Fd=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Fd||{}),Bd=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Bd||{});let Ud={0:(e,t)=>e.titleId===t.id?e:Oe(Oe({},e),{},{titleId:t.id})},qd=(0,t.createContext)(null);function Hd(e){let r=(0,t.useContext)(qd);if(null===r){let t=new Error("<".concat(e," /> is missing a parent <Dialog /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Hd),t}return r}function Wd(e,t){return ao(t.type,Ud,e,t)}qd.displayName="DialogContext";let Vd=go(function(e,r){let n=(0,t.useId)(),{id:s="headlessui-dialog-".concat(n),open:a,onClose:i,initialFocus:l,role:o="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1}=e,m=Yn(e,Od),p=(0,t.useRef)(!1);o="dialog"===o||"alertdialog"===o?o:(p.current||(p.current=!0,console.warn("Invalid role [".concat(o,"] passed to <Dialog />. Only `dialog` and and `alertdialog` are supported. Using `dialog` instead."))),"dialog");let h=to();void 0===a&&null!==h&&(a=(h&eo.Open)===eo.Open);let x=(0,t.useRef)(null),f=$l(x,r),g=zc(x),b=a?0:1,[y,v]=(0,t.useReducer)(Wd,{titleId:null,descriptionId:null,panelRef:(0,t.createRef)()}),j=ql(()=>i(!1)),w=ql(e=>v({type:0,id:e})),N=!!Wl()&&0===b,[k,C]=Pd(),S={get current(){var e;return null!=(e=y.panelRef.current)?e:x.current}},_=Vc(),{resolveContainers:E}=qc({mainTreeNode:_,portals:k,defaultContainers:[S]}),I=null!==h&&(h&eo.Closing)===eo.Closing;pc(!d&&!I&&N,{allowed:ql(()=>{var e,t;return[null!=(t=null==(e=x.current)?void 0:e.closest("[data-headlessui-portal]"))?t:null]}),disallowed:ql(()=>{var e;return[null!=(e=null==_?void 0:_.closest("body > *:not(#headlessui-portal-root)"))?e:null]})});let P=rc.get(null);Bl(()=>{if(N)return P.actions.push(s),()=>P.actions.pop(s)},[P,s,N]);let T=sc(P,(0,t.useCallback)(e=>P.selectors.isTop(e,s),[P,s]));Mc(T,E,e=>{e.preventDefault(),j()}),lc(T,null==g?void 0:g.defaultView,e=>{e.preventDefault(),e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur(),j()}),Jc(!d&&!I&&N,g,E),vc(N,x,j);let[D,A]=function(){let[e,r]=(0,t.useState)([]);return[e.length>0?e.join(" "):void 0,(0,t.useMemo)(()=>function(e){let n=ql(e=>(r(t=>[...t,e]),()=>r(t=>{let r=t.slice(),n=r.indexOf(e);return-1!==n&&r.splice(n,1),r}))),s=(0,t.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value}),[n,e.slot,e.name,e.props,e.value]);return t.createElement(sd.Provider,{value:s},e.children)},[r])]}(),O=(0,t.useMemo)(()=>[{dialogState:b,close:j,setTitleId:w,unmount:u},y],[b,y,j,w,u]),L=(0,t.useMemo)(()=>({open:0===b}),[b]),R={ref:f,id:s,role:o,tabIndex:-1,"aria-modal":d?void 0:0===b||void 0,"aria-labelledby":y.titleId,"aria-describedby":D,unmount:u},M=!function(){var e;let[r]=(0,t.useState)(()=>"undefined"!=typeof window&&"function"==typeof window.matchMedia?window.matchMedia("(pointer: coarse)"):null),[n,s]=(0,t.useState)(null!=(e=null==r?void 0:r.matches)&&e);return Bl(()=>{if(r)return r.addEventListener("change",e),()=>r.removeEventListener("change",e);function e(e){s(e.matches)}},[r]),n}(),z=xd.None;N&&!d&&(z|=xd.RestoreFocus,z|=xd.TabLock,c&&(z|=xd.AutoFocus),M&&(z|=xd.InitialFocus));let F=mo();return t.createElement(no,null,t.createElement(td,{force:!0},t.createElement(Ad,null,t.createElement(qd.Provider,{value:O},t.createElement(Dd,{target:x},t.createElement(td,{force:!1},t.createElement(A,{slot:L},t.createElement(C,null,t.createElement(gd,{initialFocus:l,initialFocusFallback:x,containers:E,features:z},t.createElement(Xc,{value:j},F({ourProps:R,theirProps:m,slot:L,defaultTag:Gd,features:$d,visible:0===b,name:"Dialog"})))))))))))}),Gd="div",$d=co.RenderStrategy|co.Static;let Kd=go(function(e,r){let{transition:n=!1,open:s}=e,a=Yn(e,Ld),i=to(),l=e.hasOwnProperty("open")||null!==i,o=e.hasOwnProperty("onClose");if(!l&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&"boolean"!=typeof e.open)throw new Error("You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: ".concat(e.open));if("function"!=typeof e.onClose)throw new Error("You provided an `onClose` prop to the `Dialog`, but the value is not a function. Received: ".concat(e.onClose));return void 0===s&&!n||a.static?t.createElement(Wc,null,t.createElement(Vd,Oe({ref:r,open:s},a))):t.createElement(Wc,null,t.createElement(Oo,{show:s,transition:n,unmount:a.unmount},t.createElement(Vd,Oe({ref:r},a))))}),Yd=go(function(e,r){let n=(0,t.useId)(),{id:s="headlessui-dialog-panel-".concat(n),transition:a=!1}=e,i=Yn(e,Rd),[{dialogState:l,unmount:o},c]=Hd("Dialog.Panel"),d=$l(r,c.panelRef),u=(0,t.useMemo)(()=>({open:0===l}),[l]),m=ql(e=>{e.stopPropagation()}),p={ref:d,id:s,onClick:m},h=a?Ao:t.Fragment,x=a?{unmount:o}:{},f=mo();return t.createElement(h,Oe({},x),f({ourProps:p,theirProps:i,slot:u,defaultTag:"div",name:"Dialog.Panel"}))}),Zd=(go(function(e,r){let{transition:n=!1}=e,s=Yn(e,Md),[{dialogState:a,unmount:i}]=Hd("Dialog.Backdrop"),l=(0,t.useMemo)(()=>({open:0===a}),[a]),o={ref:r,"aria-hidden":!0},c=n?Ao:t.Fragment,d=n?{unmount:i}:{},u=mo();return t.createElement(c,Oe({},d),u({ourProps:o,theirProps:s,slot:l,defaultTag:"div",name:"Dialog.Backdrop"}))}),go(function(e,r){let n=(0,t.useId)(),{id:s="headlessui-dialog-title-".concat(n)}=e,a=Yn(e,zd),[{dialogState:i,setTitleId:l}]=Hd("Dialog.Title"),o=$l(r);(0,t.useEffect)(()=>(l(s),()=>l(null)),[s,l]);let c=(0,t.useMemo)(()=>({open:0===i}),[i]),d={ref:o,id:s};return mo()({ourProps:d,theirProps:a,slot:c,defaultTag:"h2",name:"Dialog.Title"})})),Jd=Object.assign(Kd,{Panel:Yd,Title:Zd,Description:ld});function Qd(e){let{isOpen:r,onClose:n,children:s}=e;return(0,Cn.jsx)(Oo.Root,{show:r,as:t.Fragment,children:(0,Cn.jsxs)(Jd,{as:"div",className:"relative z-10",onClose:n,children:[(0,Cn.jsx)(Oo.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,Cn.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,Cn.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,Cn.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,Cn.jsx)(Oo.Child,{as:t.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,Cn.jsxs)(Jd.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[(0,Cn.jsx)("div",{className:"absolute top-0 right-0 hidden pt-4 pr-4 sm:block",children:(0,Cn.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:n,children:[(0,Cn.jsx)("span",{className:"sr-only",children:"Close"}),(0,Cn.jsx)(Xa,{className:"h-6 w-6","aria-hidden":"true"})]})}),s]})})})})]})})}const Xd=e=>"\xa3".concat((e/1e6).toFixed(2),"M"),eu=e=>new Intl.NumberFormat("en-GB").format(e),tu=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,why:!1,best:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Round History Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Round Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),i.intro?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Round history tracks all your funding rounds, including pre-money valuations, investments, and participant details. This helps you understand your company's funding journey and ownership evolution."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),i.why?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Track your company's funding progression and valuation growth"}),(0,Cn.jsx)("li",{children:"Understand ownership dilution across funding rounds"}),(0,Cn.jsx)("li",{children:"Maintain accurate records for investor relations"}),(0,Cn.jsx)("li",{children:"Essential for exit planning and due diligence"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),i.best?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Record rounds immediately after closing"}),(0,Cn.jsx)("li",{children:"Include all participants and their investment amounts"}),(0,Cn.jsx)("li",{children:"Document pre-money valuations accurately"}),(0,Cn.jsx)("li",{children:"Track option pool changes for each round"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Add New Rounds"}),c.quick?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Click "Add New Round" to record a funding round. Enter the round name, date, pre-money valuation, and add all participants with their investment amounts and shares issued.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Round Details"}),c.tips?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Expand each round to see detailed participant information, including investment amounts, shares issued, and post-money valuations. This helps you track ownership changes and dilution."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Managing Rounds"}),c.faq?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"You can edit or delete rounds if needed. Be careful with deletions as they will also remove associated transactions. Always verify round details before saving."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your round history assistant. I can help you understand funding rounds, calculate valuations, and answer questions about managing your funding history."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I calculate post-money valuation?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Post-money valuation = Pre-money valuation + Total investment in the round. This represents your company's value after the funding round closes."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about funding rounds...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},ru=e=>{let{onAddRound:r}=e;const{rounds:n,shareholders:s,shareClasses:a,transactions:i,deleteRound:l,deleteTransaction:o,addRound:c,addShareClass:d,addShareholder:u,loading:m,error:p}=dl(),[h,x]=(0,t.useState)(new Set),[f,g]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[v,j]=(0,t.useState)(!1),[w,N]=(0,t.useState)(!1),[k,C]=(0,t.useState)({name:"",date:(new Date).toISOString().split("T")[0],pre_money_valuation:0,share_class_id:"",option_pool_shares:0}),[S,_]=(0,t.useState)([]),[E,I]=(0,t.useState)({shareholder_id:"",investment_amount:0,shares_issued:0,preference_multiplier:1}),P=()=>{E.shareholder_id&&E.shares_issued>0&&(_([...S,Oe(Oe({},E),{},{id:Date.now()})]),I({shareholder_id:"",investment_amount:0,shares_issued:0,preference_multiplier:1}))},T=async e=>{e.preventDefault();try{const e=S.filter(e=>e.shareholder_id&&e.investment_amount>0);if(0===e.length)return void alert("Please add at least one participant with an investment amount.");const t=await c(k,e);g(!1),C({name:"",date:(new Date).toISOString().split("T")[0],pre_money_valuation:0,share_class_id:"",option_pool_shares:0}),_([]),t&&x(new Set([t]))}catch(t){console.error("Error adding round:",t),alert("Error adding round: ".concat(t.message))}},D=e=>i.filter(t=>t.round_id===e),A=e=>e.reduce((e,t)=>e+(t.investment_amount||0),0),O=e=>{const t=D(e.id),r=A(t);return e.pre_money_valuation+r},L=e=>{const t=D(e);return A(t)},R=()=>(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border p-6 my-6",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Round"}),(0,Cn.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Round Name"}),(0,Cn.jsx)("input",{type:"text",value:k.name,onChange:e=>C(Oe(Oe({},k),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,Cn.jsx)("input",{type:"date",value:k.date,onChange:e=>C(Oe(Oe({},k),{},{date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pre-money Valuation (\xa3)"}),(0,Cn.jsx)("input",{type:"number",value:k.pre_money_valuation,onChange:e=>C(Oe(Oe({},k),{},{pre_money_valuation:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Option Pool Shares"}),(0,Cn.jsx)("input",{type:"number",min:"0",step:"1",value:k.option_pool_shares,onChange:e=>C(Oe(Oe({},k),{},{option_pool_shares:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Share Class"}),(0,Cn.jsxs)("select",{value:k.share_class_id,onChange:e=>{"new"===e.target.value?y(!0):C(Oe(Oe({},k),{},{share_class_id:e.target.value}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[(0,Cn.jsx)("option",{value:"",children:"Select Share Class"}),a.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id)),(0,Cn.jsx)("option",{value:"new",className:"font-semibold text-purple-600 bg-purple-50",children:"+ Add New Share Class"})]})]}),(0,Cn.jsxs)("div",{className:"border-t pt-6",children:[(0,Cn.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Round Participants"}),(0,Cn.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shareholder"}),(0,Cn.jsxs)("select",{value:E.shareholder_id,onChange:e=>{"new"===e.target.value?j(!0):I(Oe(Oe({},E),{},{shareholder_id:e.target.value}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,Cn.jsx)("option",{value:"",children:"Select Shareholder"}),s.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id)),(0,Cn.jsx)("option",{value:"new",className:"font-semibold text-purple-600 bg-purple-50",children:"+ Add New Shareholder"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Investment (\xa3)"}),(0,Cn.jsx)("input",{type:"number",value:E.investment_amount,onChange:e=>I(Oe(Oe({},E),{},{investment_amount:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shares"}),(0,Cn.jsx)("input",{type:"number",value:E.shares_issued,onChange:e=>I(Oe(Oe({},E),{},{shares_issued:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preference Multiplier"}),(0,Cn.jsx)("input",{type:"number",step:"0.1",min:"0",value:E.preference_multiplier,onChange:e=>I(Oe(Oe({},E),{},{preference_multiplier:parseFloat(e.target.value)||1})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,Cn.jsx)("div",{className:"flex items-end",children:(0,Cn.jsx)("button",{type:"button",onClick:P,className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Add Participant"})})]})}),S.length>0&&(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shareholder"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Investment"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Shares"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Action"})]})}),(0,Cn.jsx)("tbody",{className:"divide-y divide-gray-200",children:S.map(e=>{const t=s.find(t=>t.id===e.shareholder_id);return(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{className:"px-4 py-3",children:(null===t||void 0===t?void 0:t.name)||"..."}),(0,Cn.jsx)("td",{className:"px-4 py-3",children:Xd(e.investment_amount)}),(0,Cn.jsx)("td",{className:"px-4 py-3",children:eu(e.shares_issued)}),(0,Cn.jsx)("td",{className:"px-4 py-3",children:(0,Cn.jsx)("button",{onClick:()=>{return t=e.id,void _(S.filter(e=>e.id!==t));var t},className:"text-red-500",children:(0,Cn.jsx)(Nl,{className:"h-4 w-4"})})})]},e.id)})})]})})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:0===S.length,className:"px-4 py-2 bg-purple-600 text-white rounded-md disabled:bg-gray-300",children:"Add Round"})]})]})]});if(m)return(0,Cn.jsx)("div",{children:"Loading..."});if(p)return(0,Cn.jsxs)("div",{children:["Error: ",p]});const M=!n||0===n.length;return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Round History"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Track and manage your company's funding rounds and investment history"})]}),(0,Cn.jsxs)("button",{onClick:()=>N(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]})}),(0,Cn.jsx)(Qd,{isOpen:b,onClose:()=>y(!1),children:(0,Cn.jsx)(Al,{onAdd:async e=>{try{const t=await d(e);C(e=>Oe(Oe({},e),{},{share_class_id:t.id})),y(!1)}catch(t){console.error("Error adding new share class:",t),alert("Failed to add share class: ".concat(t.message))}},onCancel:()=>y(!1)})}),(0,Cn.jsx)(Qd,{isOpen:v,onClose:()=>j(!1),children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 max-w-md",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Shareholder"}),(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target);(async e=>{try{await u(e),j(!1)}catch(t){console.error("Error adding new shareholder:",t),alert("Failed to add shareholder: ".concat(t.message))}})({name:t.get("name"),role:t.get("role"),email:t.get("email")})},className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Cn.jsx)("input",{type:"text",name:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter shareholder name"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,Cn.jsxs)("select",{name:"role",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,Cn.jsx)("option",{value:"",children:"Select Role"}),(0,Cn.jsx)("option",{value:"Founder",children:"Founder"}),(0,Cn.jsx)("option",{value:"Investor",children:"Investor"}),(0,Cn.jsx)("option",{value:"Employee",children:"Employee"}),(0,Cn.jsx)("option",{value:"Advisor",children:"Advisor"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Cn.jsx)("input",{type:"email",name:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Enter email address"})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Add Shareholder"})]})]})]})}),M?f?R():(0,Cn.jsxs)("div",{className:"text-center bg-white p-12 rounded-lg border-2 border-dashed border-gray-300",children:[(0,Cn.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2-2H4a2 2 0 01-2-2z"})}),(0,Cn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No financing rounds"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your company's first financing round."}),(0,Cn.jsx)("div",{className:"mt-6",children:(0,Cn.jsxs)("button",{type:"button",onClick:()=>g(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,Cn.jsx)(Sl,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"New Round"]})})]}):(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Round History"}),(0,Cn.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:[(0,Cn.jsx)(Sl,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Add Round"})]})]}),f&&R(),(0,Cn.jsx)("div",{className:"space-y-4",children:n.map(e=>{var t,r;return(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,Cn.jsx)("div",{className:"p-6 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>(e=>{const t=new Set(h);t.has(e)?t.delete(e):t.add(e),x(t)})(e.id),children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsxs)("div",{className:"w-48",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:(r=e.date,new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}))})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:"Pre-money"}),(0,Cn.jsx)("p",{className:"font-semibold text-gray-900",children:Xd(e.pre_money_valuation)})]}),(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:"Investment"}),(0,Cn.jsx)("p",{className:"font-semibold text-purple-600",children:Xd(L(e.id))})]}),(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:"Post-money"}),(0,Cn.jsx)("p",{className:"font-semibold text-gray-900",children:Xd(O(e))})]}),(0,Cn.jsxs)("div",{className:"text-left",children:[(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:"Share Class"}),(0,Cn.jsx)("p",{className:"font-semibold text-gray-900",children:(null===(t=a.find(t=>t.id===e.share_class_id))||void 0===t?void 0:t.name)||"Unknown"})]})]})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsxs)("span",{className:"text-sm text-gray-500",children:[D(e.id).length," participants"]}),(0,Cn.jsxs)("div",{className:"flex space-x-1",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),x(new Set([e.id]))},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)(Ls,{className:"h-4 w-4"})}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this round? This will also delete all associated transactions."))try{const t=i.filter(t=>t.round_id===e);for(const e of t)await o(e.id);await l(e)}catch(t){console.error("Error deleting round:",t)}})(e.id)},className:"p-1 text-gray-400 hover:text-red-600",children:(0,Cn.jsx)(Il,{className:"h-4 w-4"})})]}),h.has(e.id)?(0,Cn.jsx)(Dl,{className:"h-5 w-5 text-gray-400"}):(0,Cn.jsx)(vl,{className:"h-5 w-5 text-gray-400"})]})]})}),h.has(e.id)&&(0,Cn.jsx)("div",{className:"border-t border-gray-200 bg-gray-50",children:(0,Cn.jsxs)("div",{className:"p-6",children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Round Participants"}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-white",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participant"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Investment"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D(e.id).map(e=>{const t=s.find(t=>t.id===e.shareholder_id);return(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(null===t||void 0===t?void 0:t.name)||"N/A"}),(0,Cn.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===t||void 0===t?void 0:t.role)||"N/A"}),(0,Cn.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:Xd(e.investment_amount)}),(0,Cn.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:eu(e.shares_issued)})]},e.id)})})]})})]})})]},e.id)})})]}),(0,Cn.jsx)(tu,{isOpen:w,onClose:()=>N(!1)})]})},nu=e=>"\xa3".concat((e/1e6).toFixed(2),"M"),su=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,why:!1,best:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Exit Scenarios Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Exit Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),i.intro?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Exit scenarios help you model different acquisition or IPO outcomes and understand how the proceeds would be distributed among shareholders based on their share classes and preference terms."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),i.why?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Plan for different exit valuations and scenarios"}),(0,Cn.jsx)("li",{children:"Understand the impact of preference terms on returns"}),(0,Cn.jsx)("li",{children:"Help with investor negotiations and term sheet discussions"}),(0,Cn.jsx)("li",{children:"Prepare for due diligence and exit planning"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),i.best?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Model multiple exit scenarios (low, medium, high valuations)"}),(0,Cn.jsx)("li",{children:"Consider both partial and full acquisitions"}),(0,Cn.jsx)("li",{children:"Understand the difference between participating and non-participating preferences"}),(0,Cn.jsx)("li",{children:"Factor in option pool and employee equity considerations"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Set Exit Parameters"}),c.quick?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Enter the acquisition amount, percentage being acquired, and preference type. The system will automatically calculate how proceeds would be distributed among shareholders."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Understanding Results"}),c.tips?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The exit distribution table shows each shareholder's preference amount, conversion value, and final exit value. This helps you understand who gets paid first and how much each party receives."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Preference Types"}),c.faq?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Non-participating preferences: Investors take their preference OR convert to common shares. Participating preferences: Investors take their preference AND convert to common shares for additional proceeds."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your exit scenario assistant. I can help you understand preference terms, calculate exit distributions, and answer questions about modeling different exit outcomes."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What's the difference between participating and non-participating preferences?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Non-participating: Investors choose between their preference OR conversion to common. Participating: Investors get their preference AND conversion to common for additional proceeds."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about exit scenarios...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},au=()=>{const{capTable:e,preferenceTerms:r,loading:n,error:s,calculateExitScenario:a,organizationId:i}=dl(),[l,o]=(0,t.useState)({acquisitionAmount:5e7,acquisitionPercentage:100,preferenceType:"non-participating"}),[c,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{(async()=>{if(i&&e&&e.capTable&&r)try{const e=await a(l.acquisitionAmount,l.acquisitionPercentage,l.preferenceType);d(e)}catch(t){console.error("Error calculating exit scenario:",t),d(null)}})()},[l,e,r,a,i]),n?(0,Cn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"Loading Exit Scenarios..."})]})}):s?(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsxs)("div",{className:"ml-3",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),(0,Cn.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,Cn.jsx)("p",{children:s})})]})})}):(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Exit Scenarios"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Model different exit scenarios and their impact on shareholder returns"})]}),(0,Cn.jsxs)("button",{onClick:()=>m(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]})}),(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Exit Parameters"}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Acquisition Amount (\xa3)"}),(0,Cn.jsx)("input",{type:"number",value:l.acquisitionAmount,onChange:e=>o(t=>Oe(Oe({},t),{},{acquisitionAmount:parseFloat(e.target.value)||0})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"50000000"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:nu(l.acquisitionAmount)})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"% Being Acquired"}),(0,Cn.jsx)("input",{type:"number",value:l.acquisitionPercentage,onChange:e=>o(t=>Oe(Oe({},t),{},{acquisitionPercentage:parseFloat(e.target.value)||0})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"100",min:"0",max:"100"}),(0,Cn.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[l.acquisitionPercentage,"% of company"]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preference Type"}),(0,Cn.jsxs)("div",{className:"bg-purple-100 p-0.5 rounded-lg flex text-xs w-64",children:[(0,Cn.jsx)("button",{onClick:()=>o(e=>Oe(Oe({},e),{},{preferenceType:"non-participating"})),className:"px-2 py-1 rounded-md flex-1 text-purple-700 ".concat("non-participating"===l.preferenceType?"bg-white shadow-sm":""),children:"Non-Participating"}),(0,Cn.jsx)("button",{onClick:()=>o(e=>Oe(Oe({},e),{},{preferenceType:"participating"})),className:"px-2 py-1 rounded-md flex-1 text-purple-700 ".concat("participating"===l.preferenceType?"bg-white shadow-sm":""),children:"Participating"})]}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"non-participating"===l.preferenceType?"Take preference OR conversion":"Take preference + conversion"})]})]}),(0,Cn.jsxs)("div",{className:"mt-6 bg-purple-50 p-4 rounded-lg",children:[(0,Cn.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Total Exit Value"}),(0,Cn.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:nu(l.acquisitionAmount*l.acquisitionPercentage/100)})]})]}),c&&(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,Cn.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Cn.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Exit Distribution"})}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shareholder"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Share Class"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ownership %"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"Preference Multiplier"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-yellow-50",children:"Preference Amount"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-orange-50",children:"Conversion Value"}),(0,Cn.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-green-50",children:"Final Exit Value"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.exitCalculations.map((e,t)=>{return(0,Cn.jsxs)("tr",{children:[(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.role})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.shareClass}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:(r=e.ownership,"".concat(r.toFixed(2),"%"))}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-blue-50",children:e.shareClass.includes("Preferred")?"".concat(e.multiplier,"x"):"-"}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-yellow-50",children:e.preferenceAmount>0?nu(e.preferenceAmount):"-"}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-orange-50",children:nu(e.conversionValue)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-700 bg-green-50 font-bold",children:nu(e.finalValue)})]},t);var r})}),(0,Cn.jsx)("tfoot",{className:"bg-gray-100",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{colSpan:"6",className:"px-6 py-3 text-right text-sm font-bold text-gray-700",children:"Total Payout"}),(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-green-800 bg-green-100",children:nu(c.totalExitValue)})]})})]})})]}),(0,Cn.jsx)(su,{isOpen:u,onClose:()=>m(!1)})]})},iu=e=>new Intl.NumberFormat("en-GB").format(e),lu=e=>"".concat(e.toFixed(2),"%"),ou=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,why:!1,best:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Investment Planning Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Investment Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),i.intro?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Investment planning helps you model future funding rounds and understand the impact on ownership, dilution, and share prices. This tool calculates how much equity you'll need to give up for a specific investment amount or percentage."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),i.why?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Plan fundraising strategy and understand dilution impact"}),(0,Cn.jsx)("li",{children:"Negotiate better terms with investors"}),(0,Cn.jsx)("li",{children:"Set realistic valuation expectations"}),(0,Cn.jsx)("li",{children:"Prepare for investor discussions and due diligence"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),i.best?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),i.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Model multiple scenarios with different valuations"}),(0,Cn.jsx)("li",{children:"Consider both amount-based and percentage-based calculations"}),(0,Cn.jsx)("li",{children:"Factor in option pool and employee equity"}),(0,Cn.jsx)("li",{children:"Plan for multiple funding rounds ahead"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Use the Calculator"}),c.quick?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Choose whether to calculate by investment amount or equity percentage. Enter your target post-money valuation and the calculator will show you the new shares needed, share price, and ownership impact."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Understanding Results"}),c.tips?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The cap table impact shows how each shareholder's ownership will change after the round. Pay attention to dilution percentages - this shows how much each party's ownership will decrease."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Valuation Tips"}),c.faq?(0,Cn.jsx)(gl,{className:"w-5 h-5"}):(0,Cn.jsx)(vl,{className:"w-5 h-5"})]}),c.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Post-money valuation = Pre-money valuation + Investment amount. Set realistic valuations based on your company's stage, market, and comparable companies. Higher valuations mean less dilution for existing shareholders."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your investment planning assistant. I can help you understand dilution, calculate share prices, and answer questions about funding round planning."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I calculate dilution?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Dilution = (Current ownership - New ownership) / Current ownership \xd7 100%. When new shares are issued, existing shareholders' percentage ownership decreases proportionally."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about investment planning...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},cu=()=>{const{capTable:e}=dl(),[r,n]=(0,t.useState)({type:"amount",value:25e5,postMoneyValuation:15e6}),[s,a]=(0,t.useState)(!1),i=(0,t.useMemo)(()=>e&&e.capTable?{shareholders:e.capTable,totalShares:e.totalShares}:{shareholders:[],totalShares:0},[e]),l=(0,t.useMemo)(()=>{const{type:e,value:t,postMoneyValuation:n}=r;let s,a,l;const o=i.totalShares;if(0===o||0===n)return{newShares:0,investmentAmount:0,ownershipPercentage:0,totalSharesAfterRound:0,sharePrice:0,preMoneyValuation:0};"amount"===e?(a=t,l=a/n*100,s=l/100*o/(1-l/100)):(l=t,a=l/100*n,s=l/100*o/(1-l/100));const c=o+s,d=s>0?a/s:0;return{newShares:Math.round(s),investmentAmount:a,ownershipPercentage:l,totalSharesAfterRound:c,sharePrice:d,preMoneyValuation:n-a}},[r,i]),o=(0,t.useMemo)(()=>i.shareholders?i.shareholders.map(e=>{const t=e.shares/l.totalSharesAfterRound*100,r=e.ownership-t;return Oe(Oe({},e),{},{newOwnership:t,dilution:r})}):[],[l,i]);return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Investment Planning"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Plan and model future funding rounds and investment scenarios"})]}),(0,Cn.jsxs)("button",{onClick:()=>a(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]})}),(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Investment Calculator"}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calculate by:"}),(0,Cn.jsxs)("div",{className:"bg-purple-100 p-0.5 rounded-lg flex text-xs w-36",children:[(0,Cn.jsx)("button",{onClick:()=>n(e=>Oe(Oe({},e),{},{type:"amount"})),className:"px-2 py-1 rounded-md flex-1 text-purple-700 ".concat("amount"===r.type?"bg-white shadow-sm":""),children:"Amount"}),(0,Cn.jsx)("button",{onClick:()=>n(e=>Oe(Oe({},e),{},{type:"percentage"})),className:"px-2 py-1 rounded-md flex-1 text-purple-700 ".concat("percentage"===r.type?"bg-white shadow-sm":""),children:"Percentage"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"amount"===r.type?"Amount to Raise (\xa3)":"Equity to Give Away (%)"}),(0,Cn.jsx)("input",{type:"number",value:r.value,onChange:e=>n(t=>Oe(Oe({},t),{},{value:parseFloat(e.target.value)||0})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"amount"===r.type?"2500000":"16.67"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Post-money Valuation (\xa3)"}),(0,Cn.jsx)("input",{type:"number",value:r.postMoneyValuation,onChange:e=>n(t=>Oe(Oe({},t),{},{postMoneyValuation:parseFloat(e.target.value)||0})),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"15000000"})]})]}),(0,Cn.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Cn.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Cn.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"New Shares Needed"}),(0,Cn.jsx)("p",{className:"text-xl font-bold text-purple-900",children:iu(l.newShares)})]}),(0,Cn.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Cn.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"Investment Amount"}),(0,Cn.jsx)("p",{className:"text-xl font-bold text-blue-900",children:(c=l.investmentAmount,"\xa3".concat((c/1e6).toFixed(2),"M"))})]}),(0,Cn.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Cn.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"Equity Given Away"}),(0,Cn.jsx)("p",{className:"text-xl font-bold text-green-900",children:lu(l.ownershipPercentage)})]}),(0,Cn.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg",children:[(0,Cn.jsx)("p",{className:"text-sm text-orange-600 font-medium",children:"Share Price"}),(0,Cn.jsxs)("p",{className:"text-xl font-bold text-orange-900",children:["\xa3",l.sharePrice.toFixed(4)]})]})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[(0,Cn.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Cn.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Cap Table Impact"})}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shareholder"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Shares"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Ownership"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"New Shares"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-blue-50",children:"Post-Round Ownership"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider bg-red-50",children:"Dilution"})]})}),(0,Cn.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[o.map((e,t)=>(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("div",{className:"font-medium text-gray-900",children:e.name})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Founder"===e.role?"bg-green-100 text-green-800":"Investor"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.role})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:iu(e.shares)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:lu(e.ownership)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-blue-50",children:iu(e.shares)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-blue-50",children:lu(e.newOwnership)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 bg-red-50 font-medium",children:lu(e.dilution)})]},t)),(0,Cn.jsxs)("tr",{className:"bg-green-50",children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("div",{className:"font-medium text-gray-900",children:"New Investor"})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Investor"})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:"-"}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:"-"}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-blue-50",children:iu(l.newShares)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-blue-50",children:lu(l.ownershipPercentage)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 bg-red-50",children:"-"})]})]}),(0,Cn.jsx)("tfoot",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-700",children:"Totals"}),(0,Cn.jsx)("td",{className:"px-6 py-3"}),(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-700",children:iu(i.totalShares)}),(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-700",children:"100.00%"}),(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-700 bg-blue-50",children:iu(l.totalSharesAfterRound)}),(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-700 bg-blue-50",children:"100.00%"}),(0,Cn.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-700 bg-red-50",children:"-"})]})})]})})]}),(0,Cn.jsx)(ou,{isOpen:s,onClose:()=>a(!1)})]});var c},du=e=>{let{activeSubTab:r,onSubTabChange:n}=e;const{addShareClass:s,loading:a,error:i}=dl(),[l,o]=(0,t.useState)(!1);if(a)return(0,Cn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"Loading data..."})]})});if(i)return(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsxs)("div",{className:"ml-3",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading data"}),(0,Cn.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,Cn.jsx)("p",{children:i})})]})})});return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(()=>{switch(r){case"overview":default:return(0,Cn.jsx)(hl,{});case"rounds":return(0,Cn.jsx)(ru,{});case"shareholders":return(0,Cn.jsx)("div",{className:"space-y-6",children:(0,Cn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Shareholders"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Manage Share Classes"})]})});case"exits":return(0,Cn.jsx)(au,{});case"investment":return(0,Cn.jsx)(cu,{})}})(),(0,Cn.jsx)(Qd,{isOpen:l,onClose:()=>o(!1),children:(0,Cn.jsx)(Al,{onAdd:async e=>{await s(e),o(!1)},onCancel:()=>o(!1)})})]})};var uu=r(446),mu=r.n(uu);const pu=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];const hu=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,why:!1,best:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Events Calendar Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The Events Calendar helps you plan, track, and manage all your marketing activities in one place, including blog posts, campaigns, and launches."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),i.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Centralizes all marketing events for better visibility"}),(0,Cn.jsx)("li",{children:"Helps avoid scheduling conflicts"}),(0,Cn.jsx)("li",{children:"Improves team collaboration and planning"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),i.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Keep the calendar updated after every event"}),(0,Cn.jsx)("li",{children:"Use filters and search to quickly find activities"}),(0,Cn.jsx)("li",{children:"Review upcoming events weekly with your team"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Quick Start"}),c.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Switch between List and Calendar views. Add new events with the "Add" button. Use search and filters to find specific activities.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Tips"}),c.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Color-code event types for clarity. Use the search bar to quickly locate events. Export the calendar for team sharing."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"FAQ"}),c.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("p",{children:["Q: Can I sync with Google Calendar? ",(0,Cn.jsx)("br",{}),"A: Not yet, but it's on the roadmap."]})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your marketing events assistant. I can help you plan, schedule, and optimize your marketing calendar."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I avoid overlapping campaigns?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Use the calendar view to spot overlaps and coordinate with your team before scheduling new events."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about marketing events...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},xu=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)("list"),[s,a]=(0,t.useState)(!1),[i,l]=(0,t.useState)(""),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[m,p]=(0,t.useState)(!0),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)({title:"",event_type:"blog",event_date:"",description:""}),[b,y]=(0,t.useState)(!1),v=[{value:"blog",label:"Blog Post",color:"bg-blue-100 text-blue-800"},{value:"press_release",label:"Press Release",color:"bg-green-100 text-green-800"},{value:"ad_campaign",label:"Ad Campaign",color:"bg-purple-100 text-purple-800"},{value:"newsletter",label:"Newsletter",color:"bg-orange-100 text-orange-800"}],j={draft:"bg-gray-100 text-gray-800",scheduled:"bg-yellow-100 text-yellow-800",published:"bg-green-100 text-green-800"},w=[{value:"meeting",label:"Meeting"},{value:"launch",label:"Launch"},{value:"campaign",label:"Campaign"},{value:"blog",label:"Blog"},{value:"other",label:"Other"}],N=mu()(),[k,C]=(0,t.useState)(N.month()),[S,_]=(0,t.useState)(N.year()),E=mu()("".concat(S,"-").concat(k+1,"-01")),I=function(e,t){const r=mu()("".concat(e,"-").concat(t+1,"-01")),n=r.startOf("week"),s=r.endOf("month").endOf("week"),a=[];let i=n;for(;i.isBefore(s)||i.isSame(s,"day");)a.push(i),i=i.add(1,"day");return a}(S,k),P=d.filter(e=>e.title.toLowerCase().includes(i.toLowerCase())),T=d.filter(e=>{const t=0===o.length||o.includes(e.event_type),r=!i||e.title.toLowerCase().includes(i.toLowerCase())||e.description&&e.description.toLowerCase().includes(i.toLowerCase());return t&&r}).reduce((e,t)=>{const r=mu()(t.event_date).format("YYYY-MM-DD");return e[r]||(e[r]=[]),e[r].push(t),e},{});(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.organization_id&&D()},[e]);const D=async()=>{try{p(!0);const t=await(async e=>{try{const{data:t,error:r}=await kn.from("marketing_events").select("*").eq("organization_id",e).order("event_date",{ascending:!0});if(r)throw r;return t||[]}catch(t){throw console.error("Error fetching marketing events:",t),t}})(e.organization_id);u(t)}catch(t){console.error("Error loading activities:",t)}finally{p(!1)}},A=async()=>{if(f.title&&f.event_date)try{x(!0),await(async(e,t)=>{try{var r;const{data:n,error:s}=await kn.from("marketing_events").insert([Oe(Oe({},e),{},{organization_id:t,created_by:null===(r=(await kn.auth.getUser()).data.user)||void 0===r?void 0:r.id})]).select().single();if(s)throw s;return n}catch(n){throw console.error("Error creating marketing event:",n),n}})(f,e.organization_id),a(!1),g({title:"",event_type:"blog",event_date:"",description:""}),await D()}catch(t){console.error("Error adding activity:",t),alert("Failed to add activity. Please try again.")}finally{x(!1)}},O=async e=>{if(window.confirm("Are you sure you want to delete this activity?"))try{await(async e=>{try{const{error:t}=await kn.from("marketing_events").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting marketing event:",t),t}})(e),await D()}catch(t){console.error("Error deleting activity:",t),alert("Failed to delete activity. Please try again.")}};return(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Events Calendar"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Plan and manage your marketing activities including blog posts, press releases, ad campaigns, and newsletters."})]}),(0,Cn.jsxs)("button",{onClick:()=>y(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Cn.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[(0,Cn.jsxs)("button",{onClick:()=>n("list"),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("list"===r?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"List View"]}),(0,Cn.jsxs)("button",{onClick:()=>n("calendar"),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("calendar"===r?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Calendar View"]})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsxs)("div",{className:"relative w-64",children:[(0,Cn.jsx)("svg",{className:"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search activities...",value:i,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Cn.jsxs)("button",{onClick:()=>a(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700",children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Activity"]})]})]}),"list"===r?(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md overflow-hidden",children:m?(0,Cn.jsxs)("div",{className:"text-center py-10",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,Cn.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading activities..."})]}):(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===P.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:5,className:"py-16",children:(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No marketing activities yet."})]})})}):P.map(e=>{var t,r;return(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((null===(t=v.find(t=>t.value===e.event_type))||void 0===t?void 0:t.color)||"bg-gray-100 text-gray-800"),children:(null===(r=v.find(t=>t.value===e.event_type))||void 0===r?void 0:r.label)||e.event_type})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(e.event_date).toLocaleDateString()}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(j[e.status]),children:e.status})}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:[(0,Cn.jsx)("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),(0,Cn.jsx)("button",{onClick:()=>O(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)})})]})}):(0,Cn.jsxs)("div",{className:"flex w-full gap-6",children:[(0,Cn.jsxs)("div",{className:"w-64 bg-white rounded-md border border-gray-300 p-4 h-fit self-start space-y-6",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Search"}),(0,Cn.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Search events...",value:i,onChange:e=>l(e.target.value)})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:[(0,Cn.jsx)("div",{className:"text-xs font-bold text-gray-500 uppercase mb-4",children:"Event Type"}),(0,Cn.jsx)("div",{className:"space-y-3",children:w.map(e=>(0,Cn.jsxs)("label",{className:"flex items-center gap-3 text-sm",children:[(0,Cn.jsx)("input",{type:"checkbox",value:e.value,checked:o.includes(e.value),onChange:t=>{t.target.checked?c([...o,e.value]):c(o.filter(t=>t!==e.value))},className:"w-5 h-5 accent-purple-600 rounded border-gray-300"}),(0,Cn.jsx)("span",{className:"select-none",children:e.label})]},e.value))})]})]}),(0,Cn.jsx)("div",{className:"flex-1",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-md border border-gray-300 p-6 w-full max-w-4xl mx-auto",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsxs)("button",{onClick:()=>{0===k?(C(11),_(S-1)):C(k-1)},className:"p-2 rounded hover:bg-gray-100",children:[(0,Cn.jsx)("span",{className:"sr-only",children:"Previous Month"}),(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),(0,Cn.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:E.format("MMMM YYYY")}),(0,Cn.jsxs)("button",{onClick:()=>{11===k?(C(0),_(S+1)):C(k+1)},className:"p-2 rounded hover:bg-gray-100",children:[(0,Cn.jsx)("span",{className:"sr-only",children:"Next Month"}),(0,Cn.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,Cn.jsx)("div",{className:"grid grid-cols-7 text-xs font-semibold text-gray-500 mb-2",children:pu.map(e=>(0,Cn.jsx)("div",{className:"text-center py-1",children:e},e))}),(0,Cn.jsx)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 rounded-md overflow-hidden",children:I.map((e,t)=>{const r=e.isSame(N,"day"),n=e.month()===k,s=e.format("YYYY-MM-DD"),a=T[s]||[];return(0,Cn.jsxs)("div",{className:"min-h-[80px] bg-white flex flex-col border border-gray-100 px-2 py-1 relative\n                        ".concat(n?"":"bg-gray-50 text-gray-400","\n                        ").concat(r?"border-2 border-purple-500":""),children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Cn.jsx)("span",{className:"text-xs font-bold ".concat(r?"text-purple-700":""),children:e.date()}),r&&(0,Cn.jsx)("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1 rounded",children:"Today"})]}),(0,Cn.jsxs)("div",{className:"flex-1 space-y-1",children:[a.slice(0,2).map((e,t)=>(0,Cn.jsx)("div",{className:"truncate text-xs bg-purple-50 text-purple-700 rounded px-1 py-0.5",children:e.title},t)),a.length>2&&(0,Cn.jsxs)("div",{className:"text-[10px] text-purple-500",children:["+",a.length-2," more"]})]})]},s+t)})})]})})]}),s&&(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>a(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Activity"}),(0,Cn.jsx)("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A()},className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activity Title"}),(0,Cn.jsx)("input",{type:"text",value:f.title,onChange:e=>g(Oe(Oe({},f),{},{title:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Enter activity title"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Cn.jsx)("select",{value:f.event_type,onChange:e=>g(Oe(Oe({},f),{},{event_type:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",children:w.map(e=>(0,Cn.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),(0,Cn.jsx)("input",{type:"date",value:f.event_date,onChange:e=>g(Oe(Oe({},f),{},{event_date:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{value:f.description,onChange:e=>g(Oe(Oe({},f),{},{description:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:h,children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:h?"Adding...":"Add Activity"})]})]})]})]}),(0,Cn.jsx)(hu,{isOpen:b,onClose:()=>y(!1)})]})},fu=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,why:!1,best:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Brand Assets Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Brand Assets is your central hub for managing all company logos, icons, images, and documents. Keep your brand consistent and accessible for your team."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),i.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Ensures everyone uses the latest brand materials"}),(0,Cn.jsx)("li",{children:"Prevents off-brand or outdated assets from circulating"}),(0,Cn.jsx)("li",{children:"Saves time searching for files"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),i.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Organize assets by type and campaign"}),(0,Cn.jsx)("li",{children:"Regularly update and archive old assets"}),(0,Cn.jsx)("li",{children:"Use clear naming conventions"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Quick Start"}),c.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Upload new assets, search and filter by type, and download files as needed. Use the logo uploader for your main company logo."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Tips"}),c.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Tag assets for campaigns or departments. Use the color palette tool to keep your brand colors consistent."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"FAQ"}),c.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("p",{children:["Q: Can I restrict access to certain assets? ",(0,Cn.jsx)("br",{}),"A: Not yet, but permissions are coming soon."]})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your brand assets assistant. I can help you organize, update, and share your brand materials."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I keep my brand assets up to date?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Set a regular review schedule and archive outdated files. Use the uploader to add new versions and keep your team notified."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about brand assets...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},gu=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)({tagline:"",brand_blurb:"",color_palette:["#6366F1","#8B5CF6","#EC4899","#F59E0B"],logo_url:""}),[s,a]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[o,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(""),[m,p]=(0,t.useState)("all"),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)({name:"",description:"",asset_type:"logo"}),[b,y]=(0,t.useState)(null),[v,j]=(0,t.useState)(!1),[w,N]=(0,t.useState)(null),[k,C]=(0,t.useState)(null),[S,_]=(0,t.useState)(!1),[E,I]=(0,t.useState)("#000000"),[P,T]=(0,t.useState)(!1),[D,A]=(0,t.useState)({tagline:"",brand_blurb:"",logo_url:""}),[O,L]=(0,t.useState)(!1),R=s.filter(e=>{var t;const r=e.name.toLowerCase().includes(d.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase())),n="all"===m||e.asset_type===m;return r&&n});(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.organization_id&&M()},[e]);const M=async()=>{try{l(!0);const[t,r]=await Promise.all([Rn(e.organization_id),Ln(e.organization_id)]);n(t),a(r)}catch(t){console.error("Error loading brand data:",t)}finally{l(!1)}},z=async e=>{if(window.confirm("Are you sure you want to delete this asset?"))try{await(async e=>{try{const{error:t}=await kn.from("brand_assets").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting brand asset:",t),t}})(e),await M()}catch(t){console.error("Error deleting asset:",t),alert("Failed to delete asset. Please try again.")}},F=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return i?(0,Cn.jsxs)("div",{className:"text-center py-10",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,Cn.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading brand assets..."})]}):(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Brand Assets"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Manage your company logos, icons, images, and documents in one place."})]}),(0,Cn.jsxs)("button",{onClick:()=>L(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-6",children:[(0,Cn.jsxs)("div",{className:"bg-white rounded-md border border-gray-300 flex flex-col p-0",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 rounded-t-md border-b border-gray-100",children:[(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Logo and Tagline"}),(0,Cn.jsx)("button",{className:"px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>{A({tagline:r.tagline,brand_blurb:r.brand_blurb,logo_url:r.logo_url}),T(!0)},children:"Edit"})]}),(0,Cn.jsxs)("div",{className:"flex flex-row items-center w-full p-6 gap-6",children:[(0,Cn.jsx)("div",{className:"w-32 h-32 bg-gray-100 border border-gray-200 rounded-md flex items-center justify-center relative overflow-hidden",children:r.logo_url?(0,Cn.jsx)("img",{src:r.logo_url,alt:"Brand Logo",className:"object-contain w-full h-full"}):(0,Cn.jsx)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Cn.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-semibold text-gray-800 mb-1",children:"Tagline"}),(0,Cn.jsx)("span",{className:"text-sm text-gray-600 min-h-[2.5rem]",children:r.tagline||(0,Cn.jsx)("span",{className:"text-gray-400",children:"No tagline set"})})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-semibold text-gray-800 mb-1",children:"Brand Description"}),(0,Cn.jsx)("span",{className:"text-sm text-gray-600 min-h-[2.5rem]",children:r.brand_blurb||(0,Cn.jsx)("span",{className:"text-gray-400",children:"No description set"})})]})]})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-md border border-gray-300 flex flex-col p-0",children:[(0,Cn.jsx)("div",{className:"flex items-center px-4 py-2 bg-gray-50 rounded-t-md border-b border-gray-100",children:(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Brand Colours"})}),(0,Cn.jsx)("div",{className:"p-6 flex flex-col",children:(0,Cn.jsxs)("div",{className:"flex flex-row gap-4 items-end h-full",children:[r.color_palette.map((t,s)=>(0,Cn.jsx)("div",{className:"relative flex flex-col items-center group",style:{minWidth:80,width:80,height:240},children:(0,Cn.jsxs)("div",{className:"w-full h-full rounded-lg shadow border border-gray-200 flex flex-col justify-end relative cursor-pointer transition-transform group-hover:scale-105",style:{background:"linear-gradient(to bottom, ".concat(t," 60%, #fff0 100%), ").concat(t)},onClick:()=>C(s),children:[(0,Cn.jsxs)("div",{className:"absolute left-2 bottom-2 flex flex-col items-start",children:[(0,Cn.jsx)("span",{className:"text-[10px] text-white/80 font-bold tracking-wider",children:"HEX"}),(0,Cn.jsx)("span",{className:"text-xs text-white font-mono drop-shadow-sm",children:t})]}),k===s&&(0,Cn.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/30 rounded-lg z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-lg relative z-50 transform -translate-x-20",children:[(0,Cn.jsx)("input",{type:"color",value:t,onChange:e=>I(e.target.value),className:"w-16 h-16 border-2 border-white rounded-full shadow mb-3 mx-auto block",autoFocus:!0}),(0,Cn.jsx)("input",{type:"text",value:E,onChange:e=>I(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mb-3 text-center font-mono",placeholder:"#000000"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),(async(t,s)=>{const a=Oe(Oe({},r),{},{color_palette:r.color_palette.map((e,r)=>r===t?s:e)});n(a);try{c(!0),console.log("Saving brand info:",a),console.log("Organization ID:",e.organization_id);const t=await Mn(a,e.organization_id);console.log("Save result:",t),C(null),_(!1),I("#000000")}catch(i){console.error("Error saving color:",i),alert("Failed to save color. Please try again.")}finally{c(!1)}})(s,E)},disabled:o,className:"px-2 py-1 text-xs rounded bg-white text-gray-700 border border-gray-200 hover:bg-gray-100 disabled:opacity-50",children:o?"Saving...":"Save"}),(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),C(null)},className:"px-2 py-1 text-xs rounded bg-gray-200 text-gray-700 border border-gray-300 hover:bg-gray-300",children:"Cancel"}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),(async t=>{const s=Oe(Oe({},r),{},{color_palette:r.color_palette.filter((e,r)=>r!==t)});n(s);try{c(!0),console.log("Removing color, saving brand info:",s),console.log("Organization ID:",e.organization_id);const t=await Mn(s,e.organization_id);console.log("Save result:",t),C(null),_(!1),I("#000000")}catch(a){console.error("Error removing color:",a),alert("Failed to remove color. Please try again.")}finally{c(!1)}})(s),C(null)},className:"px-2 py-1 text-xs rounded bg-red-600 text-white border border-red-700 hover:bg-red-700",children:"Remove"})]})]})})]})},s)),(0,Cn.jsxs)("div",{className:"relative flex flex-col items-center group",style:{minWidth:80,width:80,height:240},children:[(0,Cn.jsxs)("div",{className:"w-full h-full rounded-lg shadow border-2 border-dashed border-gray-300 flex flex-col justify-center items-center cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>_(!0),children:[(0,Cn.jsx)("svg",{className:"w-8 h-8 mb-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,Cn.jsx)("span",{className:"text-xs text-gray-400",children:"Add Color"})]}),S&&(0,Cn.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/30 rounded-lg z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-lg relative z-50 transform -translate-x-20",children:[(0,Cn.jsx)("input",{type:"color",value:E,onChange:e=>I(e.target.value),className:"w-16 h-16 border-2 border-white rounded-full shadow mb-3 mx-auto block",autoFocus:!0}),(0,Cn.jsx)("input",{type:"text",value:E,onChange:e=>I(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded mb-3 text-center font-mono",placeholder:"#000000"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),(async t=>{const s=Oe(Oe({},r),{},{color_palette:[...r.color_palette,t]});n(s);try{c(!0),console.log("Saving brand info:",s),console.log("Organization ID:",e.organization_id);const t=await Mn(s,e.organization_id);console.log("Save result:",t),C(null),_(!1),I("#000000")}catch(a){console.error("Error saving color:",a),alert("Failed to save color. Please try again.")}finally{c(!1)}})(E)},disabled:o,className:"px-2 py-1 text-xs rounded bg-white text-gray-700 border border-gray-200 hover:bg-gray-100 disabled:opacity-50",children:o?"Saving...":"Save"}),(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),_(!1),I("#000000")},className:"px-2 py-1 text-xs rounded bg-gray-200 text-gray-700 border border-gray-300 hover:bg-gray-300",children:"Cancel"})]})]})})]})]})})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-md border border-gray-300 flex flex-col p-0",children:[(0,Cn.jsx)("div",{className:"flex items-center px-4 py-2 bg-gray-50 rounded-t-md border-b border-gray-100",children:(0,Cn.jsx)("h2",{className:"text-base font-semibold text-gray-900",children:"Brand Assets"})}),(0,Cn.jsxs)("div",{className:"p-6",children:[(0,Cn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,Cn.jsxs)("div",{className:"relative flex-1",children:[(0,Cn.jsx)("svg",{className:"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search assets...",value:d,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Cn.jsx)("select",{value:m,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[{value:"all",label:"All Types"},{value:"logo",label:"Logos"},{value:"icon",label:"Icons"},{value:"document",label:"Documents"},{value:"image",label:"Images"}].map(e=>(0,Cn.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Cn.jsxs)("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Asset"]})]}),(0,Cn.jsx)("div",{className:"overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asset"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===R.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:5,className:"py-16",children:(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No brand assets uploaded yet."})]})})}):R.map(e=>{var t;return(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:null!==(t=e.file_type)&&void 0!==t&&t.startsWith("image/")?(0,Cn.jsx)("img",{className:"h-10 w-10 rounded object-cover",src:e.file_path,alt:e.name}):(0,Cn.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center",children:(0,Cn.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.asset_type})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:F(e.file_size)}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(e.uploaded_at).toLocaleDateString()}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:[(0,Cn.jsx)("a",{href:e.file_path,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900 mr-3",children:"Download"}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e.id)},className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id)})})]})})]})]}),h&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Asset"}),(0,Cn.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset Name"}),(0,Cn.jsx)("input",{type:"text",value:f.name,onChange:e=>g(Oe(Oe({},f),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter asset name"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asset Type"}),(0,Cn.jsxs)("select",{value:f.asset_type,onChange:e=>g(Oe(Oe({},f),{},{asset_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Cn.jsx)("option",{value:"logo",children:"Logo"}),(0,Cn.jsx)("option",{value:"icon",children:"Icon"}),(0,Cn.jsx)("option",{value:"document",children:"Document"}),(0,Cn.jsx)("option",{value:"image",children:"Image"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),(0,Cn.jsx)("textarea",{value:f.description,onChange:e=>g(Oe(Oe({},f),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description of the asset"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File"}),(0,Cn.jsx)("input",{type:"file",onChange:e=>y(e.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Cn.jsx)("button",{onClick:()=>x(!1),disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),(0,Cn.jsx)("button",{onClick:async()=>{if(b&&f.name)try{c(!0),await(async(e,t,r)=>{try{var n;const s=null===(n=(await kn.auth.getUser()).data.user)||void 0===n?void 0:n.id,a=e.name.split(".").pop(),i="".concat(r,"/").concat(Date.now(),".").concat(a),l="brand-assets/".concat(i),{data:o,error:c}=await kn.storage.from("marketing-assets").upload(l,e);if(c)throw c;const{data:d}=kn.storage.from("marketing-assets").getPublicUrl(l),{data:u,error:m}=await kn.from("brand_assets").insert([Oe(Oe({},t),{},{organization_id:r,file_path:d.publicUrl,file_size:e.size,file_type:e.type,uploaded_by:s})]).select().single();if(m)throw m;return u}catch(s){throw console.error("Error uploading brand asset:",s),s}})(b,f,e.organization_id),x(!1),g({name:"",description:"",asset_type:"logo"}),y(null),await M()}catch(t){console.error("Error uploading asset:",t),alert("Failed to upload asset. Please try again.")}finally{c(!1)}},disabled:o||!b||!f.name,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Uploading...":"Upload Asset"})]})]})}),v&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Logo"}),(0,Cn.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Cn.jsx)("div",{className:"space-y-4",children:(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo File"}),(0,Cn.jsx)("input",{type:"file",accept:"image/*",onChange:e=>N(e.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Cn.jsx)("button",{onClick:()=>j(!1),disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),(0,Cn.jsx)("button",{onClick:async()=>{if(w)try{c(!0);const t=await(async(e,t)=>{try{const r=e.name.split(".").pop(),n="".concat(t,"/logo.").concat(r),s="brand-logos/".concat(n),{data:a,error:i}=await kn.storage.from("marketing-assets").upload(s,e,{upsert:!0});if(i)throw i;const{data:l}=kn.storage.from("marketing-assets").getPublicUrl(s);return await Mn({logo_url:l.publicUrl},t),l.publicUrl}catch(r){throw console.error("Error uploading brand logo:",r),r}})(w,e.organization_id);n(e=>Oe(Oe({},e),{},{logo_url:t})),j(!1),N(null),await M()}catch(t){console.error("Error uploading logo:",t),alert("Failed to upload logo. Please try again.")}finally{c(!1)}},disabled:o||!w,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Uploading...":"Upload Logo"})]})]})}),P&&(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>T(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Logo and Tagline"}),(0,Cn.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const s=Oe(Oe({},r),D);n(s),T(!1);try{c(!0),await Mn(s,e.organization_id),alert("Brand information saved successfully!")}catch(a){console.error("Error saving brand information:",a),alert("Failed to save brand information. Please try again.")}finally{c(!1)}},className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center space-y-4",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsxs)("div",{className:"mb-2",children:[(0,Cn.jsx)("span",{className:"block text-sm font-medium text-gray-700",children:"Logo"}),(0,Cn.jsx)("span",{className:"block text-xs text-gray-500",children:"Upload your company logo for branding."})]}),(0,Cn.jsxs)("div",{className:"border border-gray-200 bg-gray-100 rounded-lg px-4 py-4 flex items-center space-x-6 w-full max-w-md",children:[(0,Cn.jsx)("div",{className:"w-28 h-28 flex items-center justify-center bg-white rounded-lg overflow-hidden border border-gray-200",children:D.logo_url?(0,Cn.jsx)("img",{src:D.logo_url,alt:"Logo Preview",className:"object-contain w-full h-full"}):(0,Cn.jsxs)("svg",{className:"w-12 h-12 text-gray-300",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,Cn.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"4",stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,Cn.jsx)("path",{d:"M8 12h8M12 8v8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,Cn.jsxs)("div",{className:"flex flex-col items-start space-y-2",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>document.getElementById("brand-logo-file-input").click(),className:"px-3 py-1 text-xs font-medium bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors",children:"Replace image"}),(0,Cn.jsx)("input",{id:"brand-logo-file-input",type:"file",accept:"image/*",className:"hidden",onChange:async e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>A(t=>Oe(Oe({},t),{},{logo_url:e.target.result})),e.readAsDataURL(t)}}})]})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Tagline"}),(0,Cn.jsx)("input",{type:"text",value:D.tagline,onChange:e=>A(t=>Oe(Oe({},t),{},{tagline:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Your brand tagline"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Brand Description"}),(0,Cn.jsx)("textarea",{value:D.brand_blurb,onChange:e=>A(t=>Oe(Oe({},t),{},{brand_blurb:e.target.value})),rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Brief description of your brand"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",disabled:o,children:"Save"})]})]})]})]}),(0,Cn.jsx)(fu,{isOpen:O,onClose:()=>L(!1)})]})},bu=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,why:!1,best:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Sales Collateral Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Sales Collateral is your repository for all sales materials\u2014decks, one-pagers, case studies, and more. Keep your team aligned and your sales process sharp."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),i.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Ensures sales teams use the latest, approved materials"}),(0,Cn.jsx)("li",{children:"Improves consistency in messaging and branding"}),(0,Cn.jsx)("li",{children:"Speeds up onboarding for new team members"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),i.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Organize collateral by type and sales stage"}),(0,Cn.jsx)("li",{children:"Archive outdated materials regularly"}),(0,Cn.jsx)("li",{children:"Use clear, descriptive file names"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Quick Start"}),c.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Upload new collateral, search and filter by type, and download files as needed. Use the upload button to add new materials."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Tips"}),c.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Tag collateral for campaigns or sales stages. Use the search bar to quickly locate materials."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"FAQ"}),c.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("p",{children:["Q: Can I track downloads? ",(0,Cn.jsx)("br",{}),"A: Not yet, but analytics are coming soon."]})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your sales collateral assistant. I can help you organize, update, and share your sales materials."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I keep my sales collateral up to date?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Set a regular review schedule and archive outdated files. Use the uploader to add new versions and keep your team notified."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about sales collateral...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},yu=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)([]),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)({name:"",description:"",collateral_type:"sales_deck"}),[f,g]=(0,t.useState)(null),[b,y]=(0,t.useState)("all"),[v,j]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1),k=[{value:"sales_deck",label:"Sales Deck"},{value:"one_pager",label:"One Pager"},{value:"case_study",label:"Case Study"},{value:"pricing",label:"Pricing Sheet"},{value:"comparison",label:"Comparison"},{value:"calculator",label:"Calculator"}],C=r.filter(e=>{var t;return e.name.toLowerCase().includes(o.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))});(0,t.useEffect)(()=>{null!==e&&void 0!==e&&e.organization_id&&S()},[e]),(0,t.useEffect)(()=>{const e=e=>{v&&!e.target.closest(".dropdown-container")&&j(null)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[v]);const S=async()=>{try{a(!0);const t=await(async e=>{try{const{data:t,error:r}=await kn.from("sales_collateral").select("*").eq("organization_id",e).order("uploaded_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Error fetching sales collateral:",t),t}})(e.organization_id);n(t)}catch(t){console.error("Error loading sales collateral:",t)}finally{a(!1)}},_=async()=>{if(f&&h.name)try{l(!0),await(async(e,t,r)=>{try{var n;const s=null===(n=(await kn.auth.getUser()).data.user)||void 0===n?void 0:n.id,a=e.name.split(".").pop(),i="".concat(r,"/").concat(Date.now(),".").concat(a),l="sales-collateral/".concat(i),{data:o,error:c}=await kn.storage.from("marketing-assets").upload(l,e);if(c)throw c;const{data:d}=kn.storage.from("marketing-assets").getPublicUrl(l),{data:u,error:m}=await kn.from("sales_collateral").insert([Oe(Oe({},t),{},{organization_id:r,file_path:d.publicUrl,file_size:e.size,file_type:e.type,uploaded_by:s})]).select().single();if(m)throw m;return u}catch(s){throw console.error("Error uploading sales collateral:",s),s}})(f,h,e.organization_id),p(!1),x({name:"",description:"",collateral_type:"sales_deck"}),g(null),await S()}catch(t){console.error("Error uploading collateral:",t),alert("Failed to upload collateral. Please try again.")}finally{l(!1)}},E=async e=>{if(window.confirm("Are you sure you want to delete this collateral?"))try{await(async e=>{try{const{error:t}=await kn.from("sales_collateral").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Error deleting sales collateral:",t),t}})(e),await S()}catch(t){console.error("Error deleting collateral:",t),alert("Failed to delete collateral. Please try again.")}},I=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return s?(0,Cn.jsxs)("div",{className:"text-center py-10",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,Cn.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading sales collateral..."})]}):(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Sales Collateral"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Manage your sales materials including decks, one-pagers, case studies, and pricing sheets."})]}),(0,Cn.jsxs)("button",{onClick:()=>N(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,Cn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[(0,Cn.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,Cn.jsx)("svg",{className:"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search collateral...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),d.length>0&&(0,Cn.jsxs)("button",{onClick:()=>{d.forEach(e=>{const t=r.find(t=>t.id===e);if(t){const e=document.createElement("a");e.href=t.file_path,e.download=t.name,e.target="_blank",e.click()}})},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700",children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Selected (",d.length,")"]})]}),(0,Cn.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700",children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Collateral"]})]}),(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md overflow-visible",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Cn.jsx)("input",{type:"checkbox",checked:d.length===C.length&&C.length>0,onChange:e=>{return t=e.target.checked,void u(t?C.map(e=>e.id):[]);var t},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collateral"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===C.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:6,className:"py-16",children:(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No sales collateral uploaded yet."})]})})}):C.map(e=>{var t;return(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("input",{type:"checkbox",checked:d.includes(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void u(n?[...d,r]:d.filter(e=>e!==r));var r,n},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Cn.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded flex items-center justify-center",children:(0,Cn.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:(null===(t=k.find(t=>t.value===e.collateral_type))||void 0===t?void 0:t.label)||e.collateral_type})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:I(e.file_size)}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(e.uploaded_at).toLocaleDateString()}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium overflow-visible",children:(0,Cn.jsx)("div",{className:"flex items-center space-x-2",children:(0,Cn.jsxs)("div",{className:"relative dropdown-container",children:[(0,Cn.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:()=>j(v===e.id?null:e.id),children:(0,Cn.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),v===e.id&&(0,Cn.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-[9999] border border-gray-200",children:[(0,Cn.jsx)("button",{onClick:()=>((e,t)=>{const r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)})(e.file_path,e.name),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Download"}),(0,Cn.jsx)("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Edit"}),(0,Cn.jsx)("button",{onClick:()=>E(e.id),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Delete"})]})]})})})]},e.id)})})]})}),m&&(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-xl shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Upload Sales Collateral"}),(0,Cn.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),_()},className:"flex-1 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"flex-1 px-6 py-8 flex flex-col justify-center",children:[(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Collateral Name"}),(0,Cn.jsx)("input",{type:"text",value:h.name,onChange:e=>x(Oe(Oe({},h),{},{name:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",placeholder:"Enter collateral name"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{value:h.description,onChange:e=>x(Oe(Oe({},h),{},{description:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Cn.jsx)("select",{value:h.collateral_type,onChange:e=>x(Oe(Oe({},h),{},{collateral_type:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",children:k.map(e=>(0,Cn.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Cn.jsxs)("div",{className:"mb-6",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File"}),(0,Cn.jsx)("input",{type:"file",onChange:e=>g(e.target.files[0]),className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:i,children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:i||!f||!h.name,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:i?"Uploading...":"Upload Collateral"})]})]})]})]}),(0,Cn.jsx)(bu,{isOpen:w,onClose:()=>N(!1)})]})},vu=e=>{let{activeSubTab:t,onSubTabChange:r}=e;return(0,Cn.jsx)("div",{className:"space-y-6",children:(0,Cn.jsx)("div",{children:(()=>{switch(t){case"events":default:return(0,Cn.jsx)(xu,{});case"brand":return(0,Cn.jsx)(gu,{});case"sales":return(0,Cn.jsx)(yu,{})}})()})})},ju=["title","titleId"];function wu(e,r){let{title:n,titleId:s}=e,a=Yn(e,ju);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M15.5 2A1.5 1.5 0 0 0 14 3.5v13a1.5 1.5 0 0 0 1.5 1.5h1a1.5 1.5 0 0 0 1.5-1.5v-13A1.5 1.5 0 0 0 16.5 2h-1ZM9.5 6A1.5 1.5 0 0 0 8 7.5v9A1.5 1.5 0 0 0 9.5 18h1a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 10.5 6h-1ZM3.5 10A1.5 1.5 0 0 0 2 11.5v5A1.5 1.5 0 0 0 3.5 18h1A1.5 1.5 0 0 0 6 16.5v-5A1.5 1.5 0 0 0 4.5 10h-1Z"}))}const Nu=t.forwardRef(wu),ku=["title","titleId"];function Cu(e,r){let{title:n,titleId:s}=e,a=Yn(e,ku);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M4 16.5v-13h-.25a.75.75 0 0 1 0-1.5h12.5a.75.75 0 0 1 0 1.5H16v13h.25a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75v-2.5a.75.75 0 0 0-.75-.75h-2.5a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 1-.75.75h-3.5a.75.75 0 0 1 0-1.5H4Zm3-11a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1ZM7.5 9a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1ZM11 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1Zm.5 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1Z",clipRule:"evenodd"}))}const Su=t.forwardRef(Cu),_u=["title","titleId"];function Eu(e,r){let{title:n,titleId:s}=e,a=Yn(e,_u);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"}))}const Iu=t.forwardRef(Eu),Pu=["title","titleId"];function Tu(e,r){let{title:n,titleId:s}=e,a=Yn(e,Pu);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const Du=t.forwardRef(Tu),Au=["title","titleId"];function Ou(e,r){let{title:n,titleId:s}=e,a=Yn(e,Au);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"}))}const Lu=t.forwardRef(Ou),Ru=["title","titleId"];function Mu(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ru);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm2.25 8.5a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Zm0 3a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5h-6.5Z",clipRule:"evenodd"}))}const zu=t.forwardRef(Mu);const Fu=["title","titleId"];function Bu(e,r){let{title:n,titleId:s}=e,a=Yn(e,Fu);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M3.505 2.365A41.369 41.369 0 0 1 9 2c1.863 0 3.697.124 5.495.365 1.247.167 2.18 1.108 2.435 2.268a4.45 4.45 0 0 0-.577-.069 43.141 43.141 0 0 0-4.706 0C9.229 4.696 7.5 6.727 7.5 8.998v2.24c0 1.413.67 2.735 1.76 3.562l-2.98 2.98A.75.75 0 0 1 5 17.25v-3.443c-.501-.048-1-.106-1.495-.172C2.033 13.438 1 12.162 1 10.72V5.28c0-1.441 1.033-2.717 2.505-2.914Z"}),t.createElement("path",{d:"M14 6c-.762 0-1.52.02-2.271.062C10.157 6.148 9 7.472 9 8.998v2.24c0 1.519 1.147 2.839 2.71 2.935.214.013.428.024.642.034.2.009.385.09.518.224l2.35 2.35a.75.75 0 0 0 1.28-.531v-2.07c1.453-.195 2.5-1.463 2.5-2.915V8.998c0-1.526-1.157-2.85-2.729-2.936A41.645 41.645 0 0 0 14 6Z"}))}const Uu=t.forwardRef(Bu),qu=(0,t.forwardRef)((e,r)=>{var n,s;let{searchTerm:a,filterStatus:i}=e;const{currentOrganization:l}=_n(),o=null===l||void 0===l?void 0:l.organization_id,[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)([]),[p,h]=(0,t.useState)(!0),[x,f]=(0,t.useState)(!1),[g,b]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[j,w]=(0,t.useState)("communication"),[N,k]=(0,t.useState)(null),[C,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)({first_name:"",last_name:"",email:"",phone:"",company_id:"",position:"",lead_score:50,status:"prospect",notes:"",linkedin_url:"",twitter_url:""}),[I,P]=(0,t.useState)(!1),[T,D]=(0,t.useState)(null);(0,t.useImperativeHandle)(r,()=>({openEdit:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;b(e),E(e?{first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",phone:e.phone||"",company_id:e.company_id||"",position:e.position||"",lead_score:e.lead_score||50,status:e.status||"prospect",notes:e.notes||"",linkedin_url:e.linkedin_url||"",twitter_url:e.twitter_url||""}:{first_name:"",last_name:"",email:"",phone:"",company_id:"",position:"",lead_score:50,status:"prospect",notes:"",linkedin_url:"",twitter_url:""}),f(!0)}})),(0,t.useEffect)(()=>{o&&A()},[o]);const A=async()=>{h(!0);try{const[e,t]=await Promise.all([Un(o),Fn(o)]);d(e.data||[]),m(t.data||[])}catch(e){console.error("Error loading data:",e)}h(!1)},O=e=>{const t=u.find(t=>t.id===e);return t?t.name:""},L=e=>{const t={prospect:"bg-blue-100 text-blue-800",lead:"bg-yellow-100 text-yellow-800",customer:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"};return t[e]||t.prospect},R=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600",M=()=>{v(null),k(null)},z=async(e,t)=>{if(y)try{const r=Oe(Oe({},y),{},{[e]:t});await qn(y.id,{[e]:t}),v(r),k(null),A()}catch(r){console.error("Error updating contact:",r),alert("Error updating contact")}},F=(e,t,r)=>{"Enter"===e.key?z(t,r):"Escape"===e.key&&k(null)},B=c.filter(e=>{const t=(a||"").toLowerCase(),r=(e.first_name||"").toLowerCase().includes(t)||(e.last_name||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t)||(O(e.company_id)||"").toLowerCase().includes(t),n="all"===i||e.status===i;return r&&n}),U=(e,t)=>{t.target.closest(".menu-button")||(e=>{v(e)})(e)},q=e=>{let{label:t,value:r,field:n,type:s="text",options:a=null}=e;return(0,Cn.jsx)("div",{className:"flex items-center justify-between py-3",children:(0,Cn.jsxs)("div",{className:"flex items-center flex-1",children:[(0,Cn.jsx)("label",{className:"text-sm font-bold text-gray-700 w-24 flex-shrink-0",children:t}),N===n||C?(0,Cn.jsx)("div",{className:"flex items-center space-x-2 flex-1",children:"select"===s?(0,Cn.jsx)("select",{value:r||"",onChange:e=>{C?v(Oe(Oe({},y),{},{[n]:e.target.value})):z(n,e.target.value)},onBlur:()=>!C&&k(null),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",autoFocus:!C,children:null===a||void 0===a?void 0:a.map(e=>(0,Cn.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,Cn.jsx)("input",{type:s,value:r||"",onChange:e=>{C?v(Oe(Oe({},y),{},{[n]:e.target.value})):z(n,e.target.value)},onBlur:()=>!C&&k(null),onKeyDown:e=>{C||F(e,n,e.target.value)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",autoFocus:!C})}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-2 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:r||"Not set"})})]})})};return(0,Cn.jsxs)("div",{className:"relative",children:[(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md overflow-hidden",children:B.length>0?(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Score"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(e=>{var t,r;return(0,Cn.jsxs)("tr",{onClick:t=>U(e,t),className:"cursor-pointer transition-colors ".concat((null===y||void 0===y?void 0:y.id)===e.id?"bg-purple-50":"hover:bg-gray-50"),children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,Cn.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(r=e.last_name)||void 0===r?void 0:r[0]]})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]})]})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O(e.company_id)}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.position}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(L(e.status)),children:e.status})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)(fs,{className:"h-4 w-4 ".concat(R(e.lead_score))}),(0,Cn.jsx)("span",{className:"ml-1 text-sm font-medium ".concat(R(e.lead_score)),children:e.lead_score||0})]})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsx)("button",{className:"menu-button p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",onClick:t=>((e,t)=>{e.stopPropagation(),console.log("Menu clicked for:",t)})(t,e),children:(0,Cn.jsx)(Lu,{className:"h-4 w-4"})})})]},e.id)})})]}):(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,Cn.jsx)(Iu,{className:"h-16 w-16 text-gray-300 mb-4"}),(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No contacts found"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:a||"all"!==i?"Try adjusting your search or filters":"Get started by adding your first contact"}),(0,Cn.jsxs)("button",{onClick:()=>{b(null),E({first_name:"",last_name:"",email:"",phone:"",company_id:"",position:"",lead_score:50,status:"prospect",notes:"",linkedin_url:"",twitter_url:""}),f(!0)},className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[(0,Cn.jsx)(Sl,{className:"h-4 w-4 mr-2"}),"Add Contact"]})]})}),y&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e=>{e.target===e.currentTarget&&M()},children:(0,Cn.jsxs)("div",{className:"absolute top-0 right-0 h-full w-11/12 max-w-2xl bg-white shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Details"}),(0,Cn.jsx)("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsx)("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:(0,Cn.jsxs)("span",{className:"text-xl font-medium text-blue-600",children:[null===(n=y.first_name)||void 0===n?void 0:n[0],null===(s=y.last_name)||void 0===s?void 0:s[0]]})}),(0,Cn.jsxs)("div",{className:"flex-1",children:[(0,Cn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[y.first_name," ",y.last_name]}),(0,Cn.jsx)("p",{className:"text-sm text-gray-600",children:O(y.company_id)}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:y.email})]})]})]}),(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Cn.jsxs)("button",{onClick:()=>w("communication"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("communication"===j?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(Uu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Communication"})]}),(0,Cn.jsxs)("button",{onClick:()=>w("details"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("details"===j?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(Iu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Details"})]}),(0,Cn.jsxs)("button",{onClick:()=>w("notes"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("notes"===j?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(zu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Notes"})]}),(0,Cn.jsxs)("button",{onClick:()=>w("activities"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("activities"===j?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(ys,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Activities"})]})]})}),(0,Cn.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:["communication"===j&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Communication"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(Uu,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No communication history yet"})]})]}),"details"===j&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Details"}),C?(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("button",{onClick:async()=>{if(y)try{await qn(y.id,y),S(!1),A()}catch(e){console.error("Error updating contact:",e),alert("Error updating contact")}},className:"px-3 py-1 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"}),(0,Cn.jsx)("button",{onClick:()=>{S(!1),v(y)},className:"px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"})]}):(0,Cn.jsx)("button",{onClick:()=>{S(!0)},className:"px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Edit"})]}),(0,Cn.jsxs)("div",{className:"space-y-2",children:[(0,Cn.jsx)(q,{label:"First Name",value:y.first_name,field:"first_name"}),(0,Cn.jsx)(q,{label:"Last Name",value:y.last_name,field:"last_name"}),(0,Cn.jsx)(q,{label:"Email",value:y.email,field:"email",type:"email"}),(0,Cn.jsx)(q,{label:"Phone",value:y.phone,field:"phone",type:"tel"}),(0,Cn.jsx)(q,{label:"Position",value:y.position,field:"position"}),(0,Cn.jsx)(q,{label:"Status",value:y.status,field:"status",type:"select",options:[{value:"prospect",label:"Prospect"},{value:"lead",label:"Lead"},{value:"customer",label:"Customer"},{value:"inactive",label:"Inactive"}]}),(0,Cn.jsx)(q,{label:"Lead Score",value:y.lead_score,field:"lead_score",type:"number"}),(0,Cn.jsx)(q,{label:"Company",value:O(y.company_id),field:"company_id",type:"select",options:u.map(e=>({value:e.id,label:e.name}))})]})]}),"notes"===j&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notes"}),y.notes?(0,Cn.jsx)("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:(0,Cn.jsx)("p",{className:"text-gray-500",children:y.notes})}):(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(zu,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No notes available"})]})]}),"activities"===j&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Activities"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(ys,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No activities yet"})]})]})]}),(0,Cn.jsx)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:(0,Cn.jsx)("button",{onClick:()=>(async e=>{D(e),P(!0)})(y.id),className:"px-4 py-2 text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 transition-colors",children:"Delete Contact"})})]})}),x&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,Cn.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:g?"Edit Contact":"Add New Contact"})}),(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={first_name:_.first_name,last_name:_.last_name,email:_.email,phone:_.phone,company_id:_.company_id||null,status:_.status,notes:_.notes};try{g?await qn(g.id,t):await async function(e,t){return kn.from("crm_contacts").insert([Oe(Oe({},t),{},{organization_id:e})])}(o,t),f(!1),b(null),A()}catch(r){console.error("Error saving contact:",r),alert("Error saving contact")}},className:"p-6 space-y-4",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,Cn.jsx)("input",{type:"text",value:_.first_name,onChange:e=>E(Oe(Oe({},_),{},{first_name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,Cn.jsx)("input",{type:"text",value:_.last_name,onChange:e=>E(Oe(Oe({},_),{},{last_name:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Cn.jsx)("input",{type:"email",value:_.email,onChange:e=>E(Oe(Oe({},_),{},{email:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,Cn.jsx)("input",{type:"tel",value:_.phone,onChange:e=>E(Oe(Oe({},_),{},{phone:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company"}),(0,Cn.jsxs)("select",{value:_.company_id,onChange:e=>E(Oe(Oe({},_),{},{company_id:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Cn.jsx)("option",{value:"",children:"Select Company"}),u.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,Cn.jsx)("input",{type:"text",value:_.position,onChange:e=>E(Oe(Oe({},_),{},{position:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,Cn.jsxs)("select",{value:_.status,onChange:e=>E(Oe(Oe({},_),{},{status:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Cn.jsx)("option",{value:"prospect",children:"Prospect"}),(0,Cn.jsx)("option",{value:"lead",children:"Lead"}),(0,Cn.jsx)("option",{value:"customer",children:"Company"}),(0,Cn.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Lead Score (0-100)"}),(0,Cn.jsx)("input",{type:"range",min:"0",max:"100",value:_.lead_score,onChange:e=>E(Oe(Oe({},_),{},{lead_score:parseInt(e.target.value)})),className:"mt-1 block w-full"}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:_.lead_score})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"LinkedIn URL"}),(0,Cn.jsx)("input",{type:"url",value:_.linkedin_url,onChange:e=>E(Oe(Oe({},_),{},{linkedin_url:e.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,Cn.jsx)("textarea",{value:_.notes,onChange:e=>E(Oe(Oe({},_),{},{notes:e.target.value})),rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>{f(!1),b(null)},className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-md shadow hover:bg-purple-700",children:[g?"Update":"Create"," Contact"]})]})]})]})}),I&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,Cn.jsxs)("div",{className:"p-6",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Contact"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Are you sure you want to delete this contact? This action cannot be undone."}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Cn.jsx)("button",{onClick:()=>{P(!1),D(null)},className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{onClick:async()=>{try{await async function(e){return kn.from("crm_contacts").delete().eq("id",e)}(T),P(!1),D(null),A()}catch(e){console.error("Error deleting contact:",e),alert("Error deleting contact")}},className:"px-4 py-2 bg-red-600 text-white rounded-md shadow hover:bg-red-700",children:"Delete"})]})]})})})]})}),Hu=qu,Wu=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,companies:!1,contacts:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({navigation:!0,management:!1,search:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Contacts & Companies Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The Contacts & Companies section helps you manage your customer database, organize contacts by company, and track all customer interactions in one centralized location."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("companies"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Managing Companies"}),i.companies?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.companies&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Add new companies with basic information like name, industry, and website"}),(0,Cn.jsx)("li",{children:"Track company status (active, inactive, prospect)"}),(0,Cn.jsx)("li",{children:"View all contacts associated with each company"}),(0,Cn.jsx)("li",{children:"Edit company details and manage relationships"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("contacts"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Managing Contacts"}),i.contacts?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.contacts&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Add contacts with detailed information and communication history"}),(0,Cn.jsx)("li",{children:"Track contact status and lead scores"}),(0,Cn.jsx)("li",{children:"Organize contacts by company and role"}),(0,Cn.jsx)("li",{children:"Maintain communication logs and notes"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("navigation"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Navigation"}),c.navigation?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.navigation&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Switch between Companies and Contacts tabs. Use the search bar to find specific companies or contacts. Click on any company to view its details and associated contacts."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("management"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Data Management"}),c.management?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.management&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Add new companies and contacts using the "Add" button. Edit existing records by clicking the edit icon. Use bulk editing for multiple records. All changes are automatically saved.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("search"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Search & Filters"}),c.search?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.search&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use the search bar to find companies by name or website. Filter by status to view active, inactive, or prospect companies. Sort by any column for better organization."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your contacts management assistant. I can help you organize your customer database, improve contact relationships, and optimize your CRM workflow."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How should I organize my customer contacts?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Group contacts by company, use consistent naming conventions, and maintain regular communication logs. Consider using tags for different roles and interests."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What's the best way to track customer interactions?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Log all communications, meetings, and follow-ups. Use notes to record important details and set reminders for follow-up actions."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about contact management...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null};function Vu(e){var r,n;let{onBack:s}=e;const{currentOrganization:a}=_n(),i=null===a||void 0===a?void 0:a.organization_id,[l,o]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!0),[p,h]=(0,t.useState)(!1),[x,f]=(0,t.useState)(null),[g,b]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[j,w]=(0,t.useState)("companies"),[N,k]=(0,t.useState)(""),[C,S]=(0,t.useState)("all"),_=(0,t.useRef)(),[E,I]=(0,t.useState)("contacts"),[P,T]=(0,t.useState)("communication"),[D,A]=(0,t.useState)(null),[O,L]=(0,t.useState)(!1),[R,M]=(0,t.useState)(!1),[z,F]=(0,t.useState)({name:"",industry:"",size:"",website:"",phone:"",address:"",status:"active"});(0,t.useEffect)(()=>{B()},[i]);const B=async()=>{if(i){try{const{data:e}=await Fn(i);o(e||[])}catch(e){console.error("Error loading companies:",e)}m(!1)}},U=()=>{h(!1),f(null)},q=async e=>{window.confirm("Delete this company?")&&(await async function(e){return kn.from("crm_companies").delete().eq("id",e)}(e),B())},H=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"inactive":default:return"text-gray-600 bg-gray-100";case"prospect":return"text-blue-600 bg-blue-100"}},W=e=>{const t={prospect:"bg-blue-100 text-blue-800",lead:"bg-yellow-100 text-yellow-800",customer:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"};return t[e]||t.prospect},V=e=>{if(!e)return"";try{const t=new URL(e.startsWith("http")?e:"https://".concat(e));return"https://www.google.com/s2/favicons?domain=".concat(t.hostname,"&sz=32")}catch(t){return""}},G=l.filter(e=>(e.name||"").toLowerCase().includes(N.toLowerCase())||(e.website||"").toLowerCase().includes(N.toLowerCase())),$=e=>{b(e),(async e=>{if(i)try{const{data:t}=await Un(i),r=(t||[]).filter(t=>t.company_id===e);d(r)}catch(t){console.error("Error loading contacts:",t)}})(e.id)},K=()=>b(null),Y=()=>{v(null),A(null)},Z=(e,t)=>{t.target.closest(".menu-button")||(e=>{v(e)})(e)},J=async(e,t)=>{if(y)try{const r=Oe(Oe({},y),{},{[e]:t});d(e=>e.map(e=>e.id===y.id?r:e)),v(r),A(null)}catch(r){console.error("Error updating contact:",r),alert("Error updating contact")}},Q=()=>{A(null)},X=(e,t,r)=>{"Enter"===e.key?J(t,r):"Escape"===e.key&&Q()},ee=()=>{L(!0)},te=async()=>{try{await Bn(g.id,g),o(e=>e.map(e=>e.id===g.id?g:e)),L(!1)}catch(e){console.error("Error saving changes:",e),alert("Error saving changes")}},re=()=>{L(!1),A(null)},ne=e=>{let{label:t,value:r,field:n,type:s="text",options:a=null}=e;return(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700",children:t}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:D===n||O?(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:["select"===s?(0,Cn.jsx)("select",{value:r||"",onChange:e=>J(n,e.target.value),onKeyDown:e=>X(e,n,e.target.value),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",autoFocus:!0,children:null===a||void 0===a?void 0:a.map(e=>(0,Cn.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,Cn.jsx)("input",{type:s,value:r||"",onChange:e=>J(n,e.target.value),onKeyDown:e=>X(e,n,e.target.value),onBlur:()=>J(n,r),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",autoFocus:!0}),(0,Cn.jsx)("button",{onClick:()=>J(n,r),className:"text-green-600 hover:text-green-800",children:"\u2713"}),(0,Cn.jsx)("button",{onClick:Q,className:"text-gray-600 hover:text-gray-800",children:"\u2715"})]}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:r||"Not set"})})})]})};return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Companies & Contacts"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your companies and contacts in one place."})]}),(0,Cn.jsxs)("button",{onClick:()=>M(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Cn.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[(0,Cn.jsxs)("button",{onClick:()=>w("companies"),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("companies"===j?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,Cn.jsx)(Su,{className:"h-4 w-4 mr-2"}),"Companies"]}),(0,Cn.jsxs)("button",{onClick:()=>w("contacts"),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("contacts"===j?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,Cn.jsx)(Iu,{className:"h-4 w-4 mr-2"}),"Contacts"]})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsxs)("div",{className:"relative w-64",children:[(0,Cn.jsx)(Du,{className:"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search ".concat(j,"..."),value:N,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),"contacts"===j&&(0,Cn.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Cn.jsx)("option",{value:"all",children:"All Status"}),(0,Cn.jsx)("option",{value:"prospect",children:"Prospects"}),(0,Cn.jsx)("option",{value:"lead",children:"Leads"}),(0,Cn.jsx)("option",{value:"customer",children:"Companies"}),(0,Cn.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,Cn.jsxs)("button",{onClick:()=>{var e;return"companies"===j?h(!0):null===(e=_.current)||void 0===e?void 0:e.openEdit()},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-purple-600 hover:bg-purple-700",children:[(0,Cn.jsx)(Sl,{className:"h-5 w-5 mr-2"})," Add ","companies"===j?"Company":"Contact"]})]})]}),"companies"===j?(0,Cn.jsx)("div",{className:"bg-white border border-gray-300 rounded-md overflow-hidden",children:G.length>0?(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Industry"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(e=>(0,Cn.jsxs)("tr",{onClick:()=>$(e),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900 flex items-center gap-2",children:[e.website&&(0,Cn.jsx)("img",{src:V(e.website),alt:"favicon",className:"w-5 h-5 rounded mr-2"}),(0,Cn.jsx)("span",{className:"text-left text-gray-900 font-medium",children:e.name})]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.industry}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(H(e.status||"active")),children:e.status||"active"})}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.phone}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsx)("button",{className:"menu-button p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",onClick:e=>{e.stopPropagation()},children:(0,Cn.jsx)(Lu,{className:"h-4 w-4"})})})]},e.id))})]}):(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,Cn.jsx)(Su,{className:"h-16 w-16 text-gray-300 mb-4"}),(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No companies found"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:N?"Try adjusting your search":"Get started by adding your first company"}),(0,Cn.jsxs)("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[(0,Cn.jsx)(Sl,{className:"h-4 w-4 mr-2"}),"Add Company"]})]})}):(0,Cn.jsx)(Hu,{searchTerm:N,filterStatus:C,ref:_}),p&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=Oe(Oe({},z),{},{website:z.website?"https://".concat(z.website.replace(/^https?:\/\//,"")):""});x?await Bn(x.id,t):await async function(e,t){return kn.from("crm_companies").insert([Oe(Oe({},t),{},{organization_id:e})])}(i,t),U(),B()},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsxs)("div",{className:"text-lg font-medium text-gray-900",children:[x?"Edit":"Add"," Customer"]}),(0,Cn.jsx)("button",{type:"button",onClick:U,className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Name",value:z.name,onChange:e=>F(t=>Oe(Oe({},t),{},{name:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Industry",value:z.industry,onChange:e=>F(t=>Oe(Oe({},t),{},{industry:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Size",value:z.size,onChange:e=>F(t=>Oe(Oe({},t),{},{size:e.target.value}))}),(0,Cn.jsxs)("div",{className:"relative flex",children:[(0,Cn.jsx)("span",{className:"inline-flex items-center px-3 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 rounded-l",children:"https://"}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-r focus:outline-none",placeholder:"example.com",value:z.website.replace(/^https?:\/\//,""),onChange:e=>F(t=>Oe(Oe({},t),{},{website:e.target.value.replace(/^https?:\/\//,"")})),style:{borderLeft:"none"}})]}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Phone",value:z.phone,onChange:e=>F(t=>Oe(Oe({},t),{},{phone:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Address",value:z.address,onChange:e=>F(t=>Oe(Oe({},t),{},{address:e.target.value}))}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:z.status,onChange:e=>F(t=>Oe(Oe({},t),{},{status:e.target.value})),children:[(0,Cn.jsx)("option",{value:"active",children:"Active"}),(0,Cn.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Cn.jsx)("option",{value:"prospect",children:"Prospect"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:U,className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded shadow hover:bg-purple-700",children:"Save"})]})]})}),g&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e=>{e.target===e.currentTarget&&K()},children:(0,Cn.jsxs)("div",{className:"absolute top-0 right-0 h-full w-11/12 max-w-2xl bg-white shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Company Details"}),(0,Cn.jsx)("button",{onClick:K,className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsxs)("div",{className:"h-16 w-16 flex items-center justify-center",children:[g.website&&(0,Cn.jsx)("img",{src:V(g.website),alt:"favicon",className:"w-8 h-8 rounded"}),!g.website&&(0,Cn.jsx)(Su,{className:"h-8 w-8 text-blue-600"})]}),(0,Cn.jsxs)("div",{className:"flex-1",children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:g.name}),(0,Cn.jsx)("p",{className:"text-sm text-gray-600",children:g.industry}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:g.phone})]})]})]}),(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Cn.jsxs)("button",{onClick:()=>I("contacts"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("contacts"===E?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(Iu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Contacts"})]}),(0,Cn.jsxs)("button",{onClick:()=>I("details"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("details"===E?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(Su,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Details"})]}),(0,Cn.jsxs)("button",{onClick:()=>I("activities"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("activities"===E?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(ys,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Activities"})]}),(0,Cn.jsxs)("button",{onClick:()=>I("notes"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("notes"===E?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(zu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Notes"})]})]})}),(0,Cn.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:["contacts"===E&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Company Contacts"}),c.length>0?(0,Cn.jsx)("div",{className:"space-y-2",children:c.map(e=>{var t,r,n;return(0,Cn.jsxs)("div",{onClick:t=>Z(e,t),className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,Cn.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:[null===(t=e.first_name)||void 0===t?void 0:t[0],null===(r=e.last_name)||void 0===r?void 0:r[0]]})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(W(e.status)),children:e.status}),(0,Cn.jsx)("div",{className:"flex items-center",children:(0,Cn.jsx)("span",{className:"text-sm font-medium ".concat((n=e.lead_score,n>=80?"text-green-600":n>=60?"text-yellow-600":n>=40?"text-orange-600":"text-red-600")),children:e.lead_score||0})})]}),(0,Cn.jsx)("button",{className:"menu-button p-1 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",onClick:e=>(e=>{e.stopPropagation()})(e),children:(0,Cn.jsx)(Lu,{className:"h-4 w-4"})})]})]},e.id)})}):(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(Iu,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No contacts for this company"})]})]}),"details"===E&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Company Details"}),O?(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("button",{onClick:te,className:"px-3 py-1 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"}),(0,Cn.jsx)("button",{onClick:re,className:"px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"})]}):(0,Cn.jsx)("button",{onClick:ee,className:"px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Edit"})]}),(0,Cn.jsxs)("div",{className:"space-y-2",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Company Name"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsx)("input",{type:"text",value:g.name||"",onChange:e=>b(Oe(Oe({},g),{},{name:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:g.name||"Not set"})})})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Industry"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsx)("input",{type:"text",value:g.industry||"",onChange:e=>b(Oe(Oe({},g),{},{industry:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:g.industry||"Not set"})})})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Size"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsx)("input",{type:"text",value:g.size||"",onChange:e=>b(Oe(Oe({},g),{},{size:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:g.size||"Not set"})})})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Website"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsx)("input",{type:"url",value:g.website||"",onChange:e=>b(Oe(Oe({},g),{},{website:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"https://example.com"}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:g.website?(0,Cn.jsx)("a",{href:g.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:g.website}):"Not set"})})})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Phone"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsx)("input",{type:"tel",value:g.phone||"",onChange:e=>b(Oe(Oe({},g),{},{phone:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:g.phone||"Not set"})})})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Address"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsx)("textarea",{value:g.address||"",onChange:e=>b(Oe(Oe({},g),{},{address:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",rows:2}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:g.address||"Not set"})})})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700 min-w-[120px]",children:"Status"}),(0,Cn.jsx)("div",{className:"flex-1 ml-4",children:O?(0,Cn.jsxs)("select",{value:g.status||"active",onChange:e=>b(Oe(Oe({},g),{},{status:e.target.value})),className:"flex-1 px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,Cn.jsx)("option",{value:"active",children:"Active"}),(0,Cn.jsx)("option",{value:"inactive",children:"Inactive"}),(0,Cn.jsx)("option",{value:"prospect",children:"Prospect"})]}):(0,Cn.jsx)("div",{className:"flex-1 px-3 py-1 bg-gray-100 rounded-md",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(H(g.status||"active")),children:g.status||"active"})})})]})]})]}),"activities"===E&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Activities"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(ys,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No activities yet"})]})]}),"notes"===E&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notes"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(zu,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No notes yet"})]})]})]}),(0,Cn.jsx)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:(0,Cn.jsx)("button",{onClick:()=>q(g.id),className:"px-4 py-2 text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 transition-colors",children:"Delete Company"})})]})}),y&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e=>{e.target===e.currentTarget&&Y()},children:(0,Cn.jsxs)("div",{className:"absolute top-0 right-0 h-full w-11/12 max-w-2xl bg-white shadow-2xl flex flex-col",children:[(0,Cn.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Details"}),(0,Cn.jsx)("button",{onClick:Y,className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsx)("div",{className:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center",children:(0,Cn.jsxs)("span",{className:"text-xl font-medium text-blue-600",children:[null===(r=y.first_name)||void 0===r?void 0:r[0],null===(n=y.last_name)||void 0===n?void 0:n[0]]})}),(0,Cn.jsxs)("div",{className:"flex-1",children:[(0,Cn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[y.first_name," ",y.last_name]}),(0,Cn.jsx)("p",{className:"text-sm text-gray-600",children:null===g||void 0===g?void 0:g.name}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:y.email})]})]})]}),(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,Cn.jsxs)("button",{onClick:()=>T("communication"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("communication"===P?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(Js,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Communication"})]}),(0,Cn.jsxs)("button",{onClick:()=>T("details"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("details"===P?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(Iu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Details"})]}),(0,Cn.jsxs)("button",{onClick:()=>T("notes"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("notes"===P?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(zu,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Notes"})]}),(0,Cn.jsxs)("button",{onClick:()=>T("activities"),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat("activities"===P?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Cn.jsx)(ys,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Activities"})]})]})}),(0,Cn.jsxs)("div",{className:"flex-1 p-6 overflow-y-auto",children:["communication"===P&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Communication"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(Js,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No communication history yet"})]})]}),"details"===P&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Details"}),O?(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("button",{onClick:te,className:"px-3 py-1 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Save"}),(0,Cn.jsx)("button",{onClick:re,className:"px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"})]}):(0,Cn.jsx)("button",{onClick:ee,className:"px-3 py-1 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Edit"})]}),(0,Cn.jsxs)("div",{className:"space-y-2",children:[(0,Cn.jsx)(ne,{label:"First Name",value:y.first_name,field:"first_name"}),(0,Cn.jsx)(ne,{label:"Last Name",value:y.last_name,field:"last_name"}),(0,Cn.jsx)(ne,{label:"Email",value:y.email,field:"email",type:"email"}),(0,Cn.jsx)(ne,{label:"Phone",value:y.phone,field:"phone",type:"tel"}),(0,Cn.jsx)(ne,{label:"Position",value:y.position,field:"position"}),(0,Cn.jsx)(ne,{label:"Status",value:y.status,field:"status",type:"select",options:[{value:"prospect",label:"Prospect"},{value:"lead",label:"Lead"},{value:"customer",label:"Customer"},{value:"inactive",label:"Inactive"}]}),(0,Cn.jsx)(ne,{label:"Lead Score",value:y.lead_score,field:"lead_score",type:"number"})]})]}),"notes"===P&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notes"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(zu,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No notes yet"})]})]}),"activities"===P&&(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Activities"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,Cn.jsx)(ys,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No activities yet"})]})]})]}),(0,Cn.jsx)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:(0,Cn.jsx)("button",{onClick:()=>{d(e=>e.filter(e=>e.id!==y.id)),Y()},className:"px-4 py-2 text-red-700 bg-white border border-red-300 rounded-md hover:bg-red-50 transition-colors",children:"Delete Contact"})})]})})]}),(0,Cn.jsx)(Wu,{isOpen:R,onClose:()=>M(!1)})]})}const Gu=[{id:"customers",name:"Customers",description:"Manage all your customers and contacts",icon:ps,color:"bg-blue-500"},{id:"pipeline",name:"Pipeline",description:"Track deals and sales progress",icon:Nu,color:"bg-green-500"}],$u=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,metrics:!1,activities:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({navigation:!0,data:!1,permissions:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"CRM Dashboard Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Dashboard Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The CRM Dashboard provides a comprehensive view of your sales performance and customer relationships. Key metrics include total customers, active deals, total pipeline value, and conversion rates."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("metrics"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Understanding Metrics"}),i.metrics?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.metrics&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Total Customers:"})," Number of companies in your CRM database"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Active Deals:"})," Deals currently in your sales pipeline"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Total Value:"})," Combined value of all deals in your pipeline"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Conversion Rate:"})," Percentage of deals that progress through your pipeline"]})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("activities"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Recent Activities"}),i.activities?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.activities&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'The Recent Activities section shows the latest updates and interactions in your CRM. Activities include new deals, contact updates, company changes, and general CRM activities. Click "View all activities" to see a complete history.'})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("navigation"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Navigation"}),c.navigation?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.navigation&&(0,Cn.jsxs)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:[(0,Cn.jsx)("p",{children:"Use the Quick Actions cards to navigate to different sections:"}),(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Customers:"})," Manage your customer database and contacts"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Pipeline:"})," Track deals and sales progress through stages"]})]}),(0,Cn.jsx)("p",{children:"You can also use the main navigation menu to access other CRM features."})]})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("data"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Data Management"}),c.data?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.data&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"All CRM data is automatically saved and synchronized across your organization. Changes to companies, contacts, and deals are reflected immediately in the dashboard. Use the search and filter options in each section to find specific information quickly."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("permissions"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Permissions & Access"}),c.permissions?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.permissions&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"CRM access is controlled by your organization's user permissions. Team members can view and edit CRM data based on their assigned roles. Contact your administrator to modify user permissions or access levels."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your CRM assistant. I can help you improve your sales pipeline, organize contacts, and optimize your customer relationships."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How can I improve my sales pipeline conversion rate?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Focus on lead qualification, follow-up timing, and deal stage progression. Consider implementing automated reminders and tracking key metrics like time-in-stage."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What's the best way to organize my customer contacts?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Group contacts by company, use tags for different roles, and maintain consistent communication history. Regular data cleanup helps keep your CRM organized."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about CRM best practices...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null};function Ku(e){let{onSection:r}=e;const{currentOrganization:n}=_n(),s=null===n||void 0===n?void 0:n.organization_id,[a,i]=(0,t.useState)({customers:0,deals:0,value:0,activeDeals:0}),[l,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s&&(o(!0),Promise.all([Fn(s),Hn(s),Vn(s)]).then(e=>{var t,r;let[n,s,a]=e;const l=(null===(t=n.data)||void 0===t?void 0:t.length)||0,o=(null===(r=s.data)||void 0===r?void 0:r.length)||0,c=(s.data||[]).reduce((e,t)=>e+(parseFloat(t.value)||0),0),u=(s.data||[]).filter(e=>"closed"!==e.stage).length;i({customers:l,deals:o,value:c,activeDeals:u}),d(a||[])}).finally(()=>o(!1)))},[s]);const p=e=>{switch(e){case"deal":return(0,Cn.jsx)(ds,{className:"h-4 w-4"});case"contact":return(0,Cn.jsx)(ps,{className:"h-4 w-4"});case"company":return(0,Cn.jsx)(fs,{className:"h-4 w-4"});default:return(0,Cn.jsx)(ys,{className:"h-4 w-4"})}},h=e=>{switch(e){case"deal":return"text-green-600 bg-green-100";case"contact":return"text-blue-600 bg-blue-100";case"company":return"text-purple-600 bg-purple-100";case"activity":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"CRM Dashboard"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your customer relationships, track deals, and monitor sales performance."})]}),(0,Cn.jsxs)("button",{onClick:()=>m(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),u&&(0,Cn.jsx)($u,{isOpen:u,onClose:()=>m(!1)}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Cn.jsx)(ps,{className:"h-6 w-6 text-blue-600"})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Customers"}),(0,Cn.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:l?"...":a.customers})]})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Cn.jsx)(Nu,{className:"h-6 w-6 text-green-600"})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Active Deals"}),(0,Cn.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:l?"...":a.activeDeals})]})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Cn.jsx)(ds,{className:"h-6 w-6 text-purple-600"})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Total Value"}),(0,Cn.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:l?"...":"\xa3".concat(a.value.toLocaleString())})]})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,Cn.jsx)(fs,{className:"h-6 w-6 text-orange-600"})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"Conversion Rate"}),(0,Cn.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:l?"...":a.deals>0?"".concat(Math.round(a.activeDeals/a.deals*100),"%"):"0%"})]})]})})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Cn.jsx)("div",{className:"lg:col-span-2",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),(0,Cn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Gu.map(e=>{const t=e.icon;return(0,Cn.jsxs)("button",{onClick:()=>r&&r(e.id),className:"block bg-gray-50 rounded-lg hover:bg-gray-100 transition p-6 border border-gray-200 hover:border-gray-300 text-left w-full group",children:[(0,Cn.jsxs)("div",{className:"flex items-center mb-3",children:[(0,Cn.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color.replace("bg-","bg-").replace("-500","-100")),children:(0,Cn.jsx)(t,{className:"h-6 w-6 ".concat(e.color.replace("bg-","text-"))})}),(0,Cn.jsxs)("div",{className:"ml-3",children:[(0,Cn.jsx)("div",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,Cn.jsxs)("div",{className:"flex items-center text-sm text-gray-600 group-hover:text-gray-800",children:[(0,Cn.jsx)("span",{children:"Get started"}),(0,Cn.jsx)(Sl,{className:"h-4 w-4 ml-1"})]})]},e.id)})})]})}),(0,Cn.jsx)("div",{className:"lg:col-span-1",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activities"}),(0,Cn.jsx)("div",{className:"space-y-4",children:c.length>0?c.map(e=>(0,Cn.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 p-2 rounded-full ".concat(h(e.type)),children:p(e.type)}),(0,Cn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Cn.jsx)("p",{className:"text-sm text-gray-900",children:e.message}),(0,Cn.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:e.time}),e.value&&(0,Cn.jsx)("span",{className:"text-xs font-medium text-green-600",children:e.value})]})]})]},e.id)):(0,Cn.jsxs)("div",{className:"text-center py-8",children:[(0,Cn.jsx)(ys,{className:"mx-auto h-12 w-12 text-gray-300 mb-3"}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"No recent activities"}),(0,Cn.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Activities will appear here as you work"})]})}),(0,Cn.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,Cn.jsx)("button",{className:"text-sm text-purple-600 hover:text-purple-800 font-medium",children:"View all activities \u2192"})})]})})]})]})}const Yu=["title","titleId"];function Zu(e,r){let{title:n,titleId:s}=e,a=Yn(e,Yu);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M5.75 2a.75.75 0 0 1 .75.75V4h7V2.75a.75.75 0 0 1 1.5 0V4h.25A2.75 2.75 0 0 1 18 6.75v8.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25v-8.5A2.75 2.75 0 0 1 4.75 4H5V2.75A.75.75 0 0 1 5.75 2Zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75Z",clipRule:"evenodd"}))}const Ju=t.forwardRef(Zu);function Qu(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Xu=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),em=()=>Math.random().toString(36).substring(7).split("").join("."),tm={INIT:"@@redux/INIT".concat(em()),REPLACE:"@@redux/REPLACE".concat(em()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(em())};function rm(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function nm(e,t,r){if("function"!==typeof e)throw new Error(Qu(2));if("function"===typeof t&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(Qu(0));if("function"===typeof t&&"undefined"===typeof r&&(r=t,t=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(Qu(1));return r(nm)(e,t)}let n=e,s=t,a=new Map,i=a,l=0,o=!1;function c(){i===a&&(i=new Map,a.forEach((e,t)=>{i.set(t,e)}))}function d(){if(o)throw new Error(Qu(3));return s}function u(e){if("function"!==typeof e)throw new Error(Qu(4));if(o)throw new Error(Qu(5));let t=!0;c();const r=l++;return i.set(r,e),function(){if(t){if(o)throw new Error(Qu(6));t=!1,c(),i.delete(r),a=null}}}function m(e){if(!rm(e))throw new Error(Qu(7));if("undefined"===typeof e.type)throw new Error(Qu(8));if("string"!==typeof e.type)throw new Error(Qu(17));if(o)throw new Error(Qu(9));try{o=!0,s=n(s,e)}finally{o=!1}return(a=i).forEach(e=>{e()}),e}m({type:tm.INIT});return{dispatch:m,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Qu(10));n=e,m({type:tm.REPLACE})},[Xu]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Qu(11));function r(){const e=t;e.next&&e.next(d())}r();return{unsubscribe:e(r)}},[Xu](){return this}}}}}function sm(e,t){return function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t(e.apply(this,n))}}function am(e,t){if("function"===typeof e)return sm(e,t);if("object"!==typeof e||null===e)throw new Error(Qu(16));const r={};for(const n in e){const s=e[n];"function"===typeof s&&(r[n]=sm(s,t))}return r}function im(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}const lm=["initMapStateToProps","initMapDispatchToProps","initMergeProps"],om=["reactReduxForwardedRef"];var cm=t.version.startsWith("19"),dm=Symbol.for(cm?"react.transitional.element":"react.element"),um=Symbol.for("react.portal"),mm=Symbol.for("react.fragment"),pm=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),xm=Symbol.for("react.consumer"),fm=Symbol.for("react.context"),gm=Symbol.for("react.forward_ref"),bm=Symbol.for("react.suspense"),ym=Symbol.for("react.suspense_list"),vm=Symbol.for("react.memo"),jm=Symbol.for("react.lazy"),wm=gm,Nm=vm;function km(e){if("object"===typeof e&&null!==e){const{$$typeof:t}=e;switch(t){case dm:switch(e=e.type){case mm:case hm:case pm:case bm:case ym:return e;default:switch(e=e&&e.$$typeof){case fm:case gm:case jm:case vm:case xm:return e;default:return t}}case um:return t}}}function Cm(e,t,r,n,s){let a,i,l,o,c,{areStatesEqual:d,areOwnPropsEqual:u,areStatePropsEqual:m}=s,p=!1;function h(s,p){const h=!u(p,i),x=!d(s,a,p,i);return a=s,i=p,h&&x?(l=e(a,i),t.dependsOnOwnProps&&(o=t(n,i)),c=r(l,o,i),c):h?(e.dependsOnOwnProps&&(l=e(a,i)),t.dependsOnOwnProps&&(o=t(n,i)),c=r(l,o,i),c):x?function(){const t=e(a,i),n=!m(t,l);return l=t,n&&(c=r(l,o,i)),c}():c}return function(s,d){return p?h(s,d):(a=s,i=d,l=e(a,i),o=t(n,i),c=r(l,o,i),p=!0,c)}}function Sm(e){return function(t){const r=e(t);function n(){return r}return n.dependsOnOwnProps=!1,n}}function _m(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Em(e,t){return function(t,r){let{displayName:n}=r;const s=function(e,t){return s.dependsOnOwnProps?s.mapToProps(e,t):s.mapToProps(e,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(t,r){s.mapToProps=e,s.dependsOnOwnProps=_m(e);let n=s(t,r);return"function"===typeof n&&(s.mapToProps=n,s.dependsOnOwnProps=_m(n),n=s(t,r)),n},s}}function Im(e,t){return(r,n)=>{throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(n.wrappedComponentName,"."))}}function Pm(e,t,r){return Oe(Oe(Oe({},r),e),t)}function Tm(e){e()}var Dm={notify(){},get:()=>[]};function Am(e,t){let r,n=Dm,s=0,a=!1;function i(){c.onStateChange&&c.onStateChange()}function l(){s++,r||(r=t?t.addNestedSub(i):e.subscribe(i),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Tm(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){n&&null!==e&&(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}())}function o(){s--,r&&0===s&&(r(),r=void 0,n.clear(),n=Dm)}const c={addNestedSub:function(e){l();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),o())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:i,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,l())},tryUnsubscribe:function(){a&&(a=!1,o())},getListeners:()=>n};return c}var Om=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),Lm=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),Rm=(()=>Om||Lm?t.useLayoutEffect:t.useEffect)();function Mm(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function zm(e,t){if(Mm(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!Mm(e[r[s]],t[r[s]]))return!1;return!0}var Fm={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Bm={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Um={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qm={[wm]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[Nm]:Um};function Hm(e){return km(e)===vm?Um:qm[e.$$typeof]||Fm}var Wm=Object.defineProperty,Vm=Object.getOwnPropertyNames,Gm=Object.getOwnPropertySymbols,$m=Object.getOwnPropertyDescriptor,Km=Object.getPrototypeOf,Ym=Object.prototype;function Zm(e,t){if("string"!==typeof t){if(Ym){const r=Km(t);r&&r!==Ym&&Zm(e,r)}let r=Vm(t);Gm&&(r=r.concat(Gm(t)));const n=Hm(e),s=Hm(t);for(let a=0;a<r.length;++a){const i=r[a];if(!Bm[i]&&(!s||!s[i])&&(!n||!n[i])){const r=$m(t,i);try{Wm(e,i,r)}catch(Qc){}}}}return e}var Jm=Symbol.for("react-redux-context"),Qm="undefined"!==typeof globalThis?globalThis:{};function Xm(){var e;if(!t.createContext)return{};const r=null!==(e=Qm[Jm])&&void 0!==e?e:Qm[Jm]=new Map;let n=r.get(t.createContext);return n||(n=t.createContext(null),r.set(t.createContext,n)),n}var ep=Xm(),tp=[null,null];function rp(e,t,r,n,s,a){e.current=n,r.current=!1,s.current&&(s.current=null,a())}function np(e,t){return e===t}var sp=function(e,r,n){let{pure:s,areStatesEqual:a=np,areOwnPropsEqual:i=zm,areStatePropsEqual:l=zm,areMergedPropsEqual:o=zm,forwardRef:c=!1,context:d=ep}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const u=d,m=function(e){return e?"function"===typeof e?Em(e):Im(e,"mapStateToProps"):Sm(()=>({}))}(e),p=function(e){return e&&"object"===typeof e?Sm(t=>function(e,t){const r={};for(const n in e){const s=e[n];"function"===typeof s&&(r[n]=function(){return t(s(...arguments))})}return r}(e,t)):e?"function"===typeof e?Em(e):Im(e,"mapDispatchToProps"):Sm(e=>({dispatch:e}))}(r),h=function(e){return e?"function"===typeof e?function(e){return function(t,r){let n,{displayName:s,areMergedPropsEqual:a}=r,i=!1;return function(t,r,s){const l=e(t,r,s);return i?a(l,n)||(n=l):(i=!0,n=l),n}}}(e):Im(e,"mergeProps"):()=>Pm}(n),x=Boolean(e);return e=>{const r=e.displayName||e.name||"Component",n="Connect(".concat(r,")"),s={shouldHandleStateChanges:x,displayName:n,wrappedComponentName:r,WrappedComponent:e,initMapStateToProps:m,initMapDispatchToProps:p,initMergeProps:h,areStatesEqual:a,areStatePropsEqual:l,areOwnPropsEqual:i,areMergedPropsEqual:o};function d(r){const[n,a,i]=t.useMemo(()=>{const{reactReduxForwardedRef:e}=r,t=Yn(r,om);return[r.context,e,t]},[r]),l=t.useMemo(()=>{let e=u;return null!==n&&void 0!==n&&n.Consumer,e},[n,u]),o=t.useContext(l),c=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch),d=Boolean(o)&&Boolean(o.store);const m=c?r.store:o.store,p=d?o.getServerState:m.getState,h=t.useMemo(()=>function(e,t){let{initMapStateToProps:r,initMapDispatchToProps:n,initMergeProps:s}=t,a=Yn(t,lm);return Cm(r(e,a),n(e,a),s(e,a),e,a)}(m.dispatch,s),[m]),[f,g]=t.useMemo(()=>{if(!x)return tp;const e=Am(m,c?void 0:o.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[m,c,o]),b=t.useMemo(()=>c?o:Oe(Oe({},o),{},{subscription:f}),[c,o,f]),y=t.useRef(void 0),v=t.useRef(i),j=t.useRef(void 0),w=t.useRef(!1),N=t.useRef(!1),k=t.useRef(void 0);Rm(()=>(N.current=!0,()=>{N.current=!1}),[]);const C=t.useMemo(()=>()=>j.current&&i===v.current?j.current:h(m.getState(),i),[m,i]),S=t.useMemo(()=>e=>f?function(e,t,r,n,s,a,i,l,o,c,d){if(!e)return()=>{};let u=!1,m=null;const p=()=>{if(u||!l.current)return;const e=t.getState();let r,p;try{r=n(e,s.current)}catch(Qc){p=Qc,m=Qc}p||(m=null),r===a.current?i.current||c():(a.current=r,o.current=r,i.current=!0,d())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(u=!0,r.tryUnsubscribe(),r.onStateChange=null,m)throw m}}(x,m,f,h,v,y,w,N,j,g,e):()=>{},[f]);var _,E,I;let P;_=rp,E=[v,y,w,i,j,g],Rm(()=>_(...E),I);try{P=t.useSyncExternalStore(S,C,p?()=>h(p(),i):C)}catch(D){throw k.current&&(D.message+="\nThe error may be correlated with this previous error:\n".concat(k.current.stack,"\n\n")),D}Rm(()=>{k.current=void 0,j.current=void 0,y.current=P});const T=t.useMemo(()=>t.createElement(e,Oe(Oe({},P),{},{ref:a})),[a,e,P]);return t.useMemo(()=>x?t.createElement(l.Provider,{value:b},T):T,[l,T,b])}const f=t.memo(d);if(f.WrappedComponent=e,f.displayName=d.displayName=n,c){const r=t.forwardRef(function(e,r){return t.createElement(f,Oe(Oe({},e),{},{reactReduxForwardedRef:r}))});return r.displayName=n,r.WrappedComponent=e,Zm(r,e)}return Zm(f,e)}};var ap=function(e){const{children:r,context:n,serverState:s,store:a}=e,i=t.useMemo(()=>{const e=Am(a);return{store:a,subscription:e,getServerState:s?()=>s:void 0}},[a,s]),l=t.useMemo(()=>a.getState(),[a]);Rm(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,l]);const o=n||ep;return t.createElement(o.Provider,{value:i},r)};var ip="Invariant failed";var lp=function(e){var t=e.top,r=e.right,n=e.bottom,s=e.left;return{top:t,right:r,bottom:n,left:s,width:r-s,height:n-t,x:s,y:t,center:{x:(r+s)/2,y:(n+t)/2}}},op=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},cp=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},dp={top:0,right:0,bottom:0,left:0},up=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?dp:r,s=e.border,a=void 0===s?dp:s,i=e.padding,l=void 0===i?dp:i,o=lp(op(t,n)),c=lp(cp(t,a)),d=lp(cp(c,l));return{marginBox:o,borderBox:lp(t),paddingBox:c,contentBox:d,margin:n,border:a,padding:l}},mp=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&function(e){if(!e)throw new Error(ip)}(!1),r},pp=function(e,t){var r,n,s=e.borderBox,a=e.border,i=e.margin,l=e.padding,o=(n=t,{top:(r=s).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return up({borderBox:o,border:a,margin:i,padding:l})},hp=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),pp(e,t)},xp=function(e,t){var r={top:mp(t.marginTop),right:mp(t.marginRight),bottom:mp(t.marginBottom),left:mp(t.marginLeft)},n={top:mp(t.paddingTop),right:mp(t.paddingRight),bottom:mp(t.paddingBottom),left:mp(t.paddingLeft)},s={top:mp(t.borderTopWidth),right:mp(t.borderRightWidth),bottom:mp(t.borderBottomWidth),left:mp(t.borderLeftWidth)};return up({borderBox:e,margin:r,padding:n,border:s})},fp=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return xp(t,r)};const gp=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];t=s,r||(r=requestAnimationFrame(function(){r=null,e.apply(void 0,t)}))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function bp(){return bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bp.apply(null,arguments)}function yp(e,t){}yp.bind(null,"warn"),yp.bind(null,"error");function vp(){}function jp(e,t,r){const n=t.map(t=>{const n=function(e,t){return Oe(Oe({},e),t)}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}});return function(){n.forEach(e=>{e()})}}const wp="Invariant failed";class Np extends Error{}function kp(e,t){throw new Np(wp)}Np.prototype.toString=function(){return this.message};class Cp extends t.Component{constructor(){super(...arguments),this.callbacks=null,this.unbind=vp,this.onWindowError=e=>{const t=this.getCallbacks();t.isDragging()&&t.tryAbort();e.error instanceof Np&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=jp(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(!(e instanceof Np))throw e;this.setState({})}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Sp=e=>e+1,_p=(e,t)=>{const r=e.droppableId===t.droppableId,n=Sp(e.index),s=Sp(t.index);return r?"\n      You have moved the item from position ".concat(n,"\n      to position ").concat(s,"\n    "):"\n    You have moved the item from position ".concat(n,"\n    in list ").concat(e.droppableId,"\n    to list ").concat(t.droppableId,"\n    in position ").concat(s,"\n  ")},Ep=(e,t,r)=>t.droppableId===r.droppableId?"\n      The item ".concat(e,"\n      has been combined with ").concat(r.draggableId):"\n      The item ".concat(e,"\n      in list ").concat(t.droppableId,"\n      has been combined with ").concat(r.draggableId,"\n      in list ").concat(r.droppableId,"\n    "),Ip=e=>"\n  The item has returned to its starting position\n  of ".concat(Sp(e.index),"\n"),Pp="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",Tp=e=>"\n  You have lifted an item in position ".concat(Sp(e.source.index),"\n"),Dp=e=>{const t=e.destination;if(t)return _p(e.source,t);const r=e.combine;return r?Ep(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Ap=e=>{if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      ".concat(Ip(e.source),"\n    ");const t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      ".concat(_p(e.source,t),"\n    "):r?"\n      You have dropped the item.\n      ".concat(Ep(e.draggableId,e.source,r),"\n    "):"\n    The item has been dropped while not over a drop area.\n    ".concat(Ip(e.source),"\n  ")};function Op(e,t){return e===t||!(!Number.isNaN(e)||!Number.isNaN(t))}function Lp(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Op(e[r],t[r]))return!1;return!0}function Rp(e,r){const n=(0,t.useState)(()=>({inputs:r,result:e()}))[0],s=(0,t.useRef)(!0),a=(0,t.useRef)(n),i=s.current||Boolean(r&&a.current.inputs&&Lp(r,a.current.inputs))?a.current:{inputs:r,result:e()};return(0,t.useEffect)(()=>{s.current=!1,a.current=i},[i]),i.result}function Mp(e,t){return Rp(()=>e,t)}const zp={x:0,y:0},Fp=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Bp=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Up=(e,t)=>e.x===t.x&&e.y===t.y,qp=e=>({x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}),Hp=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return"x"===e?{x:t,y:r}:{x:r,y:t}},Wp=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Vp=(e,t)=>Math.min(...t.map(t=>Wp(e,t))),Gp=e=>t=>({x:e(t.x),y:e(t.y)});const $p=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Kp=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Yp=(e,t)=>t&&t.shouldClipSubject?((e,t)=>{const r=lp({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r})(t.pageMarginBox,e):lp(e);var Zp=e=>{let{page:t,withPlaceholder:r,axis:n,frame:s}=e;const a=((e,t)=>t?$p(e,t.scroll.diff.displacement):e)(t.marginBox,s),i=((e,t,r)=>r&&r.increasedBy?Oe(Oe({},e),{},{[t.end]:e[t.end]+r.increasedBy[t.line]}):e)(a,n,r);return{page:t,withPlaceholder:r,active:Yp(i,s)}},Jp=(e,t)=>{e.frame||kp();const r=e.frame,n=Bp(t,r.scroll.initial),s=qp(n),a=Oe(Oe({},r),{},{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}}),i=Zp({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return Oe(Oe({},e),{},{frame:a,subject:i})};function Qp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lp,r=null;function n(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;const i=e.apply(this,s);return r={lastResult:i,lastArgs:s,lastThis:this},i}return n.clear=function(){r=null},n}const Xp=Qp(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),eh=Qp(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),th=Qp(e=>Object.values(e)),rh=Qp(e=>Object.values(e));var nh=Qp((e,t)=>{const r=rh(t).filter(t=>e===t.descriptor.droppableId).sort((e,t)=>e.descriptor.index-t.descriptor.index);return r});function sh(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function ah(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var ih=Qp((e,t)=>t.filter(t=>t.descriptor.id!==e.descriptor.id)),lh=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const oh={point:zp,value:0},ch={invisible:{},visible:{},all:[]},dh={displaced:ch,displacedBy:oh,at:null};var uh=(e,t)=>r=>e<=r&&r<=t,mh=e=>{const t=uh(e.top,e.bottom),r=uh(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const s=t(n.top)||t(n.bottom),a=r(n.left)||r(n.right);if(s&&a)return!0;const i=n.top<e.top&&n.bottom>e.bottom,l=n.left<e.left&&n.right>e.right;if(i&&l)return!0;return i&&a||l&&s}},ph=e=>{const t=uh(e.top,e.bottom),r=uh(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)};const hh={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xh={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};const fh=e=>{let{target:t,destination:r,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:a}=e;const i=s?((e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:zp;return $p(e,r)})(t,r):t;return((e,t,r)=>!!t.subject.active&&r(t.subject.active)(e))(i,r,a)&&((e,t,r)=>r(t)(e))(i,n,a)},gh=e=>fh(Oe(Oe({},e),{},{isVisibleThroughFrameFn:ph}));function bh(e){let{afterDragging:t,destination:r,displacedBy:n,viewport:s,forceShouldAnimate:a,last:i}=e;return t.reduce(function(e,t){const l=function(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return lp(op(r,n))}(t,n),o=t.descriptor.id;e.all.push(o);if(!fh(Oe(Oe({},{target:l,destination:r,viewport:s,withDroppableDisplacement:!0}),{},{isVisibleThroughFrameFn:mh})))return e.invisible[t.descriptor.id]=!0,e;const c=((e,t,r)=>{if("boolean"===typeof r)return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const a=s[e];return!a||a.shouldAnimate})(o,i,a),d={draggableId:o,shouldAnimate:c};return e.visible[o]=d,e},{all:[],visible:{},invisible:{}})}function yh(e){let{insideDestination:t,inHomeList:r,displacedBy:n,destination:s}=e;const a=function(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:ch,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function vh(e){let{draggable:t,insideDestination:r,destination:n,viewport:s,displacedBy:a,last:i,index:l,forceShouldAnimate:o}=e;const c=lh(t,n);if(null==l)return yh({insideDestination:r,inHomeList:c,displacedBy:a,destination:n});const d=r.find(e=>e.descriptor.index===l);if(!d)return yh({insideDestination:r,inHomeList:c,displacedBy:a,destination:n});const u=ih(t,r),m=r.indexOf(d);return{displaced:bh({afterDragging:u.slice(m),destination:n,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:o}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:l}}}}function jh(e,t){return Boolean(t.effected[e])}var wh=e=>{let{isMovingForward:t,isInHomeList:r,draggable:n,draggables:s,destination:a,insideDestination:i,previousImpact:l,viewport:o,afterCritical:c}=e;const d=l.at;if(d||kp(),"REORDER"===d.type){const e=(e=>{let{isMovingForward:t,isInHomeList:r,insideDestination:n,location:s}=e;if(!n.length)return null;const a=s.index,i=t?a+1:a-1,l=n[0].descriptor.index,o=n[n.length-1].descriptor.index;return i<l||i>(r?o:o+1)?null:i})({isMovingForward:t,isInHomeList:r,location:d.destination,insideDestination:i});return null==e?null:vh({draggable:n,insideDestination:i,destination:a,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:e})}const u=(e=>{let{isMovingForward:t,destination:r,draggables:n,combine:s,afterCritical:a}=e;if(!r.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return jh(i,a)?t?l:l-1:t?l+1:l})({isMovingForward:t,destination:a,displaced:l.displaced,draggables:s,combine:d.combine,afterCritical:c});return null==u?null:vh({draggable:n,insideDestination:i,destination:a,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:u})},Nh=e=>{let{afterCritical:t,impact:r,draggables:n}=e;const s=ah(r);s||kp();const a=s.draggableId,i=n[a].page.borderBox.center,l=(e=>{let{displaced:t,afterCritical:r,combineWith:n,displacedBy:s}=e;const a=Boolean(t.visible[n]||t.invisible[n]);return jh(n,r)?a?zp:qp(s.point):a?s.point:zp})({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return Fp(i,l)};const kh=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Ch=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Sh=e=>{let{axis:t,moveRelativeTo:r,isMoving:n}=e;return Hp(t.line,r.marginBox[t.end]+kh(t,n),Ch(t,r.marginBox,n))},_h=e=>{let{axis:t,moveRelativeTo:r,isMoving:n}=e;return Hp(t.line,r.marginBox[t.start]-((e,t)=>t.margin[e.end]+t.borderBox[e.size]/2)(t,n),Ch(t,r.marginBox,n))};var Eh=e=>{let{impact:t,draggable:r,draggables:n,droppable:s,afterCritical:a}=e;const i=nh(s.descriptor.id,n),l=r.page,o=s.axis;if(!i.length)return(e=>{let{axis:t,moveInto:r,isMoving:n}=e;return Hp(t.line,r.contentBox[t.start]+kh(t,n),Ch(t,r.contentBox,n))})({axis:o,moveInto:s.page,isMoving:l});const{displaced:c,displacedBy:d}=t,u=c.all[0];if(u){const e=n[u];if(jh(u,a))return _h({axis:o,moveRelativeTo:e.page,isMoving:l});const t=pp(e.page,d.point);return _h({axis:o,moveRelativeTo:t,isMoving:l})}const m=i[i.length-1];if(m.descriptor.id===r.descriptor.id)return l.borderBox.center;if(jh(m.descriptor.id,a)){const e=pp(m.page,qp(a.displacedBy.point));return Sh({axis:o,moveRelativeTo:e,isMoving:l})}return Sh({axis:o,moveRelativeTo:m.page,isMoving:l})},Ih=(e,t)=>{const r=e.frame;return r?Fp(t,r.scroll.diff.displacement):t};var Ph=e=>{const t=(e=>{let{impact:t,draggable:r,droppable:n,draggables:s,afterCritical:a}=e;const i=r.page.borderBox.center,l=t.at;return n&&l?"REORDER"===l.type?Eh({impact:t,draggable:r,draggables:s,droppable:n,afterCritical:a}):Nh({impact:t,draggables:s,afterCritical:a}):i})(e),r=e.droppable;return r?Ih(r,t):t},Th=(e,t)=>{const r=Bp(t,e.scroll.initial),n=qp(r);return{frame:lp({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Dh(e,t){return e.map(e=>t[e])}var Ah=e=>{let{pageBorderBoxCenter:t,draggable:r,viewport:n}=e;const s=((e,t)=>Fp(e.scroll.diff.displacement,t))(n,t),a=Bp(s,r.page.borderBox.center);return Fp(r.client.borderBox.center,a)},Oh=e=>{let{draggable:t,destination:r,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:i=!1}=e;const l=Bp(n,t.page.borderBox.center),o={target:$p(t.page.borderBox,l),destination:r,withDroppableDisplacement:a,viewport:s};return i?(e=>{return fh(Oe(Oe({},e),{},{isVisibleThroughFrameFn:(t=e.destination.axis,e=>{const r=uh(e.top,e.bottom),n=uh(e.left,e.right);return e=>t===hh?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)})}));var t})(o):gh(o)},Lh=e=>{let{isMovingForward:t,draggable:r,destination:n,draggables:s,previousImpact:a,viewport:i,previousPageBorderBoxCenter:l,previousClientSelection:o,afterCritical:c}=e;if(!n.isEnabled)return null;const d=nh(n.descriptor.id,s),u=lh(r,n),m=(e=>{let{isMovingForward:t,draggable:r,destination:n,insideDestination:s,previousImpact:a}=e;if(!n.isCombineEnabled)return null;if(!sh(a))return null;function i(e){const t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return Oe(Oe({},a),{},{at:t})}const l=a.displaced.all,o=l.length?l[0]:null;if(t)return o?i(o):null;const c=ih(r,s);if(!o)return c.length?i(c[c.length-1].descriptor.id):null;const d=c.findIndex(e=>e.descriptor.id===o);-1===d&&kp();const u=d-1;return u<0?null:i(c[u].descriptor.id)})({isMovingForward:t,draggable:r,destination:n,insideDestination:d,previousImpact:a})||wh({isMovingForward:t,isInHomeList:u,draggable:r,draggables:s,destination:n,insideDestination:d,previousImpact:a,viewport:i,afterCritical:c});if(!m)return null;const p=Ph({impact:m,draggable:r,droppable:n,draggables:s,afterCritical:c});if(Oh({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})){return{clientSelection:Ah({pageBorderBoxCenter:p,draggable:r,viewport:i}),impact:m,scrollJumpRequest:null}}const h=Bp(p,l),x=(e=>{let{impact:t,viewport:r,destination:n,draggables:s,maxScrollChange:a}=e;const i=Th(r,Fp(r.scroll.current,a)),l=n.frame?Jp(n,Fp(n.frame.scroll.current,a)):n,o=t.displaced,c=bh({afterDragging:Dh(o.all,s),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:o,forceShouldAnimate:!1}),d=bh({afterDragging:Dh(o.all,s),destination:l,displacedBy:t.displacedBy,viewport:r.frame,last:o,forceShouldAnimate:!1}),u={},m={},p=[o,c,d];return o.all.forEach(e=>{const t=function(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}(e,p);t?m[e]=t:u[e]=!0}),Oe(Oe({},t),{},{displaced:{all:o.all,invisible:u,visible:m}})})({impact:m,viewport:i,destination:n,draggables:s,maxScrollChange:h});return{clientSelection:o,impact:x,scrollJumpRequest:h}};const Rh=e=>{const t=e.subject.active;return t||kp(),t};const Mh=(e,t)=>{const r=e.page.borderBox.center;return jh(e.descriptor.id,t)?Bp(r,t.displacedBy.point):r},zh=(e,t)=>{const r=e.page.borderBox;return jh(e.descriptor.id,t)?$p(r,qp(t.displacedBy.point)):r};var Fh=Qp(function(e,t){const r=t[e.line];return{value:r,point:Hp(e.line,r)}});const Bh=(e,t)=>Oe(Oe({},e),{},{scroll:Oe(Oe({},e.scroll),{},{max:t})}),Uh=(e,t,r)=>{const n=e.frame;lh(t,e)&&kp(),e.subject.withPlaceholder&&kp();const s=Fh(e.axis,t.displaceBy).point,a=((e,t,r)=>{const n=e.axis;if("virtual"===e.descriptor.mode)return Hp(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],a=nh(e.descriptor.id,r).reduce((e,t)=>e+t.client.marginBox[n.size],0)+t[n.line]-s;return a<=0?null:Hp(n.line,a)})(e,s,r),i={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const t=Zp({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return Oe(Oe({},e),{},{subject:t})}const l=a?Fp(n.scroll.max,a):n.scroll.max,o=Bh(n,l),c=Zp({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:o});return Oe(Oe({},e),{},{subject:c,frame:o})};var qh=e=>{let{isMovingForward:t,previousPageBorderBoxCenter:r,draggable:n,isOver:s,draggables:a,droppables:i,viewport:l,afterCritical:o}=e;const c=(e=>{let{isMovingForward:t,pageBorderBoxCenter:r,source:n,droppables:s,viewport:a}=e;const i=n.subject.active;if(!i)return null;const l=n.axis,o=uh(i[l.start],i[l.end]),c=th(s).filter(e=>e!==n).filter(e=>e.isEnabled).filter(e=>Boolean(e.subject.active)).filter(e=>mh(a.frame)(Rh(e))).filter(e=>{const r=Rh(e);return t?i[l.crossAxisEnd]<r[l.crossAxisEnd]:r[l.crossAxisStart]<i[l.crossAxisStart]}).filter(e=>{const t=Rh(e),r=uh(t[l.start],t[l.end]);return o(t[l.start])||o(t[l.end])||r(i[l.start])||r(i[l.end])}).sort((e,r)=>{const n=Rh(e)[l.crossAxisStart],s=Rh(r)[l.crossAxisStart];return t?n-s:s-n}).filter((e,t,r)=>Rh(e)[l.crossAxisStart]===Rh(r[0])[l.crossAxisStart]);if(!c.length)return null;if(1===c.length)return c[0];const d=c.filter(e=>uh(Rh(e)[l.start],Rh(e)[l.end])(r[l.line]));return 1===d.length?d[0]:d.length>1?d.sort((e,t)=>Rh(e)[l.start]-Rh(t)[l.start])[0]:c.sort((e,t)=>{const n=Vp(r,Kp(Rh(e))),s=Vp(r,Kp(Rh(t)));return n!==s?n-s:Rh(e)[l.start]-Rh(t)[l.start]})[0]})({isMovingForward:t,pageBorderBoxCenter:r,source:s,droppables:i,viewport:l});if(!c)return null;const d=nh(c.descriptor.id,a),u=(e=>{let{pageBorderBoxCenter:t,viewport:r,destination:n,insideDestination:s,afterCritical:a}=e;const i=s.filter(e=>gh({target:zh(e,a),destination:n,viewport:r.frame,withDroppableDisplacement:!0})).sort((e,r)=>{const s=Wp(t,Ih(n,Mh(e,a))),i=Wp(t,Ih(n,Mh(r,a)));return s<i?-1:i<s?1:e.descriptor.index-r.descriptor.index});return i[0]||null})({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:d,afterCritical:o}),m=(e=>{let{previousPageBorderBoxCenter:t,moveRelativeTo:r,insideDestination:n,draggable:s,draggables:a,destination:i,viewport:l,afterCritical:o}=e;if(!r){if(n.length)return null;const e={displaced:ch,displacedBy:oh,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},t=Ph({impact:e,draggable:s,droppable:i,draggables:a,afterCritical:o}),r=lh(s,i)?i:Uh(i,s,a);return Oh({draggable:s,destination:r,newPageBorderBoxCenter:t,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}const c=Boolean(t[i.axis.line]<=r.page.borderBox.center[i.axis.line]),d=(()=>{const e=r.descriptor.index;return r.descriptor.id===s.descriptor.id||c?e:e+1})(),u=Fh(i.axis,s.displaceBy);return vh({draggable:s,insideDestination:n,destination:i,viewport:l,displacedBy:u,last:ch,index:d})})({previousPageBorderBoxCenter:r,destination:c,draggable:n,draggables:a,moveRelativeTo:u,insideDestination:d,viewport:l,afterCritical:o});if(!m)return null;const p=Ph({impact:m,draggable:n,droppable:c,draggables:a,afterCritical:o});return{clientSelection:Ah({pageBorderBoxCenter:p,draggable:n,viewport:l}),impact:m,scrollJumpRequest:null}},Hh=e=>{const t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null};var Wh=e=>{let{state:t,type:r}=e;const n=((e,t)=>{const r=Hh(e);return r?t[r]:null})(t.impact,t.dimensions.droppables),s=Boolean(n),a=t.dimensions.droppables[t.critical.droppable.id],i=n||a,l=i.axis.direction,o="vertical"===l&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===l&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(o&&!s)return null;const c="MOVE_DOWN"===r||"MOVE_RIGHT"===r,d=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:m,droppables:p}=t.dimensions;return o?Lh({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:i,draggables:m,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):qh({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:i,draggables:m,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function Vh(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Gh(e){const t=uh(e.top,e.bottom),r=uh(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function $h(e){let{pageBorderBox:t,draggable:r,droppables:n}=e;const s=th(n).filter(e=>{if(!e.isEnabled)return!1;const r=e.subject.active;if(!r)return!1;if(s=r,!((n=t).left<s.right&&n.right>s.left&&n.top<s.bottom&&n.bottom>s.top))return!1;var n,s;if(Gh(r)(t.center))return!0;const a=e.axis,i=r.center[a.crossAxisLine],l=t[a.crossAxisStart],o=t[a.crossAxisEnd],c=uh(r[a.crossAxisStart],r[a.crossAxisEnd]),d=c(l),u=c(o);return!d&&!u||(d?l<i:o>i)});return s.length?1===s.length?s[0].descriptor.id:function(e){let{pageBorderBox:t,draggable:r,candidates:n}=e;const s=r.page.borderBox.center,a=n.map(e=>{const r=e.axis,n=Hp(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:Wp(s,n)}}).sort((e,t)=>t.distance-e.distance);return a[0]?a[0].id:null}({pageBorderBox:t,draggable:r,candidates:s}):null}const Kh=(e,t)=>lp($p(e,t));function Yh(e){let{displaced:t,id:r}=e;return Boolean(t.visible[r]||t.invisible[r])}var Zh=e=>{let{pageOffset:t,draggable:r,draggables:n,droppables:s,previousImpact:a,viewport:i,afterCritical:l}=e;const o=Kh(r.page.borderBox,t),c=$h({pageBorderBox:o,draggable:r,droppables:s});if(!c)return dh;const d=s[c],u=nh(d.descriptor.id,n),m=((e,t)=>{const r=e.frame;return r?Kh(t,r.scroll.diff.value):t})(d,o);return(e=>{let{draggable:t,pageBorderBoxWithDroppableScroll:r,previousImpact:n,destination:s,insideDestination:a,afterCritical:i}=e;if(!s.isCombineEnabled)return null;const l=s.axis,o=Fh(s.axis,t.displaceBy),c=o.value,d=r[l.start],u=r[l.end],m=ih(t,a).find(e=>{const t=e.descriptor.id,r=e.page.borderBox,s=r[l.size]/4,a=jh(t,i),o=Yh({displaced:n.displaced,id:t});return a?o?u>r[l.start]+s&&u<r[l.end]-s:d>r[l.start]-c+s&&d<r[l.end]-c-s:o?u>r[l.start]+c+s&&u<r[l.end]+c-s:d>r[l.start]+s&&d<r[l.end]-s});return m?{displacedBy:o,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}}:null})({pageBorderBoxWithDroppableScroll:m,draggable:r,previousImpact:a,destination:d,insideDestination:u,afterCritical:l})||(e=>{let{pageBorderBoxWithDroppableScroll:t,draggable:r,destination:n,insideDestination:s,last:a,viewport:i,afterCritical:l}=e;const o=n.axis,c=Fh(n.axis,r.displaceBy),d=c.value,u=t[o.start],m=t[o.end],p=function(e){let{draggable:t,closest:r,inHomeList:n}=e;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:ih(r,s).find(e=>{const t=e.descriptor.id,r=e.page.borderBox.center[o.line],n=jh(t,l),s=Yh({displaced:a,id:t});return n?s?m<=r:u<r-d:s?m<=r+d:u<r})||null,inHomeList:lh(r,n)});return vh({draggable:r,insideDestination:s,destination:n,viewport:i,last:a,displacedBy:c,index:p})})({pageBorderBoxWithDroppableScroll:m,draggable:r,destination:d,insideDestination:u,last:a.displaced,viewport:i,afterCritical:l})},Jh=(e,t)=>Oe(Oe({},e),{},{[t.descriptor.id]:t});const Qh=e=>{let{previousImpact:t,impact:r,droppables:n}=e;const s=Hh(t),a=Hh(r);if(!s)return n;if(s===a)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const l=(e=>{const t=e.subject.withPlaceholder;t||kp();const r=e.frame;if(!r){const t=Zp({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Oe(Oe({},e),{},{subject:t})}const n=t.oldFrameMaxScroll;n||kp();const s=Bh(r,n),a=Zp({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return Oe(Oe({},e),{},{subject:a,frame:s})})(i);return Jh(n,l)};var Xh=e=>{let{state:t,clientSelection:r,dimensions:n,viewport:s,impact:a,scrollJumpRequest:i}=e;const l=s||t.viewport,o=n||t.dimensions,c=r||t.current.client.selection,d=Bp(c,t.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:Fp(t.initial.client.borderBoxCenter,d)},m={selection:Fp(u.selection,l.scroll.current),borderBoxCenter:Fp(u.borderBoxCenter,l.scroll.current),offset:Fp(u.offset,l.scroll.diff.value)},p={client:u,page:m};if("COLLECTING"===t.phase)return Oe(Oe({},t),{},{dimensions:o,viewport:l,current:p});const h=o.draggables[t.critical.draggable.id],x=a||Zh({pageOffset:m.offset,draggable:h,draggables:o.draggables,droppables:o.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),f=(e=>{let{draggable:t,draggables:r,droppables:n,previousImpact:s,impact:a}=e;const i=Qh({previousImpact:s,impact:a,droppables:n}),l=Hh(a);if(!l)return i;const o=n[l];if(lh(t,o))return i;if(o.subject.withPlaceholder)return i;const c=Uh(o,t,r);return Jh(i,c)})({draggable:h,impact:x,previousImpact:t.impact,draggables:o.draggables,droppables:o.droppables});return Oe(Oe({},t),{},{current:p,dimensions:{draggables:o.draggables,droppables:f},impact:x,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null})};var ex=e=>{let{impact:t,viewport:r,draggables:n,destination:s,forceShouldAnimate:a}=e;const i=t.displaced,l=function(e,t){return e.map(e=>t[e])}(i.all,n),o=bh({afterDragging:l,destination:s,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:i});return Oe(Oe({},t),{},{displaced:o})},tx=e=>{let{impact:t,draggable:r,droppable:n,draggables:s,viewport:a,afterCritical:i}=e;const l=Ph({impact:t,draggable:r,draggables:s,droppable:n,afterCritical:i});return Ah({pageBorderBoxCenter:l,draggable:r,viewport:a})},rx=e=>{let{state:t,dimensions:r,viewport:n}=e;"SNAP"!==t.movementMode&&kp();const s=t.impact,a=n||t.viewport,i=r||t.dimensions,{draggables:l,droppables:o}=i,c=l[t.critical.draggable.id],d=Hh(s);d||kp();const u=o[d],m=ex({impact:s,viewport:a,destination:u,draggables:l}),p=tx({impact:m,draggable:c,droppable:u,draggables:l,viewport:a,afterCritical:t.afterCritical});return Xh({impact:m,clientSelection:p,state:t,dimensions:i,viewport:a})},nx=e=>{let{draggable:t,home:r,draggables:n,viewport:s}=e;const a=Fh(r.axis,t.displaceBy),i=nh(r.descriptor.id,n),l=i.indexOf(t);-1===l&&kp();const o=i.slice(l+1),c=o.reduce((e,t)=>(e[t.descriptor.id]=!0,e),{}),d={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:a,effected:c};var u;return{impact:{displaced:bh({afterDragging:o,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(u=t.descriptor,{index:u.index,droppableId:u.droppableId})}},afterCritical:d}};const sx=e=>{0},ax=e=>{0};var ix=e=>{let{additions:t,updatedDroppables:r,viewport:n}=e;const s=n.scroll.diff.value;return t.map(e=>{const t=e.descriptor.droppableId,a=(e=>{const t=e.frame;return t||kp(),t})(r[t]),i=a.scroll.diff.value,l=(e=>{let{draggable:t,offset:r,initialWindowScroll:n}=e;const s=pp(t.client,r),a=hp(s,n);return Oe(Oe({},t),{},{placeholder:Oe(Oe({},t.placeholder),{},{client:s}),client:s,page:a})})({draggable:e,offset:Fp(s,i),initialWindowScroll:n.scroll.initial});return l})};const lx=e=>"SNAP"===e.movementMode,ox=(e,t,r)=>{const n=((e,t)=>({draggables:e.draggables,droppables:Jh(e.droppables,t)}))(e.dimensions,t);return!lx(e)||r?Xh({state:e,dimensions:n}):rx({state:e,dimensions:n})};function cx(e){return e.isDragging&&"SNAP"===e.movementMode?Oe(Oe({},e),{},{scrollJumpRequest:null}):e}const dx={phase:"IDLE",completed:null,shouldFlush:!1};var ux=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dx,t=arguments.length>1?arguments[1]:void 0;if("FLUSH"===t.type)return Oe(Oe({},dx),{},{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&kp();const{critical:r,clientSelection:n,viewport:s,dimensions:a,movementMode:i}=t.payload,l=a.draggables[r.draggable.id],o=a.droppables[r.droppable.id],c={selection:n,borderBoxCenter:l.client.borderBox.center,offset:zp},d={client:c,page:{selection:Fp(c.selection,s.scroll.initial),borderBoxCenter:Fp(c.selection,s.scroll.initial),offset:Fp(c.selection,s.scroll.diff.value)}},u=th(a.droppables).every(e=>!e.isFixedOnPage),{impact:m,afterCritical:p}=nx({draggable:l,home:o,draggables:a.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:a,initial:d,current:d,isWindowScrollAllowed:u,impact:m,afterCritical:p,onLiftImpact:m,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&kp();return Oe(Oe({},e),{},{phase:"COLLECTING"})}if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&kp(),(e=>{let{state:t,published:r}=e;sx();const n=r.modified.map(e=>{const r=t.dimensions.droppables[e.droppableId];return Jp(r,e.scroll)}),s=Oe(Oe({},t.dimensions.droppables),Xp(n)),a=eh(ix({additions:r.additions,updatedDroppables:s,viewport:t.viewport})),i=Oe(Oe({},t.dimensions.draggables),a);r.removals.forEach(e=>{delete i[e]});const l={droppables:s,draggables:i},o=Hh(t.impact),c=o?l.droppables[o]:null,d=l.draggables[t.critical.draggable.id],u=l.droppables[t.critical.droppable.id],{impact:m,afterCritical:p}=nx({draggable:d,home:u,draggables:i,viewport:t.viewport}),h=c&&c.isCombineEnabled?t.impact:m,x=Zh({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:h,viewport:t.viewport,afterCritical:p});ax();const f=Oe(Oe({},t),{},{phase:"DRAGGING",impact:x,onLiftImpact:m,dimensions:l,afterCritical:p,forceShouldAnimate:!1});return"COLLECTING"===t.phase?f:Oe(Oe({},f),{},{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})})({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;Vh(e)||kp();const{client:r}=t.payload;return Up(r,e.current.client.selection)?e:Xh({state:e,clientSelection:r,impact:lx(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return cx(e);if("COLLECTING"===e.phase)return cx(e);Vh(e)||kp();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const a=Jp(s,n);return ox(e,a,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Vh(e)||kp();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||kp(),s.isEnabled===n&&kp();const a=Oe(Oe({},s),{},{isEnabled:n});return ox(e,a,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Vh(e)||kp();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||kp(),s.isCombineEnabled===n&&kp();const a=Oe(Oe({},s),{},{isCombineEnabled:n});return ox(e,a,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Vh(e)||kp(),e.isWindowScrollAllowed||kp();const r=t.payload.newScroll;if(Up(e.viewport.scroll.current,r))return cx(e);const n=Th(e.viewport,r);return lx(e)?rx({state:e,viewport:n}):Xh({state:e,viewport:n})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Vh(e))return e;const r=t.payload.maxScroll;if(Up(r,e.viewport.scroll.max))return e;const n=Oe(Oe({},e.viewport),{},{scroll:Oe(Oe({},e.viewport.scroll),{},{max:r})});return Oe(Oe({},e),{},{viewport:n})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&kp();const r=Wh({state:e,type:t.type});return r?Xh({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){const r=t.payload.reason;"COLLECTING"!==e.phase&&kp();return Oe(Oe({},e),{},{phase:"DROP_PENDING",isWaiting:!0,reason:r})}if("DROP_ANIMATE"===t.type){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&kp();return{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if("DROP_COMPLETE"===t.type){const{completed:e}=t.payload;return{phase:"IDLE",completed:e,shouldFlush:!1}}return e};function mx(e,t){return e instanceof Object&&"type"in e&&e.type===t}const px=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),hx=()=>({type:"COLLECTION_STARTING",payload:null}),xx=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),fx=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),gx=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),bx=e=>({type:"MOVE",payload:e}),yx=()=>({type:"MOVE_UP",payload:null}),vx=()=>({type:"MOVE_DOWN",payload:null}),jx=()=>({type:"MOVE_RIGHT",payload:null}),wx=()=>({type:"MOVE_LEFT",payload:null}),Nx=e=>({type:"DROP_COMPLETE",payload:e}),kx=e=>({type:"DROP",payload:e}),Cx=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});const Sx="cubic-bezier(0.2, 0, 0, 1)",_x="cubic-bezier(.2,1,.1,1)",Ex={drop:0,combining:.7},Ix={drop:.75},Px={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Tx="".concat(Px.outOfTheWay,"s ").concat(Sx),Dx={fluid:"opacity ".concat(Tx),snap:"transform ".concat(Tx,", opacity ").concat(Tx),drop:e=>{const t="".concat(e,"s ").concat(_x);return"transform ".concat(t,", opacity ").concat(t)},outOfTheWay:"transform ".concat(Tx),placeholder:"height ".concat(Tx,", width ").concat(Tx,", margin ").concat(Tx)},Ax=e=>Up(e,zp)?void 0:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),Ox=Ax,Lx=(e,t)=>{const r=Ax(e);if(r)return t?"".concat(r," scale(").concat(Ix.drop,")"):r},{minDropTime:Rx,maxDropTime:Mx}=Px,zx=Mx-Rx;const Fx=e=>{let{getState:t,dispatch:r}=e;return e=>n=>{if(!mx(n,"DROP"))return void e(n);const s=t(),a=n.payload.reason;if("COLLECTING"===s.phase)return void r((e=>({type:"DROP_PENDING",payload:e}))({reason:a}));if("IDLE"===s.phase)return;"DROP_PENDING"===s.phase&&s.isWaiting&&kp(),"DRAGGING"!==s.phase&&"DROP_PENDING"!==s.phase&&kp();const i=s.critical,l=s.dimensions,o=l.draggables[s.critical.draggable.id],{impact:c,didDropInsideDroppable:d}=(e=>{let{draggables:t,reason:r,lastImpact:n,home:s,viewport:a,onLiftImpact:i}=e;if(!n.at||"DROP"!==r)return{impact:ex({draggables:t,impact:i,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1};return"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:Oe(Oe({},n),{},{displaced:ch}),didDropInsideDroppable:!0}})({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),u=d?sh(c):null,m=d?ah(c):null,p={index:i.draggable.index,droppableId:i.droppable.id},h={draggableId:o.descriptor.id,type:o.descriptor.type,source:p,reason:a,mode:s.movementMode,destination:u,combine:m},x=(e=>{let{impact:t,draggable:r,dimensions:n,viewport:s,afterCritical:a}=e;const{draggables:i,droppables:l}=n,o=Hh(t),c=o?l[o]:null,d=l[r.descriptor.droppableId],u=tx({impact:t,draggable:r,draggables:i,afterCritical:a,droppable:c||d,viewport:s});return Bp(u,r.client.borderBox.center)})({impact:c,draggable:o,dimensions:l,viewport:s.viewport,afterCritical:s.afterCritical}),f={critical:s.critical,afterCritical:s.afterCritical,result:h,impact:c};if(!(!Up(s.current.client.offset,x)||Boolean(h.combine)))return void r(Nx({completed:f}));const g=(e=>{let{current:t,destination:r,reason:n}=e;const s=Wp(t,r);if(s<=0)return Rx;if(s>=1500)return Mx;const a=Rx+zx*(s/1500);return Number(("CANCEL"===n?.6*a:a).toFixed(2))})({current:s.current.client.offset,destination:x,reason:a});r((e=>({type:"DROP_ANIMATE",payload:e}))({newHomeClientOffset:x,dropDuration:g,completed:f}))}};var Bx=()=>({x:window.pageXOffset,y:window.pageYOffset});function Ux(e){let{onWindowScroll:t}=e;const r=gp(function(){t(Bx())}),n=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}(r);let s=vp;function a(){return s!==vp}return{start:function(){a()&&kp(),s=jp(window,[n])},stop:function(){a()||kp(),r.cancel(),s(),s=vp},isActive:a}}const qx=e=>{const t=Ux({onWindowScroll:t=>{e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return e=>r=>{!t.isActive()&&mx(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&(e=>mx(e,"DROP_COMPLETE")||mx(e,"DROP_ANIMATE")||mx(e,"FLUSH"))(r)&&t.stop(),e(r)}};var Hx=()=>{const e=[];return{add:t=>{const r=setTimeout(()=>(t=>{const r=e.findIndex(e=>e.timerId===t);-1===r&&kp();const[n]=e.splice(r,1);n.callback()})(r)),n={timerId:r,callback:t};e.push(n)},flush:()=>{if(!e.length)return;const t=[...e];e.length=0,t.forEach(e=>{clearTimeout(e.timerId),e.callback()})}}};const Wx=(e,t)=>{sx(),t(),ax()},Vx=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Gx(e,t,r,n){if(!e)return void r(n(t));const s=(e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=s=>{t||r||(t=!0,e(s),clearTimeout(n))};return s.wasCalled=()=>t,s})(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var $x=(e,t)=>{const r=((e,t)=>{const r=Hx();let n=null;const s=r=>{n||kp(),n=null,Wx(0,()=>Gx(e().onDragEnd,r,t,Ap))};return{beforeCapture:(t,r)=>{n&&kp(),Wx(0,()=>{const n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})})},beforeStart:(t,r)=>{n&&kp(),Wx(0,()=>{const n=e().onBeforeDragStart;n&&n(Vx(t,r))})},start:(s,a)=>{n&&kp();const i=Vx(s,a);n={mode:a,lastCritical:s,lastLocation:i.source,lastCombine:null},r.add(()=>{Wx(0,()=>Gx(e().onDragStart,i,t,Tp))})},update:(s,a)=>{const i=sh(a),l=ah(a);n||kp();const o=!((e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n})(s,n.lastCritical);o&&(n.lastCritical=s);const c=(u=i,!(null==(d=n.lastLocation)&&null==u||null!=d&&null!=u&&d.droppableId===u.droppableId&&d.index===u.index));var d,u;c&&(n.lastLocation=i);const m=!((e,t)=>null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId)(n.lastCombine,l);if(m&&(n.lastCombine=l),!o&&!c&&!m)return;const p=Oe(Oe({},Vx(s,n.mode)),{},{combine:l,destination:i});r.add(()=>{Wx(0,()=>Gx(e().onDragUpdate,p,t,Dp))})},flush:()=>{n||kp(),r.flush()},drop:s,abort:()=>{if(!n)return;const e=Oe(Oe({},Vx(n.lastCritical,n.mode)),{},{combine:null,destination:null,reason:"CANCEL"});s(e)}}})(e,t);return e=>t=>n=>{if(mx(n,"BEFORE_INITIAL_CAPTURE"))return void r.beforeCapture(n.payload.draggableId,n.payload.movementMode);if(mx(n,"INITIAL_PUBLISH")){const e=n.payload.critical;return r.beforeStart(e,n.payload.movementMode),t(n),void r.start(e,n.payload.movementMode)}if(mx(n,"DROP_COMPLETE")){const e=n.payload.completed.result;return r.flush(),t(n),void r.drop(e)}if(t(n),mx(n,"FLUSH"))return void r.abort();const s=e.getState();"DRAGGING"===s.phase&&r.update(s.critical,s.impact)}};const Kx=e=>t=>r=>{if(!mx(r,"DROP_ANIMATION_FINISHED"))return void t(r);const n=e.getState();"DROP_ANIMATING"!==n.phase&&kp(),e.dispatch(Nx({completed:n.completed}))},Yx=e=>{let t=null,r=null;return n=>s=>{if((mx(s,"FLUSH")||mx(s,"DROP_COMPLETE")||mx(s,"DROP_ANIMATION_FINISHED"))&&(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(s),!mx(s,"DROP_ANIMATE"))return;const a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame(()=>{r=null,t=jp(window,[a])})}};var Zx=e=>t=>r=>n=>{if((e=>mx(e,"DROP_COMPLETE")||mx(e,"DROP_ANIMATE")||mx(e,"FLUSH"))(n))return e.stop(),void r(n);if(mx(n,"INITIAL_PUBLISH")){r(n);const s=t.getState();return"DRAGGING"!==s.phase&&kp(),void e.start(s)}r(n),e.scroll(t.getState())};const Jx=e=>t=>r=>{if(t(r),!mx(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(kx({reason:n.reason})))},Qx=im;var Xx=e=>{let{dimensionMarshal:t,focusMarshal:r,styleMarshal:n,getResponders:s,announce:a,autoScroller:i}=e;return nm(ux,Qx(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{const s=e(r,n);let a=()=>{throw new Error(Qu(15))};const i={getState:s.getState,dispatch:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return a(e,...r)}},l=t.map(e=>e(i));return a=im(...l)(s.dispatch),Oe(Oe({},s),{},{dispatch:a})}}((l=n,()=>e=>t=>{mx(t,"INITIAL_PUBLISH")&&l.dragging(),mx(t,"DROP_ANIMATE")&&l.dropping(t.payload.completed.result.reason),(mx(t,"FLUSH")||mx(t,"DROP_COMPLETE"))&&l.resting(),e(t)}),(e=>()=>t=>r=>{(mx(r,"DROP_COMPLETE")||mx(r,"FLUSH")||mx(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)})(t),(e=>t=>{let{getState:r,dispatch:n}=t;return t=>s=>{if(!mx(s,"LIFT"))return void t(s);const{id:a,clientSelection:i,movementMode:l}=s.payload,o=r();"DROP_ANIMATING"===o.phase&&n(Nx({completed:o.completed})),"IDLE"!==r().phase&&kp(),n({type:"FLUSH",payload:null}),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:a,movementMode:l}});const c={draggableId:a,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},{critical:d,dimensions:u,viewport:m}=e.startPublishing(c);n({type:"INITIAL_PUBLISH",payload:{critical:d,dimensions:u,clientSelection:i,movementMode:l,viewport:m}})}})(t),Fx,Kx,Yx,Jx,Zx(i),qx,(e=>{let t=!1;return()=>r=>n=>{if(mx(n,"INITIAL_PUBLISH"))return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if(mx(n,"FLUSH"))return t=!1,void e.tryRestoreFocusRecorded();if(mx(n,"DROP_COMPLETE")){t=!1;const r=n.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}})(r),$x(s,a))));var l};var ef=e=>{let{scrollHeight:t,scrollWidth:r,height:n,width:s}=e;const a=Bp({x:r,y:t},{x:s,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},tf=()=>{const e=document.documentElement;return e||kp(),e},rf=()=>{const e=tf();return ef({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},nf=e=>{let{critical:t,scrollOptions:r,registry:n}=e;sx();const s=(()=>{const e=Bx(),t=rf(),r=e.y,n=e.x,s=tf(),a=s.clientWidth,i=s.clientHeight;return{frame:lp({top:r,left:n,right:n+a,bottom:r+i}),scroll:{initial:e,current:e,max:t,diff:{value:zp,displacement:zp}}}})(),a=s.scroll.current,i=t.droppable,l=n.droppable.getAllByType(i.type).map(e=>e.callbacks.getDimensionAndWatchScroll(a,r)),o=n.draggable.getAllByType(t.draggable.type).map(e=>e.getDimension(a)),c={draggables:eh(o),droppables:Xp(l)};ax();return{dimensions:c,critical:t,viewport:s}};function sf(e,t,r){if(r.descriptor.id===t.id)return!1;if(r.descriptor.type!==t.type)return!1;return"virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode}var af=(e,t)=>{let r=null;const n=function(e){let{registry:t,callbacks:r}=e,n={additions:{},removals:{},modified:{}},s=null;const a=()=>{s||(r.collectionStarting(),s=requestAnimationFrame(()=>{s=null,sx();const{additions:e,removals:a,modified:i}=n,l=Object.keys(e).map(e=>t.draggable.getById(e).getDimension(zp)).sort((e,t)=>e.descriptor.index-t.descriptor.index),o=Object.keys(i).map(e=>({droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()})),c={additions:l,removals:Object.keys(a),modified:o};n={additions:{},removals:{},modified:{}},ax(),r.publish(c)}))};return{add:e=>{const t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],a()},remove:e=>{const t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=t=>{r||kp();const s=r.critical.draggable;"ADDITION"===t.type&&sf(e,s,t.value)&&n.add(t.value),"REMOVAL"===t.type&&sf(e,s,t.value)&&n.remove(t.value)},a={updateDroppableIsEnabled:(n,s)=>{e.droppable.exists(n)||kp(),r&&t.updateDroppableIsEnabled({id:n,isEnabled:s})},updateDroppableIsCombineEnabled:(n,s)=>{r&&(e.droppable.exists(n)||kp(),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:s}))},scrollDroppable:(t,n)=>{r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:(n,s)=>{r&&(e.droppable.exists(n)||kp(),t.updateDroppableScroll({id:n,newScroll:s}))},startPublishing:t=>{r&&kp();const n=e.draggable.getById(t.draggableId),a=e.droppable.getById(n.descriptor.droppableId),i={draggable:n.descriptor,droppable:a.descriptor},l=e.subscribe(s);return r={critical:i,unsubscribe:l},nf({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:()=>{if(!r)return;n.stop();const t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach(e=>e.callbacks.dragStopped()),r.unsubscribe(),r=null}};return a},lf=(e,t)=>"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason),of=e=>{window.scrollBy(e.x,e.y)};const cf=Qp(e=>th(e).filter(e=>!!e.isEnabled&&!!e.frame));var df=e=>{let{center:t,destination:r,droppables:n}=e;if(r){const e=n[r];return e.frame?e:null}const s=((e,t)=>{const r=cf(t).find(t=>(t.frame||kp(),Gh(t.frame.pageMarginBox)(e)))||null;return r})(t,n);return s};const uf={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var mf=e=>{let{startOfRange:t,endOfRange:r,current:n}=e;const s=r-t;if(0===s)return 0;return(n-t)/s},pf=e=>{let{distanceToEdge:t,thresholds:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a}=e;const i=function(e,t){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>uf)();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return 1;const n=1-mf({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=r.maxPixelScroll*r.ease(n);return Math.ceil(s)}(t,r,a);return 0===i?0:s?Math.max(((e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,a=n.durationDampening.stopDampeningAt,i=t,l=a,o=Date.now()-i;if(o>=a)return e;if(o<s)return 1;const c=mf({startOfRange:s,endOfRange:l,current:o}),d=e*n.ease(c);return Math.ceil(d)})(i,n,a),1):i},hf=e=>{let{container:t,distanceToEdges:r,dragStartTime:n,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i}=e;const l=function(e,t){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>uf)();return{startScrollingFrom:e[t.size]*r.startFromPercentage,maxScrollValueAt:e[t.size]*r.maxScrollAtPercentage}}(t,s,i);return r[s.end]<r[s.start]?pf({distanceToEdge:r[s.end],thresholds:l,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i}):-1*pf({distanceToEdge:r[s.start],thresholds:l,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i})};const xf=Gp(e=>0===e?0:e);var ff=e=>{let{dragStartTime:t,container:r,subject:n,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i}=e;const l={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},o=hf({container:r,distanceToEdges:l,dragStartTime:t,axis:hh,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),c=hf({container:r,distanceToEdges:l,dragStartTime:t,axis:xh,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),d=xf({x:c,y:o});if(Up(d,zp))return null;const u=(e=>{let{container:t,subject:r,proposedScroll:n}=e;const s=r.height>t.height,a=r.width>t.width;return a||s?a&&s?null:{x:a?0:n.x,y:s?0:n.y}:n})({container:r,subject:n,proposedScroll:d});return u?Up(u,zp)?null:u:null};const gf=Gp(e=>0===e?0:e>0?1:-1),bf=(()=>{const e=(e,t)=>e<0?e:e>t?e-t:0;return t=>{let{current:r,max:n,change:s}=t;const a=Fp(r,s),i={x:e(a.x,n.x),y:e(a.y,n.y)};return Up(i,zp)?null:i}})(),yf=e=>{let{max:t,current:r,change:n}=e;const s={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},a=gf(n),i=bf({max:s,current:r,change:a});return!i||(0!==a.x&&0===i.x||0!==a.y&&0===i.y)},vf=(e,t)=>yf({current:e.scroll.current,max:e.scroll.max,change:t}),jf=(e,t)=>{const r=e.frame;return!!r&&yf({current:r.scroll.current,max:r.scroll.max,change:t})};var wf=e=>{let{state:t,dragStartTime:r,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:i}=e;const l=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const e=(e=>{let{viewport:t,subject:r,center:n,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i}=e;const l=ff({dragStartTime:s,container:t.frame,subject:r,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return l&&vf(t,l)?l:null})({dragStartTime:r,viewport:t.viewport,subject:o,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(e)return void s(e)}const c=df({center:l,destination:Hh(t.impact),droppables:t.dimensions.droppables});if(!c)return;const d=(e=>{let{droppable:t,subject:r,center:n,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i}=e;const l=t.frame;if(!l)return null;const o=ff({dragStartTime:s,container:l.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return o&&jf(t,o)?o:null})({dragStartTime:r,droppable:c,subject:o,center:l,shouldUseTimeDampening:n,getAutoScrollerOptions:i});d&&a(c.descriptor.id,d)},Nf=e=>{let{move:t,scrollDroppable:r,scrollWindow:n}=e;const s=(e,t)=>{if(!jf(e,t))return t;const n=((e,t)=>{const r=e.frame;return r&&jf(e,t)?bf({current:r.scroll.current,max:r.scroll.max,change:t}):null})(e,t);if(!n)return r(e.descriptor.id,t),null;const s=Bp(t,n);r(e.descriptor.id,s);return Bp(t,s)},a=(e,t,r)=>{if(!e)return r;if(!vf(t,r))return r;const s=((e,t)=>{if(!vf(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return bf({current:n,max:r,change:t})})(t,r);if(!s)return n(r),null;const a=Bp(r,s);n(a);return Bp(r,a)};return e=>{const r=e.scrollJumpRequest;if(!r)return;const n=Hh(e.impact);n||kp();const i=s(e.dimensions.droppables[n],r);if(!i)return;const l=e.viewport,o=a(e.isWindowScrollAllowed,l,i);o&&((e,r)=>{const n=Fp(e.current.client.selection,r);t({client:n})})(e,o)}},kf=e=>{let{scrollDroppable:t,scrollWindow:r,move:n,getAutoScrollerOptions:s}=e;const a=(e=>{let{scrollWindow:t,scrollDroppable:r,getAutoScrollerOptions:n=()=>uf}=e;const s=gp(t),a=gp(r);let i=null;const l=e=>{i||kp();const{shouldUseTimeDampening:t,dragStartTime:r}=i;wf({state:e,scrollWindow:s,scrollDroppable:a,dragStartTime:r,shouldUseTimeDampening:t,getAutoScrollerOptions:n})};return{start:e=>{sx(),i&&kp();const t=Date.now();let r=!1;const s=()=>{r=!0};wf({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:s,scrollDroppable:s,getAutoScrollerOptions:n}),i={dragStartTime:t,shouldUseTimeDampening:r},ax(),r&&l(e)},stop:()=>{i&&(s.cancel(),a.cancel(),i=null)},scroll:l}})({scrollWindow:r,scrollDroppable:t,getAutoScrollerOptions:s}),i=Nf({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:e=>{s().disabled||"DRAGGING"!==e.phase||("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):a.scroll(e))},start:a.start,stop:a.stop}};const Cf="data-rfd",Sf=(()=>{const e="".concat(Cf,"-drag-handle");return{base:e,draggableId:"".concat(e,"-draggable-id"),contextId:"".concat(e,"-context-id")}})(),_f=(()=>{const e="".concat(Cf,"-draggable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}})(),Ef=(()=>{const e="".concat(Cf,"-droppable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}})(),If={contextId:"".concat(Cf,"-scroll-container-context-id")},Pf=(e,t)=>e.map(e=>{const r=e.styles[t];return r?"".concat(e.selector," { ").concat(r," }"):""}).join(" ");const Tf="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect,Df=()=>{const e=document.querySelector("head");return e||kp(),e},Af=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Of(e,r){const n=Rp(()=>(e=>{const t=(r=e,e=>"[".concat(e,'="').concat(r,'"]'));var r;const n=(()=>{const e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:t(Sf.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}})(),s=[(()=>{const e="\n      transition: ".concat(Dx.outOfTheWay,";\n    ");return{selector:t(_f.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),n,{selector:t(Ef.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Pf(s,"always"),resting:Pf(s,"resting"),dragging:Pf(s,"dragging"),dropAnimating:Pf(s,"dropAnimating"),userCancel:Pf(s,"userCancel")}})(e),[e]),s=(0,t.useRef)(null),a=(0,t.useRef)(null),i=Mp(Qp(e=>{const t=a.current;t||kp(),t.textContent=e}),[]),l=Mp(e=>{const t=s.current;t||kp(),t.textContent=e},[]);Tf(()=>{(s.current||a.current)&&kp();const t=Af(r),o=Af(r);return s.current=t,a.current=o,t.setAttribute("".concat(Cf,"-always"),e),o.setAttribute("".concat(Cf,"-dynamic"),e),Df().appendChild(t),Df().appendChild(o),l(n.always),i(n.resting),()=>{const e=e=>{const t=e.current;t||kp(),Df().removeChild(t),e.current=null};e(s),e(a)}},[r,l,i,n.always,n.resting,e]);const o=Mp(()=>i(n.dragging),[i,n.dragging]),c=Mp(e=>{i("DROP"!==e?n.userCancel:n.dropAnimating)},[i,n.dropAnimating,n.userCancel]),d=Mp(()=>{a.current&&i(n.resting)},[i,n.resting]);return Rp(()=>({dragging:o,dropping:c,resting:d}),[o,c,d])}function Lf(e,t){return Array.from(e.querySelectorAll(t))}var Rf=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Mf(e){return e instanceof Rf(e).HTMLElement}function zf(e,t){const r="[".concat(Sf.contextId,'="').concat(e,'"]'),n=Lf(document,r);if(!n.length)return null;const s=n.find(e=>e.getAttribute(Sf.draggableId)===t);return s&&Mf(s)?s:null}function Ff(){const e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach(t=>t(e))}function n(t){return e.draggables[t]||null}function s(t){return e.droppables[t]||null}return{draggable:{register:t=>{e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:(t,r)=>{const n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{const s=t.descriptor.id,a=n(s);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[s],e.droppables[t.descriptor.droppableId]&&r({type:"REMOVAL",value:t}))},getById:function(e){const t=n(e);return t||kp(),t},findById:n,exists:e=>Boolean(n(e)),getAllByType:t=>Object.values(e.draggables).filter(e=>e.descriptor.type===t)},droppable:{register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{const r=s(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){const t=s(e);return t||kp(),t},findById:s,exists:e=>Boolean(s(e)),getAllByType:t=>Object.values(e.droppables).filter(e=>e.descriptor.type===t)},subscribe:function(e){return t.push(e),function(){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Bf=t.createContext(null),Uf=()=>{const e=document.body;return e||kp(),e};const qf={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};const Hf={separator:"::"};function Wf(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hf;const n=t.useId();return Rp(()=>"".concat(e).concat(r.separator).concat(n),[r.separator,e,n])}var Vf=t.createContext(null);function Gf(e){0}function $f(e,t){Gf()}function Kf(){$f()}function Yf(e){const r=(0,t.useRef)(e);return(0,t.useEffect)(()=>{r.current=e}),r}function Zf(e){return"IDLE"!==e.phase&&"DROP_ANIMATING"!==e.phase&&e.isDragging}const Jf=9,Qf=13,Xf=33,eg=34,tg=35,rg=36,ng={[Qf]:!0,[Jf]:!0};var sg=e=>{ng[e.keyCode]&&e.preventDefault()};const ag=(()=>{const e="visibilitychange";if("undefined"===typeof document)return e;return[e,"ms".concat(e),"webkit".concat(e),"moz".concat(e),"o".concat(e)].find(e=>"on".concat(e)in document)||e})();const ig={type:"IDLE"};function lg(e){let{cancel:t,completed:r,getPhase:n,setPhase:s}=e;return[{eventName:"mousemove",fn:e=>{const{button:t,clientX:r,clientY:a}=e;if(0!==t)return;const i={x:r,y:a},l=n();if("DRAGGING"===l.type)return e.preventDefault(),void l.actions.move(i);"PENDING"!==l.type&&kp();const o=l.point;if(c=o,d=i,!(Math.abs(d.x-c.x)>=5||Math.abs(d.y-c.y)>=5))return;var c,d;e.preventDefault();const u=l.actions.fluidLift(i);s({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:e=>{const s=n();"DRAGGING"===s.type?(e.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:e=>{"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:e=>{if("PENDING"!==n().type)return 27===e.keyCode?(e.preventDefault(),void t()):void sg(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:e=>{const r=n();"IDLE"===r.type&&kp(),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:ag,fn:t}]}function og(){}const cg={[eg]:!0,[Xf]:!0,[rg]:!0,[tg]:!0};function dg(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:n=>27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(cg[n.keyCode]?n.preventDefault():sg(n))},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:ag,fn:r}]}const ug={type:"IDLE"};const mg=["input","button","textarea","select","option","optgroup","video","audio"];function pg(e,t){if(null==t)return!1;if(mg.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&pg(e,t.parentElement)}function hg(e,t){const r=t.target;return!!Mf(r)&&pg(e,r)}var xg=e=>lp(e.getBoundingClientRect()).center;const fg=(()=>{const e="matches";if("undefined"===typeof document)return e;return[e,"msMatchesSelector","webkitMatchesSelector"].find(e=>e in Element.prototype)||e})();function gg(e,t){return null==e?null:e[fg](t)?e:gg(e.parentElement,t)}function bg(e,t){return e.closest?e.closest(t):gg(e,t)}function yg(e,t){const r=t.target;if(!((n=r)instanceof Rf(n).Element))return null;var n;const s=function(e){return"[".concat(Sf.contextId,'="').concat(e,'"]')}(e),a=bg(r,s);return a&&Mf(a)?a:null}function vg(e){e.preventDefault()}function jg(e){let{expected:t,phase:r,isLockActive:n,shouldWarn:s}=e;return!!n()&&t===r}function wg(e){let{lockAPI:t,store:r,registry:n,draggableId:s}=e;if(t.isClaimed())return!1;const a=n.draggable.findById(s);return!!a&&(!!a.options.isEnabled&&!!lf(r.getState(),s))}function Ng(e){let{lockAPI:t,contextId:r,store:n,registry:s,draggableId:a,forceSensorStop:i,sourceEvent:l}=e;if(!wg({lockAPI:t,store:n,registry:s,draggableId:a}))return null;const o=s.draggable.getById(a),c=function(e,t){const r="[".concat(_f.contextId,'="').concat(e,'"]'),n=Lf(document,r).find(e=>e.getAttribute(_f.id)===t);return n&&Mf(n)?n:null}(r,o.descriptor.id);if(!c)return null;if(l&&!o.options.canDragInteractiveElements&&hg(c,l))return null;const d=t.claim(i||vp);let u="PRE_DRAG";function m(){return o.options.shouldRespectForcePress}function p(){return t.isActive(d)}const h=function(e,t){jg({expected:e,phase:u,isLockActive:p,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function x(e){function r(){t.release(),u="COMPLETED"}function s(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldBlockNextClick:!1};if(e.cleanup(),s.shouldBlockNextClick){const e=jp(window,[{eventName:"click",fn:vg,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}r(),n.dispatch(kx({reason:t}))}return"PRE_DRAG"!==u&&(r(),kp()),n.dispatch((e=>({type:"LIFT",payload:e}))(e.liftActionArgs)),u="DRAGGING",Oe({isActive:()=>jg({expected:"DRAGGING",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:m,drop:e=>s("DROP",e),cancel:e=>s("CANCEL",e)},e.actions)}const f={isActive:()=>jg({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:m,fluidLift:function(e){const t=gp(e=>{h(()=>bx({client:e}))});return Oe(Oe({},x({liftActionArgs:{id:a,clientSelection:e,movementMode:"FLUID"},cleanup:()=>t.cancel(),actions:{move:t}})),{},{move:t})},snapLift:function(){const e={moveUp:()=>h(yx),moveRight:()=>h(jx),moveDown:()=>h(vx),moveLeft:()=>h(wx)};return x({liftActionArgs:{id:a,clientSelection:xg(c),movementMode:"SNAP"},cleanup:vp,actions:e})},abort:function(){jg({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!0})&&t.release()}};return f}const kg=[function(e){const r=(0,t.useRef)(ig),n=(0,t.useRef)(vp),s=Rp(()=>({eventName:"mousedown",fn:function(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;const r=e.findClosestDraggableId(t);if(!r)return;const s=e.tryGetLock(r,l,{sourceEvent:t});if(!s)return;t.preventDefault();const a={x:t.clientX,y:t.clientY};n.current(),d(s,a)}}),[e]),a=Rp(()=>({eventName:"webkitmouseforcewillbegin",fn:t=>{if(t.defaultPrevented)return;const r=e.findClosestDraggableId(t);if(!r)return;const n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}),[e]),i=Mp(function(){n.current=jp(window,[a,s],{passive:!1,capture:!0})},[a,s]),l=Mp(()=>{"IDLE"!==r.current.type&&(r.current=ig,n.current(),i())},[i]),o=Mp(()=>{const e=r.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),c=Mp(function(){const e=lg({cancel:o,completed:l,getPhase:()=>r.current,setPhase:e=>{r.current=e}});n.current=jp(window,e,{capture:!0,passive:!1})},[o,l]),d=Mp(function(e,t){"IDLE"!==r.current.type&&kp(),r.current={type:"PENDING",point:t,actions:e},c()},[c]);Tf(function(){return i(),function(){n.current()}},[i])},function(e){const r=(0,t.useRef)(og),n=Rp(()=>({eventName:"keydown",fn:function(t){if(t.defaultPrevented)return;if(32!==t.keyCode)return;const n=e.findClosestDraggableId(t);if(!n)return;const a=e.tryGetLock(n,o,{sourceEvent:t});if(!a)return;t.preventDefault();let i=!0;const l=a.snapLift();function o(){i||kp(),i=!1,r.current(),s()}r.current(),r.current=jp(window,dg(l,o),{capture:!0,passive:!1})}}),[e]),s=Mp(function(){r.current=jp(window,[n],{passive:!1,capture:!0})},[n]);Tf(function(){return s(),function(){r.current()}},[s])},function(e){const r=(0,t.useRef)(ug),n=(0,t.useRef)(vp),s=Mp(function(){return r.current},[]),a=Mp(function(e){r.current=e},[]),i=Rp(()=>({eventName:"touchstart",fn:function(t){if(t.defaultPrevented)return;const r=e.findClosestDraggableId(t);if(!r)return;const s=e.tryGetLock(r,o,{sourceEvent:t});if(!s)return;const a=t.touches[0],{clientX:i,clientY:l}=a,c={x:i,y:l};n.current(),m(s,c)}}),[e]),l=Mp(function(){n.current=jp(window,[i],{capture:!0,passive:!1})},[i]),o=Mp(()=>{const e=r.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),a(ug),n.current(),l())},[l,a]),c=Mp(()=>{const e=r.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[o]),d=Mp(function(){const e={capture:!0,passive:!1},t={cancel:c,completed:o,getPhase:s},r=jp(window,function(e){let{cancel:t,completed:r,getPhase:n}=e;return[{eventName:"touchmove",options:{capture:!1},fn:e=>{const r=n();if("DRAGGING"!==r.type)return void t();r.hasMoved=!0;const{clientX:s,clientY:a}=e.touches[0],i={x:s,y:a};e.preventDefault(),r.actions.move(i)}},{eventName:"touchend",fn:e=>{const s=n();"DRAGGING"===s.type?(e.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:e=>{"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:e=>{const r=n();"IDLE"===r.type&&kp();const s=e.touches[0];if(!s)return;if(!(s.force>=.15))return;const a=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return a?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();a&&t()}},{eventName:ag,fn:t}]}(t),e),a=jp(window,function(e){let{cancel:t,getPhase:r}=e;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:e=>{e.preventDefault()}},{eventName:"keydown",fn:e=>{"DRAGGING"===r().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:ag,fn:t}]}(t),e);n.current=function(){r(),a()}},[c,s,o]),u=Mp(function(){const e=s();"PENDING"!==e.type&&kp();const t=e.actions.fluidLift(e.point);a({type:"DRAGGING",actions:t,hasMoved:!1})},[s,a]),m=Mp(function(e,t){"IDLE"!==s().type&&kp();const r=setTimeout(u,120);a({type:"PENDING",point:t,actions:e,longPressTimerId:r}),d()},[d,s,a,u]);Tf(function(){return l(),function(){n.current();const e=s();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),a(ug))}},[s,l,a]),Tf(function(){return jp(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}];function Cg(e){let{contextId:r,store:n,registry:s,customSensors:a,enableDefaultSensors:i}=e;const l=[...i?kg:[],...a||[]],o=(0,t.useState)(()=>function(){let e=null;function t(){e||kp(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&kp();const r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}())[0],c=Mp(function(e,t){Zf(e)&&!Zf(t)&&o.tryAbandon()},[o]);Tf(function(){let e=n.getState();return n.subscribe(()=>{const t=n.getState();c(e,t),e=t})},[o,n,c]),Tf(()=>o.tryAbandon,[o.tryAbandon]);const d=Mp(e=>wg({lockAPI:o,registry:s,store:n,draggableId:e}),[o,s,n]),u=Mp((e,t,a)=>Ng({lockAPI:o,registry:s,contextId:r,store:n,draggableId:e,forceSensorStop:t||null,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null}),[r,o,s,n]),m=Mp(e=>function(e,t){const r=yg(e,t);return r?r.getAttribute(Sf.draggableId):null}(r,e),[r]),p=Mp(e=>{const t=s.draggable.findById(e);return t?t.options:null},[s.draggable]),h=Mp(function(){o.isClaimed()&&(o.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))},[o,n]),x=Mp(()=>o.isClaimed(),[o]),f=Rp(()=>({canGetLock:d,tryGetLock:u,findClosestDraggableId:m,findOptionsForDraggable:p,tryReleaseLock:h,isLockClaimed:x}),[d,u,m,p,h,x]);Gf();for(let t=0;t<l.length;t++)l[t](f)}function Sg(e){return e.current||kp(),e.current}function _g(e){const{contextId:r,setCallbacks:n,sensors:s,nonce:i,dragHandleUsageInstructions:l}=e,o=(0,t.useRef)(null);Kf();const c=Yf(e),d=Mp(()=>(e=>({onBeforeCapture:t=>{(0,a.flushSync)(()=>{e.onBeforeCapture&&e.onBeforeCapture(t)})},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}))(c.current),[c]),u=Mp(()=>(e=>Oe(Oe(Oe({},uf),e.autoScrollerOptions),{},{durationDampening:Oe(Oe({},uf.durationDampening),e.autoScrollerOptions)}))(c.current),[c]),m=function(e){const r=Rp(()=>(e=>"rfd-announcement-".concat(e))(e),[e]),n=(0,t.useRef)(null);return(0,t.useEffect)(function(){const e=document.createElement("div");return n.current=e,e.id=r,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),bp(e.style,qf),Uf().appendChild(e),function(){setTimeout(function(){const t=Uf();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[r]),Mp(e=>{const t=n.current;t&&(t.textContent=e)},[])}(r),p=function(e){let{contextId:r,text:n}=e;const s=Wf("hidden-text",{separator:"-"}),a=Rp(()=>function(e){let{contextId:t,uniqueId:r}=e;return"rfd-hidden-text-".concat(t,"-").concat(r)}({contextId:r,uniqueId:s}),[s,r]);return(0,t.useEffect)(function(){const e=document.createElement("div");return e.id=a,e.textContent=n,e.style.display="none",Uf().appendChild(e),function(){const t=Uf();t.contains(e)&&t.removeChild(e)}},[a,n]),a}({contextId:r,text:l}),h=Of(r,i),x=Mp(e=>{Sg(o).dispatch(e)},[]),f=Rp(()=>am({publishWhileDragging:px,updateDroppableScroll:xx,updateDroppableIsEnabled:fx,updateDroppableIsCombineEnabled:gx,collectionStarting:hx},x),[x]),g=function(){const e=Rp(Ff,[]);return(0,t.useEffect)(()=>function(){e.clean()},[e]),e}(),b=Rp(()=>af(g,f),[g,f]),y=Rp(()=>kf(Oe({scrollWindow:of,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u},am({move:bx},x))),[b.scrollDroppable,x,u]),v=function(e){const r=(0,t.useRef)({}),n=(0,t.useRef)(null),s=(0,t.useRef)(null),a=(0,t.useRef)(!1),i=Mp(function(e,t){const n={id:e,focus:t};return r.current[e]=n,function(){const t=r.current;t[e]!==n&&delete t[e]}},[]),l=Mp(function(t){const r=zf(e,t);r&&r!==document.activeElement&&r.focus()},[e]),o=Mp(function(e,t){n.current===e&&(n.current=t)},[]),c=Mp(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const e=n.current;e&&l(e)}))},[l]),d=Mp(function(e){n.current=null;const t=document.activeElement;t&&t.getAttribute(Sf.draggableId)===e&&(n.current=e)},[]);return Tf(()=>(a.current=!0,function(){a.current=!1;const e=s.current;e&&cancelAnimationFrame(e)}),[]),Rp(()=>({register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:o}),[i,d,c,o])}(r),j=Rp(()=>Xx({announce:m,autoScroller:y,dimensionMarshal:b,focusMarshal:v,getResponders:d,styleMarshal:h}),[m,y,b,v,d,h]);o.current=j;const w=Mp(()=>{const e=Sg(o);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),N=Mp(()=>{const e=Sg(o).getState();return"DROP_ANIMATING"===e.phase||"IDLE"!==e.phase&&e.isDragging},[]);n(Rp(()=>({isDragging:N,tryAbort:w}),[N,w]));const k=Mp(e=>lf(Sg(o).getState(),e),[]),C=Mp(()=>Vh(Sg(o).getState()),[]),S=Rp(()=>({marshal:b,focus:v,contextId:r,canLift:k,isMovementAllowed:C,dragHandleUsageInstructionsId:p,registry:g}),[r,b,p,v,k,C,g]);return Cg({contextId:r,store:j,registry:g,customSensors:s||null,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,t.useEffect)(()=>w,[w]),t.createElement(Vf.Provider,{value:S},t.createElement(ap,{context:Bf,store:j},e.children))}function Eg(e){const r=t.useId(),n=e.dragHandleUsageInstructions||Pp;return t.createElement(Cp,null,s=>t.createElement(_g,{nonce:e.nonce,contextId:r,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Ig=5e3,Pg=4500,Tg=(e,t)=>t?Dx.drop(t.duration):e?Dx.snap:Dx.fluid,Dg=(e,t)=>{if(e)return t?Ex.drop:Ex.combining};function Ag(e){return"DRAGGING"===e.type?function(e){const t=e.dimension.client,{offset:r,combineWith:n,dropping:s}=e,a=Boolean(n),i=(e=>null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode)(e),l=Boolean(s),o=l?Lx(r,a):Ox(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Tg(i,s),transform:o,opacity:Dg(a,l),zIndex:l?Pg:Ig,pointerEvents:"none"}}(e):{transform:Ox((t=e).offset),transition:t.shouldAnimateDisplacement?void 0:"none"};var t}function Og(e){const r=Wf("draggable"),{descriptor:n,registry:s,getDraggableRef:a,canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}=e,c=Rp(()=>({canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}),[i,o,l]),d=Mp(e=>{const t=a();return t||kp(),function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zp;const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),a=xp(s,n),i=hp(a,r);return{descriptor:e,placeholder:{client:a,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:i}}(n,t,e)},[n,a]),u=Rp(()=>({uniqueId:r,descriptor:n,options:c,getDimension:d}),[n,d,c,r]),m=(0,t.useRef)(u),p=(0,t.useRef)(!0);Tf(()=>(s.draggable.register(m.current),()=>s.draggable.unregister(m.current)),[s.draggable]),Tf(()=>{if(p.current)return void(p.current=!1);const e=m.current;m.current=u,s.draggable.update(u,e)},[u,s.draggable])}var Lg=t.createContext(null);function Rg(e){const r=(0,t.useContext)(e);return r||kp(),r}function Mg(e){e.preventDefault()}var zg=(e,t)=>e===t,Fg=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};function Bg(){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,combineWith:null}}const Ug={mapped:{type:"SECONDARY",offset:zp,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Bg(null)}};const qg=sp(()=>{const e=function(){const e=Qp((e,t)=>({x:e,y:t})),t=Qp(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{isDragging:!0,isClone:t,isDropAnimating:Boolean(s),dropAnimation:s,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}}),r=Qp(function(e,r,n,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:i,mode:r,offset:e,dimension:n,forceShouldAnimate:arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,snapshot:t(r,s,a,i,null)}}});return(n,s)=>{if(Zf(n)){if(n.critical.draggable.id!==s.draggableId)return null;const t=n.current.client.offset,i=n.dimensions.draggables[s.draggableId],l=Hh(n.impact),o=(a=n.impact).at&&"COMBINE"===a.at.type?a.at.combine.draggableId:null,c=n.forceShouldAnimate;return r(e(t.x,t.y),n.movementMode,i,s.isClone,l,o,c)}var a;if("DROP_ANIMATING"===n.phase){const e=n.completed;if(e.result.draggableId!==s.draggableId)return null;const r=s.isClone,a=n.dimensions.draggables[s.draggableId],i=e.result,l=i.mode,o=Fg(i),c=(e=>e.combine?e.combine.draggableId:null)(i),d={duration:n.dropDuration,curve:_x,moveTo:n.newHomeClientOffset,opacity:c?Ex.drop:null,scale:c?Ix.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:a,dropping:d,draggingOver:o,combineWith:c,mode:l,forceShouldAnimate:null,snapshot:t(l,r,o,c,d)}}}return null}}(),t=function(){const e=Qp((e,t)=>({x:e,y:t})),t=Qp(Bg),r=Qp(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:arguments.length>2?arguments[2]:void 0,snapshot:t(r)}}}),n=e=>e?r(zp,e,!0):null,s=(t,s,a,i)=>{const l=a.displaced.visible[t],o=Boolean(i.inVirtualList&&i.effected[t]),c=ah(a),d=c&&c.draggableId===t?s:null;if(!l){if(!o)return n(d);if(a.displaced.invisible[t])return null;const s=qp(i.displacedBy.point),l=e(s.x,s.y);return r(l,d,!0)}if(o)return n(d);const u=a.displacedBy.point,m=e(u.x,u.y);return r(m,d,l.shouldAnimate)};return(e,t)=>{if(Zf(e))return e.critical.draggable.id===t.draggableId?null:s(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){const r=e.completed;return r.result.draggableId===t.draggableId?null:s(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return(r,n)=>e(r,n)||t(r,n)||Ug},{dropAnimationFinished:Cx},null,{context:Bf,areStatePropsEqual:zg})(e=>{const r=(0,t.useRef)(null),n=Mp(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r.current=e},[]),s=Mp(()=>r.current,[]),{contextId:i,dragHandleUsageInstructionsId:l,registry:o}=Rg(Vf),{type:c,droppableId:d}=Rg(Lg),u=Rp(()=>({id:e.draggableId,index:e.index,type:c,droppableId:d}),[e.draggableId,e.index,c,d]),{children:m,draggableId:p,isEnabled:h,shouldRespectForcePress:x,canDragInteractiveElements:f,isClone:g,mapped:b,dropAnimationFinished:y}=e;if($f(),Gf(),!g){Og(Rp(()=>({descriptor:u,registry:o,getDraggableRef:s,canDragInteractiveElements:f,shouldRespectForcePress:x,isEnabled:h}),[u,o,s,f,x,h]))}const v=Rp(()=>h?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":p,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Mg}:null,[i,l,p,h]),j=Mp(e=>{"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&(0,a.flushSync)(y)},[y,b]),w=Rp(()=>{const e=Ag(b),t="DRAGGING"===b.type&&b.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:v}},[i,v,p,b,j,n]),N=Rp(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return t.createElement(t.Fragment,null,m(w,b.snapshot,N))});function Hg(e){return Rg(Lg).isUsingCloneFor!==e.draggableId||e.isClone?t.createElement(qg,e):null}function Wg(e){const r="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),s=Boolean(e.shouldRespectForcePress);return t.createElement(Hg,bp({},e,{isClone:!1,isEnabled:r,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const Vg=e=>t=>e===t,Gg=Vg("scroll"),$g=Vg("auto"),Kg=(Vg("visible"),(e,t)=>t(e.overflowX)||t(e.overflowY)),Yg=e=>null==e||e===document.body||e===document.documentElement?null:(e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Kg(r,Gg)||Kg(r,$g)})(e)?e:Yg(e.parentElement);var Zg=e=>({x:e.scrollLeft,y:e.scrollTop});const Jg=e=>{if(!e)return!1;return"fixed"===window.getComputedStyle(e).position||Jg(e.parentElement)};var Qg=e=>{let{ref:t,descriptor:r,env:n,windowScroll:s,direction:a,isDropDisabled:i,isCombineEnabled:l,shouldClipSubject:o}=e;const c=n.closestScrollable,d=((e,t)=>{const r=fp(e);if(!t)return r;if(e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,a=n+t.scrollHeight,i=s+t.scrollWidth,l=op({top:n,right:i,bottom:a,left:s},r.border);return up({borderBox:l,margin:r.margin,border:r.border,padding:r.padding})})(t,c),u=hp(d,s),m=(()=>{if(!c)return null;const e=fp(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:hp(e,s),scroll:Zg(c),scrollSize:t,shouldClipSubject:o}})(),p=(e=>{let{descriptor:t,isEnabled:r,isCombineEnabled:n,isFixedOnPage:s,direction:a,client:i,page:l,closest:o}=e;const c=(()=>{if(!o)return null;const{scrollSize:e,client:t}=o,r=ef({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:r,diff:{value:zp,displacement:zp}}}})(),d="vertical"===a?hh:xh;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:s,axis:d,isEnabled:r,client:i,page:l,frame:c,subject:Zp({page:l,withPlaceholder:null,axis:d,frame:c})}})({descriptor:r,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:n.isFixedOnPage,direction:a,client:d,page:u,closest:m});return p};const Xg={passive:!1},eb={passive:!0};var tb=e=>e.shouldPublishImmediately?Xg:eb;const rb=e=>e&&e.env.closestScrollable||null;function nb(e){const r=(0,t.useRef)(null),n=Rg(Vf),s=Wf("droppable"),{registry:a,marshal:i}=n,l=Yf(e),o=Rp(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=(0,t.useRef)(o),d=Rp(()=>Qp((e,t)=>{r.current||kp();const n={x:e,y:t};i.updateDroppableScroll(o.id,n)}),[o.id,i]),u=Mp(()=>{const e=r.current;return e&&e.env.closestScrollable?Zg(e.env.closestScrollable):zp},[]),m=Mp(()=>{const e=u();d(e.x,e.y)},[u,d]),p=Rp(()=>gp(m),[m]),h=Mp(()=>{const e=r.current,t=rb(e);e&&t||kp();e.scrollOptions.shouldPublishImmediately?m():p()},[p,m]),x=Mp((e,t)=>{r.current&&kp();const s=l.current,a=s.getDroppableRef();a||kp();const i=(e=>({closestScrollable:Yg(e),isFixedOnPage:Jg(e)}))(a),c={ref:a,descriptor:o,env:i,scrollOptions:t};r.current=c;const d=Qg({ref:a,descriptor:o,env:i,windowScroll:e,direction:s.direction,isDropDisabled:s.isDropDisabled,isCombineEnabled:s.isCombineEnabled,shouldClipSubject:!s.ignoreContainerClipping}),u=i.closestScrollable;return u&&(u.setAttribute(If.contextId,n.contextId),u.addEventListener("scroll",h,tb(c.scrollOptions))),d},[n.contextId,o,h,l]),f=Mp(()=>{const e=r.current,t=rb(e);return e&&t||kp(),Zg(t)},[]),g=Mp(()=>{const e=r.current;e||kp();const t=rb(e);r.current=null,t&&(p.cancel(),t.removeAttribute(If.contextId),t.removeEventListener("scroll",h,tb(e.scrollOptions)))},[h,p]),b=Mp(e=>{const t=r.current;t||kp();const n=rb(t);n||kp(),n.scrollTop+=e.y,n.scrollLeft+=e.x},[]),y=Rp(()=>({getDimensionAndWatchScroll:x,getScrollWhileDragging:f,dragStopped:g,scroll:b}),[g,x,f,b]),v=Rp(()=>({uniqueId:s,descriptor:o,callbacks:y}),[y,o,s]);Tf(()=>(c.current=v.descriptor,a.droppable.register(v),()=>{r.current&&g(),a.droppable.unregister(v)}),[y,o,g,v,i,a.droppable]),Tf(()=>{r.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Tf(()=>{r.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function sb(){}const ab={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},ib=e=>{let{isAnimatingOpenOnMount:t,placeholder:r,animate:n}=e;const s=(e=>{let{isAnimatingOpenOnMount:t,placeholder:r,animate:n}=e;return t||"close"===n?ab:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}})({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?Dx.placeholder:null}};var lb=t.memo(e=>{const r=(0,t.useRef)(null),n=Mp(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:i,contextId:l}=e,[o,c]=(0,t.useState)("open"===e.animate);(0,t.useEffect)(()=>o?"open"!==s?(n(),c(!1),sb):r.current?sb:(r.current=setTimeout(()=>{r.current=null,c(!1)}),n):sb,[s,o,n]);const d=Mp(e=>{"height"===e.propertyName&&(a(),"close"===s&&i())},[s,i,a]),u=ib({isAnimatingOpenOnMount:o,animate:e.animate,placeholder:e.placeholder});return t.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":l,onTransitionEnd:d,ref:e.innerRef})});class ob extends t.PureComponent{constructor(){super(...arguments),this.state={isVisible:Boolean(this.props.on),data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{"close"===this.state.animate&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const cb={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||kp(),document.body}},db=e=>{let t,r=Oe({},e);for(t in cb)void 0===e[t]&&(r=Oe(Oe({},r),{},{[t]:cb[t]}));return r},ub=(e,t)=>e===t.droppable.type,mb=(e,t)=>t.draggables[e.draggable.id],pb=sp(()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=Oe(Oe({},e),{},{shouldAnimatePlaceholder:!1}),r=Qp(e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}})),n=Qp((n,s,a,i,l,o)=>{const c=l.descriptor.id;if(l.descriptor.droppableId===n){const e=o?{render:o,dragging:r(l.descriptor)}:null,t={isDraggingOver:a,draggingOverWith:a?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!s)return t;if(!i)return e;const d={isDraggingOver:a,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}});return(r,s)=>{const a=db(s),i=a.droppableId,l=a.type,o=!a.isDropDisabled,c=a.renderClone;if(Zf(r)){const e=r.critical;if(!ub(l,e))return t;const s=mb(e,r.dimensions),a=Hh(r.impact)===i;return n(i,o,a,a,s,c)}if("DROP_ANIMATING"===r.phase){const e=r.completed;if(!ub(l,e.critical))return t;const s=mb(e.critical,r.dimensions);return n(i,o,Fg(e.result)===i,Hh(e.impact)===i,s,c)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){const n=r.completed;if(!ub(l,n.critical))return t;const s=Hh(n.impact)===i,a=Boolean(n.impact.at&&"COMBINE"===n.impact.at.type),o=n.critical.droppable.id===i;return s?a?e:t:o?e:t}return t}},{updateViewportMaxScroll:e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e})},(e,t,r)=>Oe(Oe(Oe({},db(r)),e),t),{context:Bf,areStatePropsEqual:zg})(e=>{const r=(0,t.useContext)(Vf);r||kp();const{contextId:n,isMovementAllowed:s}=r,i=(0,t.useRef)(null),l=(0,t.useRef)(null),{children:o,droppableId:c,type:d,mode:u,direction:m,ignoreContainerClipping:p,isDropDisabled:h,isCombineEnabled:x,snapshot:f,useClone:g,updateViewportMaxScroll:b,getContainerForClone:y}=e,v=Mp(()=>i.current,[]),j=Mp(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i.current=e},[]),w=(Mp(()=>l.current,[]),Mp(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l.current=e},[]));$f();const N=Mp(()=>{s()&&b({maxScroll:rf()})},[s,b]);nb({droppableId:c,type:d,mode:u,direction:m,isDropDisabled:h,isCombineEnabled:x,ignoreContainerClipping:p,getDroppableRef:v});const k=Rp(()=>t.createElement(ob,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},e=>{let{onClose:r,data:s,animate:a}=e;return t.createElement(lb,{placeholder:s,onClose:r,innerRef:w,animate:a,contextId:n,onTransitionEnd:N})}),[n,N,e.placeholder,e.shouldAnimatePlaceholder,w]),C=Rp(()=>({innerRef:j,placeholder:k,droppableProps:{"data-rfd-droppable-id":c,"data-rfd-droppable-context-id":n}}),[n,c,k,j]),S=g?g.dragging.draggableId:null,_=Rp(()=>({droppableId:c,type:d,isUsingCloneFor:S}),[c,S,d]);return t.createElement(Lg.Provider,{value:_},o(C,f),function(){if(!g)return null;const{dragging:e,render:r}=g,n=t.createElement(Hg,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(t,n)=>r(t,n,e));return a.createPortal(n,y())}())}),hb=[{id:"lead",name:"Lead",color:"bg-gray-200"},{id:"qualified",name:"Qualified",color:"bg-blue-200"},{id:"proposal",name:"Proposal",color:"bg-yellow-200"},{id:"negotiation",name:"Negotiation",color:"bg-orange-200"},{id:"closed",name:"Closed",color:"bg-green-200"}],xb=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,stages:!1,metrics:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({navigation:!0,management:!1,dragdrop:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Sales Pipeline Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Pipeline Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"The Sales Pipeline helps you track deals through different stages from initial lead to closed sale. Monitor progress, manage deal flow, and optimize your sales process with visual kanban-style management."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("stages"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Pipeline Stages"}),i.stages?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.stages&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Lead:"})," Initial contact or inquiry"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Qualified:"})," Verified prospect with potential"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Proposal:"})," Formal offer presented"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Negotiation:"})," Terms and conditions discussion"]}),(0,Cn.jsxs)("li",{children:[(0,Cn.jsx)("strong",{children:"Closed:"})," Deal won or lost"]})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("metrics"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Key Metrics"}),i.metrics?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.metrics&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Deal count per stage"}),(0,Cn.jsx)("li",{children:"Total pipeline value"}),(0,Cn.jsx)("li",{children:"Conversion rates between stages"}),(0,Cn.jsx)("li",{children:"Average deal size"}),(0,Cn.jsx)("li",{children:"Time spent in each stage"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("navigation"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Navigation"}),c.navigation?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.navigation&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"View your pipeline as a kanban board with drag-and-drop functionality. Use the search bar to find specific deals. Filter by deal owner to focus on your deals or team performance."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("management"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Deal Management"}),c.management?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.management&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Add new deals using the "Add Deal" button. Edit deal details by clicking on any deal card. Update close dates, values, and notes to keep your pipeline current.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("dragdrop"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Drag & Drop"}),c.dragdrop?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.dragdrop&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Drag deals between stages to update their progress. The system automatically saves changes and updates metrics. Use this to quickly move deals through your sales process."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your sales pipeline assistant. I can help you optimize your sales process, improve conversion rates, and manage your deals more effectively."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How can I improve my pipeline conversion rate?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Focus on lead qualification, follow-up timing, and deal stage progression. Consider implementing automated reminders and tracking key metrics like time-in-stage."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"What's the best way to organize my pipeline stages?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Keep stages simple and meaningful. Ensure each stage represents a clear milestone in your sales process. Regularly review and optimize based on your team's workflow."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about pipeline optimization...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},fb=e=>{let{onBack:r}=e;const{currentOrganization:n}=_n(),s=null===n||void 0===n?void 0:n.organization_id,[a,i]=(0,t.useState)([]),[l,o]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0),[u,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)(null),[x,f]=(0,t.useState)({name:"",value:"",stage:"lead",close_date:"",notes:"",company_id:""}),[g,b]=(0,t.useState)(""),[y,v]=(0,t.useState)("all"),[j,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s&&(d(!0),Promise.all([Hn(s),Fn(s)]).then(e=>{let[t,r]=e;i(t.data||[]),o(r.data||[]),d(!1)}))},[s]);const N=e=>e.reduce((e,t)=>e+(parseFloat(t.value)||0),0),k=e=>{h(e&&e.id?e:null),f({name:(null===e||void 0===e?void 0:e.name)||"",value:(null===e||void 0===e?void 0:e.value)||"",stage:(null===e||void 0===e?void 0:e.stage)||"lead",close_date:(null===e||void 0===e?void 0:e.close_date)||"",notes:(null===e||void 0===e?void 0:e.notes)||"",company_id:(null===e||void 0===e?void 0:e.company_id)||""}),m(!0)},C=()=>{m(!1),h(null)},S=e=>{const t=l.find(t=>t.id===e);return t?t.name:""};return(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Pipeline"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your sales pipeline and track deal progress through different stages."})]}),(0,Cn.jsxs)("button",{onClick:()=>w(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,Cn.jsxs)("div",{className:"relative w-64",children:[(0,Cn.jsx)(Du,{className:"absolute h-5 w-5 text-gray-400 left-3 top-1/2 -translate-y-1/2"}),(0,Cn.jsx)("input",{type:"text",placeholder:"Search deals...",value:g,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),(0,Cn.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Cn.jsx)("option",{value:"all",children:"All Deal Owners"}),(0,Cn.jsx)("option",{value:"me",children:"My Deals"}),(0,Cn.jsx)("option",{value:"team",children:"Team Deals"})]}),(0,Cn.jsxs)("button",{onClick:()=>k(null),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center space-x-2",children:[(0,Cn.jsx)(Sl,{className:"h-4 w-4"}),(0,Cn.jsx)("span",{children:"Add Deal"})]})]}),(0,Cn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:hb.map(e=>{const t=a.filter(t=>t.stage===e.id);return(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("span",{className:"text-xs text-gray-500",children:t.length})]}),(0,Cn.jsx)("div",{className:"w-full h-2 rounded-full ".concat(e.color," mb-2")}),(0,Cn.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["\xa3",N(t).toLocaleString()]})]},e.id)})}),(0,Cn.jsx)(Eg,{onDragEnd:async e=>{const{source:t,destination:r,draggableId:n}=e;if(!r)return;const l=n,o=t.droppableId,c=r.droppableId;if(o===c)return;const d=a.find(e=>e.id===l);if(!d)return;const{error:u}=await Wn(l,{stage:c});u?alert(u.message||"Error moving deal"):Hn(s).then(e=>{let{data:t}=e;return i(t||[])})},children:(0,Cn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:hb.map(e=>{const t=a.filter(t=>t.stage===e.id);return(0,Cn.jsx)(pb,{droppableId:e.id,children:(r,n)=>(0,Cn.jsxs)("div",Oe(Oe({ref:r.innerRef},r.droppableProps),{},{className:"bg-gray-100 rounded-lg p-4 min-h-[200px]",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("span",{className:"text-xs text-gray-500",children:t.length})]}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[t.map((e,t)=>(0,Cn.jsx)(Wg,{draggableId:e.id,index:t,children:(t,r)=>(0,Cn.jsxs)("div",Oe(Oe(Oe({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{className:"bg-white rounded-lg shadow border border-gray-200 p-3 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>k(e),children:[(0,Cn.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Cn.jsx)("h5",{className:"text-sm font-medium text-gray-900",children:e.name||e.title}),(0,Cn.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\xa3",parseFloat(e.value||0).toLocaleString()]})]}),(0,Cn.jsxs)("div",{className:"space-y-1",children:[(0,Cn.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,Cn.jsx)(ds,{className:"h-3 w-3 mr-1"}),S(e.company_id)]}),(0,Cn.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,Cn.jsx)(Ju,{className:"h-3 w-3 mr-1"}),"Created: ",e.created_at?e.created_at.slice(0,10):""]})]})]}))},e.id)),r.placeholder,(0,Cn.jsx)("button",{onClick:()=>k({stage:e.id}),className:"w-full p-2 text-sm text-gray-500 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:text-gray-700 transition-colors",children:"+ Add Deal"})]})]}))},e.id)})})}),u&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t={name:x.name,value:x.value?Number(x.value):0,stage:x.stage,close_date:x.close_date,notes:x.notes,company_id:x.company_id||null};let r;if(p&&p.id?({error:r}=await Wn(p.id,t)):({error:r}=await async function(e,t){return kn.from("crm_deals").insert([Oe(Oe({},t),{},{organization_id:e})])}(s,t)),r)return console.error("Supabase error:",r),void alert(r.message||"Error saving deal");C(),d(!0),Promise.all([Hn(s),Fn(s)]).then(e=>{let[t,r]=e;i(t.data||[]),o(r.data||[]),d(!1)})},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsxs)("div",{className:"text-lg font-medium text-gray-900",children:[p?"Edit":"Add"," Deal"]}),(0,Cn.jsx)("button",{type:"button",onClick:C,className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Deal Name",value:x.name,onChange:e=>f(t=>Oe(Oe({},t),{},{name:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Value (\xa3)",type:"number",value:x.value,onChange:e=>f(t=>Oe(Oe({},t),{},{value:e.target.value})),required:!0}),(0,Cn.jsx)("select",{className:"w-full px-3 py-2 border rounded",value:x.stage,onChange:e=>f(t=>Oe(Oe({},t),{},{stage:e.target.value})),children:hb.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:x.company_id,onChange:e=>f(t=>Oe(Oe({},t),{},{company_id:e.target.value})),required:!0,children:[(0,Cn.jsx)("option",{value:"",children:"Select Company"}),l.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"date",placeholder:"Close Date",value:x.close_date,onChange:e=>f(t=>Oe(Oe({},t),{},{close_date:e.target.value}))}),(0,Cn.jsx)("textarea",{className:"w-full px-3 py-2 border rounded",placeholder:"Notes",value:x.notes,onChange:e=>f(t=>Oe(Oe({},t),{},{notes:e.target.value}))})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:C,className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",children:"Save"})]})]})}),(0,Cn.jsx)(xb,{isOpen:j,onClose:()=>w(!1)})]})},gb=["title","titleId"];function bb(e,r){let{title:n,titleId:s}=e,a=Yn(e,gb);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M12.577 4.878a.75.75 0 0 1 .919-.53l4.78 1.281a.75.75 0 0 1 .531.919l-1.281 4.78a.75.75 0 0 1-1.449-.387l.81-3.022a19.407 19.407 0 0 0-5.594 5.203.75.75 0 0 1-1.139.093L7 10.06l-4.72 4.72a.75.75 0 0 1-1.06-1.061l5.25-5.25a.75.75 0 0 1 1.06 0l3.074 3.073a20.923 20.923 0 0 1 5.545-4.931l-3.042-.815a.75.75 0 0 1-.53-.919Z",clipRule:"evenodd"}))}const yb=t.forwardRef(bb),vb=["title","titleId"];function jb(e,r){let{title:n,titleId:s}=e,a=Yn(e,vb);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M7 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM14.5 9a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM1.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 7 18a9.953 9.953 0 0 1-5.385-1.572ZM14.5 16h-.106c.07-.297.088-.611.048-.933a7.47 7.47 0 0 0-1.588-3.755 4.502 4.502 0 0 1 5.874 2.636.818.818 0 0 1-.36.98A7.465 7.465 0 0 1 14.5 16Z"}))}const wb=t.forwardRef(jb),Nb=["title","titleId"];function kb(e,r){let{title:n,titleId:s}=e,a=Yn(e,Nb);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"M1.22 5.222a.75.75 0 0 1 1.06 0L7 9.942l3.768-3.769a.75.75 0 0 1 1.113.058 20.908 20.908 0 0 1 3.813 7.254l1.574-2.727a.75.75 0 0 1 1.3.75l-2.475 4.286a.75.75 0 0 1-1.025.275l-4.287-2.475a.75.75 0 0 1 .75-1.3l2.71 1.565a19.422 19.422 0 0 0-3.013-6.024L7.53 11.533a.75.75 0 0 1-1.06 0l-5.25-5.25a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const Cb=t.forwardRef(kb),Sb=()=>(0,Cn.jsxs)("div",{className:"space-y-6",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sales Reports"}),(0,Cn.jsxs)("div",{className:"flex space-x-2",children:[(0,Cn.jsxs)("select",{className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,Cn.jsx)("option",{children:"Last 6 months"}),(0,Cn.jsx)("option",{children:"Last 12 months"}),(0,Cn.jsx)("option",{children:"This year"})]}),(0,Cn.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Export Report"})]})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)(ds,{className:"h-8 w-8 text-green-500"}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),(0,Cn.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"\xa3329,000"}),(0,Cn.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,Cn.jsx)(yb,{className:"h-4 w-4 mr-1"}),"+12.5%"]})]})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)(wb,{className:"h-8 w-8 text-blue-500"}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"New Customers"}),(0,Cn.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"94"}),(0,Cn.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,Cn.jsx)(yb,{className:"h-4 w-4 mr-1"}),"+8.2%"]})]})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)(yb,{className:"h-8 w-8 text-purple-500"}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Deals Closed"}),(0,Cn.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"64"}),(0,Cn.jsxs)("div",{className:"flex items-center text-sm text-green-600",children:[(0,Cn.jsx)(yb,{className:"h-4 w-4 mr-1"}),"+15.3%"]})]})]})}),(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)(ds,{className:"h-8 w-8 text-orange-500"}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Deal Size"}),(0,Cn.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"\xa35,140"}),(0,Cn.jsxs)("div",{className:"flex items-center text-sm text-red-600",children:[(0,Cn.jsx)(Cb,{className:"h-4 w-4 mr-1"}),"-2.1%"]})]})]})})]}),(0,Cn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Revenue Trend"}),(0,Cn.jsx)("div",{className:"space-y-3",children:[{month:"Jan",revenue:45e3,deals:8,customers:12},{month:"Feb",revenue:52e3,deals:10,customers:15},{month:"Mar",revenue:48e3,deals:9,customers:13},{month:"Apr",revenue:61e3,deals:12,customers:18},{month:"May",revenue:55e3,deals:11,customers:16},{month:"Jun",revenue:68e3,deals:14,customers:20}].map((e,t)=>(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:e.month}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,Cn.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.revenue/7e4*100,"%")}})}),(0,Cn.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["\xa3",e.revenue.toLocaleString()]})]})]},e.month))})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conversion Rates"}),(0,Cn.jsx)("div",{className:"space-y-4",children:[{stage:"Lead to Qualified",rate:65,change:"+5%"},{stage:"Qualified to Proposal",rate:45,change:"+2%"},{stage:"Proposal to Negotiation",rate:30,change:"-1%"},{stage:"Negotiation to Closed",rate:75,change:"+8%"}].map(e=>(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("span",{className:"text-sm text-gray-600",children:e.stage}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,Cn.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(e.rate,"%")}})}),(0,Cn.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e.rate,"%"]}),(0,Cn.jsx)("span",{className:"text-xs ".concat(e.change.startsWith("+")?"text-green-600":"text-red-600"),children:e.change})]})]},e.stage))})]})]}),(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[(0,Cn.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Customers"}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deals"}),(0,Cn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avg. Deal Size"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{name:"TechCorp Ltd",revenue:25e3,deals:3},{name:"InnovateTech",revenue:22e3,deals:2},{name:"Acme Solutions",revenue:18e3,deals:2},{name:"StartupXYZ",revenue:15e3,deals:1},{name:"GrowthCo",revenue:12e3,deals:1}].map(e=>(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\xa3",e.revenue.toLocaleString()]}),(0,Cn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.deals}),(0,Cn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\xa3",(e.revenue/e.deals).toLocaleString()]})]},e.name))})]})})]})]}),_b="undefined"!==typeof document?t.useLayoutEffect:()=>{};function Eb(e){const r=(0,t.useRef)(null);return _b(()=>{r.current=e},[e]),(0,t.useCallback)(function(){const e=r.current;return null===e||void 0===e?void 0:e(...arguments)},[])}function Ib(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function Pb(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}function Tb(e){let r=(0,t.useRef)({isFocused:!1,observer:null});_b(()=>{const e=r.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}},[]);let n=Eb(t=>{null===e||void 0===e||e(t)});return(0,t.useCallback)(e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){r.current.isFocused=!0;let t=e.target,s=e=>{if(r.current.isFocused=!1,t.disabled){let t=Ib(e);n(t)}r.current.observer&&(r.current.observer.disconnect(),r.current.observer=null)};t.addEventListener("focusout",s,{once:!0}),r.current.observer=new MutationObserver(()=>{if(r.current.isFocused&&t.disabled){var e;null===(e=r.current.observer)||void 0===e||e.disconnect();let n=t===document.activeElement?null:document.activeElement;t.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),t.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}}),r.current.observer.observe(t,{attributes:!0,attributeFilter:["disabled"]})}},[n])}let Db=!1;function Ab(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent))}function Ob(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function Lb(e){let t=null;return()=>(null==t&&(t=e()),t)}const Rb=Lb(function(){return Ob(/^Mac/i)}),Mb=Lb(function(){return Ob(/^iPhone/i)}),zb=Lb(function(){return Ob(/^iPad/i)||Rb()&&navigator.maxTouchPoints>1}),Fb=Lb(function(){return Mb()||zb()}),Bb=(Lb(function(){return Rb()||Fb()}),Lb(function(){return Ab(/AppleWebKit/i)&&!Bb()}),Lb(function(){return Ab(/Chrome/i)})),Ub=Lb(function(){return Ab(/Android/i)});Lb(function(){return Ab(/Firefox/i)});const qb=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document},Hb=e=>{if(e&&"window"in e&&e.window===e)return e;return qb(e).defaultView||window};function Wb(e){return null!==(t=e)&&"object"===typeof t&&"nodeType"in t&&"number"===typeof t.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e;var t}let Vb=null,Gb=new Set,$b=new Map,Kb=!1,Yb=!1;const Zb={Tab:!0,Escape:!0};function Jb(e,t){for(let r of Gb)r(e,t)}function Qb(e){Kb=!0,function(e){return!(e.metaKey||!Rb()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(Vb="keyboard",Jb("keyboard",e))}function Xb(e){Vb="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(Kb=!0,Jb("pointer",e))}function ey(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(Ub()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(Kb=!0,Vb="virtual")}function ty(e){e.target!==window&&e.target!==document&&!Db&&e.isTrusted&&(Kb||Yb||(Vb="virtual",Jb("virtual",e)),Kb=!1,Yb=!1)}function ry(){Db||(Kb=!1,Yb=!0)}function ny(e){if("undefined"===typeof window||"undefined"===typeof document||$b.get(Hb(e)))return;const t=Hb(e),r=qb(e);let n=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Kb=!0,n.apply(this,arguments)},r.addEventListener("keydown",Qb,!0),r.addEventListener("keyup",Qb,!0),r.addEventListener("click",ey,!0),t.addEventListener("focus",ty,!0),t.addEventListener("blur",ry,!1),"undefined"!==typeof PointerEvent&&(r.addEventListener("pointerdown",Xb,!0),r.addEventListener("pointermove",Xb,!0),r.addEventListener("pointerup",Xb,!0)),t.addEventListener("beforeunload",()=>{sy(e)},{once:!0}),$b.set(t,{focus:n})}const sy=(e,t)=>{const r=Hb(e),n=qb(e);t&&n.removeEventListener("DOMContentLoaded",t),$b.has(r)&&(r.HTMLElement.prototype.focus=$b.get(r).focus,n.removeEventListener("keydown",Qb,!0),n.removeEventListener("keyup",Qb,!0),n.removeEventListener("click",ey,!0),r.removeEventListener("focus",ty,!0),r.removeEventListener("blur",ry,!1),"undefined"!==typeof PointerEvent&&(n.removeEventListener("pointerdown",Xb,!0),n.removeEventListener("pointermove",Xb,!0),n.removeEventListener("pointerup",Xb,!0)),$b.delete(r))};function ay(){return"pointer"!==Vb}"undefined"!==typeof document&&function(e){const t=qb(e);let r;"loading"!==t.readyState?ny(e):(r=()=>{ny(e)},t.addEventListener("DOMContentLoaded",r))}();const iy=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ly(e,r,n){ny(),(0,t.useEffect)(()=>{let t=(t,r)=>{(function(e,t,r){let n=qb(null===r||void 0===r?void 0:r.target);const s="undefined"!==typeof window?Hb(null===r||void 0===r?void 0:r.target).HTMLInputElement:HTMLInputElement,a="undefined"!==typeof window?Hb(null===r||void 0===r?void 0:r.target).HTMLTextAreaElement:HTMLTextAreaElement,i="undefined"!==typeof window?Hb(null===r||void 0===r?void 0:r.target).HTMLElement:HTMLElement,l="undefined"!==typeof window?Hb(null===r||void 0===r?void 0:r.target).KeyboardEvent:KeyboardEvent;return!((e=e||n.activeElement instanceof s&&!iy.has(n.activeElement.type)||n.activeElement instanceof a||n.activeElement instanceof i&&n.activeElement.isContentEditable)&&"keyboard"===t&&r instanceof l&&!Zb[r.key])})(!!(null===n||void 0===n?void 0:n.isTextInput),t,r)&&e(ay())};return Gb.add(t),()=>{Gb.delete(t)}},r)}let oy=!1;function cy(){return oy}function dy(e,t){if(!cy())return!(!t||!e)&&e.contains(t);if(!e||!t)return!1;let r=t;for(;null!==r;){if(r===e)return!0;r="SLOT"===r.tagName&&r.assignedSlot?r.assignedSlot.parentNode:Wb(r)?r.host:r.parentNode}return!1}const uy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;var t;if(!cy())return e.activeElement;let r=e.activeElement;for(;r&&"shadowRoot"in r&&(null===(t=r.shadowRoot)||void 0===t?void 0:t.activeElement);)r=r.shadowRoot.activeElement;return r};function my(e){return cy()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function py(e){let{isDisabled:r,onFocus:n,onBlur:s,onFocusChange:a}=e;const i=(0,t.useCallback)(e=>{if(e.target===e.currentTarget)return s&&s(e),a&&a(!1),!0},[s,a]),l=Tb(i),o=(0,t.useCallback)(e=>{const t=qb(e.target),r=t?uy(t):uy();e.target===e.currentTarget&&r===my(e.nativeEvent)&&(n&&n(e),a&&a(!0),l(e))},[a,n,l]);return{focusProps:{onFocus:!r&&(n||a||s)?o:void 0,onBlur:r||!s&&!a?void 0:i}}}function hy(){let e=(0,t.useRef)(new Map),r=(0,t.useCallback)((t,r,n,s)=>{let a=(null===s||void 0===s?void 0:s.once)?function(){e.current.delete(n),n(...arguments)}:n;e.current.set(n,{type:r,eventTarget:t,fn:a,options:s}),t.addEventListener(r,a,s)},[]),n=(0,t.useCallback)((t,r,n,s)=>{var a;let i=(null===(a=e.current.get(n))||void 0===a?void 0:a.fn)||n;t.removeEventListener(r,i,s),e.current.delete(n)},[]),s=(0,t.useCallback)(()=>{e.current.forEach((e,t)=>{n(e.eventTarget,e.type,t,e.options)})},[n]);return(0,t.useEffect)(()=>s,[s]),{addGlobalListener:r,removeGlobalListener:n,removeAllGlobalListeners:s}}function xy(e){let{isDisabled:r,onBlurWithin:n,onFocusWithin:s,onFocusWithinChange:a}=e,i=(0,t.useRef)({isFocusWithin:!1}),{addGlobalListener:l,removeAllGlobalListeners:o}=hy(),c=(0,t.useCallback)(e=>{e.currentTarget.contains(e.target)&&i.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(i.current.isFocusWithin=!1,o(),n&&n(e),a&&a(!1))},[n,a,i,o]),d=Tb(c),u=(0,t.useCallback)(e=>{if(!e.currentTarget.contains(e.target))return;const t=qb(e.target),r=uy(t);if(!i.current.isFocusWithin&&r===my(e.nativeEvent)){s&&s(e),a&&a(!0),i.current.isFocusWithin=!0,d(e);let r=e.currentTarget;l(t,"focus",e=>{if(i.current.isFocusWithin&&!dy(r,e.target)){let n=new t.defaultView.FocusEvent("blur",{relatedTarget:e.target});Pb(n,r);let s=Ib(n);c(s)}},{capture:!0})}},[s,a,d,l,c]);return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:u,onBlur:c}}}function fy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:r=!1,isTextInput:n,within:s}=e,a=(0,t.useRef)({isFocused:!1,isFocusVisible:r||ay()}),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(()=>a.current.isFocused&&a.current.isFocusVisible),d=(0,t.useCallback)(()=>c(a.current.isFocused&&a.current.isFocusVisible),[]),u=(0,t.useCallback)(e=>{a.current.isFocused=e,l(e),d()},[d]);ly(e=>{a.current.isFocusVisible=e,d()},[],{isTextInput:n});let{focusProps:m}=py({isDisabled:s,onFocusChange:u}),{focusWithinProps:p}=xy({isDisabled:!s,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:o,focusProps:s?p:m}}let gy=!1,by=0;function yy(e){"touch"===e.pointerType&&(gy=!0,setTimeout(()=>{gy=!1},50))}function vy(){if("undefined"!==typeof document)return"undefined"!==typeof PointerEvent&&document.addEventListener("pointerup",yy),by++,()=>{by--,by>0||"undefined"!==typeof PointerEvent&&document.removeEventListener("pointerup",yy)}}function jy(e){let{onHoverStart:r,onHoverChange:n,onHoverEnd:s,isDisabled:a}=e,[i,l]=(0,t.useState)(!1),o=(0,t.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,t.useEffect)(vy,[]);let{addGlobalListener:c,removeAllGlobalListeners:d}=hy(),{hoverProps:u,triggerHoverEnd:m}=(0,t.useMemo)(()=>{let e=(e,t)=>{let r=o.target;o.pointerType="",o.target=null,"touch"!==t&&o.isHovered&&r&&(o.isHovered=!1,d(),s&&s({type:"hoverend",target:r,pointerType:t}),n&&n(!1),l(!1))},t={};return"undefined"!==typeof PointerEvent&&(t.onPointerEnter=t=>{gy&&"mouse"===t.pointerType||((t,s)=>{if(o.pointerType=s,a||"touch"===s||o.isHovered||!t.currentTarget.contains(t.target))return;o.isHovered=!0;let i=t.currentTarget;o.target=i,c(qb(t.target),"pointerover",t=>{o.isHovered&&o.target&&!dy(o.target,t.target)&&e(t,t.pointerType)},{capture:!0}),r&&r({type:"hoverstart",target:i,pointerType:s}),n&&n(!0),l(!0)})(t,t.pointerType)},t.onPointerLeave=t=>{!a&&t.currentTarget.contains(t.target)&&e(t,t.pointerType)}),{hoverProps:t,triggerHoverEnd:e}},[r,n,s,a,o,c,d]);return(0,t.useEffect)(()=>{a&&m({currentTarget:o.target},o.pointerType)},[a]),{hoverProps:u,isHovered:i}}function wy(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[n,s]=(0,t.useReducer)(()=>({}),{}),a=(0,t.useMemo)(()=>function(e){if(null===e)return{width:0,height:0};let{width:t,height:r}=e.getBoundingClientRect();return{width:t,height:r}}(e),[e,n]);return Bl(()=>{if(!e)return;let t=new ResizeObserver(s);return t.observe(e),()=>{t.disconnect()}},[e]),r?{width:"".concat(a.width,"px"),height:"".concat(a.height,"px")}:a}var Ny=r(816);function ky(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:r}=e;return t+"/"+r}).join(" "):navigator.userAgent}const Cy=Math.min,Sy=Math.max,_y=Math.round,Ey=Math.floor,Iy=e=>({x:e,y:e}),Py={left:"right",right:"left",bottom:"top",top:"bottom"},Ty={start:"end",end:"start"};function Dy(e,t,r){return Sy(e,Cy(t,r))}function Ay(e,t){return"function"===typeof e?e(t):e}function Oy(e){return e.split("-")[0]}function Ly(e){return e.split("-")[1]}function Ry(e){return"x"===e?"y":"x"}function My(e){return"y"===e?"height":"width"}function zy(e){return["top","bottom"].includes(Oy(e))?"y":"x"}function Fy(e){return Ry(zy(e))}function By(e){return e.replace(/start|end/g,e=>Ty[e])}function Uy(e){return e.replace(/left|right|bottom|top/g,e=>Py[e])}function qy(e){return"number"!==typeof e?function(e){return Oe({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function Hy(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Wy(){return"undefined"!==typeof window}function Vy(e){return Ky(e)?(e.nodeName||"").toLowerCase():"#document"}function Gy(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function $y(e){var t;return null==(t=(Ky(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ky(e){return!!Wy()&&(e instanceof Node||e instanceof Gy(e).Node)}function Yy(e){return!!Wy()&&(e instanceof Element||e instanceof Gy(e).Element)}function Zy(e){return!!Wy()&&(e instanceof HTMLElement||e instanceof Gy(e).HTMLElement)}function Jy(e){return!(!Wy()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Gy(e).ShadowRoot)}function Qy(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=sv(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function Xy(e){return["table","td","th"].includes(Vy(e))}function ev(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(Qc){return!1}})}function tv(e){const t=rv(),r=Yy(e)?sv(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function rv(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function nv(e){return["html","body","#document"].includes(Vy(e))}function sv(e){return Gy(e).getComputedStyle(e)}function av(e){return Yy(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function iv(e){if("html"===Vy(e))return e;const t=e.assignedSlot||e.parentNode||Jy(e)&&e.host||$y(e);return Jy(t)?t.host:t}function lv(e){const t=iv(e);return nv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zy(t)&&Qy(t)?t:lv(t)}function ov(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);const s=lv(e),a=s===(null==(n=e.ownerDocument)?void 0:n.body),i=Gy(s);if(a){const e=cv(i);return t.concat(i,i.visualViewport||[],Qy(s)?s:[],e&&r?ov(e):[])}return t.concat(s,ov(s,[],r))}function cv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const dv=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],uv=["mainAxis","crossAxis","limiter"],mv=["apply"];function pv(e,t,r){let{reference:n,floating:s}=e;const a=zy(t),i=Fy(t),l=My(i),o=Oy(t),c="y"===a,d=n.x+n.width/2-s.width/2,u=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(o){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:u};break;case"left":p={x:n.x-s.width,y:u};break;default:p={x:n.x,y:n.y}}switch(Ly(t)){case"start":p[i]-=m*(r&&c?-1:1);break;case"end":p[i]+=m*(r&&c?-1:1)}return p}async function hv(e,t){var r;void 0===t&&(t={});const{x:n,y:s,platform:a,rects:i,elements:l,strategy:o}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:p=0}=Ay(t,e),h=qy(p),x=l[m?"floating"===u?"reference":"floating":u],f=Hy(await a.getClippingRect({element:null==(r=await(null==a.isElement?void 0:a.isElement(x)))||r?x:x.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:o})),g="floating"===u?{x:n,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(null==a.getOffsetParent?void 0:a.getOffsetParent(l.floating)),y=await(null==a.isElement?void 0:a.isElement(b))&&await(null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},v=Hy(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:b,strategy:o}):g);return{top:(f.top-v.top+h.top)/y.y,bottom:(v.bottom-f.bottom+h.bottom)/y.y,left:(f.left-v.left+h.left)/y.x,right:(v.right-f.right+h.right)/y.x}}function xv(e){const t=sv(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Zy(e),a=s?e.offsetWidth:r,i=s?e.offsetHeight:n,l=_y(r)!==a||_y(n)!==i;return l&&(r=a,n=i),{width:r,height:n,$:l}}function fv(e){return Yy(e)?e:e.contextElement}function gv(e){const t=fv(e);if(!Zy(t))return Iy(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=xv(t);let i=(a?_y(r.width):r.width)/n,l=(a?_y(r.height):r.height)/s;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}const bv=Iy(0);function yv(e){const t=Gy(e);return rv()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:bv}function vv(e,t,r,n){void 0===t&&(t=!1),void 0===r&&(r=!1);const s=e.getBoundingClientRect(),a=fv(e);let i=Iy(1);t&&(n?Yy(n)&&(i=gv(n)):i=gv(e));const l=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Gy(e))&&t}(a,r,n)?yv(a):Iy(0);let o=(s.left+l.x)/i.x,c=(s.top+l.y)/i.y,d=s.width/i.x,u=s.height/i.y;if(a){const e=Gy(a),t=n&&Yy(n)?Gy(n):n;let r=e,s=cv(r);for(;s&&n&&t!==r;){const e=gv(s),t=s.getBoundingClientRect(),n=sv(s),a=t.left+(s.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(s.clientTop+parseFloat(n.paddingTop))*e.y;o*=e.x,c*=e.y,d*=e.x,u*=e.y,o+=a,c+=i,r=Gy(s),s=cv(r)}}return Hy({width:d,height:u,x:o,y:c})}function jv(e,t){const r=av(e).scrollLeft;return t?t.left+r:vv($y(e)).left+r}function wv(e,t,r){void 0===r&&(r=!1);const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:jv(e,n)),y:n.top+t.scrollTop}}function Nv(e,t,r){let n;if("viewport"===t)n=function(e,t){const r=Gy(e),n=$y(e),s=r.visualViewport;let a=n.clientWidth,i=n.clientHeight,l=0,o=0;if(s){a=s.width,i=s.height;const e=rv();(!e||e&&"fixed"===t)&&(l=s.offsetLeft,o=s.offsetTop)}return{width:a,height:i,x:l,y:o}}(e,r);else if("document"===t)n=function(e){const t=$y(e),r=av(e),n=e.ownerDocument.body,s=Sy(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=Sy(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+jv(e);const l=-r.scrollTop;return"rtl"===sv(n).direction&&(i+=Sy(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:i,y:l}}($y(e));else if(Yy(t))n=function(e,t){const r=vv(e,!0,"fixed"===t),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=Zy(e)?gv(e):Iy(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:s*a.x,y:n*a.y}}(t,r);else{const r=yv(e);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Hy(n)}function kv(e,t){const r=iv(e);return!(r===t||!Yy(r)||nv(r))&&("fixed"===sv(r).position||kv(r,t))}function Cv(e,t,r){const n=Zy(t),s=$y(t),a="fixed"===r,i=vv(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const o=Iy(0);function c(){o.x=jv(s)}if(n||!n&&!a)if(("body"!==Vy(t)||Qy(s))&&(l=av(t)),n){const e=vv(t,!0,a,t);o.x=e.x+t.clientLeft,o.y=e.y+t.clientTop}else s&&c();a&&!n&&s&&c();const d=!s||n||a?Iy(0):wv(s,l);return{x:i.left+l.scrollLeft-o.x-d.x,y:i.top+l.scrollTop-o.y-d.y,width:i.width,height:i.height}}function Sv(e){return"static"===sv(e).position}function _v(e,t){if(!Zy(e)||"fixed"===sv(e).position)return null;if(t)return t(e);let r=e.offsetParent;return $y(e)===r&&(r=r.ownerDocument.body),r}function Ev(e,t){const r=Gy(e);if(ev(e))return r;if(!Zy(e)){let t=iv(e);for(;t&&!nv(t);){if(Yy(t)&&!Sv(t))return t;t=iv(t)}return r}let n=_v(e,t);for(;n&&Xy(n)&&Sv(n);)n=_v(n,t);return n&&nv(n)&&Sv(n)&&!tv(n)?r:n||function(e){let t=iv(e);for(;Zy(t)&&!nv(t);){if(tv(t))return t;if(ev(t))return null;t=iv(t)}return null}(e)||r}const Iv={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a="fixed"===s,i=$y(n),l=!!t&&ev(t.floating);if(n===i||l&&a)return r;let o={scrollLeft:0,scrollTop:0},c=Iy(1);const d=Iy(0),u=Zy(n);if((u||!u&&!a)&&(("body"!==Vy(n)||Qy(i))&&(o=av(n)),Zy(n))){const e=vv(n);c=gv(n),d.x=e.x+n.clientLeft,d.y=e.y+n.clientTop}const m=!i||u||a?Iy(0):wv(i,o,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-o.scrollLeft*c.x+d.x+m.x,y:r.y*c.y-o.scrollTop*c.y+d.y+m.y}},getDocumentElement:$y,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[..."clippingAncestors"===r?ev(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let n=ov(e,[],!1).filter(e=>Yy(e)&&"body"!==Vy(e)),s=null;const a="fixed"===sv(e).position;let i=a?iv(e):e;for(;Yy(i)&&!nv(i);){const t=sv(i),r=tv(i);r||"fixed"!==t.position||(s=null),(a?!r&&!s:!r&&"static"===t.position&&s&&["absolute","fixed"].includes(s.position)||Qy(i)&&!r&&kv(e,i))?n=n.filter(e=>e!==i):s=t,i=iv(i)}return t.set(e,n),n}(t,this._c):[].concat(r),n],i=a[0],l=a.reduce((e,r)=>{const n=Nv(t,r,s);return e.top=Sy(n.top,e.top),e.right=Cy(n.right,e.right),e.bottom=Cy(n.bottom,e.bottom),e.left=Sy(n.left,e.left),e},Nv(t,i,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Ev,getElementRects:async function(e){const t=this.getOffsetParent||Ev,r=this.getDimensions,n=await r(e.floating);return{reference:Cv(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=xv(e);return{width:t,height:r}},getScale:gv,isElement:Yy,isRTL:function(e){return"rtl"===sv(e).direction}};function Pv(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Tv(e,t,r,n){void 0===n&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i="function"===typeof ResizeObserver,layoutShift:l="function"===typeof IntersectionObserver,animationFrame:o=!1}=n,c=fv(e),d=s||a?[...c?ov(c):[],...ov(t)]:[];d.forEach(e=>{s&&e.addEventListener("scroll",r,{passive:!0}),a&&e.addEventListener("resize",r)});const u=c&&l?function(e,t){let r,n=null;const s=$y(e);function a(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function i(l,o){void 0===l&&(l=!1),void 0===o&&(o=1),a();const c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:p}=c;if(l||t(),!m||!p)return;const h={rootMargin:-Ey(u)+"px "+-Ey(s.clientWidth-(d+m))+"px "+-Ey(s.clientHeight-(u+p))+"px "+-Ey(d)+"px",threshold:Sy(0,Cy(1,o))||1};let x=!0;function f(t){const n=t[0].intersectionRatio;if(n!==o){if(!x)return i();n?i(!1,n):r=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==n||Pv(c,e.getBoundingClientRect())||i(),x=!1}try{n=new IntersectionObserver(f,Oe(Oe({},h),{},{root:s.ownerDocument}))}catch(Co){n=new IntersectionObserver(f,h)}n.observe(e)}(!0),a}(c,r):null;let m,p=-1,h=null;i&&(h=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=h)||e.observe(t)})),r()}),c&&!o&&h.observe(c),h.observe(t));let x=o?vv(e):null;return o&&function t(){const n=vv(e);x&&!Pv(x,n)&&r();x=n,m=requestAnimationFrame(t)}(),r(),()=>{var e;d.forEach(e=>{s&&e.removeEventListener("scroll",r),a&&e.removeEventListener("resize",r)}),null==u||u(),null==(e=h)||e.disconnect(),h=null,o&&cancelAnimationFrame(m)}}const Dv=hv,Av=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:i,middlewareData:l}=t,o=await async function(e,t){const{placement:r,platform:n,elements:s}=e,a=await(null==n.isRTL?void 0:n.isRTL(s.floating)),i=Oy(r),l=Ly(r),o="y"===zy(r),c=["left","top"].includes(i)?-1:1,d=a&&o?-1:1,u=Ay(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:h}="number"===typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&"number"===typeof h&&(p="end"===l?-1*h:h),o?{x:p*d,y:m*c}:{x:m*c,y:p*d}}(t,e);return i===(null==(r=l.offset)?void 0:r.placement)&&null!=(n=l.arrow)&&n.alignmentOffset?{}:{x:s+o.x,y:a+o.y,data:Oe(Oe({},o),{},{placement:i})}}}},Ov=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,a=Ay(e,t),{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}}}=a,c=Yn(a,uv),d={x:r,y:n},u=await hv(t,c),m=zy(Oy(s)),p=Ry(m);let h=d[p],x=d[m];if(i){const e="y"===p?"bottom":"right";h=Dy(h+u["y"===p?"top":"left"],h,h-u[e])}if(l){const e="y"===m?"bottom":"right";x=Dy(x+u["y"===m?"top":"left"],x,x-u[e])}const f=o.fn(Oe(Oe({},t),{},{[p]:h,[m]:x}));return Oe(Oe({},f),{},{data:{x:f.x-r,y:f.y-n,enabled:{[p]:i,[m]:l}}})}}},Lv=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:o,elements:c}=t,d=Ay(e,t),{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:f=!0}=d,g=Yn(d,dv);if(null!=(r=a.arrow)&&r.alignmentOffset)return{};const b=Oy(s),y=zy(l),v=Oy(l)===l,j=await(null==o.isRTL?void 0:o.isRTL(c.floating)),w=p||(v||!f?[Uy(l)]:function(e){const t=Uy(e);return[By(e),t,By(t)]}(l)),N="none"!==x;!p&&N&&w.push(...function(e,t,r,n){const s=Ly(e);let a=function(e,t,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?a:i;default:return[]}}(Oy(e),"start"===r,n);return s&&(a=a.map(e=>e+"-"+s),t&&(a=a.concat(a.map(By)))),a}(l,f,x,j));const k=[l,...w],C=await hv(t,g),S=[];let _=(null==(n=a.flip)?void 0:n.overflows)||[];if(u&&S.push(C[b]),m){const e=function(e,t,r){void 0===r&&(r=!1);const n=Ly(e),s=Fy(e),a=My(s);let i="x"===s?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Uy(i)),[i,Uy(i)]}(s,i,j);S.push(C[e[0]],C[e[1]])}if(_=[..._,{placement:s,overflows:S}],!S.every(e=>e<=0)){var E,I;const e=((null==(E=a.flip)?void 0:E.index)||0)+1,t=k[e];if(t){if(!("alignment"===m&&y!==zy(t))||_.every(e=>e.overflows[0]>0&&zy(e.placement)===y))return{data:{index:e,overflows:_},reset:{placement:t}}}let r=null==(I=_.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:I.placement;if(!r)switch(h){case"bestFit":{var P;const e=null==(P=_.filter(e=>{if(N){const t=zy(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:P[0];e&&(r=e);break}case"initialPlacement":r=l}if(s!==r)return{reset:{placement:r}}}return{}}}},Rv=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:i,elements:l}=t,o=Ay(e,t),{apply:c=()=>{}}=o,d=Yn(o,mv),u=await hv(t,d),m=Oy(s),p=Ly(s),h="y"===zy(s),{width:x,height:f}=a.floating;let g,b;"top"===m||"bottom"===m?(g=m,b=p===(await(null==i.isRTL?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,g="end"===p?"top":"bottom");const y=f-u.top-u.bottom,v=x-u.left-u.right,j=Cy(f-u[g],y),w=Cy(x-u[b],v),N=!t.middlewareData.shift;let k=j,C=w;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(C=v),null!=(n=t.middlewareData.shift)&&n.enabled.y&&(k=y),N&&!p){const e=Sy(u.left,0),t=Sy(u.right,0),r=Sy(u.top,0),n=Sy(u.bottom,0);h?C=x-2*(0!==e||0!==t?e+t:Sy(u.left,u.right)):k=f-2*(0!==r||0!==n?r+n:Sy(u.top,u.bottom))}await c(Oe(Oe({},t),{},{availableWidth:C,availableHeight:k}));const S=await i.getDimensions(l.floating);return x!==S.width||f!==S.height?{reset:{rects:!0}}:{}}}},Mv=(e,t,r)=>{const n=new Map,s=Oe({platform:Iv},r),a=Oe(Oe({},s.platform),{},{_c:n});return(async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),o=await(null==i.isRTL?void 0:i.isRTL(t));let c=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:u}=pv(c,n,o),m=n,p={},h=0;for(let x=0;x<l.length;x++){const{name:r,fn:a}=l[x],{x:f,y:g,data:b,reset:y}=await a({x:d,y:u,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=f?f:d,u=null!=g?g:u,p=Oe(Oe({},p),{},{[r]:Oe(Oe({},p[r]),b)}),y&&h<=50&&(h++,"object"===typeof y&&(y.placement&&(m=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:s}):y.rects),({x:d,y:u}=pv(c,m,o))),x=-1)}return{x:d,y:u,placement:m,strategy:s,middlewareData:p}})(e,t,Oe(Oe({},s),{},{platform:a}))};var zv="undefined"!==typeof document?t.useLayoutEffect:function(){};function Fv(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;0!==n--;)if(!Fv(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;0!==n--;){const r=s[n];if(("_owner"!==r||!e.$$typeof)&&!Fv(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function Bv(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Uv(e,t){const r=Bv(e);return Math.round(t*r)/r}function qv(e){const r=t.useRef(e);return zv(()=>{r.current=e}),r}const Hv=(e,t)=>Oe(Oe({},Av(e)),{},{options:[e,t]}),Wv=(e,t)=>Oe(Oe({},Lv(e)),{},{options:[e,t]}),Vv=(e,t)=>Oe(Oe({},Rv(e)),{},{options:[e,t]}),Gv=["listRef","overflowRef","onFallbackChange","offset","index","minItemsVisible","referenceOverflowThreshold","scrollRef"];const $v=Oe({},n),Kv=$v.useInsertionEffect||(e=>e());function Yv(e){const r=t.useRef(()=>{0});return Kv(()=>{r.current=e}),t.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==r.current?void 0:r.current(...t)},[])}const Zv="ArrowUp",Jv="ArrowDown",Qv="ArrowLeft",Xv="ArrowRight";var ej="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;const tj=[Qv,Xv],rj=[Zv,Jv];let nj=!1,sj=0;const aj=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+sj++;const ij=$v.useId||function(){const[e,r]=t.useState(()=>nj?aj():void 0);return ej(()=>{null==e&&r(aj())},[]),t.useEffect(()=>{nj=!0},[]),e};function lj(){const e=new Map;return{emit(t,r){var n;null==(n=e.get(t))||n.forEach(e=>e(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,(null==(n=e.get(t))?void 0:n.filter(e=>e!==r))||[])}}}const oj=t.createContext(null),cj=t.createContext(null),dj=()=>{var e;return(null==(e=t.useContext(oj))?void 0:e.id)||null},uj=()=>t.useContext(cj);const mj="data-floating-ui-focusable";function pj(e){void 0===e&&(e={});const{nodeId:r}=e,n=function(e){const{open:r=!1,onOpenChange:n,elements:s}=e,a=ij(),i=t.useRef({}),[l]=t.useState(()=>lj()),o=null!=dj(),[c,d]=t.useState(s.reference),u=Yv((e,t,r)=>{i.current.openEvent=e?t:void 0,l.emit("openchange",{open:e,event:t,reason:r,nested:o}),null==n||n(e,t,r)}),m=t.useMemo(()=>({setPositionReference:d}),[]),p=t.useMemo(()=>({reference:c||s.reference||null,floating:s.floating||null,domReference:s.reference}),[c,s.reference,s.floating]);return t.useMemo(()=>({dataRef:i,open:r,onOpenChange:u,elements:p,events:l,floatingId:a,refs:m}),[r,u,p,l,a,m])}(Oe(Oe({},e),{},{elements:Oe({reference:null,floating:null},e.elements)})),s=e.rootContext||n,i=s.elements,[l,o]=t.useState(null),[c,d]=t.useState(null),u=(null==i?void 0:i.domReference)||l,m=t.useRef(null),p=uj();ej(()=>{u&&(m.current=u)},[u]);const h=function(e){void 0===e&&(e={});const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:l,floating:o}={},transform:c=!0,whileElementsMounted:d,open:u}=e,[m,p]=t.useState({x:0,y:0,strategy:n,placement:r,middlewareData:{},isPositioned:!1}),[h,x]=t.useState(s);Fv(h,s)||x(s);const[f,g]=t.useState(null),[b,y]=t.useState(null),v=t.useCallback(e=>{e!==k.current&&(k.current=e,g(e))},[]),j=t.useCallback(e=>{e!==C.current&&(C.current=e,y(e))},[]),w=l||f,N=o||b,k=t.useRef(null),C=t.useRef(null),S=t.useRef(m),_=null!=d,E=qv(d),I=qv(i),P=qv(u),T=t.useCallback(()=>{if(!k.current||!C.current)return;const e={placement:r,strategy:n,middleware:h};I.current&&(e.platform=I.current),Mv(k.current,C.current,e).then(e=>{const t=Oe(Oe({},e),{},{isPositioned:!1!==P.current});D.current&&!Fv(S.current,t)&&(S.current=t,a.flushSync(()=>{p(t)}))})},[h,r,n,I,P]);zv(()=>{!1===u&&S.current.isPositioned&&(S.current.isPositioned=!1,p(e=>Oe(Oe({},e),{},{isPositioned:!1})))},[u]);const D=t.useRef(!1);zv(()=>(D.current=!0,()=>{D.current=!1}),[]),zv(()=>{if(w&&(k.current=w),N&&(C.current=N),w&&N){if(E.current)return E.current(w,N,T);T()}},[w,N,T,E,_]);const A=t.useMemo(()=>({reference:k,floating:C,setReference:v,setFloating:j}),[v,j]),O=t.useMemo(()=>({reference:w,floating:N}),[w,N]),L=t.useMemo(()=>{const e={position:n,left:0,top:0};if(!O.floating)return e;const t=Uv(O.floating,m.x),r=Uv(O.floating,m.y);return c?Oe(Oe({},e),{},{transform:"translate("+t+"px, "+r+"px)"},Bv(O.floating)>=1.5&&{willChange:"transform"}):{position:n,left:t,top:r}},[n,c,O.floating,m.x,m.y]);return t.useMemo(()=>Oe(Oe({},m),{},{update:T,refs:A,elements:O,floatingStyles:L}),[m,T,A,O,L])}(Oe(Oe({},e),{},{elements:Oe(Oe({},i),c&&{reference:c})})),x=t.useCallback(e=>{const t=Yy(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;d(t),h.refs.setReference(t)},[h.refs]),f=t.useCallback(e=>{(Yy(e)||null===e)&&(m.current=e,o(e)),(Yy(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!Yy(e))&&h.refs.setReference(e)},[h.refs]),g=t.useMemo(()=>Oe(Oe({},h.refs),{},{setReference:f,setPositionReference:x,domReference:m}),[h.refs,f,x]),b=t.useMemo(()=>Oe(Oe({},h.elements),{},{domReference:u}),[h.elements,u]),y=t.useMemo(()=>Oe(Oe(Oe({},h),s),{},{refs:g,elements:b,nodeId:r}),[h,g,b,r,s]);return ej(()=>{s.dataRef.current.floatingContext=y;const e=null==p?void 0:p.nodesRef.current.find(e=>e.id===r);e&&(e.context=y)}),t.useMemo(()=>Oe(Oe({},h),{},{context:y,refs:g,elements:b}),[h,g,b,y])}const hj="active",xj="selected";function fj(e,t,r){const n=new Map,s="item"===r;let a=e;if(s&&e){const{[hj]:t,[xj]:r}=e;a=Yn(e,[hj,xj].map(Ny.A))}return Oe(Oe(Oe({},"floating"===r&&{tabIndex:-1,[mj]:""}),a),t.map(t=>{const n=t?t[r]:null;return"function"===typeof n?e?n(e):null:n}).concat(e).reduce((e,t)=>t?(Object.entries(t).forEach(t=>{let[r,a]=t;var i;s&&[hj,xj].includes(r)||(0===r.indexOf("on")?(n.has(r)||n.set(r,[]),"function"===typeof a&&(null==(i=n.get(r))||i.push(a),e[r]=function(){for(var e,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return null==(e=n.get(r))?void 0:e.map(e=>e(...s)).find(e=>void 0!==e)})):e[r]=a)}),e):e,{}))}function gj(e,t){return Oe(Oe({},e),{},{rects:Oe(Oe({},e.rects),{},{floating:Oe(Oe({},e.rects.floating),{},{height:t})})})}let bj=(0,t.createContext)({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});bj.displayName="FloatingContext";let yj=(0,t.createContext)(null);yj.displayName="PlacementContext";function vj(e){let{children:r,enabled:n=!0}=e,[s,i]=(0,t.useState)(null),[l,o]=(0,t.useState)(0),c=(0,t.useRef)(null),[d,u]=(0,t.useState)(null);!function(e){Bl(()=>{if(!e)return;let t=new MutationObserver(()=>{let t=window.getComputedStyle(e).maxHeight,r=parseFloat(t);if(isNaN(r))return;let n=parseInt(t);isNaN(n)||r!==n&&(e.style.maxHeight="".concat(Math.ceil(r),"px"))});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}(d);let m=n&&null!==s&&null!==d,{to:p="bottom",gap:h=0,offset:x=0,padding:f=0,inner:g}=function(e,t){var r,n,s;let a=jj(null!=(r=null==e?void 0:e.gap)?r:"var(--anchor-gap, 0)",t),i=jj(null!=(n=null==e?void 0:e.offset)?n:"var(--anchor-offset, 0)",t),l=jj(null!=(s=null==e?void 0:e.padding)?s:"var(--anchor-padding, 0)",t);return Oe(Oe({},e),{},{gap:a,offset:i,padding:l})}(s,d),[b,y="center"]=p.split(" ");Bl(()=>{m&&o(0)},[m]);let{refs:v,floatingStyles:j,context:w}=pj({open:m,placement:"selection"===b?"center"===y?"bottom":"bottom-".concat(y):"center"===y?"".concat(b):"".concat(b,"-").concat(y),strategy:"absolute",transform:!1,middleware:[Hv({mainAxis:"selection"===b?0:h,crossAxis:x}),(S={padding:f},Oe(Oe({},Ov(S)),{},{options:[S,_]})),"selection"!==b&&Wv({padding:f}),"selection"===b&&g?(C=Oe(Oe({},g),{},{padding:f,overflowRef:c,offset:l,minItemsVisible:4,referenceOverflowThreshold:f,onFallbackChange(e){var t,r;if(!e)return;let n=w.elements.floating;if(!n)return;let s=parseFloat(getComputedStyle(n).scrollPaddingBottom)||0,a=Math.min(4,n.childElementCount),i=0,l=0;for(let o of null!=(r=null==(t=w.elements.floating)?void 0:t.childNodes)?r:[])if(fc(o)){let e=o.offsetTop,t=e+o.clientHeight+s,r=n.scrollTop,c=r+n.clientHeight;if(!(e>=r&&t<=c)){l=Math.max(0,Math.min(t,c)-Math.max(e,r)),i=o.clientHeight;break}a--}a>=1&&o(e=>{let t=i*a-l+s;return e>=t?e:t})}}),{name:"inner",options:C,async fn(e){const t=Ay(C,e),{listRef:r,overflowRef:n,onFallbackChange:s,offset:i=0,index:l=0,minItemsVisible:o=4,referenceOverflowThreshold:c=0,scrollRef:d}=t,u=Yn(t,Gv),{rects:m,elements:{floating:p}}=e,h=r.current[l],x=(null==d?void 0:d.current)||p,f=p.clientTop||x.clientTop,g=0!==p.clientTop,b=0!==x.clientTop,y=p===x;if(!h)return{};const v=Oe(Oe({},e),await Hv(-h.offsetTop-p.clientTop-m.reference.height/2-h.offsetHeight/2-i).fn(e)),j=await Dv(gj(v,x.scrollHeight+f+p.clientTop),u),w=await Dv(v,Oe(Oe({},u),{},{elementContext:"reference"})),N=Sy(0,j.top),k=v.y+N,S=(x.scrollHeight>x.clientHeight?e=>e:_y)(Sy(0,x.scrollHeight+(g&&y||b?2*f:0)-N-Sy(0,j.bottom)));if(x.style.maxHeight=S+"px",x.scrollTop=N,s){const e=x.offsetHeight<h.offsetHeight*Cy(o,r.current.length)-1||w.top>=-c||w.bottom>=-c;a.flushSync(()=>s(e))}return n&&(n.current=await Dv(gj(Oe(Oe({},v),{},{y:k}),x.offsetHeight+f+p.clientTop),u)),{y:k}}}):null,Vv({padding:f,apply(e){let{availableWidth:t,availableHeight:r,elements:n}=e;Object.assign(n.floating.style,{overflow:"auto",maxWidth:"".concat(t,"px"),maxHeight:"min(var(--anchor-max-height, 100vh), ".concat(r,"px)")})}})].filter(Boolean),whileElementsMounted:Tv}),[N=b,k=y]=w.placement.split("-");var C,S,_;"selection"===b&&(N="selection");let E=(0,t.useMemo)(()=>({anchor:[N,k].filter(Boolean).join(" ")}),[N,k]),I=function(e,r){const{open:n,elements:s}=e,{enabled:i=!0,overflowRef:l,scrollRef:o,onChange:c}=r,d=Yv(c),u=t.useRef(!1),m=t.useRef(null),p=t.useRef(null);t.useEffect(()=>{if(!i)return;function e(e){if(e.ctrlKey||!t||null==l.current)return;const r=e.deltaY,n=l.current.top>=-.5,s=l.current.bottom>=-.5,i=t.scrollHeight-t.clientHeight,o=r<0?-1:1,c=r<0?"max":"min";t.scrollHeight<=t.clientHeight||(!n&&r>0||!s&&r<0?(e.preventDefault(),a.flushSync(()=>{d(e=>e+Math[c](r,i*o))})):/firefox/i.test(ky())&&(t.scrollTop+=r))}const t=(null==o?void 0:o.current)||s.floating;return n&&t?(t.addEventListener("wheel",e),requestAnimationFrame(()=>{m.current=t.scrollTop,null!=l.current&&(p.current=Oe({},l.current))}),()=>{m.current=null,p.current=null,t.removeEventListener("wheel",e)}):void 0},[i,n,s.floating,l,o,d]);const h=t.useMemo(()=>({onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const e=(null==o?void 0:o.current)||s.floating;if(l.current&&e&&u.current){if(null!==m.current){const t=e.scrollTop-m.current;(l.current.bottom<-.5&&t<-1||l.current.top<-.5&&t>1)&&a.flushSync(()=>d(e=>e+t))}requestAnimationFrame(()=>{m.current=e.scrollTop})}}}),[s.floating,d,l,o]);return t.useMemo(()=>i?{floating:h}:{},[i,h])}(w,{overflowRef:c,onChange:o}),{getReferenceProps:P,getFloatingProps:T}=function(e){void 0===e&&(e=[]);const r=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),s=e.map(e=>null==e?void 0:e.item),a=t.useCallback(t=>fj(t,e,"reference"),r),i=t.useCallback(t=>fj(t,e,"floating"),n),l=t.useCallback(t=>fj(t,e,"item"),s);return t.useMemo(()=>({getReferenceProps:a,getFloatingProps:i,getItemProps:l}),[a,i,l])}([I]),D=ql(e=>{u(e),v.setFloating(e)});return t.createElement(yj.Provider,{value:i},t.createElement(bj.Provider,{value:{setFloating:D,setReference:v.setReference,styles:j,getReferenceProps:P,getFloatingProps:T,slot:E}},r))}function jj(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=Rl(),a=ql((e,t)=>{if(null==e)return[n,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[n,null];let r=Nj(e,t);return[r,n=>{let a=wj(e);{let i=a.map(e=>window.getComputedStyle(t).getPropertyValue(e));s.requestAnimationFrame(function l(){s.nextFrame(l);let o=!1;for(let[e,r]of a.entries()){let n=window.getComputedStyle(t).getPropertyValue(r);if(i[e]!==n){i[e]=n,o=!0;break}}if(!o)return;let c=Nj(e,t);r!==c&&(n(c),r=c)})}return s.dispose}]}return[n,null]}),i=(0,t.useMemo)(()=>a(e,r)[0],[e,r]),[l=i,o]=(0,t.useState)();return Bl(()=>{let[t,n]=a(e,r);if(o(t),n)return n(o)},[e,r]),l}function wj(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let r=t[1].slice(0,e).trim(),n=t[1].slice(e+1).trim();return n?[r,...wj(n)]:[r]}return[]}function Nj(e,t){let r=document.createElement("div");t.appendChild(r),r.style.setProperty("margin-top","0px","important"),r.style.setProperty("margin-top",e,"important");let n=parseFloat(window.getComputedStyle(r).marginTop)||0;return t.removeChild(r),n}function kj(e){let t=e.parentElement,r=null;for(;t&&!bc(t);)yc(t)&&(r=t),t=t.parentElement;let n=""===(null==t?void 0:t.getAttribute("disabled"));return(!n||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(yc(t))return!1;t=t.previousElementSibling}return!0}(r))&&n}var Cj=Object.defineProperty,Sj=(e,t,r)=>(((e,t,r)=>{t in e?Cj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),_j=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_j||{}),Ej=(e=>(e[e.OpenPopover=0]="OpenPopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ej||{});let Ij={0:e=>0===e.popoverState?e:Oe(Oe({},e),{},{popoverState:0,__demoMode:!1}),1:e=>1===e.popoverState?e:Oe(Oe({},e),{},{popoverState:1,__demoMode:!1}),2:(e,t)=>e.button===t.button?e:Oe(Oe({},e),{},{button:t.button}),3:(e,t)=>e.buttonId===t.buttonId?e:Oe(Oe({},e),{},{buttonId:t.buttonId}),4:(e,t)=>e.panel===t.panel?e:Oe(Oe({},e),{},{panel:t.panel}),5:(e,t)=>e.panelId===t.panelId?e:Oe(Oe({},e),{},{panelId:t.panelId})};class Pj extends $o{constructor(e){super(e),Sj(this,"actions",{close:()=>this.send({type:1}),refocusableClose:e=>{this.actions.close();let t=(()=>e?fc(e)?e:"current"in e&&fc(e.current)?e.current:this.state.button:this.state.button)();null==t||t.focus()},open:()=>this.send({type:0}),setButtonId:e=>this.send({type:3,buttonId:e}),setButton:e=>this.send({type:2,button:e}),setPanelId:e=>this.send({type:5,panelId:e}),setPanel:e=>this.send({type:4,panel:e})}),Sj(this,"selectors",{isPortalled:e=>{if(!e.button||!e.panel)return!1;for(let l of document.querySelectorAll("body > *"))if(Number(null==l?void 0:l.contains(e.button))^Number(null==l?void 0:l.contains(e.panel)))return!0;let t=Sc(),r=t.indexOf(e.button),n=(r+t.length-1)%t.length,s=(r+1)%t.length,a=t[n],i=t[s];return!e.panel.contains(a)&&!e.panel.contains(i)}});{let e=this.state.id,t=rc.get(null);this.on(0,()=>t.actions.push(e)),this.on(1,()=>t.actions.pop(e))}}static new(e){let{id:t,__demoMode:r=!1}=e;return new Pj({id:t,__demoMode:r,popoverState:r?0:1,buttons:{current:[]},button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:{current:null},afterPanelSentinel:{current:null},afterButtonSentinel:{current:null}})}reduce(e,t){return ao(t.type,Ij,e,t)}}const Tj=(0,t.createContext)(null);function Dj(e){let r=(0,t.useContext)(Tj);if(null===r){let t=new Error("<".concat(e," /> is missing a parent <Popover /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,Dj),t}return r}const Aj=["__demoMode"],Oj=["id","disabled","autoFocus"],Lj=["id","transition"],Rj=["id","focus","anchor","portal","modal","transition"];let Mj=(0,t.createContext)(null);function zj(){return(0,t.useContext)(Mj)}Mj.displayName="PopoverGroupContext";let Fj=(0,t.createContext)(null);Fj.displayName="PopoverPanelContext";let Bj=co.RenderStrategy|co.Static;function Uj(e,r){let n=(0,t.useId)(),{id:s="headlessui-popover-backdrop-".concat(n),transition:a=!1}=e,i=Yn(e,Lj),l=Dj("Popover.Backdrop"),o=sc(l,(0,t.useCallback)(e=>e.popoverState,[])),[c,d]=(0,t.useState)(null),u=$l(r,d),m=to(),[p,h]=Ql(a,c,null!==m?(m&eo.Open)===eo.Open:o===_j.Open),x=ql(e=>{if(kj(e.currentTarget))return e.preventDefault();l.actions.close()}),f=(0,t.useMemo)(()=>({open:o===_j.Open}),[o]),g=Oe({ref:u,id:s,"aria-hidden":!0,onClick:x},Jl(h));return mo()({ourProps:g,theirProps:i,slot:f,defaultTag:"div",features:Bj,visible:p,name:"Popover.Backdrop"})}let qj=co.RenderStrategy|co.Static;let Hj=go(function(e,r){var n;let s=(0,t.useId)(),{__demoMode:a=!1}=e,i=Yn(e,Aj),l=function(e){let{id:r,__demoMode:n=!1}=e,s=(0,t.useMemo)(()=>Pj.new({id:r,__demoMode:n}),[]);return od(()=>s.dispose()),s}({id:s,__demoMode:a}),o=(0,t.useRef)(null),c=$l(r,Gl(e=>{o.current=e})),[d,u,m,p,h]=sc(l,(0,t.useCallback)(e=>[e.popoverState,e.button,e.panel,e.buttonId,e.panelId],[])),x=zc(null!=(n=o.current)?n:u),f=Ul(p),g=Ul(h),b=(0,t.useMemo)(()=>({buttonId:f,panelId:g,close:l.actions.close}),[f,g,l]),y=zj(),v=null==y?void 0:y.registerPopover,j=ql(()=>{var e;return null!=(e=null==y?void 0:y.isFocusWithinPopoverGroup())?e:(null==x?void 0:x.activeElement)&&((null==u?void 0:u.contains(x.activeElement))||(null==m?void 0:m.contains(x.activeElement)))});(0,t.useEffect)(()=>null==v?void 0:v(b),[v,b]);let[w,N]=Pd(),k=Vc(u),C=qc({mainTreeNode:k,portals:w,defaultContainers:[{get current(){return l.state.button}},{get current(){return l.state.panel}}]});Ro(null==x?void 0:x.defaultView,"focus",e=>{var t,r,n,s,a,i;e.target!==window&&gc(e.target)&&l.state.popoverState===_j.Open&&(j()||l.state.button&&l.state.panel&&(C.contains(e.target)||null!=(r=null==(t=l.state.beforePanelSentinel.current)?void 0:t.contains)&&r.call(t,e.target)||null!=(s=null==(n=l.state.afterPanelSentinel.current)?void 0:n.contains)&&s.call(n,e.target)||null!=(i=null==(a=l.state.afterButtonSentinel.current)?void 0:a.contains)&&i.call(a,e.target)||l.actions.close()))},!0),Mc(d===_j.Open,C.resolveContainers,(e,t)=>{l.actions.close(),Ec(t,_c.Loose)||(e.preventDefault(),null==u||u.focus())});let S=(0,t.useMemo)(()=>({open:d===_j.Open,close:l.actions.refocusableClose}),[d,l]),_=sc(l,(0,t.useCallback)(e=>ao(e.popoverState,{[_j.Open]:eo.Open,[_j.Closed]:eo.Closed}),[])),E={ref:c},I=mo();return t.createElement(Wc,{node:k},t.createElement(vj,null,t.createElement(Fj.Provider,{value:null},t.createElement(Tj.Provider,{value:l},t.createElement(Xc,{value:l.actions.refocusableClose},t.createElement(ro,{value:_},t.createElement(N,null,I({ourProps:E,theirProps:i,slot:S,defaultTag:"div",name:"Popover"}))))))))}),Wj=go(function(e,r){let n=(0,t.useId)(),{id:s="headlessui-popover-button-".concat(n),disabled:a=!1,autoFocus:i=!1}=e,l=Yn(e,Oj),o=Dj("Popover.Button"),[c,d,u,m,p,h,x]=sc(o,(0,t.useCallback)(e=>[e.popoverState,o.selectors.isPortalled(e),e.button,e.buttonId,e.panel,e.panelId,e.afterButtonSentinel],[])),f=(0,t.useRef)(null),g="headlessui-focus-sentinel-".concat((0,t.useId)()),b=zj(),y=null==b?void 0:b.closeOthers,v=null!==(0,t.useContext)(Fj);(0,t.useEffect)(()=>{if(!v)return o.actions.setButtonId(s),()=>o.actions.setButtonId(null)},[v,s,o]);let[j]=(0,t.useState)(()=>Symbol()),w=$l(f,r,(0,t.useContext)(bj).setReference,ql(e=>{if(!v){if(e)o.state.buttons.current.push(j);else{let e=o.state.buttons.current.indexOf(j);-1!==e&&o.state.buttons.current.splice(e,1)}o.state.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),e&&o.actions.setButton(e)}})),N=$l(f,r),k=zc(f),C=ql(e=>{var t,r,n;if(v){if(o.state.popoverState===_j.Closed)return;switch(e.key){case Lo.Space:case Lo.Enter:e.preventDefault(),null==(r=(t=e.target).click)||r.call(t),o.actions.close(),null==(n=o.state.button)||n.focus()}}else switch(e.key){case Lo.Space:case Lo.Enter:e.preventDefault(),e.stopPropagation(),o.state.popoverState===_j.Closed?(null==y||y(o.state.buttonId),o.actions.open()):o.actions.close();break;case Lo.Escape:if(o.state.popoverState!==_j.Open)return null==y?void 0:y(o.state.buttonId);if(!f.current||null!=k&&k.activeElement&&!f.current.contains(k.activeElement))return;e.preventDefault(),e.stopPropagation(),o.actions.close()}}),S=ql(e=>{v||e.key===Lo.Space&&e.preventDefault()}),_=ql(e=>{var t,r;kj(e.currentTarget)||a||(v?(o.actions.close(),null==(t=o.state.button)||t.focus()):(e.preventDefault(),e.stopPropagation(),o.state.popoverState===_j.Closed?(null==y||y(o.state.buttonId),o.actions.open()):o.actions.close(),null==(r=o.state.button)||r.focus()))}),E=ql(e=>{e.preventDefault(),e.stopPropagation()}),{isFocusVisible:I,focusProps:P}=fy({autoFocus:i}),{isHovered:T,hoverProps:D}=jy({isDisabled:a}),{pressed:A,pressProps:O}=function(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,t.useRef)(null),[n,s]=(0,t.useState)(!1),a=Rl(),i=ql(()=>{r.current=null,s(!1),a.dispose()}),l=ql(e=>{if(a.dispose(),null===r.current){r.current=e.currentTarget,s(!0);{let t=oc(e.currentTarget);a.addEventListener(t,"pointerup",i,!1),a.addEventListener(t,"pointermove",e=>{if(r.current){let t=function(e){let t=e.width/2,r=e.height/2;return{top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}}(e);s(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(t,r.current.getBoundingClientRect()))}},!1),a.addEventListener(t,"pointercancel",i,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:l,onPointerUp:i,onClick:i}}}({disabled:a}),L=c===_j.Open,R=(0,t.useMemo)(()=>({open:L,active:A||L,disabled:a,hover:T,focus:I,autofocus:i}),[L,T,I,A,a,i]),M=function(e,r){return(0,t.useMemo)(()=>{var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()||"BUTTON"===(null==r?void 0:r.tagName)&&!r.hasAttribute("type")?"button":void 0},[e.type,e.as,r])}(e,u),z=fo(v?{ref:N,type:M,onKeyDown:C,onClick:_,disabled:a||void 0,autoFocus:i}:{ref:w,id:m,type:M,"aria-expanded":c===_j.Open,"aria-controls":p?h:void 0,disabled:a||void 0,autoFocus:i,onKeyDown:C,onKeyUp:S,onClick:_,onMouseDown:E},P,D,O),F=dd(),B=ql(()=>{if(!fc(o.state.panel))return;let e=o.state.panel;ao(F.current,{[cd.Forwards]:()=>Dc(e,Nc.First),[cd.Backwards]:()=>Dc(e,Nc.Last)})===kc.Error&&Dc(Sc().filter(e=>"true"!==e.dataset.headlessuiFocusGuard),ao(F.current,{[cd.Forwards]:Nc.Next,[cd.Backwards]:Nc.Previous}),{relativeTo:o.state.button})}),U=mo();return t.createElement(t.Fragment,null,U({ourProps:z,theirProps:l,slot:R,defaultTag:"button",name:"Popover.Button"}),L&&!v&&d&&t.createElement(Uc,{id:g,ref:x,features:Bc.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:B}))}),Vj=go(Uj),Gj=go(Uj),$j=go(function(e,r){let n=(0,t.useId)(),{id:s="headlessui-popover-panel-".concat(n),focus:a=!1,anchor:i,portal:l=!1,modal:o=!1,transition:c=!1}=e,d=Yn(e,Rj),u=Dj("Popover.Panel"),m=sc(u,u.selectors.isPortalled),[p,h,x,f,g]=sc(u,(0,t.useCallback)(e=>[e.popoverState,e.button,e.__demoMode,e.beforePanelSentinel,e.afterPanelSentinel],[])),b="headlessui-focus-sentinel-before-".concat(n),y="headlessui-focus-sentinel-after-".concat(n),v=(0,t.useRef)(null),j=function(e){return(0,t.useMemo)(()=>e?"string"==typeof e?{to:e}:e:null,[e])}(i),[w,N]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===e&&(e=null),"string"==typeof e&&(e={to:e});let r=(0,t.useContext)(yj),n=(0,t.useMemo)(()=>e,[JSON.stringify(e,(e,t)=>{var r;return null!=(r=null==t?void 0:t.outerHTML)?r:t})]);Bl(()=>{null==r||r(null!=n?n:null)},[r,n]);let s=(0,t.useContext)(bj);return(0,t.useMemo)(()=>[s.setFloating,e?s.styles:{}],[s.setFloating,e,s.styles])}(j),k=function(){let{getFloatingProps:e,slot:r}=(0,t.useContext)(bj);return(0,t.useCallback)(function(){return Object.assign({},e(...arguments),{"data-anchor":r.anchor})},[e,r])}();j&&(l=!0);let[C,S]=(0,t.useState)(null),_=$l(v,r,j?w:null,u.actions.setPanel,S),E=zc(h),I=zc(v);Bl(()=>(u.actions.setPanelId(s),()=>u.actions.setPanelId(null)),[s,u]);let P=to(),[T,D]=Ql(c,C,null!==P?(P&eo.Open)===eo.Open:p===_j.Open);vc(T,h,u.actions.close),Jc(!x&&(o&&T),I);let A=ql(e=>{var t;if(e.key===Lo.Escape){if(u.state.popoverState!==_j.Open||!v.current||null!=I&&I.activeElement&&!v.current.contains(I.activeElement))return;e.preventDefault(),e.stopPropagation(),u.actions.close(),null==(t=u.state.button)||t.focus()}});(0,t.useEffect)(()=>{var t;e.static||p===_j.Closed&&(null==(t=e.unmount)||t)&&u.actions.setPanel(null)},[p,e.unmount,e.static,u]),(0,t.useEffect)(()=>{if(x||!a||p!==_j.Open||!v.current)return;let e=null==I?void 0:I.activeElement;v.current.contains(e)||Dc(v.current,Nc.First)},[x,a,v.current,p]);let O=(0,t.useMemo)(()=>({open:p===_j.Open,close:u.actions.refocusableClose}),[p,u]),L=fo(j?k():{},Oe({ref:_,id:s,onKeyDown:A,onBlur:a&&p===_j.Open?e=>{var t,r,n,s,a;let i=e.relatedTarget;i&&v.current&&(null!=(t=v.current)&&t.contains(i)||(u.actions.close(),(null!=(n=null==(r=f.current)?void 0:r.contains)&&n.call(r,i)||null!=(a=null==(s=g.current)?void 0:s.contains)&&a.call(s,i))&&i.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:Oe(Oe(Oe({},d.style),N),{},{"--button-width":wy(h,!0).width})},Jl(D))),R=dd(),M=ql(()=>{let e=v.current;e&&ao(R.current,{[cd.Forwards]:()=>{var t;Dc(e,Nc.First)===kc.Error&&(null==(t=u.state.afterPanelSentinel.current)||t.focus())},[cd.Backwards]:()=>{var e;null==(e=u.state.button)||e.focus({preventScroll:!0})}})}),z=ql(()=>{let e=v.current;e&&ao(R.current,{[cd.Forwards]:()=>{if(!u.state.button)return;let e=Sc(),t=e.indexOf(u.state.button),r=e.slice(0,t+1),n=[...e.slice(t+1),...r];for(let s of n.slice())if("true"===s.dataset.headlessuiFocusGuard||null!=C&&C.contains(s)){let e=n.indexOf(s);-1!==e&&n.splice(e,1)}Dc(n,Nc.First,{sorted:!1})},[cd.Backwards]:()=>{var t;Dc(e,Nc.Previous)===kc.Error&&(null==(t=u.state.button)||t.focus())}})}),F=mo();return t.createElement(no,null,t.createElement(Fj.Provider,{value:s},t.createElement(Xc,{value:u.actions.refocusableClose},t.createElement(Ad,{enabled:!!l&&(e.static||T),ownerDocument:E},T&&m&&t.createElement(Uc,{id:b,ref:f,features:Bc.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:M}),F({ourProps:L,theirProps:d,slot:O,defaultTag:"div",features:qj,visible:T,name:"Popover.Panel"}),T&&m&&t.createElement(Uc,{id:y,ref:g,features:Bc.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:z})))))}),Kj=go(function(e,r){let n=(0,t.useRef)(null),s=$l(n,r),[a,i]=(0,t.useState)([]),l=ql(e=>{i(t=>{let r=t.indexOf(e);if(-1!==r){let e=t.slice();return e.splice(r,1),e}return t})}),o=ql(e=>(i(t=>[...t,e]),()=>l(e))),c=ql(()=>{var e;let t=oc(n);if(!t)return!1;let r=t.activeElement;return!(null==(e=n.current)||!e.contains(r))||a.some(e=>{var n,s;return(null==(n=t.getElementById(e.buttonId.current))?void 0:n.contains(r))||(null==(s=t.getElementById(e.panelId.current))?void 0:s.contains(r))})}),d=ql(e=>{for(let t of a)t.buttonId.current!==e&&t.close()}),u=(0,t.useMemo)(()=>({registerPopover:o,unregisterPopover:l,isFocusWithinPopoverGroup:c,closeOthers:d}),[o,l,c,d]),m=(0,t.useMemo)(()=>({}),[]),p=e,h={ref:s},x=mo();return t.createElement(Wc,null,t.createElement(Mj.Provider,{value:u},x({ourProps:h,theirProps:p,slot:m,defaultTag:"div",name:"Popover.Group"})))}),Yj=Object.assign(Hj,{Button:Wj,Backdrop:Gj,Overlay:Vj,Panel:$j,Group:Kj});const Zj=["title","titleId"];function Jj(e,r){let{title:n,titleId:s}=e,a=Yn(e,Zj);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Qj=t.forwardRef(Jj),Xj=["title","titleId"];function ew(e,r){let{title:n,titleId:s}=e,a=Yn(e,Xj);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const tw=t.forwardRef(ew),rw=e=>{switch(e){case"success":return(0,Cn.jsx)(Qn,{className:"h-5 w-5 text-green-500"});case"warning":return(0,Cn.jsx)(ts,{className:"h-5 w-5 text-yellow-500"});case"error":return(0,Cn.jsx)(ts,{className:"h-5 w-5 text-red-500"});default:return(0,Cn.jsx)(ss,{className:"h-5 w-5 text-blue-500"})}},nw=e=>{switch(e){case"sales":return"bg-blue-100 text-blue-800";case"hr":return"bg-purple-100 text-purple-800";case"finance":return"bg-green-100 text-green-800";case"marketing":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},sw=e=>{const t=new Date(e),r=(new Date-t)/36e5;return r<1?"Just now":r<24?"".concat(Math.floor(r),"h ago"):r<168?"".concat(Math.floor(r/24),"d ago"):t.toLocaleDateString()};function aw(e){let{isOpen:t,onClose:r}=e;const{notifications:n,unreadCount:s,loading:a,markNotificationAsRead:i,markAllNotificationsAsRead:l}=Ns();return t?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,Cn.jsxs)("div",{className:"absolute right-4 top-16 w-96 max-w-md bg-white shadow-2xl rounded-lg border border-gray-200 transform transition-all duration-200 ease-in-out",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)(ls,{className:"h-6 w-6 text-gray-600"}),(0,Cn.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),s>0&&(0,Cn.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:s})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[s>0&&(0,Cn.jsx)("button",{onClick:async()=>{await l()},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"}),(0,Cn.jsx)("button",{onClick:r,className:"p-1 rounded-full hover:bg-gray-100",children:(0,Cn.jsx)(Nl,{className:"h-5 w-5 text-gray-500"})})]})]}),(0,Cn.jsx)("div",{className:"max-h-96 overflow-y-auto",children:a?(0,Cn.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===n.length?(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Cn.jsx)(ls,{className:"h-12 w-12 text-gray-300 mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No notifications"}),(0,Cn.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"You're all caught up!"})]}):(0,Cn.jsx)("div",{className:"divide-y divide-gray-100",children:n.map(e=>(0,Cn.jsx)("div",{onClick:()=>(async e=>{e.read||await i(e.id),e.action_url&&(window.location.href=e.action_url)})(e),className:"p-4 cursor-pointer transition-colors ".concat(e.read?"hover:bg-gray-50":"bg-blue-50"),children:(0,Cn.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 mt-1",children:rw(e.type)}),(0,Cn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("p",{className:"text-sm font-medium ".concat(e.read?"text-gray-600":"text-gray-900"),children:e.title}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(nw(e.category)),children:e.category}),(0,Cn.jsx)("span",{className:"text-xs text-gray-500",children:sw(e.created_at)})]})]}),(0,Cn.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),e.action_text&&(0,Cn.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,Cn.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:e.action_text}),!e.read&&(0,Cn.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})},e.id))})}),(0,Cn.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,Cn.jsx)("button",{onClick:()=>window.location.href="/notifications",className:"w-full text-center text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View all notifications \u2192"})})]})]}):null}const iw=r.p+"static/media/logopurple2.782825010a7f66b02b08.png",lw=e=>{var r,n;let{notificationModalOpen:s,setNotificationModalOpen:a}=e;const i=ee(),[l,o]=(0,t.useState)(""),{user:c,userProfile:d,signOut:u}=_n(),{unreadCount:m}=Ns();return(0,Cn.jsxs)("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,Cn.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"flex justify-between items-center h-12",children:[(0,Cn.jsx)("div",{className:"flex items-center",children:(0,Cn.jsx)("div",{className:"flex-shrink-0",children:(0,Cn.jsx)("button",{onClick:()=>i("/dashboard"),className:"flex items-center",children:(0,Cn.jsx)("img",{src:iw,alt:"LayrBase",className:"h-6 w-auto"})})})}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsxs)(Yj,{className:"relative",children:[(0,Cn.jsx)(Yj.Button,{className:"px-2.5 py-1.5 text-gray-500 hover:text-gray-700 text-xs font-medium border border-gray-200 rounded-md",children:"Feedback"}),(0,Cn.jsx)(Yj.Panel,{className:"absolute right-0 z-10 mt-2 w-96 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,Cn.jsx)("div",{className:"p-4",children:(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o("")},children:[(0,Cn.jsx)("div",{className:"mb-4",children:(0,Cn.jsxs)("select",{className:"w-full rounded-md border border-gray-300 py-2 px-3 text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,Cn.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select a topic..."}),(0,Cn.jsx)("option",{value:"bug",children:"Bug Report"}),(0,Cn.jsx)("option",{value:"feature",children:"Feature Request"}),(0,Cn.jsx)("option",{value:"improvement",children:"Improvement"}),(0,Cn.jsx)("option",{value:"other",children:"Other"})]})}),(0,Cn.jsx)("div",{className:"mb-4",children:(0,Cn.jsx)("textarea",{value:l,onChange:e=>o(e.target.value),placeholder:"Your feedback...",className:"w-full h-32 rounded-md border border-gray-300 py-2 px-3 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black",children:"Send"})})]})})})]}),(0,Cn.jsxs)("button",{onClick:()=>a(!0),className:"relative p-1.5 rounded-full text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,Cn.jsx)(Qj,{className:"h-5 w-5"}),m>0&&(0,Cn.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] flex items-center justify-center",children:m>99?"99+":m})]}),(0,Cn.jsxs)(Yj,{className:"relative",children:[(0,Cn.jsx)(Yj.Button,{className:"p-1.5 rounded-full text-purple-800 hover:bg-pink-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 bg-pink-100 w-8 h-8 flex items-center justify-center text-xs font-medium",children:d&&d.first_name&&d.last_name?"".concat(d.first_name.charAt(0)).concat(d.last_name.charAt(0)).toUpperCase():(null===c||void 0===c||null===(r=c.email)||void 0===r?void 0:r.charAt(0).toUpperCase())||"U"}),(0,Cn.jsx)(Yj.Panel,{className:"absolute right-0 z-10 mt-2 w-72 rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,Cn.jsxs)("div",{className:"p-2",children:[(0,Cn.jsx)("div",{className:"flex justify-center py-4",children:(0,Cn.jsx)("div",{className:"w-16 h-16 rounded-full bg-pink-100 flex items-center justify-center text-purple-800 text-lg font-medium",children:d&&d.first_name&&d.last_name?"".concat(d.first_name.charAt(0)).concat(d.last_name.charAt(0)).toUpperCase():(null===c||void 0===c||null===(n=c.email)||void 0===n?void 0:n.charAt(0).toUpperCase())||"U"})}),(0,Cn.jsxs)("div",{className:"px-2 py-2 text-center",children:[(0,Cn.jsx)("p",{className:"font-semibold text-gray-800",children:d?"".concat(d.first_name," ").concat(d.last_name):null===c||void 0===c?void 0:c.email}),(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:null===c||void 0===c?void 0:c.email})]}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 my-1"}),(0,Cn.jsx)("div",{className:"space-y-1 py-1",children:(0,Cn.jsx)("button",{className:"block w-full text-left px-2 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",onClick:()=>i("/myorgs"),children:"My Organizations"})}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 my-1"}),(0,Cn.jsx)("div",{className:"space-y-1 py-1",children:(0,Cn.jsxs)("button",{onClick:async()=>{await u()},className:"flex justify-between items-center w-full text-left px-2 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:["Sign Out",(0,Cn.jsx)(tw,{className:"h-4 w-4 text-gray-400"})]})})]})})]})]})]})}),(0,Cn.jsx)(aw,{isOpen:s,onClose:()=>a(!1)})]})},ow=["title","titleId"];function cw(e,r){let{title:n,titleId:s}=e,a=Yn(e,ow);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M10 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM1.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 7 18a9.953 9.953 0 0 1-5.385-1.572ZM16.25 5.75a.75.75 0 0 0-1.5 0v2h-2a.75.75 0 0 0 0 1.5h2v2a.75.75 0 0 0 1.5 0v-2h2a.75.75 0 0 0 0-1.5h-2v-2Z"}))}const dw=t.forwardRef(cw),uw=r.p+"static/media/logopurple.7d13ff0f308afd62ed21.png";const mw=e=>{let{onSuccess:r,onCancel:n}=e;const[s,a]=(0,t.useState)({name:"",description:"",industry:"",website:""}),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(""),{createOrganization:d,refreshOrganizations:u}=_n(),m=e=>{const{name:t,value:r}=e.target;a(e=>Oe(Oe({},e),{},{[t]:r}))};return(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Cn.jsx)("div",{className:"flex justify-center mb-4",children:(0,Cn.jsx)("img",{src:uw,alt:"LayrBase Logo",className:"h-12 w-auto"})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create Organization"}),(0,Cn.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Set up your organization to get started with Layrbase"})]}),(0,Cn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),l(!0),c(""),!s.name.trim())return c("Organization name is required"),void l(!1);try{const{data:e,error:t,user:n}=await async function(e,t,r,n){const s=await kn.auth.getUser();console.log("User in createOrgDirect:",s);const a=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),{data:i,error:l}=await kn.from("organizations").insert([{name:e,slug:a,description:t,industry:r,website:n}]).select().single();if(l)return{data:null,error:l,user:s};const{error:o}=await kn.from("user_organizations").insert([{user_id:s.data.user.id,organization_id:i.id,role:"owner"}]);return o?{data:null,error:o,user:s}:{data:i,error:null,user:s}}(s.name,s.description,s.industry,s.website);console.log("Create organization result:",{data:e,error:t}),t?c(t.message||"Failed to create organization"):(await u(),r(e))}catch(t){c("An unexpected error occurred")}finally{l(!1)}},children:[o&&(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsx)("div",{className:"ml-3",children:(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:o})})})}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Organization Name *"}),(0,Cn.jsx)("input",{id:"name",name:"name",type:"text",required:!0,value:s.name,onChange:m,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Acme Corp"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,Cn.jsx)("textarea",{id:"description",name:"description",rows:3,value:s.description,onChange:m,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Brief description of your organization"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700",children:"Industry"}),(0,Cn.jsxs)("select",{id:"industry",name:"industry",value:s.industry,onChange:m,className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[(0,Cn.jsx)("option",{value:"",children:"Select an industry"}),(0,Cn.jsx)("option",{value:"Technology",children:"Technology"}),(0,Cn.jsx)("option",{value:"Healthcare",children:"Healthcare"}),(0,Cn.jsx)("option",{value:"Finance",children:"Finance"}),(0,Cn.jsx)("option",{value:"Education",children:"Education"}),(0,Cn.jsx)("option",{value:"Retail",children:"Retail"}),(0,Cn.jsx)("option",{value:"Manufacturing",children:"Manufacturing"}),(0,Cn.jsx)("option",{value:"Consulting",children:"Consulting"}),(0,Cn.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"website",className:"block text-sm font-medium text-gray-700",children:"Website"}),(0,Cn.jsx)("input",{id:"website",name:"website",type:"url",value:s.website,onChange:m,className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"https://example.com"})]})]}),(0,Cn.jsxs)("div",{className:"flex space-x-3",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:i,className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Creating...":"Create Organization"})]})]})]})})},pw=e=>{let{onSuccess:r,onCancel:n}=e;const[s,a]=(0,t.useState)(""),[i,l]=(0,t.useState)(!1),[o,c]=(0,t.useState)(""),{joinOrganization:d,refreshOrganizations:u}=_n();return(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Cn.jsx)("div",{className:"flex justify-center mb-4",children:(0,Cn.jsx)("img",{src:uw,alt:"LayrBase Logo",className:"h-12 w-auto"})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Join Organization"}),(0,Cn.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your invitation token to join an organization"})]}),(0,Cn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),l(!0),c(""),!s.trim())return c("Invitation token is required"),void l(!1);try{const{data:e,error:t}=await d(s);t?c(t.message):(await u(),r(e))}catch(t){c("An unexpected error occurred")}finally{l(!1)}},children:[o&&(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsx)("div",{className:"ml-3",children:(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:o})})})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"invitation-token",className:"block text-sm font-medium text-gray-700",children:"Invitation Token"}),(0,Cn.jsx)("input",{id:"invitation-token",name:"invitationToken",type:"text",required:!0,value:s,onChange:e=>a(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your invitation token"}),(0,Cn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"You should have received this token via email or from your organization admin"})]}),(0,Cn.jsxs)("div",{className:"flex space-x-3",children:[(0,Cn.jsx)("button",{type:"button",onClick:n,className:"flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:i,className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Joining...":"Join Organization"})]})]})]})})},hw=e=>{var r;let{tabs:n,activeTab:s,subTabs:a,activeSubTab:i}=e;const l=ee(),[o,c]=(0,t.useState)([s]),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),{organizations:h,currentOrganization:x,setCurrentOrganization:f,refreshOrganizations:g}=_n(),b=(e,t)=>{t?(e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e):(e=>{console.log("handleTabClick called with",e);const t={company:"foundation",finance:"overview",legal:"contracts",captable:"captable",marketing:"events",sales:"crm",hr:"employees"}[e],r=t?"/".concat(e,"/").concat(t):"/".concat(e);console.log("Navigating to",r),l(r),o.includes(e)||c(t=>[...t,e])})(e)},y={dashboard:[],company:[{id:"foundation",name:"Company Foundations"},{id:"details",name:"Company Details"}],finance:[{id:"overview",name:"Overview"},{id:"budget",name:"Budget & Forecast"},{id:"cashflow",name:"Cash Flow"},{id:"scenario",name:"Scenario Planning"},{id:"invoicing",name:"Invoicing"},{id:"management",name:"Management Accounts"}],legal:[{id:"contracts",name:"Contracts"},{id:"templates",name:"Templates"},{id:"compliance",name:"Compliance Deadlines"},{id:"risk",name:"Risk & Insurance"},{id:"requirements",name:"Legal Requirements"}],captable:[{id:"captable",name:"Cap Table"},{id:"rounds",name:"Round History"},{id:"exits",name:"Exit Scenarios"},{id:"investment",name:"Investment Planning"}],marketing:[{id:"events",name:"Events Calendar"},{id:"brand",name:"Brand Assets"},{id:"sales",name:"Sales Collateral"}],sales:[{id:"crm",name:"CRM Dashboard"},{id:"contacts",name:"Contacts"},{id:"pipeline",name:"Pipeline"}],hr:[{id:"employees",name:"Employees"},{id:"time",name:"Time Manager"},{id:"policies",name:"Company Policies"}]};return(0,Cn.jsxs)("div",{className:"w-64 min-w-64 bg-white border-r border-gray-200 min-h-screen",children:[(0,Cn.jsx)("div",{className:"px-4 pt-4 pb-2 relative",children:(0,Cn.jsxs)(Yj,{className:"relative w-full",children:[(0,Cn.jsxs)(Yj.Button,{className:"w-full max-w-full flex items-center gap-3 bg-gray-100 hover:bg-gray-200 rounded-lg shadow-sm px-3 py-2 transition group border border-gray-200",children:[null!==x&&void 0!==x&&x.logoUrl?(0,Cn.jsx)("img",{src:x.logoUrl,alt:x.organization_name,className:"w-10 h-10 rounded-lg object-cover bg-white border"}):(0,Cn.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gray-900 flex items-center justify-center text-xl font-bold text-white border",children:(null===x||void 0===x||null===(r=x.organization_name)||void 0===r?void 0:r.charAt(0))||"?"}),(0,Cn.jsxs)("div",{className:"flex-1 text-left min-w-0",children:[(0,Cn.jsx)("div",{className:"font-semibold text-gray-900 text-sm leading-tight truncate max-w-[110px]",children:(null===x||void 0===x?void 0:x.organization_name)||"Select Organization"}),(0,Cn.jsxs)("div",{className:"text-xs text-gray-500",children:[(null===x||void 0===x?void 0:x.member_count)||0," Members"]})]}),(0,Cn.jsx)(gl,{className:"h-5 w-5 text-gray-400 group-hover:text-gray-600 transition-transform"})]}),(0,Cn.jsx)(Yj.Panel,{className:"absolute left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-20 p-2 space-y-1 min-w-[320px] w-full",children:(0,Cn.jsxs)("div",{className:"p-2",children:[(0,Cn.jsx)("div",{className:"mb-2 text-xs text-gray-500 font-semibold uppercase",children:"Organizations"}),(0,Cn.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:null===h||void 0===h?void 0:h.map(e=>{var t;return(0,Cn.jsxs)("button",{onClick:()=>f(e),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center gap-2 ".concat((null===x||void 0===x?void 0:x.organization_id)===e.organization_id?"bg-purple-50 text-purple-700 border border-purple-200":"text-gray-700 hover:bg-gray-50"),children:[(0,Cn.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-900 flex items-center justify-center text-base font-bold text-white border",children:(null===(t=e.organization_name)||void 0===t?void 0:t.charAt(0))||"?"}),(0,Cn.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Cn.jsx)("div",{className:"font-medium",children:e.organization_name}),(0,Cn.jsxs)("div",{className:"text-xs text-gray-500",children:[e.member_count||0," Members"]})]}),(null===x||void 0===x?void 0:x.organization_id)===e.organization_id&&(0,Cn.jsx)("div",{className:"ml-2 w-2 h-2 bg-purple-600 rounded-full"})]},e.organization_id)})}),(0,Cn.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-1",children:[(0,Cn.jsxs)("button",{onClick:()=>u(!0),className:"w-full text-left px-3 py-2 rounded-md text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[(0,Cn.jsx)(Sl,{className:"h-4 w-4 text-gray-500"}),"Create Organization"]}),(0,Cn.jsxs)("button",{onClick:()=>p(!0),className:"w-full text-left px-3 py-2 rounded-md text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center gap-2",children:[(0,Cn.jsx)(dw,{className:"h-4 w-4 text-gray-500"}),"Join Organization"]})]})]})})]})}),(0,Cn.jsx)("div",{className:"border-t border-gray-100 mb-2"}),(0,Cn.jsxs)("nav",{className:"space-y-1 pt-0",children:[n.map(e=>{var t;const r=o.includes(e.id),n=(null===(t=y[e.id])||void 0===t?void 0:t.length)>0;return(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("button",{onClick:()=>b(e.id,n),className:"w-full flex items-center justify-between px-4 py-3 text-left text-sm font-medium transition-colors ".concat(s===e.id?"bg-purple-50 text-purple-700 border-r-2 border-purple-500":"text-gray-700 hover:bg-gray-50"),children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:e.icon})}),(0,Cn.jsx)("span",{children:e.name})]}),n&&(r?(0,Cn.jsx)(gl,{className:"h-4 w-4"}):(0,Cn.jsx)(vl,{className:"h-4 w-4"}))]}),r&&n&&(0,Cn.jsx)("div",{className:"bg-gray-50 border-l-2 border-gray-200",children:y[e.id].map(t=>(0,Cn.jsx)(Ie,{to:"/".concat(e.id,"/").concat(t.id),className:"w-full flex items-center px-8 py-2 text-left text-sm transition-colors ".concat(i===t.id?"text-purple-700 bg-purple-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),style:{textDecoration:"none"},children:t.name},t.id))})]},e.id)}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 my-2"}),(0,Cn.jsx)("button",{onClick:()=>l("/marketplace"),className:"w-full flex items-center px-4 py-3 text-left text-sm font-medium transition-colors ".concat("marketplace"===s?"bg-purple-50 text-purple-700 border-r-2 border-purple-500":"text-gray-700 hover:bg-gray-50"),children:(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,Cn.jsx)("span",{children:"Marketplace"})]})})]}),d&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,Cn.jsx)(mw,{onSuccess:async e=>{u(!1),await g()},onCancel:()=>u(!1)})})}),m&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:(0,Cn.jsx)(pw,{onSuccess:async e=>{p(!1),await g()},onCancel:()=>p(!1)})})})]})},xw=()=>(0,Cn.jsx)("footer",{className:"w-full bg-white border-t border-gray-200",children:(0,Cn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsx)("div",{className:"text-gray-900 text-sm",children:"\u25b2"}),(0,Cn.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,Cn.jsx)(Ie,{to:"/",className:"text-gray-600 hover:text-gray-900 text-sm",children:"Home"}),(0,Cn.jsx)(Ie,{to:"/docs",className:"text-gray-600 hover:text-gray-900 text-sm",children:"Docs"}),(0,Cn.jsx)(Ie,{to:"/guides",className:"text-gray-600 hover:text-gray-900 text-sm",children:"Guides"}),(0,Cn.jsx)(Ie,{to:"/help",className:"text-gray-600 hover:text-gray-900 text-sm",children:"Help"}),(0,Cn.jsx)(Ie,{to:"/contact",className:"text-gray-600 hover:text-gray-900 text-sm",children:"Contact"}),(0,Cn.jsx)("div",{className:"relative group",children:(0,Cn.jsxs)("button",{className:"flex items-center text-gray-600 hover:text-gray-900 text-sm",children:["Legal",(0,Cn.jsx)(gl,{className:"ml-1 h-3 w-3"})]})})]})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("span",{className:"flex h-2 w-2 rounded-full bg-green-500 mr-2"}),(0,Cn.jsx)("span",{className:"text-gray-600 text-sm",children:"All systems normal"})]}),(0,Cn.jsx)("button",{className:"p-2 text-gray-600 hover:text-gray-900",children:(0,Cn.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,Cn.jsx)("button",{className:"p-2 text-gray-600 hover:text-gray-900",children:(0,Cn.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]})]}),(0,Cn.jsx)("div",{className:"mt-3 text-xs text-gray-500",children:"\xa9 2025, LayrBase Inc."})]})});function fw(e){let{title:t,subtitle:r}=e;return(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:t}),r&&(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:r})]})}const gw=e=>{let{children:r,tabs:n,activeTab:s,subTabs:a,activeSubTab:i,showSideNav:l=!0,title:o,subtitle:c}=e;const[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1),f=e=>{u(!1),p(!1)};return(0,Cn.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[(0,Cn.jsx)(lw,{notificationModalOpen:h,setNotificationModalOpen:x}),(0,Cn.jsxs)("div",{className:"flex flex-1",children:[l&&n&&(0,Cn.jsx)(hw,{tabs:n,activeTab:s,subTabs:a,activeSubTab:i}),(0,Cn.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Cn.jsx)("main",{className:"flex-1",children:(0,Cn.jsxs)("div",{className:"pt-8 pb-8 px-4 sm:px-6 lg:px-8",children:[o&&(0,Cn.jsx)(fw,{title:o,subtitle:c}),r]})}),(0,Cn.jsx)(xw,{})]})]}),d&&(0,Cn.jsx)(mw,{onSuccess:f,onCancel:()=>u(!1)}),m&&(0,Cn.jsx)(pw,{onSuccess:f,onCancel:()=>p(!1)})]})},bw=e=>{let{activeSubTab:t,onSubTabChange:r}=e;return(0,Cn.jsx)("div",{className:"space-y-6",children:(0,Cn.jsx)("div",{children:(()=>{switch(t){case"crm":default:return(0,Cn.jsx)(Ku,{onSection:r});case"contacts":return(0,Cn.jsx)(Vu,{});case"pipeline":return(0,Cn.jsx)(fb,{});case"reports":return(0,Cn.jsx)(Sb,{})}})()})})};async function yw(e){const{data:t,error:r}=await kn.from("employees").select("*").eq("organization_id",e).order("name");if(r)throw r;return t}async function vw(e,t){const{data:r,error:n}=await kn.from("employees").update(t).eq("id",e).select().single();if(n)throw n;return r}const jw=(e,t)=>{if(e.id===t)return[e.id];if(e.children)for(const r of e.children){const n=jw(r,t);if(n)return[e.id,...n]}return null},ww=e=>{var t;let{member:r,isRoot:n=!1,onSelect:s,selectedId:a,reportingPath:i}=e;const l=r.id===a,o=i.includes(r.id),c=null===(t=r.children)||void 0===t?void 0:t.some(e=>i.includes(e.id));return(0,Cn.jsxs)("div",{className:"relative flex flex-col items-center ".concat(n?"":"pt-8 min-h-[64px]"),style:{minWidth:"176px"},children:[!n&&(0,Cn.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-0.5 h-8 z-0 ".concat(o?"bg-purple-500":"bg-gray-300")}),(0,Cn.jsxs)("button",{onClick:()=>s(r.id),className:"relative block text-left bg-white border ".concat(l?"border-purple-500 ring-2 ring-purple-200":"border-gray-300"," rounded-md shadow-sm p-2 w-44 z-10 hover:border-purple-400 transition-all duration-150"),children:[(0,Cn.jsx)("h3",{className:"text-sm font-bold text-gray-900 text-center",children:r.name}),(0,Cn.jsx)("p",{className:"text-xs text-purple-600 font-semibold text-center",children:r.position}),(0,Cn.jsx)("p",{className:"text-xs text-gray-500 text-center mt-1",children:r.department})]}),r.children&&r.children.length>0&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0.5 h-8 z-0 ".concat(c?"bg-purple-500":"bg-gray-300")}),(0,Cn.jsxs)("div",{className:"flex justify-center mt-8 relative w-full min-w-max",children:[r.children.length>1&&(0,Cn.jsx)("div",{className:"absolute top-0 left-0 right-0 h-0.5 z-0 ".concat(c?"bg-purple-500":"bg-gray-300")}),r.children.map((e,t)=>(0,Cn.jsx)("div",{className:"px-2 flex flex-col items-center",children:(0,Cn.jsx)(ww,{member:e,onSelect:s,selectedId:a,reportingPath:i})},e.id))]})]})]})},Nw=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)(null),[o,c]=(0,t.useState)(null);if((0,t.useEffect)(()=>{e&&(a(!0),yw(e.organization_id).then(n).catch(l).finally(()=>a(!1)))},[e]),!e)return(0,Cn.jsx)("div",{children:"Select an organization"});if(s)return(0,Cn.jsx)("div",{children:"Loading org chart..."});if(i)return(0,Cn.jsxs)("div",{className:"text-red-500",children:["Error: ",i.message]});const d=function(e){const t={};e.forEach(e=>t[e.id]=Oe(Oe({},e),{},{children:[]}));const r=[];return e.forEach(e=>{e.manager_id&&t[e.manager_id]?t[e.manager_id].children.push(t[e.id]):r.push(t[e.id])}),r}(r);let u=[];if(o&&d.length>0)for(const t of d){const e=jw(t,o);if(e){u=e;break}}return(0,Cn.jsxs)("div",{className:"overflow-x-auto p-8 bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-gray-900 text-center mb-8",children:"Organization Chart"}),(0,Cn.jsx)("div",{className:"flex justify-center min-w-max",children:d.map(e=>(0,Cn.jsx)(ww,{member:e,isRoot:!0,onSelect:c,selectedId:o,reportingPath:u},e.id))})]})},kw={name:"",email:"",position:"",department:"",manager_id:null,start_date:"",contract_type:"",profile:"",user_id:null},Cw=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,onboarding:!1,roles:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({add:!0,edit:!1,search:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Employees Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Manage your organization's employees, roles, and onboarding in one place. Track employee details, contracts, and reporting lines."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("onboarding"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Onboarding"}),i.onboarding?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.onboarding&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Add new employees with their details and contract type"}),(0,Cn.jsx)("li",{children:"Assign managers and departments"}),(0,Cn.jsx)("li",{children:"Track start dates and onboarding progress"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("roles"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Roles & Departments"}),i.roles?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.roles&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Organize employees by department and role"}),(0,Cn.jsx)("li",{children:"Assign reporting lines and managers"}),(0,Cn.jsx)("li",{children:"Keep org charts up to date"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("add"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Adding Employees"}),c.add?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.add&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Use the "Add Employee" button to create new records. Fill in all required fields and assign a manager if needed. Save to update the employee list.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("edit"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Editing & Linking"}),c.edit?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.edit&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Edit employee details by clicking on their name. Link users to employees for SSO and permissions management."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("search"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Search & Filter"}),c.search?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.search&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use the search bar to find employees by name, department, or email. Filter by department or contract type for quick access."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your HR assistant. I can help you onboard employees, manage roles, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I add a new employee?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:'Click the "Add Employee" button, fill in the required details, and save. Assign a manager and department if needed.'})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I update an employee's department?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Edit the employee record, select the new department, and save changes. The org chart will update automatically."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about HR...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},Sw=()=>{var e,r;const{currentOrganization:n}=_n(),[s,a]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)("table"),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)(kw),[b,y]=(0,t.useState)(null),[v,j]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1),[k,C]=(0,t.useState)([]),[S,_]=(0,t.useState)(!1),[E,I]=(0,t.useState)(null),[P,T]=(0,t.useState)(!1),[D,A]=(0,t.useState)(kw),[O,L]=(0,t.useState)(null),[R,M]=(0,t.useState)([]),[z,F]=(0,t.useState)([]),[B,U]=(0,t.useState)([]),[q,H]=(0,t.useState)(!1),W=()=>{n&&(l(!0),yw(n.organization_id).then(a).catch(c).finally(()=>l(!1)))};(0,t.useEffect)(()=>{W()},[n]),(0,t.useEffect)(()=>{kn.auth.admin.listUsers({perPage:1e3}).then(e=>{let{data:t}=e;C((null===t||void 0===t?void 0:t.users)||[])})},[]),(0,t.useEffect)(()=>{kn.auth.getUser().then(e=>{var t;let{data:r}=e;return L((null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.id)||null)})},[]);const V=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;y(e?e.id:null),g(e?{name:e.name||"",email:e.email||"",position:e.position||"",department:e.department||"",manager_id:e.manager_id||null,start_date:e.start_date||"",contract_type:e.contract_type||"",profile:e.profile||"",user_id:e.user_id||null}:kw),p(!0)},G=e=>{I(e),A(e),T(!1),_(!0),(async e=>{if(!e)return;const{data:t}=await kn.from("holidays").select("*").eq("employee_id",e.id).order("start_date",{ascending:!1});M(t||[])})(e).then(()=>{(async e=>{if(!e)return;const{data:t}=await kn.from("employees").select("*").eq("manager_id",e.id);F(t||[])})(e)})},$=async e=>{N(!0);try{await async function(e){return vw(e,{user_id:null})}(e),W()}finally{N(!1)}};if((0,t.useEffect)(()=>{E&&R&&((e,t)=>{const r=[];e.updated_at&&e.updated_at!==e.created_at&&r.push({type:"profile_edit",date:e.updated_at,desc:"Profile updated"}),t.forEach(e=>{r.push({type:"holiday",date:e.submitted_at||e.start_date,desc:"Holiday request (".concat(e.status,") from ").concat(e.start_date," to ").concat(e.end_date)})}),r.sort((e,t)=>new Date(t.date)-new Date(e.date)),U(r)})(E,R)},[E,R]),!n)return(0,Cn.jsx)("div",{children:"Select an organization"});if(i)return(0,Cn.jsx)("div",{children:"Loading employees..."});if(o)return(0,Cn.jsxs)("div",{className:"text-red-500",children:["Error: ",o.message]});return(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Employees"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Manage your organization's employees, onboarding, and roles."})]}),(0,Cn.jsxs)("button",{onClick:()=>H(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Cw,{isOpen:q,onClose:()=>H(!1)}),(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Cn.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg",children:[(0,Cn.jsxs)("button",{onClick:()=>u("table"),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("table"===d?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"Table View"]}),(0,Cn.jsxs)("button",{onClick:()=>u("orgchart"),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat("orgchart"===d?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[(0,Cn.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Org Chart"]})]}),(0,Cn.jsx)("button",{onClick:()=>V(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Add Employee"})]}),"table"===d?(0,Cn.jsx)("div",{className:"overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position & Department"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contract"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Holiday"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Linked User"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{return(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>G(e),children:[(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Cn.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name.split(" ").map(e=>e[0]).join("")})})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.position}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.department}),(0,Cn.jsx)("div",{className:"text-xs text-gray-400",children:e.team})]}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.manager||"-"}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(t=e.startDate,new Date(t).toLocaleDateString())}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.contract})}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsxs)("div",{className:"text-sm text-gray-900",children:[e.holidayTaken,"/",e.holidayTaken+e.holidayRemaining," taken"]}),(0,Cn.jsxs)("div",{className:"text-xs text-gray-500",children:[e.holidayRemaining," remaining"]}),e.sickDays>0&&(0,Cn.jsxs)("div",{className:"text-xs text-red-500",children:[e.sickDays," sick days"]})]}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.user_id?(0,Cn.jsxs)("span",{className:"text-xs text-green-600",children:["Linked",(0,Cn.jsx)("button",{onClick:()=>$(e.id),className:"ml-2 text-red-500 underline",children:"Unlink"})]}):(0,Cn.jsx)("span",{className:"text-xs text-gray-400",children:"Not linked"})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("button",{onClick:()=>V(e),className:"text-purple-600 hover:text-purple-900",children:"Edit"}),(0,Cn.jsx)("button",{onClick:()=>{return t=e.id,j(t),void x(!0);var t},className:"text-red-500 hover:text-red-700",children:"Delete"})]})})]},e.id);var t})})]})}):(0,Cn.jsx)(Nw,{}),m&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),N(!0);try{b?await vw(b,f):await async function(e){const{data:t,error:r}=await kn.from("employees").insert([e]).select().single();if(r)throw r;return t}(Oe(Oe({},f),{},{organization_id:n.organization_id})),p(!1),W()}catch(t){c(t)}finally{N(!1)}},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsxs)("div",{className:"text-lg font-medium text-gray-900",children:[b?"Edit":"Add"," Employee"]}),(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Name",value:f.name,onChange:e=>g(t=>Oe(Oe({},t),{},{name:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Email",value:f.email,onChange:e=>g(t=>Oe(Oe({},t),{},{email:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Position",value:f.position,onChange:e=>g(t=>Oe(Oe({},t),{},{position:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Department",value:f.department,onChange:e=>g(t=>Oe(Oe({},t),{},{department:e.target.value}))}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:f.manager_id||"",onChange:e=>g(t=>Oe(Oe({},t),{},{manager_id:e.target.value?Number(e.target.value):null})),children:[(0,Cn.jsx)("option",{value:"",children:"No Manager"}),s.filter(e=>!b||e.id!==b).map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"date",value:f.start_date,onChange:e=>g(t=>Oe(Oe({},t),{},{start_date:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Contract Type",value:f.contract_type,onChange:e=>g(t=>Oe(Oe({},t),{},{contract_type:e.target.value}))}),(0,Cn.jsx)("textarea",{className:"w-full px-3 py-2 border rounded",placeholder:"Profile",value:f.profile,onChange:e=>g(t=>Oe(Oe({},t),{},{profile:e.target.value}))}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:f.user_id||"",onChange:e=>g(t=>Oe(Oe({},t),{},{user_id:e.target.value||null})),children:[(0,Cn.jsx)("option",{value:"",children:"No Linked User"}),k.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.email},e.id))]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-purple-600 text-white rounded shadow hover:bg-purple-700",children:w?"Saving...":"Save"})]})]})}),h&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsx)("div",{className:"text-lg font-medium text-gray-900",children:"Delete Employee"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsx)("p",{children:"Are you sure you want to delete this employee?"}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"button",onClick:async()=>{N(!0);try{await async function(e){const{error:t}=await kn.from("employees").delete().eq("id",e);if(t)throw t}(v),x(!1),W()}catch(e){c(e)}finally{N(!1)}},disabled:w,className:"px-4 py-2 bg-red-600 text-white rounded shadow hover:bg-red-700",children:w?"Deleting...":"Delete"})]})]})}),S&&E&&(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"flex-1 bg-black bg-opacity-40",onClick:()=>_(!1)}),(0,Cn.jsxs)("div",{className:"relative h-full w-2/3 max-w-3xl bg-white shadow-2xl p-0 flex flex-col transform transition-transform duration-1000 ease-in-out ".concat(S?"translate-x-0":"translate-x-full"),style:{right:0},children:[(0,Cn.jsx)("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-3xl z-10",onClick:()=>_(!1),children:"\xd7"}),(0,Cn.jsxs)("div",{className:"p-0 overflow-y-auto h-full",children:[(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center bg-gray-50 border-b border-gray-200 pt-10 pb-6 px-8",children:[(0,Cn.jsx)("div",{className:"w-28 h-28 rounded-full flex items-center justify-center text-4xl font-bold text-white mb-4",style:{background:"#7c3aed"},children:E.name.split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,Cn.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:E.name}),(0,Cn.jsx)("div",{className:"text-gray-500 text-lg mb-2",children:E.position}),(0,Cn.jsxs)("div",{className:"flex flex-wrap gap-x-8 gap-y-1 text-sm text-gray-600 justify-center",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("b",{children:"Email:"})," ",E.email]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("b",{children:"Start Date:"})," ",E.start_date||"-"]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("b",{children:"Contract:"})," ",E.contract_type||"-"]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("b",{children:"Manager:"})," ",(null===(e=s.find(e=>e.id===E.manager_id))||void 0===e?void 0:e.name)||"-"]})]})]}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 bg-white px-8",children:[(0,Cn.jsx)("button",{className:"px-4 py-3 -mb-px border-b-2 border-purple-600 text-purple-700 font-semibold focus:outline-none",children:"Employee Information"}),(0,Cn.jsx)("button",{className:"px-4 py-3 text-gray-400 cursor-not-allowed",children:"Phone Numbers"}),(0,Cn.jsx)("button",{className:"px-4 py-3 text-gray-400 cursor-not-allowed",children:"Payroll Data"}),(0,Cn.jsx)("button",{className:"px-4 py-3 text-gray-400 cursor-not-allowed",children:"Pay Method"}),(0,Cn.jsx)("button",{className:"px-4 py-3 text-gray-400 cursor-not-allowed",children:"Notes"})]}),(0,Cn.jsx)("div",{className:"px-8 py-8 bg-white",children:P?(0,Cn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{N(!0);try{await vw(E.id,D),T(!1),W(),I(Oe(Oe({},E),D))}finally{N(!1)}})()},className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Name",value:D.name,onChange:e=>A(t=>Oe(Oe({},t),{},{name:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Email",value:D.email,onChange:e=>A(t=>Oe(Oe({},t),{},{email:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Position",value:D.position,onChange:e=>A(t=>Oe(Oe({},t),{},{position:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Department",value:D.department,onChange:e=>A(t=>Oe(Oe({},t),{},{department:e.target.value}))}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:D.manager_id||"",onChange:e=>A(t=>Oe(Oe({},t),{},{manager_id:e.target.value?Number(e.target.value):null})),children:[(0,Cn.jsx)("option",{value:"",children:"No Manager"}),s.filter(e=>e.id!==E.id).map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"date",value:D.start_date,onChange:e=>A(t=>Oe(Oe({},t),{},{start_date:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Contract Type",value:D.contract_type,onChange:e=>A(t=>Oe(Oe({},t),{},{contract_type:e.target.value}))}),(0,Cn.jsx)("textarea",{className:"w-full px-3 py-2 border rounded",placeholder:"Profile",value:D.profile,onChange:e=>A(t=>Oe(Oe({},t),{},{profile:e.target.value}))})]}):(0,Cn.jsxs)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Position"}),(0,Cn.jsx)("div",{className:"text-gray-900 font-medium",children:E.position||"-"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Department"}),(0,Cn.jsx)("div",{className:"text-gray-900 font-medium",children:E.department||"-"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Manager"}),(0,Cn.jsx)("div",{className:"text-gray-900 font-medium",children:(null===(r=s.find(e=>e.id===E.manager_id))||void 0===r?void 0:r.name)||"-"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Contract Type"}),(0,Cn.jsx)("div",{className:"text-gray-900 font-medium",children:E.contract_type||"-"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Start Date"}),(0,Cn.jsx)("div",{className:"text-gray-900 font-medium",children:E.start_date||"-"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"Email"}),(0,Cn.jsx)("div",{className:"text-gray-900 font-medium",children:E.email})]}),(0,Cn.jsxs)("div",{className:"col-span-2",children:[(0,Cn.jsx)("div",{className:"text-xs text-gray-400 font-semibold mb-1",children:"About"}),(0,Cn.jsx)("div",{className:"text-gray-700 whitespace-pre-line min-h-[48px]",children:E.profile||(0,Cn.jsx)("span",{className:"text-gray-400",children:"No profile info yet."})})]})]})}),(0,Cn.jsxs)("div",{className:"px-8 pb-8",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"Holiday Requests"}),(0,Cn.jsxs)("table",{className:"min-w-full text-sm border border-gray-200 rounded overflow-hidden",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-3 py-2 text-left",children:"Start"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-left",children:"End"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-left",children:"Days"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-left",children:"Status"}),(0,Cn.jsx)("th",{className:"px-3 py-2 text-left",children:"Reason"})]})}),(0,Cn.jsxs)("tbody",{children:[0===R.length&&(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:5,className:"text-center text-gray-400 py-4",children:"No holiday requests"})}),R.map(e=>(0,Cn.jsxs)("tr",{className:"pending"===e.status?"bg-yellow-50":"approved"===e.status?"bg-green-50":"bg-red-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2",children:e.start_date}),(0,Cn.jsx)("td",{className:"px-3 py-2",children:e.end_date}),(0,Cn.jsx)("td",{className:"px-3 py-2",children:e.days}),(0,Cn.jsx)("td",{className:"px-3 py-2 capitalize",children:e.status}),(0,Cn.jsx)("td",{className:"px-3 py-2",children:e.reason})]},e.id))]})]})]})]})]})]})]})},_w={employee_id:"",start_date:"",end_date:"",days:1,reason:"",status:"pending"},Ew=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,requests:!1,approvals:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({add:!0,filter:!1,status:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Time Manager Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Manage holiday requests, time off, and approval workflows for your team. Track all requests and approvals in one place."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("requests"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Requests"}),i.requests?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.requests&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Submit new holiday or time off requests"}),(0,Cn.jsx)("li",{children:"View pending, approved, and rejected requests"}),(0,Cn.jsx)("li",{children:"Track request history for each employee"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("approvals"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Approvals"}),i.approvals?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.approvals&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Managers can approve or reject requests"}),(0,Cn.jsx)("li",{children:"Automated notifications for status changes"}),(0,Cn.jsx)("li",{children:"Keep records for compliance and reporting"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("add"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Adding Requests"}),c.add?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.add&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Click "Add Request" to submit a new holiday or time off. Fill in the required details and submit for approval.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("filter"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Filtering & Status"}),c.filter?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.filter&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Filter requests by status (pending, approved, rejected) using the dropdown. Quickly find requests by employee or date."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("status"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Status Updates"}),c.status?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.status&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Managers can update the status of requests. Employees are notified automatically of any changes."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your time management assistant. I can help you manage requests, approvals, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I submit a holiday request?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:'Click the "Add Request" button, fill in the details, and submit. Your manager will review and approve or reject the request.'})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I filter requests by status?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Use the status dropdown to filter requests. You can view all, pending, approved, or rejected requests easily."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about time management...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},Iw=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)([]),[i,l]=(0,t.useState)(!0),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!1),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(_w),[f,g]=(0,t.useState)(null),[b,y]=(0,t.useState)(null),[v,j]=(0,t.useState)(!1),[w,N]=(0,t.useState)("all"),[k,C]=(0,t.useState)(!1),S=()=>{e&&(l(!0),Promise.all([Gn(e.organization_id),yw(e.organization_id)]).then(e=>{let[t,r]=e;n(t),a(r)}).catch(c).finally(()=>l(!1)))};(0,t.useEffect)(()=>{S()},[e]);const _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;g(e?e.id:null),x(e?{employee_id:e.employee_id,start_date:e.start_date,end_date:e.end_date,days:e.days,reason:e.reason,status:e.status}:_w),u(!0)},E=e=>new Date(e).toLocaleDateString(),I=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P="all"===w?r:r.filter(e=>e.status===w);return e?i?(0,Cn.jsx)("div",{children:"Loading holiday requests..."}):o?(0,Cn.jsxs)("div",{className:"text-red-500",children:["Error: ",o.message]}):(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Time Manager"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Manage holiday requests, time off, and approval workflows for your team."})]}),(0,Cn.jsxs)("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Ew,{isOpen:k,onClose:()=>C(!1)}),(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Cn.jsx)("div",{className:"flex space-x-4",children:(0,Cn.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Cn.jsx)("option",{value:"all",children:"All Requests"}),(0,Cn.jsx)("option",{value:"pending",children:"Pending"}),(0,Cn.jsx)("option",{value:"approved",children:"Approved"}),(0,Cn.jsx)("option",{value:"rejected",children:"Rejected"})]})}),(0,Cn.jsx)("button",{onClick:()=>_(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Add Request"})]}),(0,Cn.jsx)("div",{className:"overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Request Details"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Manager"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===P.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:6,className:"py-16",children:(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No time off requests found."})]})})}):P.map(e=>{const t=e.employee||{},r=t.name||"Unknown",n=t.email||"",s=r?r.split(" ").map(e=>e[0]).join(""):"?",a=e.start_date,i=e.end_date,l=e.created_at,o=e.reason?"Holiday":"Time Off";return(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Cn.jsx)("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Cn.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s})})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:r}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:n})]})]})}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:o}),(0,Cn.jsxs)("div",{className:"text-sm text-gray-500",children:[e.days," days"]}),(0,Cn.jsx)("div",{className:"text-xs text-gray-400 max-w-xs truncate",children:e.reason})]}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-900",children:E(a)}),(0,Cn.jsxs)("div",{className:"text-sm text-gray-500",children:["to ",E(i)]}),(0,Cn.jsxs)("div",{className:"text-xs text-gray-400",children:["Submitted: ",E(l)]})]}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.manager||"-"}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(I(e.status)),children:(c=e.status,c.charAt(0).toUpperCase()+c.slice(1))})}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("button",{onClick:()=>_(e),className:"text-purple-600 hover:text-purple-900",children:"Edit"}),(0,Cn.jsx)("button",{onClick:()=>{return t=e.id,y(t),void p(!0);var t},className:"text-red-500 hover:text-red-700",children:"Delete"})]})})]},e.id);var c})})]})}),d&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),j(!0);try{f?await async function(e,t){const{data:r,error:n}=await kn.from("holidays").update(t).eq("id",e).select().single();if(n)throw n;return r}(f,h):await async function(e){const{data:t,error:r}=await kn.from("holidays").insert([e]).select().single();if(r)throw r;return t}(h),u(!1),S()}catch(t){c(t)}finally{j(!1)}},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsxs)("div",{className:"text-lg font-medium text-gray-900",children:[f?"Edit":"Add"," Holiday Request"]}),(0,Cn.jsx)("button",{type:"button",onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:h.employee_id,onChange:e=>x(t=>Oe(Oe({},t),{},{employee_id:Number(e.target.value)})),required:!0,children:[(0,Cn.jsx)("option",{value:"",children:"Select Employee"}),s.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"date",value:h.start_date,onChange:e=>x(t=>Oe(Oe({},t),{},{start_date:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"date",value:h.end_date,onChange:e=>x(t=>Oe(Oe({},t),{},{end_date:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"number",min:"1",value:h.days,onChange:e=>x(t=>Oe(Oe({},t),{},{days:Number(e.target.value)})),required:!0}),(0,Cn.jsx)("textarea",{className:"w-full px-3 py-2 border rounded",placeholder:"Reason",value:h.reason,onChange:e=>x(t=>Oe(Oe({},t),{},{reason:e.target.value}))}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:h.status,onChange:e=>x(t=>Oe(Oe({},t),{},{status:e.target.value})),children:[(0,Cn.jsx)("option",{value:"pending",children:"Pending"}),(0,Cn.jsx)("option",{value:"approved",children:"Approved"}),(0,Cn.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-purple-600 text-white rounded shadow hover:bg-purple-700",children:v?"Saving...":"Save"})]})]})}),m&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsx)("div",{className:"text-lg font-medium text-gray-900",children:"Delete Holiday Request"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsx)("p",{children:"Are you sure you want to delete this request?"}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"button",onClick:async()=>{j(!0);try{await async function(e){const{error:t}=await kn.from("holidays").delete().eq("id",e);if(t)throw t}(b),p(!1),S()}catch(e){c(e)}finally{j(!1)}},disabled:v,className:"px-4 py-2 bg-red-600 text-white rounded shadow hover:bg-red-700",children:v?"Deleting...":"Delete"})]})]})})]}):(0,Cn.jsx)("div",{children:"Select an organization"})};const Pw={name:"",category:"",description:"",version:"",last_updated:"",file:null,file_url:"",department:"",required_reading:!1},Tw=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,categories:!1,compliance:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({add:!0,edit:!1,search:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Company Policies Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Access and manage company policies, procedures, and guidelines for employees. Ensure everyone is up to date on the latest requirements."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("categories"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Categories"}),i.categories?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.categories&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Organize policies by category (HR, Finance, Workplace, etc.)"}),(0,Cn.jsx)("li",{children:"Filter and search for quick access"}),(0,Cn.jsx)("li",{children:"Assign policies to departments as needed"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("compliance"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Compliance"}),i.compliance?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.compliance&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Track required reading and policy acknowledgements"}),(0,Cn.jsx)("li",{children:"Keep records for audits and compliance"}),(0,Cn.jsx)("li",{children:"Update policies as regulations change"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("add"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Adding Policies"}),c.add?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.add&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:'Click "Add Policy" to upload new documents. Fill in all required fields and assign categories and departments as needed.'})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("edit"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Editing & Updating"}),c.edit?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.edit&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Edit policy details, upload new versions, and update compliance requirements as needed."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("search"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Search & Filter"}),c.search?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.search&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use the search bar and category filter to quickly find policies. Filter by department or required reading status."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your policy assistant. I can help you manage, update, and answer questions about company policies."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I add a new policy?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:'Click the "Add Policy" button, fill in the required details, and upload the document. Assign categories and departments as needed.'})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I track required reading?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Mark policies as required reading. Employees can acknowledge and the system will track compliance for audits."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about policies...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},Dw=()=>{const{currentOrganization:e}=_n(),[r,n]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[i,l]=(0,t.useState)(null),[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)("all"),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)(Pw),[b,y]=(0,t.useState)(null),[v,j]=(0,t.useState)(null),[w,N]=(0,t.useState)(!1),[k,C]=(0,t.useState)(!1),S=()=>{e&&(a(!0),async function(e){const{data:t,error:r}=await kn.from("policies").select("*").eq("organization_id",e).order("name");if(r)throw r;return t}(e.organization_id).then(n).catch(l).finally(()=>a(!1)))};(0,t.useEffect)(()=>{S()},[e]);const _=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;y(e?e.id:null),g(e?{name:e.name||"",category:e.category||"",description:e.description||"",version:e.version||"",last_updated:e.last_updated||"",file:null,file_url:e.file_url||"",department:e.department||"",required_reading:!!e.required_reading}:Pw),p(!0)},E=r.filter(e=>{const t=e.name.toLowerCase().includes(o.toLowerCase())||e.description.toLowerCase().includes(o.toLowerCase()),r="all"===d||e.category===d;return t&&r});return e?s?(0,Cn.jsx)("div",{children:"Loading policies..."}):i?(0,Cn.jsxs)("div",{className:"text-red-500",children:["Error: ",i.message]}):(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Company Policies"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Access and manage company policies, procedures, and guidelines for employees."})]}),(0,Cn.jsxs)("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]}),(0,Cn.jsx)(Tw,{isOpen:k,onClose:()=>C(!1)}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Cn.jsxs)("div",{className:"flex space-x-4",children:[(0,Cn.jsx)("input",{type:"text",placeholder:"Search policies...",value:o,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Cn.jsx)("select",{value:d,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:["all","General","Finance","Workplace","Technology","HR","Communication"].map(e=>(0,Cn.jsx)("option",{value:e,children:"all"===e?"All Categories":e},e))})]}),(0,Cn.jsx)("button",{onClick:()=>_(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:"Add Policy"})]}),(0,Cn.jsx)("div",{className:"overflow-hidden",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Policy"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Department"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Version & Status"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Details"}),(0,Cn.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===E.length?(0,Cn.jsx)("tr",{children:(0,Cn.jsx)("td",{colSpan:6,className:"py-16",children:(0,Cn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:(0,Cn.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No policies found."})]})})}):E.map(e=>{return(0,Cn.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,Cn.jsx)("div",{className:"h-10 w-10 bg-purple-100 rounded flex items-center justify-center",children:(0,Cn.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),(0,Cn.jsxs)("div",{className:"ml-4",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500 max-w-xs truncate",children:e.description})]})]})}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.category}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.department}),e.requiredReading&&(0,Cn.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:"Required"})]}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["v",e.version]}),(0,Cn.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.status})]}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(t=e.lastUpdated,new Date(t).toLocaleDateString())}),(0,Cn.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap",children:[(0,Cn.jsx)("div",{className:"text-sm text-gray-900",children:e.fileType}),(0,Cn.jsx)("div",{className:"text-sm text-gray-500",children:e.fileSize})]}),(0,Cn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("button",{onClick:()=>_(e),className:"text-purple-600 hover:text-purple-900",children:"Edit"}),(0,Cn.jsx)("button",{onClick:()=>{return t=e.id,j(t),void x(!0);var t},className:"text-red-500 hover:text-red-700",children:"Delete"})]})})]},e.id);var t})})]})})]}),m&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),N(!0);try{let t=f.file_url;f.file&&(t=await async function(e,t){const r="policies/".concat(t,"/").concat(Date.now(),"_").concat(e.name),{data:n,error:s}=await kn.storage.from("public").upload(r,e);if(s)throw s;const{publicUrl:a}=kn.storage.from("public").getPublicUrl(r).data;return a}(f.file,e.organization_id)),b?await async function(e,t){const{data:r,error:n}=await kn.from("policies").update(t).eq("id",e).select().single();if(n)throw n;return r}(b,Oe(Oe({},f),{},{file_url:t})):await async function(e){const{data:t,error:r}=await kn.from("policies").insert([e]).select().single();if(r)throw r;return t}(Oe(Oe({},f),{},{file_url:t,organization_id:e.organization_id})),p(!1),S()}catch(r){l(r)}finally{N(!1)}},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-lg border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsxs)("div",{className:"text-lg font-medium text-gray-900",children:[b?"Edit":"Add"," Policy"]}),(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Name",value:f.name,onChange:e=>g(t=>Oe(Oe({},t),{},{name:e.target.value})),required:!0}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Category",value:f.category,onChange:e=>g(t=>Oe(Oe({},t),{},{category:e.target.value}))}),(0,Cn.jsx)("textarea",{className:"w-full px-3 py-2 border rounded",placeholder:"Description",value:f.description,onChange:e=>g(t=>Oe(Oe({},t),{},{description:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Version",value:f.version,onChange:e=>g(t=>Oe(Oe({},t),{},{version:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"date",value:f.last_updated,onChange:e=>g(t=>Oe(Oe({},t),{},{last_updated:e.target.value}))}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",placeholder:"Department",value:f.department,onChange:e=>g(t=>Oe(Oe({},t),{},{department:e.target.value}))}),(0,Cn.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("input",{type:"checkbox",checked:f.required_reading,onChange:e=>g(t=>Oe(Oe({},t),{},{required_reading:e.target.checked}))}),(0,Cn.jsx)("span",{children:"Required Reading"})]}),(0,Cn.jsx)("input",{className:"w-full px-3 py-2 border rounded",type:"file",accept:".pdf,.doc,.docx",onChange:async e=>{const t=e.target.files[0];t&&g(e=>Oe(Oe({},e),{},{file:t}))}}),f.file_url&&(0,Cn.jsx)("a",{href:f.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"View Current File"})]}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-purple-600 text-white rounded shadow hover:bg-purple-700",children:w?"Saving...":"Save"})]})]})}),h&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm border border-gray-100",children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-100 pb-4",children:[(0,Cn.jsx)("div",{className:"text-lg font-medium text-gray-900",children:"Delete Policy"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 text-2xl leading-none",children:"\xd7"})]}),(0,Cn.jsx)("p",{children:"Are you sure you want to delete this policy?"}),(0,Cn.jsxs)("div",{className:"flex justify-end space-x-2 mt-8",children:[(0,Cn.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"button",onClick:async()=>{N(!0);try{await async function(e){const{error:t}=await kn.from("policies").delete().eq("id",e);if(t)throw t}(v),x(!1),S()}catch(e){l(e)}finally{N(!1)}},disabled:w,className:"px-4 py-2 bg-red-600 text-white rounded shadow hover:bg-red-700",children:w?"Deleting...":"Delete"})]})]})})]}):(0,Cn.jsx)("div",{children:"Select an organization"})},Aw=e=>{let{activeSubTab:t,onSubTabChange:r}=e;return(0,Cn.jsx)("div",{className:"space-y-6",children:(0,Cn.jsx)("div",{children:(()=>{switch(t){case"employees":default:return(0,Cn.jsx)(Sw,{});case"time":return(0,Cn.jsx)(Iw,{});case"policies":return(0,Cn.jsx)(Dw,{})}})()})})},Ow=["title","titleId"];function Lw(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ow);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const Rw=t.forwardRef(Lw),Mw=["bg-blue-100 text-blue-700","bg-green-100 text-green-700","bg-pink-100 text-pink-700","bg-yellow-100 text-yellow-700","bg-purple-100 text-purple-700","bg-indigo-100 text-indigo-700","bg-red-100 text-red-700"];function zw(e){return e.split(" ").map(e=>e[0]).join("").toUpperCase()}const Fw=["Tech","Design","Legal","Finance","Marketing","Other"],Bw=()=>{const[e,r]=(0,t.useState)(null),[n,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[l,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),u=(0,t.useRef)(),m=n?n.charCodeAt(0)%Mw.length:0;return(0,Cn.jsx)(ha,{children:(0,Cn.jsxs)("form",{className:"max-w-lg mx-auto p-8 flex flex-col items-center space-y-6",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold",children:"Your Marketplace Listing"}),(0,Cn.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Cn.jsx)("div",{className:"mb-2",children:e?(0,Cn.jsx)("img",{src:e,alt:"Logo",className:"h-20 w-20 rounded-xl object-cover border border-gray-200"}):(0,Cn.jsx)("div",{className:"h-20 w-20 rounded-xl flex items-center justify-center font-bold text-2xl ".concat(Mw[m]),children:n?zw(n):"?"})}),(0,Cn.jsx)("input",{type:"file",accept:"image/*",ref:u,className:"hidden",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>r(e.target.result),e.readAsDataURL(t)}}}),(0,Cn.jsx)("button",{type:"button",onClick:()=>u.current.click(),className:"text-xs text-purple-700 hover:underline mt-1",children:e?"Change Photo":"Upload Photo"})]}),(0,Cn.jsxs)("div",{className:"w-full",children:[(0,Cn.jsx)("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,Cn.jsx)("input",{type:"text",id:"company-name",value:n,onChange:e=>s(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"Your company or personal name"})]}),(0,Cn.jsxs)("div",{className:"w-full",children:[(0,Cn.jsx)("label",{htmlFor:"industry",className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry"}),(0,Cn.jsxs)("select",{id:"industry",value:a,onChange:e=>i(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",children:[(0,Cn.jsx)("option",{value:"",children:"Select industry"}),Fw.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))]})]}),(0,Cn.jsxs)("div",{className:"w-full",children:[(0,Cn.jsx)("label",{htmlFor:"services",className:"block text-sm font-medium text-gray-700 mb-1",children:"Services (comma separated)"}),(0,Cn.jsx)("input",{type:"text",id:"services",value:l,onChange:e=>o(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"e.g. Branding, Web Design, Consulting"}),l&&(0,Cn.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:l.split(",").map((e,t)=>(0,Cn.jsx)("span",{className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-medium border border-purple-200",children:e.trim()},t))})]}),(0,Cn.jsxs)("div",{className:"w-full",children:[(0,Cn.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{id:"description",rows:"3",value:c,onChange:e=>d(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",placeholder:"Describe your business, skills, or offering"})]}),(0,Cn.jsx)("button",{type:"submit",className:"w-full py-3 rounded-lg bg-purple-600 text-white font-semibold text-base shadow hover:bg-purple-700 transition-colors",children:"Save Listing"})]})})},Uw=["title","titleId"];function qw(e,r){let{title:n,titleId:s}=e,a=Yn(e,Uw);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{fillRule:"evenodd",d:"m9.69 18.933.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 0 0 .281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 1 0 3 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 0 0 2.273 1.765 11.842 11.842 0 0 0 .976.544l.062.029.018.008.006.003ZM10 11.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z",clipRule:"evenodd"}))}const Hw=t.forwardRef(qw),Ww=["title","titleId"];function Vw(e,r){let{title:n,titleId:s}=e,a=Yn(e,Ww);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{d:"M8 10a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"}),t.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm5 5a3 3 0 1 0 1.524 5.585l1.196 1.195a.75.75 0 1 0 1.06-1.06l-1.195-1.196A3 3 0 0 0 9.5 7Z",clipRule:"evenodd"}))}const Gw=t.forwardRef(Vw),$w=[{id:1,name:"Innovate Inc.",field:"Technology & AI",description:"Cutting-edge AI solutions for startups and scale-ups.",category:"Tech",country:"USA",location:"San Francisco, CA"},{id:2,name:"Design Co.",field:"Creative Design",description:"Creative branding and design services that help businesses stand out.",category:"Design",country:"USA",location:"New York, NY"},{id:3,name:"Legal Eagles",field:"Legal Services",description:"Affordable legal services for startups and small businesses.",category:"Legal",country:"USA",location:"Austin, TX"},{id:4,name:"Number Crunchers",field:"Financial Services",description:"Accounting and financial consulting for growing businesses.",category:"Finance",country:"USA",location:"Chicago, IL"},{id:5,name:"Growth Hackers",field:"Digital Marketing",description:"Marketing services for fast growth.",category:"Marketing",country:"USA",location:"Los Angeles, CA"},{id:6,name:"Cloud Solutions Pro",field:"Cloud Infrastructure",description:"Cloud infrastructure and DevOps services for modern businesses.",category:"Tech",country:"USA",location:"Seattle, WA"},{id:7,name:"Euro Legal",field:"Legal Services",description:"Legal support for European startups.",category:"Legal",country:"UK",location:"London, UK"},{id:8,name:"Berlin Design",field:"Creative Design",description:"Branding and design for EU companies.",category:"Design",country:"Germany",location:"Berlin, Germany"}],Kw=["bg-blue-100 text-blue-700","bg-green-100 text-green-700","bg-pink-100 text-pink-700","bg-yellow-100 text-yellow-700","bg-purple-100 text-purple-700","bg-indigo-100 text-indigo-700","bg-red-100 text-red-700"];const Yw=["All","Tech","Design","Legal","Finance","Marketing"],Zw=["All","USA","UK","Germany"],Jw=e=>{let{listing:t,colorIdx:r}=e;return(0,Cn.jsxs)("div",{className:"bg-white rounded-2xl shadow border border-gray-100 p-6 flex flex-col space-y-4 hover:shadow-lg transition-shadow",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Cn.jsx)("div",{className:"h-12 w-12 rounded-xl flex items-center justify-center font-bold text-lg ".concat(Kw[r%Kw.length]),children:(n=t.name,n.split(" ").map(e=>e[0]).join("").toUpperCase())}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"font-semibold text-gray-900 text-base",children:t.name}),(0,Cn.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mt-0.5",children:[(0,Cn.jsx)(Hw,{className:"h-4 w-4 mr-1 text-gray-400"}),t.location]})]})]}),(0,Cn.jsx)("div",{className:"text-gray-700 text-sm leading-relaxed border-b border-gray-100 pb-4",children:t.description}),(0,Cn.jsx)("div",{className:"pt-2 text-xs text-gray-500 font-medium",children:t.field}),(0,Cn.jsx)("div",{className:"pt-2",children:(0,Cn.jsx)("button",{className:"px-4 py-2 rounded-full bg-purple-600 text-white text-xs font-semibold hover:bg-purple-700 transition-colors",children:"View Details"})})]});var n},Qw=()=>{const[e,r]=(0,t.useState)(""),[n,s]=(0,t.useState)("All"),[a,i]=(0,t.useState)("All"),l=$w.filter(t=>{const r=t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||t.field.toLowerCase().includes(e.toLowerCase()),s="All"===n||t.category===n,i="All"===a||t.country===a;return r&&s&&i});return(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:space-x-4 mb-4 gap-3",children:[(0,Cn.jsx)("select",{value:n,onChange:e=>s(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full md:w-56 lg:w-64",children:Yw.map(e=>(0,Cn.jsx)("option",{value:e,children:"All"===e?"All Industries":e},e))}),(0,Cn.jsx)("select",{value:a,onChange:e=>i(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm w-full md:w-56 lg:w-64",children:Zw.map(e=>(0,Cn.jsx)("option",{value:e,children:"All"===e?"All Countries":e},e))}),(0,Cn.jsxs)("div",{className:"flex-1 relative",children:[(0,Cn.jsx)("input",{type:"text",placeholder:"Search businesses, services, or expertise...",value:e,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),(0,Cn.jsx)(Gw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"})]})]}),(0,Cn.jsx)("div",{className:"mb-4",children:(0,Cn.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",l.length," of ",$w.length," businesses"]})}),(0,Cn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map((e,t)=>(0,Cn.jsx)(Jw,{listing:e,colorIdx:t},e.id))}),0===l.length&&(0,Cn.jsxs)("div",{className:"text-center py-12",children:[(0,Cn.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Cn.jsx)(Gw,{className:"w-8 h-8 text-gray-400"})}),(0,Cn.jsx)("p",{className:"text-gray-500 text-sm",children:"No businesses found matching your criteria."})]})]})},Xw=()=>{const[e,r]=(0,t.useState)("marketplace");return(0,Cn.jsxs)(t.Fragment,{children:[(0,Cn.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0 mr-6",children:(0,Cn.jsx)(Rw,{className:"h-16 w-16 text-blue-500"})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Marketplace"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-base max-w-2xl",children:"Find and connect with businesses or list your own skills. The Layrbase Marketplace is where startups, freelancers, and companies discover new partners and opportunities."})]})]}),(0,Cn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("button",{onClick:()=>r("marketplace"),className:"px-6 py-2 rounded-full font-semibold text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ".concat("marketplace"===e?"bg-purple-600 text-white shadow":"bg-white text-purple-700 border border-purple-200 hover:bg-purple-50"),children:"Marketplace"}),(0,Cn.jsx)("button",{onClick:()=>r("my-listing"),className:"px-6 py-2 rounded-full font-semibold text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 ".concat("my-listing"===e?"bg-purple-600 text-white shadow":"bg-white text-purple-700 border border-purple-200 hover:bg-purple-50"),children:"My Listing"})]})]}),(0,Cn.jsx)("div",{children:"marketplace"===e?(0,Cn.jsx)(Qw,{}):(0,Cn.jsx)(Bw,{})})]})},eN=["title","titleId"];function tN(e,r){let{title:n,titleId:s}=e,a=Yn(e,eN);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const rN=t.forwardRef(tN),nN=["title","titleId"];function sN(e,r){let{title:n,titleId:s}=e,a=Yn(e,nN);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const aN=t.forwardRef(sN),iN=["title","titleId"];function lN(e,r){let{title:n,titleId:s}=e,a=Yn(e,iN);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const oN=t.forwardRef(lN),cN=["title","titleId"];function dN(e,r){let{title:n,titleId:s}=e,a=Yn(e,cN);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const uN=t.forwardRef(dN),mN=[{value:"owner",label:"Owner"},{value:"admin",label:"Admin"},{value:"member",label:"Member"},{value:"viewer",label:"Viewer"}],pN=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({intro:!0,roles:!1,security:!1}),o=e=>l(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[c,d]=(0,t.useState)({orgs:!0,members:!1}),u=e=>d(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Organizations Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Overview"}),i.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Manage your organizations, members, and roles. Use the left panel to switch between organizations you belong to."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("roles"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Roles & Permissions"}),i.roles?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.roles&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Owners and admins can manage members and settings."}),(0,Cn.jsx)("li",{children:"Members can view and contribute to the organization."}),(0,Cn.jsx)("li",{children:"Viewers have read-only access."})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>o("security"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Security"}),i.security?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),i.security&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Only organization admins can invite or remove members. All actions are logged for security and compliance."})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("orgs"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Switching Organizations"}),c.orgs?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.orgs&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Use the left panel to select an organization. The details and members for that org will appear on the right."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>u("members"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Managing Members"}),c.members?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),c.members&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Edit member roles inline in the table."}),(0,Cn.jsx)("li",{children:"Remove members with the trash icon."}),(0,Cn.jsx)("li",{children:"Invite new members from the details section."})]})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your organizations assistant. I can help you manage members, roles, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I change a member's role?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Click the pencil icon next to the role, select a new role, and click the check to save."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I invite a new member?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Click the 'Invite Member' button in the details section and enter their email and role."})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about organizations...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},hN=()=>{var e;const{organizations:r,currentOrganization:n,setCurrentOrganization:s,user:a}=_n(),[i,l]=(0,t.useState)(n||r[0]||null),[o,c]=(0,t.useState)(null),[d,u]=(0,t.useState)([]),[m,p]=(0,t.useState)([]),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)("members"),[b,y]=(0,t.useState)(!1),[v,j]=(0,t.useState)(""),[w,N]=(0,t.useState)("member"),[k,C]=(0,t.useState)(""),[S,_]=(0,t.useState)(""),[E,I]=(0,t.useState)(!1),[P,T]=(0,t.useState)(null),[D,A]=(0,t.useState)(""),[O,L]=(0,t.useState)(!1);(0,t.useEffect)(()=>{i&&(M(i.organization_id),R(i.organization_id))},[i]);const R=async e=>{try{const{data:t,error:r}=await kn.from("organizations").select("description, industry, website, created_at").eq("id",e).single();if(r)throw r;c(t)}catch(t){console.error("Error loading org details:",t),c(null)}},M=async e=>{x(!0);try{const{data:t,error:r}=await kn.rpc("get_org_members_full",{org_id:e});if(r)throw r;u(t||[])}catch(t){u([])}finally{x(!1)}},z="admin"===(null===i||void 0===i?void 0:i.role)||"owner"===(null===i||void 0===i?void 0:i.role);return(0,Cn.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Cn.jsxs)("div",{className:"mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Organizations"}),(0,Cn.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your organizations and team members"})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Cn.jsxs)("button",{className:"inline-flex items-center border border-gray-300 text-gray-700 bg-white px-2 py-1 rounded-md hover:bg-gray-50 focus:outline-none gap-1 text-xs font-medium",onClick:()=>L(!0),children:[(0,Cn.jsx)(ia,{className:"w-4 h-4 text-gray-400 mr-1"}),"Help"]}),O&&(0,Cn.jsx)(pN,{isOpen:O,onClose:()=>L(!1)})]})]}),(0,Cn.jsxs)("div",{className:"bg-white border border-gray-200 rounded-md shadow flex flex-row",children:[(0,Cn.jsxs)("div",{className:"w-64 border-r border-gray-200 p-4 bg-white",children:[(0,Cn.jsx)("div",{className:"mb-4 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Organizations"}),r.map((e,t)=>(0,Cn.jsxs)("button",{onClick:()=>l(e),className:"w-full text-left px-4 py-3 font-medium transition-colors ".concat((null===i||void 0===i?void 0:i.organization_id)===e.organization_id?"bg-purple-50 text-purple-800":"bg-white text-gray-900 hover:bg-gray-50"),children:[(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("span",{className:"truncate flex-1",children:e.organization_name}),(null===i||void 0===i?void 0:i.organization_id)===e.organization_id&&(0,Cn.jsx)("span",{className:"w-2 h-2 rounded-full bg-purple-600 ml-2"})]}),(0,Cn.jsx)("div",{className:"text-xs text-gray-600 capitalize",children:e.role})]},e.organization_id))]}),(0,Cn.jsx)("div",{className:"flex-1",children:i?(0,Cn.jsxs)("div",{className:"bg-white shadow",children:[(0,Cn.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsxs)("div",{className:"flex items-center gap-2",children:[i.website&&null!==o&&void 0!==o&&o.website?(0,Cn.jsx)("img",{src:"https://www.google.com/s2/favicons?domain=".concat(encodeURIComponent(o.website)),alt:"favicon",className:"w-7 h-7 rounded"}):(0,Cn.jsx)("div",{className:"w-7 h-7 rounded bg-black flex items-center justify-center text-white font-bold text-base",children:(null===(e=i.organization_name)||void 0===e?void 0:e[0])||"?"}),(0,Cn.jsx)("span",{className:"text-lg font-bold text-gray-900",children:i.organization_name})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-3",children:[z&&(0,Cn.jsxs)("button",{onClick:()=>y(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[(0,Cn.jsx)(rN,{className:"h-4 w-4 mr-2"}),"Invite Member"]}),(0,Cn.jsxs)("button",{onClick:()=>s(i),className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:[(0,Cn.jsx)(ka,{className:"h-4 w-4 mr-2"}),"Switch to"]})]})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,Cn.jsx)("button",{className:"px-6 py-3 text-sm font-medium ".concat("members"===f?"text-purple-700 border-b-2 border-purple-600 bg-white":"text-gray-600 hover:text-purple-700"),onClick:()=>g("members"),children:"Members"}),(0,Cn.jsx)("button",{className:"px-6 py-3 text-sm font-medium ".concat("overview"===f?"text-purple-700 border-b-2 border-purple-600 bg-white":"text-gray-600 hover:text-purple-700"),onClick:()=>g("overview"),children:"Overview"})]}),(0,Cn.jsxs)("div",{className:"p-6",children:["members"===f&&(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Cn.jsx)("thead",{className:"bg-gray-50",children:(0,Cn.jsxs)("tr",{children:[(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Login"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Active"}),(0,Cn.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,Cn.jsx)("tbody",{children:d.map(e=>(0,Cn.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.name}),(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.email}),(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:P===e.user_id?(0,Cn.jsxs)("span",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("select",{className:"border border-gray-300 rounded px-2 py-1 text-xs",value:D,onChange:e=>A(e.target.value),children:mN.map(e=>(0,Cn.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Cn.jsx)("button",{onClick:()=>(async e=>{i&&(await kn.from("user_organizations").update({role:D}).eq("organization_id",i.organization_id).eq("user_id",e),T(null),M(i.organization_id))})(e.user_id),className:"text-green-600 hover:text-green-800",children:(0,Cn.jsx)(aN,{className:"w-4 h-4"})})]}):(0,Cn.jsxs)("span",{className:"flex items-center gap-2",children:[e.role,(0,Cn.jsx)("button",{onClick:()=>{return t=e.user_id,r=e.role,T(t),void A(r);var t,r},className:"text-gray-400 hover:text-purple-600",children:(0,Cn.jsx)(oN,{className:"w-4 h-4"})})]})}),(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.created_at?new Date(e.created_at).toLocaleDateString():""}),(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.last_login?new Date(e.last_login).toLocaleDateString():""}),(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900",children:e.is_active?"Yes":"No"}),(0,Cn.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,Cn.jsx)("button",{onClick:()=>(async e=>{i&&(await kn.from("user_organizations").delete().eq("organization_id",i.organization_id).eq("user_id",e),M(i.organization_id))})(e.user_id),className:"text-red-500 hover:text-red-700",children:(0,Cn.jsx)(Ti,{className:"w-4 h-4"})})})]},e.user_id))})]})}),"overview"===f&&(0,Cn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Cn.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Description"}),(0,Cn.jsx)("div",{className:"text-gray-700 text-sm",children:(null===o||void 0===o?void 0:o.description)||"No description available"})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Organization Details"}),(0,Cn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("span",{className:"text-gray-500",children:"Industry:"}),(0,Cn.jsx)("span",{className:"text-gray-900",children:(null===o||void 0===o?void 0:o.industry)||"\u2014"})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("span",{className:"text-gray-500",children:"Created:"}),(0,Cn.jsx)("span",{className:"text-gray-900",children:null!==o&&void 0!==o&&o.created_at?new Date(o.created_at).toLocaleDateString():"\u2014"})]}),(0,Cn.jsxs)("div",{className:"flex justify-between",children:[(0,Cn.jsx)("span",{className:"text-gray-500",children:"Website:"}),(0,Cn.jsx)("span",{className:"text-gray-900",children:null!==o&&void 0!==o&&o.website?(0,Cn.jsx)("a",{href:o.website,target:"_blank",rel:"noopener noreferrer",className:"text-purple-700 underline",children:o.website}):"\u2014"})]})]})]})]})]})]}):(0,Cn.jsx)("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)(uN,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Cn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No organization selected"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Select an organization from the list to view its details."})]})})})]}),b&&(0,Cn.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[(0,Cn.jsx)("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:()=>{y(!1),C(""),_(""),I(!1)},"aria-label":"Close",children:"\xd7"}),(0,Cn.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Invite Member"}),k?(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)("div",{className:"mb-4 text-green-700 font-medium",children:"Invitation created!"}),(0,Cn.jsxs)("div",{className:"space-y-2",children:[(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("input",{type:"text",value:k,readOnly:!0,className:"flex-1 px-2 py-1 border rounded text-sm",onFocus:e=>e.target.select()}),(0,Cn.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(k),I("link")},className:"px-3 py-1 bg-blue-600 text-white rounded",children:"link"===E?"Copied!":"Copy Link"})]}),(0,Cn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Cn.jsx)("input",{type:"text",value:S,readOnly:!0,className:"flex-1 px-2 py-1 border rounded text-sm",onFocus:e=>e.target.select()}),(0,Cn.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(S),I("token")},className:"px-3 py-1 bg-blue-600 text-white rounded",children:"token"===E?"Copied!":"Copy Token"})]})]}),(0,Cn.jsx)("button",{className:"mt-6 w-full bg-gray-200 text-gray-800 py-2 rounded hover:bg-gray-300",onClick:()=>{y(!1),C(""),_(""),I(!1)},children:"Close"})]}):(0,Cn.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v.trim()&&i){x(!0);try{const{data:e,error:t}=await kn.rpc("invite_user_to_organization",{p_organization_id:i.organization_id,p_email:v,p_role:w});if(t)throw t;const r="".concat(window.location.origin,"/join/").concat(e.token);C(r),_(e.token),I(!1),j(""),M(i.organization_id)}catch(t){console.error("Error inviting member:",t),alert("Error creating invitation: "+t.message)}finally{x(!1)}}},children:[(0,Cn.jsxs)("div",{className:"mb-4",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Cn.jsx)("input",{type:"email",className:"w-full px-3 py-2 border rounded",value:v,onChange:e=>j(e.target.value),required:!0})]}),(0,Cn.jsxs)("div",{className:"mb-4",children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,Cn.jsxs)("select",{className:"w-full px-3 py-2 border rounded",value:w,onChange:e=>N(e.target.value),children:[(0,Cn.jsx)("option",{value:"member",children:"Member"}),(0,Cn.jsx)("option",{value:"admin",children:"Admin"}),(0,Cn.jsx)("option",{value:"viewer",children:"Viewer"})]})]}),(0,Cn.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",disabled:h,children:h?"Inviting...":"Send Invitation"})]})]})})]})},xN=["title","titleId"];function fN(e,r){let{title:n,titleId:s}=e,a=Yn(e,xN);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const gN=t.forwardRef(fN),bN=()=>{const{token:e}=function(){let{matches:e}=t.useContext(Y),r=e[e.length-1];return r?r.params:{}}(),r=ee(),{user:n,refreshOrganizations:s}=_n(),[a,i]=(0,t.useState)(null),[l,o]=(0,t.useState)(!0),[c,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(null),[p,h]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&x()},[e]);const x=async()=>{try{const{data:t,error:r}=await kn.rpc("get_invitation_details",{p_token:e});if(r)throw r;t&&t.length>0?i(t[0]):m("Invitation not found or has expired")}catch(t){console.error("Error loading invitation:",t),m("Failed to load invitation details")}finally{o(!1)}};return l?(0,Cn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,Cn.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading invitation..."})]})}):u&&!a?(0,Cn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Cn.jsx)(gN,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid Invitation"}),(0,Cn.jsx)("p",{className:"text-gray-600 mb-6",children:u}),(0,Cn.jsx)("button",{onClick:()=>r("/"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Go to Home"})]})}):p?(0,Cn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Cn.jsx)(Ka,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome!"}),(0,Cn.jsxs)("p",{className:"text-gray-600 mb-6",children:["You've successfully joined ",(0,Cn.jsx)("strong",{children:null===a||void 0===a?void 0:a.organization_name})," as a ",(0,Cn.jsx)("strong",{children:null===a||void 0===a?void 0:a.role}),"."]}),(0,Cn.jsx)("div",{className:"animate-pulse",children:(0,Cn.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting to dashboard..."})})]})}):null!==a&&void 0!==a&&a.is_valid?(0,Cn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[(0,Cn.jsxs)("div",{className:"text-center mb-8",children:[(0,Cn.jsx)(uN,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Join Organization"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"You've been invited to join a team on Layrbase"})]}),(0,Cn.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,Cn.jsx)("h2",{className:"font-semibold text-blue-900 mb-2",children:a.organization_name}),(0,Cn.jsxs)("div",{className:"space-y-2 text-sm text-blue-800",children:[(0,Cn.jsxs)("p",{children:[(0,Cn.jsx)("strong",{children:"Role:"})," ",a.role]}),(0,Cn.jsxs)("p",{children:[(0,Cn.jsx)("strong",{children:"Invited by:"})," ",a.invited_by_name]}),(0,Cn.jsxs)("p",{children:[(0,Cn.jsx)("strong",{children:"Expires:"})," ",new Date(a.expires_at).toLocaleDateString()]})]})]}),n?(0,Cn.jsxs)("div",{className:"space-y-4",children:[n.email!==a.email&&(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Cn.jsxs)("p",{className:"text-sm text-red-800",children:["This invitation was sent to ",(0,Cn.jsx)("strong",{children:a.email}),", but you're logged in as ",(0,Cn.jsx)("strong",{children:n.email}),"."]})}),(0,Cn.jsx)("button",{onClick:async()=>{if(n){d(!0);try{const{data:t,error:n}=await kn.rpc("accept_organization_invitation",{p_token:e});if(n)throw n;h(!0),await s(),r("/dashboard",{replace:!0})}catch(t){console.error("Error accepting invitation:",t),m(t.message||"Failed to accept invitation")}finally{d(!1)}}else r("/auth?redirect=/join/"+e)},disabled:c||n.email!==a.email,className:"w-full py-3 px-4 rounded-md font-medium ".concat(c||n.email!==a.email?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:c?"Joining...":"Accept Invitation"})]}):(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Cn.jsx)("p",{className:"text-sm text-yellow-800",children:"You need to be logged in to accept this invitation."})}),(0,Cn.jsx)("button",{onClick:()=>r("/auth?redirect=/join/"+e),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 font-medium",children:"Sign In to Accept"})]}),u&&(0,Cn.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,Cn.jsx)("p",{className:"text-sm text-red-800",children:u})})]})}):(0,Cn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Cn.jsx)(qa,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invitation Expired"}),(0,Cn.jsx)("p",{className:"text-gray-600 mb-6",children:"This invitation has expired or has already been accepted."}),(0,Cn.jsx)("button",{onClick:()=>r("/"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700",children:"Go to Home"})]})})},yN=e=>{let{isOpen:r,onClose:n,onAdd:s,categories:a,onCreateCategory:i,type:l="lineItem",parent:o,typeOverride:c}=e;const[d,u]=(0,t.useState)({name:"",description:"",type:"revenue",amount:"",isRecurring:!0,categoryId:"",color:"#6B7280"}),[m,p]=(0,t.useState)(!1),[h,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>{u(o&&"lineItem"===l?e=>Oe(Oe({},e),{},{categoryId:o.category_id||o.id}):e=>Oe(Oe({},e),{},{categoryId:""})),u(e=>Oe(Oe({},e),{},{name:""})),"category"===l&&c&&u(e=>Oe(Oe({},e),{},{type:c}))},[r,o,l,c]);const f=()=>{u({name:"",description:"",type:"revenue",amount:"",isRecurring:!0,categoryId:"",color:"#6B7280"}),p(!1),n()},g=a.filter(e=>e.type===d.type);return r?(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[(0,Cn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"category"===l?"Add Category":"Add Budget Item"}),(0,Cn.jsx)("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:(0,Cn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Cn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{if("category"===l)await i({name:d.name,description:d.description,type:d.type,color:d.color});else{let e=parseFloat(d.amount)||0;e=Math.abs(e),await s({name:d.name,description:d.description,type:d.type,amount:e,isRecurring:d.isRecurring,categoryId:d.categoryId})}f()}catch(t){console.error("Error adding item:",t),alert(t.message||t.toString())}finally{x(!1)}},className:"space-y-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,Cn.jsxs)("select",{value:d.type,onChange:e=>u(Oe(Oe({},d),{},{type:e.target.value,categoryId:""})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",required:!0,children:[(0,Cn.jsx)("option",{value:"revenue",children:"Revenue"}),(0,Cn.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"category"===l?"Category Name":"Item Name"}),(0,Cn.jsx)("input",{type:"text",value:d.name,onChange:e=>u(Oe(Oe({},d),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"category"===l?"e.g., Product Sales":"e.g., Software Licenses",required:!0})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Cn.jsx)("textarea",{value:d.description,onChange:e=>u(Oe(Oe({},d),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",rows:"2",placeholder:"Optional description"})]}),"lineItem"===l&&(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsxs)("select",{value:d.categoryId,onChange:e=>u(Oe(Oe({},d),{},{categoryId:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",required:!0,children:[(0,Cn.jsx)("option",{value:"",children:"Select a category"}),g.map(e=>(0,Cn.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!0),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm",children:"+"})]})]}),"lineItem"===l&&(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,Cn.jsx)("input",{type:"number",value:d.amount,onChange:e=>u(Oe(Oe({},d),{},{amount:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"0.00",step:"0.01",min:"0"})]}),"lineItem"===l&&(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("input",{type:"checkbox",id:"isRecurring",checked:d.isRecurring,onChange:e=>u(Oe(Oe({},d),{},{isRecurring:e.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,Cn.jsx)("label",{htmlFor:"isRecurring",className:"ml-2 block text-sm text-gray-900",children:"Recurring monthly"})]}),"category"===l&&(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,Cn.jsx)("input",{type:"color",value:d.color,onChange:e=>u(Oe(Oe({},d),{},{color:e.target.value})),className:"w-full h-10 border border-gray-300 rounded-md"})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,Cn.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),(0,Cn.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:h?"Adding...":"Add"})]})]}),m&&(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60",children:(0,Cn.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm mx-4",children:[(0,Cn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Add Category"}),(0,Cn.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await i({name:d.name,description:d.description,type:d.type,color:d.color});u(Oe(Oe({},d),{},{categoryId:e.id})),p(!1)}catch(t){console.error("Error creating category:",t)}},children:(0,Cn.jsxs)("div",{className:"space-y-3",children:[(0,Cn.jsx)("input",{type:"text",value:d.name,onChange:e=>u(Oe(Oe({},d),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Category name",required:!0}),(0,Cn.jsxs)("div",{className:"flex gap-2",children:[(0,Cn.jsx)("button",{type:"submit",className:"flex-1 px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Create"}),(0,Cn.jsx)("button",{type:"button",onClick:()=>p(!1),className:"flex-1 px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Cancel"})]})]})})]})})]})}):null},vN=["title","titleId"];function jN(e,r){let{title:n,titleId:s}=e,a=Yn(e,vN);return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),n?t.createElement("title",{id:s},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const wN=t.forwardRef(jN),NN=e=>{let{isOpen:r,onClose:n,categories:s,onSave:a,loadBudgetData:i}=e;const{currentOrganization:l}=_n(),[o,c]=(0,t.useState)(()=>s.map(e=>Oe({},e))),[d,u]=(0,t.useState)(null),[m,p]=(0,t.useState)(""),[h,x]=(0,t.useState)(!1),[f,g]=(0,t.useState)(null),b=(0,t.useRef)(),y=(0,t.useRef)();if(t.useEffect(()=>{c(s.map(e=>Oe({},e))),u(null),p("")},[s,r]),!r)return null;const v=()=>{const e=b.current,t=y.current;if(void 0===e||void 0===t||e===t)return;const r=[...o],[n]=r.splice(e,1);r.splice(t,0,n),c(r),b.current=void 0,y.current=void 0},j=e=>{const t={id:"new-cat-".concat(Date.now()),name:"",type:e,isNew:!0};c(e=>[...e,t]),u(t.id),p("")},w=e=>{((e,t)=>{c(r=>r.map(r=>r.id===e?Oe(Oe({},r),{},{name:t}):r))})(e,m),u(null),p("")},N=()=>{c(s.map(e=>Oe({},e))),g(null),n()},k=(e,t,r)=>(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Cn.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 border border-gray-200 rounded px-2 py-1 cursor-pointer text-sm flex-1",draggable:!0,onDragStart:()=>(e=>{b.current=e})(t),onDragEnter:()=>(e=>{y.current=e})(t),onDragEnd:v,onDragOver:e=>e.preventDefault(),children:[(0,Cn.jsx)(wN,{className:"w-5 h-5 text-gray-400 cursor-move mr-2"}),d===e.id?(0,Cn.jsx)("input",{className:"flex-1 px-2 py-1 border border-purple-300 rounded focus:ring-2 focus:ring-purple-500",value:m,onChange:e=>p(e.target.value),autoFocus:!0,onKeyDown:t=>{"Enter"===t.key&&w(e.id)}}):(0,Cn.jsx)("span",{className:"flex-1 text-gray-900 font-medium",children:e.name}),d===e.id?(0,Cn.jsx)("button",{onClick:()=>w(e.id),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:(0,Cn.jsx)(aN,{className:"w-5 h-5"})}):(0,Cn.jsx)("button",{onClick:()=>{return t=e.id,r=e.name,u(t),void p(r);var t,r},className:"p-1 text-gray-500 hover:bg-gray-100 rounded",children:(0,Cn.jsx)(oN,{className:"w-5 h-5"})})]}),(0,Cn.jsx)("button",{onClick:()=>{return t=e.id,void c(e=>e.map(e=>e.id===t?Oe(Oe({},e),{},{_delete:!0}):e));var t},className:"ml-2 p-1 text-gray-400 hover:text-red-500 rounded",children:(0,Cn.jsx)(Ti,{className:"w-5 h-5"})})]},e.id);return(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Cn.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:N}),(0,Cn.jsxs)("div",{className:"relative max-w-xl w-full bg-white rounded-md shadow-2xl flex flex-col",style:{maxHeight:"90vh"},children:[(0,Cn.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-gray-50 rounded-t-xl sticky top-0 z-10",children:[(0,Cn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Category Editor"}),(0,Cn.jsx)("button",{onClick:N,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,Cn.jsxs)("div",{className:"px-6 py-0 flex-1 overflow-y-auto",style:{minHeight:0},children:[f&&(0,Cn.jsx)("div",{className:"mb-4 text-red-600 text-sm",children:f}),(0,Cn.jsxs)("div",{className:"mb-8 p-0",children:[(0,Cn.jsx)("div",{className:"mb-2 flex items-center",children:(0,Cn.jsx)("span",{className:"font-semibold text-purple-700 text-sm mt-2",children:"Revenue Categories"})}),(0,Cn.jsx)("span",{className:"block text-gray-500 text-xs mb-2",children:"These are your revenue categories"}),(0,Cn.jsx)("div",{className:"flex flex-col gap-1",children:o.filter(e=>"revenue"===e.type&&!e._delete).map((e,t)=>k(e,t))}),(0,Cn.jsxs)("button",{type:"button",className:"mt-3 flex items-center text-purple-700 hover:text-purple-900 text-xs font-medium gap-1",onClick:()=>j("revenue"),children:[(0,Cn.jsx)(Aa,{className:"w-4 h-4"})," Add Revenue Category"]})]}),(0,Cn.jsx)("div",{className:"border-t border-gray-200 my-4"}),(0,Cn.jsxs)("div",{className:"mb-6 p-0",children:[(0,Cn.jsx)("div",{className:"mb-2 flex items-center",children:(0,Cn.jsx)("span",{className:"font-semibold text-purple-700 text-sm",children:"Cost Categories"})}),(0,Cn.jsx)("span",{className:"block text-gray-500 text-xs mb-2",children:"These are your cost categories"}),(0,Cn.jsx)("div",{className:"flex flex-col gap-1",children:o.filter(e=>"expense"===e.type&&!e._delete).map((e,t)=>k(e,t))}),(0,Cn.jsxs)("button",{type:"button",className:"mt-3 flex items-center text-purple-700 hover:text-purple-900 text-xs font-medium gap-1",onClick:()=>j("expense"),children:[(0,Cn.jsx)(Aa,{className:"w-4 h-4"})," Add Cost Category"]})]})]}),(0,Cn.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl sticky bottom-0 z-10",children:[(0,Cn.jsx)("button",{type:"button",onClick:N,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:h,children:"Cancel"}),(0,Cn.jsx)("button",{type:"button",onClick:async()=>{x(!0),g(null);try{const e=(null===l||void 0===l?void 0:l.organization_id)||(null===l||void 0===l?void 0:l.id);if(!e)throw new Error("No organization selected");for(const t of o)if(t._delete&&!t.isNew)await $n.deleteCategory(t.id);else if(t.isNew&&t.name.trim())await $n.createCategory(e,t);else if(!t.isNew){const e=s.find(e=>e.id===t.id);e&&e.name!==t.name&&t.name.trim()&&await $n.updateCategory(t.id,{name:t.name})}"function"===typeof i&&await i(),"function"===typeof a&&a(),n()}catch(Qc){g(Qc.message||"Error saving categories")}finally{x(!1)}},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",disabled:h,children:h?"Saving...":"Save"})]})]})]})},kN=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN=e=>{let{isOpen:r,onClose:n}=e;const[s,a]=(0,t.useState)("basics"),[i,l]=(0,t.useState)({basics:!0,platform:!1,ai:!1}),[o,c]=(0,t.useState)({intro:!0,why:!1,best:!1}),d=e=>c(t=>Oe(Oe({},t),{},{[e]:!t[e]})),[u,m]=(0,t.useState)({quick:!0,tips:!1,faq:!1}),p=e=>m(t=>Oe(Oe({},t),{},{[e]:!t[e]}));return r?(0,Cn.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Cn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity",onClick:n}),(0,Cn.jsxs)("div",{className:"fixed top-0 right-0 w-full max-w-xl h-screen bg-white shadow-xl flex flex-col m-0 p-0",children:[(0,Cn.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-500 px-6 py-4 m-0",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Cn.jsx)("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Budget & Forecast Help & Tips"}),(0,Cn.jsx)("button",{onClick:n,className:"text-white hover:text-gray-200 text-2xl",children:"\xd7"})]})}),(0,Cn.jsxs)("div",{className:"flex border-b border-gray-200 w-full",children:[(0,Cn.jsxs)("button",{onClick:()=>a("basics"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("basics"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Vs,{className:"w-5 h-5"})," Budgeting Basics"]}),(0,Cn.jsxs)("button",{onClick:()=>a("platform"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("platform"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Ks,{className:"w-5 h-5"})," Platform How-To"]}),(0,Cn.jsxs)("button",{onClick:()=>a("ai"),className:"flex-1 px-0 py-4 text-sm font-medium flex items-center justify-center gap-2 transition border-b-2 ".concat("ai"===s?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-700 bg-gray-50 hover:bg-gray-100"),children:[(0,Cn.jsx)(Js,{className:"w-5 h-5"})," AI"]})]}),(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:["basics"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("intro"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Introduction"}),o.intro?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.intro&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Budgeting and forecasting are essential for business planning and financial management. This section helps you understand best practices for creating and managing budgets effectively."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("why"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Why It's Important"}),o.why?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.why&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Helps plan and allocate resources effectively"}),(0,Cn.jsx)("li",{children:"Provides financial control and accountability"}),(0,Cn.jsx)("li",{children:"Enables better decision-making and strategy"}),(0,Cn.jsx)("li",{children:"Facilitates performance monitoring and analysis"})]})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>d("best"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Best Practice"}),o.best?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),o.best&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,Cn.jsx)("li",{children:"Set clear revenue and cost categories for transparency"}),(0,Cn.jsx)("li",{children:"Review and update your forecast regularly"}),(0,Cn.jsx)("li",{children:"Compare actuals vs. budget to spot trends early"}),(0,Cn.jsx)("li",{children:"Use recurring items for predictable expenses"})]})})]})]}),"platform"===s&&(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("quick"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Edit Values Directly"}),u.quick?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.quick&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Click any cell to edit values directly. Use the quick editor for fast category changes and switch between months/quarters for different views."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("tips"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Compare and Analyze"}),u.tips?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.tips&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Compare forecast vs. budget with one click. Use the budget comparison feature to analyze variances and track performance against targets."})})]}),(0,Cn.jsxs)("div",{className:"bg-gray-50",children:[(0,Cn.jsxs)("button",{onClick:()=>p("faq"),className:"w-full flex items-center justify-between px-4 py-3 text-left font-semibold text-purple-700 bg-gray-50 hover:bg-gray-100 rounded-t focus:outline-none",children:[(0,Cn.jsx)("span",{className:"text-sm",children:"Organize and Structure"}),u.faq?(0,Cn.jsx)(ea,{className:"w-5 h-5"}):(0,Cn.jsx)(na,{className:"w-5 h-5"})]}),u.faq&&(0,Cn.jsx)("div",{className:"px-6 py-4 text-gray-700 text-sm",children:(0,Cn.jsx)("p",{children:"Expand/collapse groups to focus on what matters. All values are editable and organized by revenue and cost categories for easy management."})})]})]}),"ai"===s&&(0,Cn.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 rounded p-4",style:{minHeight:400},children:[(0,Cn.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:"Hi! I'm your budgeting assistant. I can help you create budgets, analyze forecasts, and answer questions about using this platform."})}),(0,Cn.jsx)("div",{className:"flex justify-end",children:(0,Cn.jsx)("div",{className:"bg-purple-100 border border-purple-200 rounded-lg px-4 py-2 text-sm text-purple-900 max-w-xs",children:"How do I add a new budget category?"})}),(0,Cn.jsx)("div",{className:"flex justify-start",children:(0,Cn.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg px-4 py-2 text-sm text-gray-800 max-w-xs",children:'Click the "+" button next to "Revenue" or "Costs" to add a new category. You can also add line items within each category for more detailed budgeting.'})})]}),(0,Cn.jsxs)("form",{className:"flex items-center gap-2",children:[(0,Cn.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Ask about budgeting...",disabled:!0}),(0,Cn.jsx)("button",{type:"submit",className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm font-medium hover:bg-purple-700",disabled:!0,children:"Send"})]})]})]})]})]}):null},SN=()=>{ee();const e=Q(),{currentOrganization:r}=_n(),{budgetData:n,categories:s,lineItems:a,loading:i,error:l,selectedYear:o,isForecast:c,showBudgetComparison:d,comparisonData:u,setSelectedYear:m,setIsForecast:p,setShowBudgetComparison:h,updateBudgetValue:x,createLineItem:f,createCategory:g,deleteLineItem:b,groupedBudgetData:y,totals:v,comparisonTotals:j,loadComparisonData:w,clearError:N,loadBudgetData:k}=Kn(),[C,S]=(0,t.useState)(!1),[_,E]=(0,t.useState)(!1),[I,P]=(0,t.useState)(!0),[T,D]=(0,t.useState)(!0),[A,O]=(0,t.useState)(new Set),[L,R]=(0,t.useState)("months"),[M,z]=(0,t.useState)("budget"),[F,B]=(0,t.useState)(!1),[U,q]=(0,t.useState)(null),[H,W]=(0,t.useState)(null),[V,G]=(0,t.useState)(null),[$,K]=(0,t.useState)(null),[Y,Z]=(0,t.useState)(""),[J,X]=(0,t.useState)("revenue"),[te,re]=(0,t.useState)(!1),[ne,se]=(0,t.useState)(!1),[ae,ie]=(0,t.useState)(!1),le=(new Date).getFullYear(),oe=Array.from({length:5},(e,t)=>le+t);(0,t.useEffect)(()=>{"forecast"===new URLSearchParams(e.search).get("tab")&&z("forecast")},[e.search]),(0,t.useEffect)(()=>{p("forecast"===M)},[M,p]),(0,t.useEffect)(()=>{"forecast"===M&&null!==r&&void 0!==r&&r.id&&w()},[M,null===r||void 0===r?void 0:r.id,w]),(0,t.useEffect)(()=>{null!==r&&void 0!==r&&r.id&&(console.log("Budget useEffect running, calling loadBudgetData"),k())},[null===r||void 0===r?void 0:r.id,k]),(0,t.useEffect)(()=>{(async()=>{if(null!==r&&void 0!==r&&r.id)try{const e=(await $n.getVersions(r.id,o)).find(e=>!e.is_forecast);ie((null===e||void 0===e?void 0:e.is_locked)||!1)}catch(l){console.error("Error checking lock status:",l)}})()},[null===r||void 0===r?void 0:r.id,o]);const ce=e=>{const t=[];for(let r=0;r<4;r++){const n=3*r,s=e.slice(n,n+3).reduce((e,t)=>e+t,0);t.push(s)}return t},de=async(e,t,r)=>{const n=parseFloat(r)||0;await x(e,t,n)},ue=async e=>{await g(e)},me=e=>{const t=new Set(A);t.has(e)?t.delete(e):t.add(e),O(t)},pe=async e=>{window.confirm("Are you sure you want to delete this line item?")&&await b(e)},he=e=>{q("lineItem"),W(e),S(!0)},xe=e=>{G(e.id),Z(e.name)},fe=e=>{K(e.line_item_id),Z(e.line_item_name)},ge=async e=>{Y.trim()&&Y!==e.name&&(await $n.updateCategory(e.id,{name:Y}),await k()),G(null)},be=async e=>{Y.trim()&&Y!==e.line_item_name&&(await $n.updateLineItem(e.line_item_id,{name:Y}),await k()),K(null)},ye=u.length>0?u:n.map(e=>Oe(Oe({},e),{},{budget:Object.fromEntries(Array.from({length:12},(t,r)=>["month_".concat(r+1),e["month_".concat(r+1)]||0])),forecast:Object.fromEntries(Array.from({length:12},(e,t)=>["month_".concat(t+1),0]))}));(0,t.useCallback)(()=>{console.log("groupedComparisonDataFallback called with:",ye.length,"items");const e={};return ye.forEach(t=>{const r=(t.category_name||"Uncategorized").trim().toLowerCase();e[r]||(e[r]={type:t.type,items:[]}),e[r].items.push(t)}),console.log("Grouped comparison data:",Object.keys(e),e),e},[ye]),(0,t.useCallback)(()=>{console.log("calculateComparisonTotals called with comparisonData:",ye.length,"items");const e={budget:{revenue:Array(12).fill(0),expense:Array(12).fill(0),profitLoss:Array(12).fill(0)},forecast:{revenue:Array(12).fill(0),expense:Array(12).fill(0),profitLoss:Array(12).fill(0)}};ye.forEach(t=>{for(let r=1;r<=12;r++){const n=t.budget["month_".concat(r)]||0,s=t.forecast["month_".concat(r)]||0;"revenue"===t.type?(e.budget.revenue[r-1]+=n,e.forecast.revenue[r-1]+=s):(e.budget.expense[r-1]+=Math.abs(n),e.forecast.expense[r-1]+=Math.abs(s))}});for(let t=0;t<12;t++)e.budget.profitLoss[t]=e.budget.revenue[t]-e.budget.expense[t],e.forecast.profitLoss[t]=e.forecast.revenue[t]-e.forecast.expense[t];return console.log("Comparison totals calculated:",e),e},[ye]);return i?(0,Cn.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Cn.jsx)("div",{className:"text-gray-500",children:"Loading budget data..."})}):l?(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:(0,Cn.jsxs)("div",{className:"flex",children:[(0,Cn.jsx)("div",{className:"flex-shrink-0",children:(0,Cn.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,Cn.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,Cn.jsxs)("div",{className:"ml-3",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading budget"}),(0,Cn.jsx)("div",{className:"mt-2 text-sm text-red-700",children:l}),(0,Cn.jsx)("div",{className:"mt-4",children:(0,Cn.jsx)("button",{onClick:N,className:"bg-red-100 text-red-800 px-3 py-1 rounded-md text-sm hover:bg-red-200",children:"Try Again"})})]})]})}):0===s.length&&0===a.length?(0,Cn.jsxs)("div",{children:[(0,Cn.jsxs)("div",{className:"mb-4",children:[(0,Cn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Budget & Forecast"}),(0,Cn.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Add and manage your revenue and cost lines. Expand/collapse groups to focus on what matters. All values are editable."})]}),(0,Cn.jsx)("div",{className:"text-center py-12",children:(0,Cn.jsxs)("div",{className:"text-gray-500",children:[(0,Cn.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Cn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,Cn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No budget data yet"}),(0,Cn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first budget categories and line items."}),(0,Cn.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,Cn.jsx)("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm font-medium",children:"+ Add Category"}),(0,Cn.jsx)("button",{onClick:()=>{console.log("Create Sample Data Clicked"),(async()=>{if(null!==r&&void 0!==r&&r.id){B(!0);try{await $n.createSampleData(r.id),await k()}catch(l){console.error("Error creating sample data:",l),alert(l.message||l.toString())}finally{B(!1)}}})()},disabled:F,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50 text-sm font-medium",children:F?"Creating...":"Create Sample Data"})]})]})}),(0,Cn.jsx)(yN,{isOpen:_,onClose:()=>E(!1),onAdd:ue,onCreateCategory:ue,categories:s,type:"category"})]}):(console.log("DEBUG: budgetData",n),console.log("DEBUG: groupedBudgetData",y),console.log("DEBUG: expense categories",s.filter(e=>"expense"===e.type)),(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsx)("div",{children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Budget & Forecast"}),(0,Cn.jsx)("p",{className:"text-gray-600 mt-1 text-sm",children:"Add and manage your revenue and cost lines. Expand/collapse groups to focus on what matters. All values are editable."})]}),(0,Cn.jsxs)("button",{onClick:()=>se(!0),className:"inline-flex items-center px-3 py-1.5 border border-gray-200 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition",style:{boxShadow:"0 1px 4px 0 rgba(80,80,120,0.06)"},children:[(0,Cn.jsx)(ia,{className:"w-5 h-5 mr-2 text-purple-500"}),"Help"]})]})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("div",{className:"mb-6",children:(0,Cn.jsx)("div",{className:"border-b border-gray-200",children:(0,Cn.jsxs)("nav",{className:"-mb-px flex space-x-4",children:[(0,Cn.jsx)("button",{onClick:()=>z("budget"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("budget"===M?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Budget"}),(0,Cn.jsx)("button",{onClick:()=>z("forecast"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("forecast"===M?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Forecast"})]})})}),"budget"===M?(0,Cn.jsxs)(Cn.Fragment,{children:[ae&&(0,Cn.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,Cn.jsxs)("div",{className:"flex items-center",children:[(0,Cn.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Cn.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,Cn.jsxs)("span",{className:"text-green-800 font-medium",children:["Budget is locked for ",o]})]})}),(0,Cn.jsxs)("div",{className:"mb-4 flex items-center gap-2 w-full",children:[(0,Cn.jsx)("button",{className:"px-4 py-2 rounded-md bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",onClick:()=>{console.log("Add Item Clicked"),he(null)},children:"+ Add Item"}),(0,Cn.jsx)("button",{className:"px-4 py-2 rounded-md bg-gray-500 text-white text-sm font-semibold hover:bg-gray-700",onClick:()=>re(!0),children:"Quick Editor"}),(0,Cn.jsx)("button",{className:"px-4 py-2 rounded-md text-sm font-semibold ".concat(ae?"bg-green-600 text-white cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"),onClick:async()=>{if(null!==r&&void 0!==r&&r.id)try{const e="Budget ".concat(o);await $n.lockVersion(null,!0,e,o,!1,r.id),ie(!0),alert("Budget has been locked successfully!")}catch(l){console.error("Error locking budget:",l),alert("Error locking budget: "+l.message)}},disabled:ae,children:ae?"Budget Locked":"Lock Budget"}),(0,Cn.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,Cn.jsx)("select",{value:o,onChange:e=>m(Number(e.target.value)),className:"px-4 py-2 rounded-md border border-gray-300 focus:ring-purple-500 focus:border-purple-500 text-sm w-32",children:oe.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))}),(0,Cn.jsxs)("div",{className:"flex items-center bg-purple-100 rounded-md p-0.5 shadow-inner",children:[(0,Cn.jsx)("button",{onClick:()=>R("months"),className:"px-3 py-1.5 text-sm font-semibold rounded-md transition-all duration-150 focus:outline-none\n                  ".concat("months"===L?"bg-white text-purple-700 shadow z-10":"bg-transparent text-purple-600"),children:"Months"}),(0,Cn.jsx)("button",{onClick:()=>R("quarters"),className:"px-3 py-1.5 text-sm font-semibold rounded-md transition-all duration-150 focus:outline-none\n                  ".concat("quarters"===L?"bg-white text-purple-700 shadow z-10":"bg-transparent text-purple-600"),children:"Quarters"})]})]})]}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full text-sm border border-gray-200 rounded-lg",children:[(0,Cn.jsx)("thead",{children:(0,Cn.jsxs)("tr",{className:"bg-gray-50",children:[(0,Cn.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-500 w-40",children:"Line"}),"months"===L?kN.map(e=>(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:e},e)):["Q1","Q2","Q3","Q4"].map(e=>(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:e},e)),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l border-gray-300",children:"Full Year"})]})}),(0,Cn.jsxs)("tbody",{children:[(0,Cn.jsxs)("tr",{className:"bg-green-50 group cursor-pointer",onClick:()=>P(e=>!e),children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-bold text-green-800 flex items-center gap-2 border-r border-gray-300",children:[(0,Cn.jsx)("span",{className:"inline-block w-4",children:I?"\u25bc":"\u25b6"})," Revenue",(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),q("category"),X("revenue"),W(null),E(!0),Z("")},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]}),"months"===L?v.revenue.map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-sans font-bold",children:e.toLocaleString()},t)):ce(v.revenue).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-sans font-bold",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-green-900 border-l border-gray-300 font-sans font-bold",children:v.revenue.reduce((e,t)=>e+t,0).toLocaleString()})]}),I&&s.filter(e=>"revenue"===e.type).map(e=>{const r=e.name.trim().toLowerCase(),n=y[r]||{items:[]};return(0,Cn.jsxs)(t.Fragment,{children:[(0,Cn.jsxs)("tr",{className:"bg-green-25 hover:bg-green-100 border-b border-green-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 whitespace-nowrap border-r border-gray-300 relative",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Cn.jsxs)("div",{className:"flex items-center pl-6",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),me(e.name)},className:"mr-2 text-gray-500 hover:text-gray-800 focus:outline-none",children:A.has(e.name)?"\u25bc":"\u25b6"}),V===e.id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>ge(e),onKeyDown:t=>{"Enter"===t.key&&ge(e)}}):(0,Cn.jsx)("span",{onClick:()=>xe(e),className:"cursor-pointer hover:underline font-normal",children:e.name})]}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation();he(e?{category_id:e.id}:null)},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]})}),"months"===L?Array(12).fill(0).map((e,t)=>{const r=n.items.reduce((e,r)=>e+(r["month_".concat(t+1)]||0),0);return(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 font-sans",children:r.toLocaleString()},t)}):ce(Array(12).fill(0).map((e,t)=>n.items.reduce((e,r)=>e+(r["month_".concat(t+1)]||0),0))).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 font-sans",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-green-900 border-l border-gray-300 font-sans",children:n.items.reduce((e,t)=>e+Array.from({length:12},(e,r)=>t["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0),0).toLocaleString()})]}),A.has(e.name)&&0===n.items.length&&(0,Cn.jsx)("tr",{className:"bg-white border-b border-gray-200",children:(0,Cn.jsx)("td",{className:"px-3 py-2 text-gray-400 pl-16 border-r border-gray-300",colSpan:"months"===L?14:6,children:"No line items"})}),A.has(e.name)&&n.items.map(e=>(0,Cn.jsxs)("tr",{className:"bg-white border-b border-gray-200",children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-medium text-gray-700 whitespace-nowrap pl-16 border-r border-gray-300 flex items-center justify-between",children:[(0,Cn.jsx)("div",{className:"flex-1",children:$===e.line_item_id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>be(e),onKeyDown:t=>{"Enter"===t.key&&be(e)}}):(0,Cn.jsx)("span",{onClick:()=>fe(e),className:"cursor-pointer hover:underline font-normal",children:e.line_item_name})}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),pe(e.line_item_id)},className:"ml-2 w-5 h-5 bg-white border border-gray-300 rounded flex items-center justify-center hover:bg-red-50",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-xs font-bold leading-none text-red-500",children:"-"})})]}),"months"===L?Array(12).fill(0).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:e["month_".concat(r+1)]||0,onChange:t=>de(e.line_item_id,r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)):ce(Array(12).fill(0).map((t,r)=>e["month_".concat(r+1)]||0)).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:t||0,onChange:t=>de(e.line_item_id,3*r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-green-900 border-l border-gray-300 font-sans",children:Array.from({length:12},(t,r)=>e["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0).toLocaleString()})]},e.line_item_id))]},e.name)}),(0,Cn.jsxs)("tr",{className:"bg-red-50 group cursor-pointer",onClick:()=>D(e=>!e),children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-bold text-red-800 flex items-center gap-2 border-r border-gray-300",children:[(0,Cn.jsx)("span",{className:"inline-block w-4",children:T?"\u25bc":"\u25b6"})," Costs",(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),q("category"),X("expense"),W(null),E(!0),Z("")},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]}),"months"===L?v.expense.map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-sans font-bold",children:e.toLocaleString()},t)):ce(v.expense).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-sans font-bold",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-red-900 border-l border-gray-300 font-sans font-bold",children:v.expense.reduce((e,t)=>e+t,0).toLocaleString()})]}),T&&s.filter(e=>"expense"===e.type).map(e=>{const r=e.name.trim().toLowerCase(),n=y[r]||{items:[]};return(0,Cn.jsxs)(t.Fragment,{children:[(0,Cn.jsxs)("tr",{className:"bg-red-25 hover:bg-red-100 border-b border-red-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 whitespace-nowrap border-r border-gray-300 relative",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Cn.jsxs)("div",{className:"flex items-center pl-6",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),me(e.name)},className:"mr-2 text-gray-500 hover:text-gray-800 focus:outline-none",children:A.has(e.name)?"\u25bc":"\u25b6"}),V===e.id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>ge(e),onKeyDown:t=>{"Enter"===t.key&&ge(e)}}):(0,Cn.jsx)("span",{onClick:()=>xe(e),className:"cursor-pointer hover:underline font-normal",children:e.name})]}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation();he(e?{category_id:e.id}:null)},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]})}),"months"===L?Array(12).fill(0).map((e,t)=>{const r=n.items.reduce((e,r)=>e+Math.abs(r["month_".concat(t+1)]||0),0);return(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 font-sans",children:r.toLocaleString()},t)}):ce(Array(12).fill(0).map((e,t)=>n.items.reduce((e,r)=>e+Math.abs(r["month_".concat(t+1)]||0),0))).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 font-sans",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-red-900 border-l border-gray-300 font-sans",children:n.items.reduce((e,t)=>e+Array.from({length:12},(e,r)=>t["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0),0).toLocaleString()})]}),A.has(e.name)&&0===n.items.length&&(0,Cn.jsx)("tr",{className:"bg-white border-b border-gray-200",children:(0,Cn.jsx)("td",{className:"px-3 py-2 text-gray-400 pl-16 border-r border-gray-300",colSpan:"months"===L?14:6,children:"No line items"})}),A.has(e.name)&&n.items.map(e=>(0,Cn.jsxs)("tr",{className:"bg-white border-b border-gray-200",children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-medium text-gray-700 whitespace-nowrap pl-16 border-r border-gray-300 flex items-center justify-between",children:[(0,Cn.jsx)("div",{className:"flex-1",children:$===e.line_item_id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>be(e),onKeyDown:t=>{"Enter"===t.key&&be(e)}}):(0,Cn.jsx)("span",{onClick:()=>fe(e),className:"cursor-pointer hover:underline font-normal",children:e.line_item_name})}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),pe(e.line_item_id)},className:"ml-2 w-5 h-5 bg-white border border-gray-300 rounded flex items-center justify-center hover:bg-red-50",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-xs font-bold leading-none text-red-500",children:"-"})})]}),"months"===L?Array(12).fill(0).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:e["month_".concat(r+1)]||0,onChange:t=>de(e.line_item_id,r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)):ce(Array(12).fill(0).map((t,r)=>e["month_".concat(r+1)]||0)).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:t||0,onChange:t=>de(e.line_item_id,3*r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-red-900 border-l border-gray-300 font-sans",children:Array.from({length:12},(t,r)=>e["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0).toLocaleString()})]},e.line_item_id))]},e.name)}),(0,Cn.jsxs)("tr",{className:"bg-blue-100",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 text-blue-900 font-sans font-bold",children:"Profit / Loss"}),"months"===L?v.profitLoss.map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans font-bold ".concat(e>=0?"text-blue-800":"text-red-800"),children:e.toLocaleString()},t)):ce(v.profitLoss).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans font-bold ".concat(e>=0?"text-blue-800":"text-red-800"),children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-blue-900 border-l border-gray-300 font-sans font-bold",children:(0,Cn.jsx)("span",{className:v.profitLoss.reduce((e,t)=>e+t,0)>=0?"text-blue-800":"text-red-800",children:v.profitLoss.reduce((e,t)=>e+t,0).toLocaleString()})})]})]})]})})]}):(0,Cn.jsxs)(Cn.Fragment,{children:[(0,Cn.jsxs)("div",{className:"mb-4 flex items-center gap-2 w-full",children:[(0,Cn.jsx)("button",{className:"px-4 py-2 rounded-md bg-purple-600 text-white text-sm font-semibold hover:bg-purple-700",onClick:()=>{console.log("Add Item Clicked"),he(null)},children:"+ Add Item"}),(0,Cn.jsx)("button",{className:"px-4 py-2 rounded-md bg-gray-500 text-white text-sm font-semibold hover:bg-gray-700",onClick:()=>re(!0),children:"Quick Editor"}),(0,Cn.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,Cn.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,Cn.jsx)("input",{type:"checkbox",checked:d,onChange:e=>{console.log("Comparison checkbox changed:",e.target.checked),console.log("Current comparisonData:",u.length,"items"),console.log("Current comparisonTotals:",j),console.log("Sample comparisonData item:",u[0]),h(e.target.checked)},className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),"Vs Budget"]}),(0,Cn.jsx)("select",{value:o,onChange:e=>m(Number(e.target.value)),className:"px-4 py-2 rounded-md border border-gray-300 focus:ring-purple-500 focus:border-purple-500 text-sm w-32",children:oe.map(e=>(0,Cn.jsx)("option",{value:e,children:e},e))}),(0,Cn.jsxs)("div",{className:"flex items-center bg-purple-100 rounded-md p-0.5 shadow-inner",children:[(0,Cn.jsx)("button",{onClick:()=>R("months"),className:"px-3 py-1.5 text-sm font-semibold rounded-md transition-all duration-150 focus:outline-none\n                      ".concat("months"===L?"bg-white text-purple-700 shadow z-10":"bg-transparent text-purple-600"),children:"Months"}),(0,Cn.jsx)("button",{onClick:()=>R("quarters"),className:"px-3 py-1.5 text-sm font-semibold rounded-md transition-all duration-150 focus:outline-none\n                      ".concat("quarters"===L?"bg-white text-purple-700 shadow z-10":"bg-transparent text-purple-600"),children:"Quarters"})]})]})]}),(0,Cn.jsx)("div",{className:"overflow-x-auto",children:(0,Cn.jsxs)("table",{className:"min-w-full text-sm border border-gray-200 rounded-lg",children:[(0,Cn.jsx)("thead",{children:(0,Cn.jsxs)("tr",{className:"bg-gray-50",children:[(0,Cn.jsx)("th",{className:"px-3 py-2 text-left font-medium text-gray-500 w-40",children:"Line"}),"months"===L?kN.map(e=>(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:e},e)):["Q1","Q2","Q3","Q4"].map(e=>(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:e},e)),(0,Cn.jsx)("th",{className:"px-3 py-2 text-center font-medium text-gray-500 border-l border-gray-300",children:"Full Year"})]})}),(0,Cn.jsxs)("tbody",{children:[(0,Cn.jsxs)("tr",{className:"bg-green-50 group cursor-pointer",onClick:()=>P(e=>!e),children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-bold text-green-800 flex items-center gap-2 border-r border-gray-300",children:[(0,Cn.jsx)("span",{className:"inline-block w-4",children:I?"\u25bc":"\u25b6"})," Revenue",(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),q("category"),X("revenue"),W(null),E(!0),Z("")},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]}),"months"===L?v.revenue.map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-sans font-bold",children:e.toLocaleString()},t)):ce(v.revenue).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-800 font-sans font-bold",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-green-900 border-l border-gray-300 font-sans font-bold",children:v.revenue.reduce((e,t)=>e+t,0).toLocaleString()})]}),I&&s.filter(e=>"revenue"===e.type).map(e=>{const r=e.name.trim().toLowerCase(),n=y[r]||{items:[]};return(0,Cn.jsxs)(t.Fragment,{children:[(0,Cn.jsxs)("tr",{className:"bg-green-25 hover:bg-green-100 border-b border-green-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 whitespace-nowrap border-r border-gray-300 relative",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Cn.jsxs)("div",{className:"flex items-center pl-6",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),me(e.name)},className:"mr-2 text-gray-500 hover:text-gray-800 focus:outline-none",children:A.has(e.name)?"\u25bc":"\u25b6"}),V===e.id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>ge(e),onKeyDown:t=>{"Enter"===t.key&&ge(e)}}):(0,Cn.jsx)("span",{onClick:()=>xe(e),className:"cursor-pointer hover:underline font-normal",children:e.name})]}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation();he(e?{category_id:e.id}:null)},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]})}),"months"===L?Array(12).fill(0).map((e,t)=>{const r=n.items.reduce((e,r)=>e+(r["month_".concat(t+1)]||0),0);return(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 font-sans",children:r.toLocaleString()},t)}):ce(Array(12).fill(0).map((e,t)=>n.items.reduce((e,r)=>e+(r["month_".concat(t+1)]||0),0))).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-green-900 font-sans",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-green-900 border-l border-gray-300 font-sans",children:n.items.reduce((e,t)=>e+Array.from({length:12},(e,r)=>t["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0),0).toLocaleString()})]}),A.has(e.name)&&0===n.items.length&&(0,Cn.jsx)("tr",{className:"bg-white border-b border-gray-200",children:(0,Cn.jsx)("td",{className:"px-3 py-2 text-gray-400 pl-16 border-r border-gray-300",colSpan:"months"===L?14:6,children:"No line items"})}),A.has(e.name)&&n.items.map(e=>(0,Cn.jsxs)("tr",{className:"bg-white border-b border-gray-200",children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-medium text-gray-700 whitespace-nowrap pl-16 border-r border-gray-300 flex items-center justify-between",children:[(0,Cn.jsx)("div",{className:"flex-1",children:$===e.line_item_id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>be(e),onKeyDown:t=>{"Enter"===t.key&&be(e)}}):(0,Cn.jsx)("span",{onClick:()=>fe(e),className:"cursor-pointer hover:underline font-normal",children:e.line_item_name})}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),pe(e.line_item_id)},className:"ml-2 w-5 h-5 bg-white border border-gray-300 rounded flex items-center justify-center hover:bg-red-50",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-xs font-bold leading-none text-red-500",children:"-"})})]}),"months"===L?Array(12).fill(0).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:e["month_".concat(r+1)]||0,onChange:t=>de(e.line_item_id,r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)):ce(Array(12).fill(0).map((t,r)=>e["month_".concat(r+1)]||0)).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:t||0,onChange:t=>de(e.line_item_id,3*r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-green-900 border-l border-gray-300 font-sans",children:Array.from({length:12},(t,r)=>e["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0).toLocaleString()})]},e.line_item_id))]},e.name)}),(0,Cn.jsxs)("tr",{className:"bg-red-50 group cursor-pointer",onClick:()=>D(e=>!e),children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-bold text-red-800 flex items-center gap-2 border-r border-gray-300",children:[(0,Cn.jsx)("span",{className:"inline-block w-4",children:T?"\u25bc":"\u25b6"})," Costs",(0,Cn.jsx)("button",{onClick:e=>{e.stopPropagation(),q("category"),X("expense"),W(null),E(!0),Z("")},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]}),"months"===L?v.expense.map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-sans font-bold",children:e.toLocaleString()},t)):ce(v.expense).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-800 font-sans font-bold",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-red-900 border-l border-gray-300 font-sans font-bold",children:v.expense.reduce((e,t)=>e+t,0).toLocaleString()})]}),T&&s.filter(e=>"expense"===e.type).map(e=>{const r=e.name.trim().toLowerCase(),n=y[r]||{items:[]};return(0,Cn.jsxs)(t.Fragment,{children:[(0,Cn.jsxs)("tr",{className:"bg-red-25 hover:bg-red-100 border-b border-red-50",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 whitespace-nowrap border-r border-gray-300 relative",children:(0,Cn.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,Cn.jsxs)("div",{className:"flex items-center pl-6",children:[(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),me(e.name)},className:"mr-2 text-gray-500 hover:text-gray-800 focus:outline-none",children:A.has(e.name)?"\u25bc":"\u25b6"}),V===e.id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>ge(e),onKeyDown:t=>{"Enter"===t.key&&ge(e)}}):(0,Cn.jsx)("span",{onClick:()=>xe(e),className:"cursor-pointer hover:underline font-normal",children:e.name})]}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation();he(e?{category_id:e.id}:null)},className:"ml-auto w-6 h-6 flex items-center justify-center text-purple-600 hover:text-purple-800 hover:bg-white rounded",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-base font-bold leading-none text-purple-600",children:"+"})})]})}),"months"===L?Array(12).fill(0).map((e,t)=>{const r=n.items.reduce((e,r)=>e+Math.abs(r["month_".concat(t+1)]||0),0);return(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 font-sans",children:r.toLocaleString()},t)}):ce(Array(12).fill(0).map((e,t)=>n.items.reduce((e,r)=>e+Math.abs(r["month_".concat(t+1)]||0),0))).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center text-red-900 font-sans",children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-red-900 border-l border-gray-300 font-sans",children:n.items.reduce((e,t)=>e+Array.from({length:12},(e,r)=>t["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0),0).toLocaleString()})]}),A.has(e.name)&&0===n.items.length&&(0,Cn.jsx)("tr",{className:"bg-white border-b border-gray-200",children:(0,Cn.jsx)("td",{className:"px-3 py-2 text-gray-400 pl-16 border-r border-gray-300",colSpan:"months"===L?14:6,children:"No line items"})}),A.has(e.name)&&n.items.map(e=>(0,Cn.jsxs)("tr",{className:"bg-white border-b border-gray-200",children:[(0,Cn.jsxs)("td",{className:"px-3 py-2 font-medium text-gray-700 whitespace-nowrap pl-16 border-r border-gray-300 flex items-center justify-between",children:[(0,Cn.jsx)("div",{className:"flex-1",children:$===e.line_item_id?(0,Cn.jsx)("input",{className:"border px-1 py-0.5 rounded text-sm font-sans",value:Y,autoFocus:!0,onChange:e=>Z(e.target.value),onBlur:()=>be(e),onKeyDown:t=>{"Enter"===t.key&&be(e)}}):(0,Cn.jsx)("span",{onClick:()=>fe(e),className:"cursor-pointer hover:underline font-normal",children:e.line_item_name})}),(0,Cn.jsx)("button",{onClick:t=>{t.stopPropagation(),pe(e.line_item_id)},className:"ml-2 w-5 h-5 bg-white border border-gray-300 rounded flex items-center justify-center hover:bg-red-50",tabIndex:-1,children:(0,Cn.jsx)("span",{className:"text-xs font-bold leading-none text-red-500",children:"-"})})]}),"months"===L?Array(12).fill(0).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:e["month_".concat(r+1)]||0,onChange:t=>de(e.line_item_id,r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)):ce(Array(12).fill(0).map((t,r)=>e["month_".concat(r+1)]||0)).map((t,r)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans",children:(0,Cn.jsx)("input",{type:"number",value:t||0,onChange:t=>de(e.line_item_id,3*r+1,parseFloat(t.target.value)||0),className:"w-20 rounded border-gray-200 text-right px-2 py-1 focus:ring-purple-500 focus:border-purple-500 text-sm"})},r)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-red-900 border-l border-gray-300 font-sans",children:Array.from({length:12},(t,r)=>e["month_".concat(r+1)]||0).reduce((e,t)=>e+t,0).toLocaleString()})]},e.line_item_id))]},e.name)}),(0,Cn.jsxs)("tr",{className:"bg-blue-100",children:[(0,Cn.jsx)("td",{className:"px-3 py-2 text-blue-900 font-sans font-bold",children:"Profit / Loss"}),"months"===L?v.profitLoss.map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans font-bold ".concat(e>=0?"text-blue-800":"text-red-800"),children:e.toLocaleString()},t)):ce(v.profitLoss).map((e,t)=>(0,Cn.jsx)("td",{className:"px-2 py-1 text-center font-sans font-bold ".concat(e>=0?"text-blue-800":"text-red-800"),children:e.toLocaleString()},t)),(0,Cn.jsx)("td",{className:"px-3 py-2 text-center text-blue-900 border-l border-gray-300 font-sans font-bold",children:(0,Cn.jsx)("span",{className:v.profitLoss.reduce((e,t)=>e+t,0)>=0?"text-blue-800":"text-red-800",children:v.profitLoss.reduce((e,t)=>e+t,0).toLocaleString()})})]})]})]})})]})]}),(0,Cn.jsx)(yN,{isOpen:C,onClose:()=>S(!1),onAdd:async e=>{await f(e)},categories:s,onCreateCategory:ue,type:"category"===U?"category":"lineItem",parent:H,typeOverride:J}),(0,Cn.jsx)(NN,{isOpen:te,onClose:()=>re(!1),categories:s,loadBudgetData:k}),(0,Cn.jsx)(CN,{isOpen:ne,onClose:()=>se(!1)})]}))},_N=e=>{let{onSwitchToSignUp:r}=e;const[n,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[l,o]=(0,t.useState)(!1),[c,d]=(0,t.useState)(""),{signIn:u,user:m}=_n(),p=ee();(0,t.useEffect)(()=>{m&&p("/dashboard")},[m,p]);return(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Cn.jsx)("div",{className:"flex justify-center mb-4",children:(0,Cn.jsx)("img",{src:uw,alt:"LayrBase Logo",className:"h-12 w-auto"})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to your account"}),(0,Cn.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,Cn.jsx)("button",{onClick:r,className:"font-medium text-blue-600 hover:text-blue-500",children:"create a new account"})]})]}),(0,Cn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{e.preventDefault(),o(!0),d(""),console.log("Sign in submitted:",{email:n,password:a?"***":""});try{const{error:e}=await u({email:n,password:a});e?d(e.message):p("/dashboard")}catch(t){d("An unexpected error occurred")}finally{o(!1)}},children:[c&&(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsx)("div",{className:"ml-3",children:(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:c})})})}),(0,Cn.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),(0,Cn.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:e=>s(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,Cn.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:e=>i(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),(0,Cn.jsx)("div",{children:(0,Cn.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Signing in...":"Sign in"})})]})]})})},EN=e=>{let{onSwitchToLogin:r}=e;const[n,s]=(0,t.useState)(""),[a,i]=(0,t.useState)(""),[l,o]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),[u,m]=(0,t.useState)(""),[p,h]=(0,t.useState)(!1),[x,f]=(0,t.useState)(""),[g,b]=(0,t.useState)(!1),{signUp:y}=_n(),v=ee();return g?(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsx)("div",{className:"max-w-md w-full space-y-8",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Check your email"}),(0,Cn.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"We've sent you a confirmation link to verify your email address."}),(0,Cn.jsx)("button",{onClick:r,className:"mt-4 font-medium text-blue-600 hover:text-blue-500",children:"Back to sign in"})]})})}):(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Cn.jsx)("div",{className:"flex justify-center mb-4",children:(0,Cn.jsx)("img",{src:uw,alt:"LayrBase Logo",className:"h-12 w-auto"})}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),(0,Cn.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,Cn.jsx)("button",{onClick:r,className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your existing account"})]})]}),(0,Cn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),h(!0),f(""),c!==u)return f("Passwords do not match"),void h(!1);if(c.length<6)return f("Password must be at least 6 characters long"),void h(!1);try{const{error:e}=await y({email:l,password:c,firstName:n,lastName:a});e?f(e.message):(b(!0),v("/dashboard"))}catch(t){f("An unexpected error occurred")}finally{h(!1)}},children:[x&&(0,Cn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Cn.jsx)("div",{className:"flex",children:(0,Cn.jsx)("div",{className:"ml-3",children:(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:x})})})}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700",children:"First name"}),(0,Cn.jsx)("input",{id:"first-name",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:n,onChange:e=>s(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"First name"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700",children:"Last name"}),(0,Cn.jsx)("input",{id:"last-name",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:a,onChange:e=>i(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Last name"})]})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email address"}),(0,Cn.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:l,onChange:e=>o(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Email address"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,Cn.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:c,onChange:e=>d(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Password"})]}),(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm password"}),(0,Cn.jsx)("input",{id:"confirm-password",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:u,onChange:e=>m(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Confirm password"})]})]}),(0,Cn.jsx)("div",{children:(0,Cn.jsx)("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Creating account...":"Create account"})})]})]})})},IN=()=>{const[e,r]=(0,t.useState)(!0);return(0,Cn.jsx)("div",{children:e?(0,Cn.jsx)(_N,{onSwitchToSignUp:()=>r(!1)}):(0,Cn.jsx)(EN,{onSwitchToLogin:()=>r(!0)})})},PN=e=>{let{error:t}=e;const{signOut:r}=_n();return(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full space-y-8 text-center",children:[(0,Cn.jsxs)("div",{children:[(0,Cn.jsx)(qa,{className:"mx-auto h-12 w-12 text-red-400"}),(0,Cn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Authentication Error"}),(0,Cn.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"We had trouble loading your session."})]}),(0,Cn.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 text-left",children:[(0,Cn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error Details:"}),(0,Cn.jsx)("pre",{className:"mt-2 text-xs text-red-700 whitespace-pre-wrap",children:(null===t||void 0===t?void 0:t.message)||"An unknown error occurred."})]}),(0,Cn.jsxs)("div",{className:"flex space-x-3",children:[(0,Cn.jsx)("button",{onClick:async()=>{await r(),window.location.reload()},className:"flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign Out"}),(0,Cn.jsx)("button",{onClick:()=>{window.location.reload()},className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Retry"})]})]})})},TN=e=>{let{onOrganizationCreated:r}=e;const[n,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),l=e=>{s(!1),r(e)},o=e=>{i(!1),r(e)};return n?(0,Cn.jsx)(mw,{onSuccess:l,onCancel:()=>s(!1)}):a?(0,Cn.jsx)(pw,{onSuccess:o,onCancel:()=>i(!1)}):(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Cn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Welcome to Layrbase"}),(0,Cn.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"You need to create or join an organization to get started."})]}),(0,Cn.jsxs)("div",{className:"space-y-4",children:[(0,Cn.jsx)("button",{onClick:()=>s(!0),className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Create Organization"}),(0,Cn.jsx)("button",{onClick:()=>i(!0),className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Join Organization"})]}),(0,Cn.jsx)("div",{className:"text-center",children:(0,Cn.jsx)("p",{className:"text-xs text-gray-500",children:"Organizations help you collaborate with your team and manage your cap table data securely."})})]})})},DN=()=>{const e=Q(),{user:t,loading:r,currentOrganization:n,authError:s}=_n(),a=e.pathname.split("/").filter(Boolean),i=a[0]||"dashboard",l=a[1]||null;return r?(0,Cn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Cn.jsxs)("div",{className:"text-center",children:[(0,Cn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Cn.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):s?(0,Cn.jsx)(PN,{error:s}):t?n?(0,Cn.jsx)(gw,{tabs:[{id:"dashboard",name:"Dashboard",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},{id:"company",name:"Company Setup",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{id:"finance",name:"Finance",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},{id:"legal",name:"Legal & Compliance",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"captable",name:"Cap Table",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},{id:"marketing",name:"Marketing",icon:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"},{id:"sales",name:"Sales CRM",icon:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},{id:"hr",name:"HR",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}],activeTab:i,activeSubTab:l,showSideNav:"marketplace"!==i,title:"sales"===i&&"customers"===l?"Companies & Contacts":void 0,subtitle:"sales"===i&&"customers"===l?"Manage your companies and contacts in one place.":void 0,children:(0,Cn.jsx)(ge,{})}):(0,Cn.jsx)(TN,{onOrganizationCreated:()=>{}}):(0,Cn.jsx)(IN,{})};const AN=function(){return(0,Cn.jsxs)(ve,{children:[(0,Cn.jsx)(be,{path:"/join/:token",element:(0,Cn.jsx)(bN,{})}),(0,Cn.jsxs)(be,{element:(0,Cn.jsx)(DN,{}),children:[(0,Cn.jsx)(be,{path:"dashboard",element:(0,Cn.jsx)(Ss,{})}),(0,Cn.jsx)(be,{path:"company/foundation",element:(0,Cn.jsx)(fa,{activeSubTab:"foundation"})}),(0,Cn.jsx)(be,{path:"company/details",element:(0,Cn.jsx)(fa,{activeSubTab:"details"})}),(0,Cn.jsx)(be,{path:"finance/overview",element:(0,Cn.jsx)(wi,{activeSubTab:"overview"})}),(0,Cn.jsx)(be,{path:"finance/budget",element:(0,Cn.jsx)(ji,{})}),(0,Cn.jsx)(be,{path:"finance/cashflow",element:(0,Cn.jsx)(wi,{activeSubTab:"cashflow"})}),(0,Cn.jsx)(be,{path:"finance/budget/table",element:(0,Cn.jsx)(SN,{})}),(0,Cn.jsx)(be,{path:"finance/invoicing",element:(0,Cn.jsx)(wi,{activeSubTab:"invoicing"})}),(0,Cn.jsx)(be,{path:"finance/management",element:(0,Cn.jsx)(wi,{activeSubTab:"management"})}),(0,Cn.jsx)(be,{path:"legal/contracts",element:(0,Cn.jsx)(ol,{activeSubTab:"contracts"})}),(0,Cn.jsx)(be,{path:"legal/templates",element:(0,Cn.jsx)(ol,{activeSubTab:"templates"})}),(0,Cn.jsx)(be,{path:"legal/compliance",element:(0,Cn.jsx)(ol,{activeSubTab:"compliance"})}),(0,Cn.jsx)(be,{path:"legal/risk",element:(0,Cn.jsx)(ol,{activeSubTab:"risk"})}),(0,Cn.jsx)(be,{path:"legal/requirements",element:(0,Cn.jsx)(ol,{activeSubTab:"requirements"})}),(0,Cn.jsx)(be,{path:"captable/captable",element:(0,Cn.jsx)(du,{activeSubTab:"captable"})}),(0,Cn.jsx)(be,{path:"captable/rounds",element:(0,Cn.jsx)(du,{activeSubTab:"rounds"})}),(0,Cn.jsx)(be,{path:"captable/exits",element:(0,Cn.jsx)(du,{activeSubTab:"exits"})}),(0,Cn.jsx)(be,{path:"captable/investment",element:(0,Cn.jsx)(du,{activeSubTab:"investment"})}),(0,Cn.jsx)(be,{path:"marketing/events",element:(0,Cn.jsx)(vu,{activeSubTab:"events"})}),(0,Cn.jsx)(be,{path:"marketing/brand",element:(0,Cn.jsx)(vu,{activeSubTab:"brand"})}),(0,Cn.jsx)(be,{path:"marketing/sales",element:(0,Cn.jsx)(vu,{activeSubTab:"sales"})}),(0,Cn.jsx)(be,{path:"sales/crm",element:(0,Cn.jsx)(bw,{activeSubTab:"crm"})}),(0,Cn.jsx)(be,{path:"sales/contacts",element:(0,Cn.jsx)(bw,{activeSubTab:"contacts"})}),(0,Cn.jsx)(be,{path:"sales/pipeline",element:(0,Cn.jsx)(bw,{activeSubTab:"pipeline"})}),(0,Cn.jsx)(be,{path:"hr/employees",element:(0,Cn.jsx)(Aw,{activeSubTab:"employees"})}),(0,Cn.jsx)(be,{path:"hr/time",element:(0,Cn.jsx)(Aw,{activeSubTab:"time"})}),(0,Cn.jsx)(be,{path:"hr/policies",element:(0,Cn.jsx)(Aw,{activeSubTab:"policies"})}),(0,Cn.jsx)(be,{path:"marketplace",element:(0,Cn.jsx)(Xw,{})}),(0,Cn.jsx)(be,{path:"myorgs",element:(0,Cn.jsx)(hN,{})}),(0,Cn.jsx)(be,{path:"company",element:(0,Cn.jsx)(fe,{to:"company/foundation",replace:!0})}),(0,Cn.jsx)(be,{path:"finance",element:(0,Cn.jsx)(fe,{to:"finance/overview",replace:!0})}),(0,Cn.jsx)(be,{path:"legal",element:(0,Cn.jsx)(fe,{to:"legal/contracts",replace:!0})}),(0,Cn.jsx)(be,{path:"captable",element:(0,Cn.jsx)(fe,{to:"captable/captable",replace:!0})}),(0,Cn.jsx)(be,{path:"marketing",element:(0,Cn.jsx)(fe,{to:"marketing/events",replace:!0})}),(0,Cn.jsx)(be,{path:"sales",element:(0,Cn.jsx)(fe,{to:"sales/crm",replace:!0})}),(0,Cn.jsx)(be,{path:"hr",element:(0,Cn.jsx)(fe,{to:"hr/employees",replace:!0})}),(0,Cn.jsx)(be,{path:"*",element:(0,Cn.jsx)(fe,{to:"dashboard",replace:!0})})]})]})};s.createRoot(document.getElementById("root")).render((0,Cn.jsx)(t.StrictMode,{children:(0,Cn.jsx)(In,{children:(0,Cn.jsx)(ks,{children:(0,Cn.jsx)(Se,{children:(0,Cn.jsx)(AN,{})})})})}))})()})();
//# sourceMappingURL=main.c9c2e89a.js.map